<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Massiv.Array.Stencil</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">massiv-1.0.4.0: Massiv (&#1052;&#1072;&#1089;&#1089;&#1080;&#1074;) is an Array Library.</span><ul class="links" id="page-menu"><li><a href="src/Data.Massiv.Array.Stencil.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Alexey Kuleshevich 2018-2022</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Alexey Kuleshevich &lt;lehins@yandex.ru&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Massiv.Array.Stencil</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Stencil</a><ul><li><a href="#g:2">Padding</a></li><li><a href="#g:3">Application</a></li><li><a href="#g:4">Common stencils</a></li><li><a href="#g:5">Profunctor</a></li></ul></li><li><a href="#g:6">Convolution</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Stencil">Stencil</a> ix e a</li><li class="src short"><a href="#v:makeStencil">makeStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; ix -&gt; ((ix -&gt; e) -&gt; a) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a</li><li class="src short"><a href="#v:getStencilSize">getStencilSize</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix</li><li class="src short"><a href="#v:getStencilCenter">getStencilCenter</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; ix</li><li class="src short"><span class="keyword">data</span> <a href="#t:Padding">Padding</a> ix e = <a href="#v:Padding">Padding</a> {<ul class="subs"><li><a href="#v:paddingFromOrigin">paddingFromOrigin</a> :: !(<a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix)</li><li><a href="#v:paddingFromBottom">paddingFromBottom</a> :: !(<a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix)</li><li><a href="#v:paddingWithElement">paddingWithElement</a> :: !(<a href="Data-Massiv-Core-Index.html#t:Border" title="Data.Massiv.Core.Index">Border</a> e)</li></ul>}</li><li class="src short"><a href="#v:noPadding">noPadding</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e</li><li class="src short"><a href="#v:samePadding">samePadding</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Core-Index.html#t:Border" title="Data.Massiv.Core.Index">Border</a> e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e</li><li class="src short"><a href="#v:mapStencil">mapStencil</a> :: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e) =&gt; <a href="Data-Massiv-Core-Index.html#t:Border" title="Data.Massiv.Core.Index">Border</a> e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e -&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> <a href="Data-Massiv-Array-Delayed.html#t:DW" title="Data.Massiv.Array.Delayed">DW</a> ix a</li><li class="src short"><a href="#v:applyStencil">applyStencil</a> :: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e) =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e -&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> <a href="Data-Massiv-Array-Delayed.html#t:DW" title="Data.Massiv.Array.Delayed">DW</a> ix a</li><li class="src short"><a href="#v:idStencil">idStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:sumStencil">sumStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:productStencil">productStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:avgStencil">avgStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Fractional" title="Prelude">Fractional</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:maxStencil">maxStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Bounded" title="Prelude">Bounded</a> e, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:minStencil">minStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Bounded" title="Prelude">Bounded</a> e, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:foldlStencil">foldlStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a</li><li class="src short"><a href="#v:foldrStencil">foldrStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; (e -&gt; a -&gt; a) -&gt; a -&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a</li><li class="src short"><a href="#v:foldStencil">foldStencil</a> :: (<a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:dimapStencil">dimapStencil</a> :: (c -&gt; d) -&gt; (a -&gt; b) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix d a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix c b</li><li class="src short"><a href="#v:lmapStencil">lmapStencil</a> :: (c -&gt; d) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix d a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix c a</li><li class="src short"><a href="#v:rmapStencil">rmapStencil</a> :: (a -&gt; b) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b</li><li class="src short"><a href="#v:makeConvolutionStencil">makeConvolutionStencil</a> :: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; ix -&gt; ((ix -&gt; e -&gt; e -&gt; e) -&gt; e -&gt; e) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:makeConvolutionStencilFromKernel">makeConvolutionStencilFromKernel</a> :: (<a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:makeCorrelationStencil">makeCorrelationStencil</a> :: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; ix -&gt; ((ix -&gt; e -&gt; e -&gt; e) -&gt; e -&gt; e) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li><li class="src short"><a href="#v:makeCorrelationStencilFromKernel">makeCorrelationStencilFromKernel</a> :: (<a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Stencil</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Stencil" class="def">Stencil</a> ix e a <a href="src/Data.Massiv.Array.Stencil.Internal.html#Stencil" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></p><div class="doc"><p>Stencil is abstract description of how to handle elements in the neighborhood of
 every array cell in order to compute a value for the cells in the new array. Use
 <code><a href="Data-Massiv-Array.html#v:makeStencil" title="Data.Massiv.Array">makeStencil</a></code> and <code><a href="Data-Massiv-Array.html#v:makeConvolutionStencil" title="Data.Massiv.Array">makeConvolutionStencil</a></code> in order
 to create a stencil.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Stencil">Instances</h4><details id="i:Stencil" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stencil:Applicative:1"></span> <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e)</span> <a href="src/Data.Massiv.Array.Stencil.Internal.html#line-93" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stencil:Applicative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil-Internal.html">Data.Massiv.Array.Stencil.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e (a -&gt; b) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stencil:Functor:2"></span> <a href="../base-4.18.2.1/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e)</span> <a href="src/Data.Massiv.Array.Stencil.Internal.html#line-39" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stencil:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil-Internal.html">Data.Massiv.Array.Stencil.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stencil:Floating:3"></span> (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="../base-4.18.2.1/Numeric.html#t:Floating" title="Numeric">Floating</a> (<a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a)</span> <a href="src/Data.Massiv.Array.Stencil.Internal.html#line-138" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stencil:Floating:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil-Internal.html">Data.Massiv.Array.Stencil.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pi">pi</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:pi" class="selflink">#</a></p><p class="src"><a href="#v:exp">exp</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:exp" class="selflink">#</a></p><p class="src"><a href="#v:log">log</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:log" class="selflink">#</a></p><p class="src"><a href="#v:sqrt">sqrt</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:sqrt" class="selflink">#</a></p><p class="src"><a href="#v:-42--42-">(**)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-42--42-" class="selflink">#</a></p><p class="src"><a href="#v:logBase">logBase</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:logBase" class="selflink">#</a></p><p class="src"><a href="#v:sin">sin</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:sin" class="selflink">#</a></p><p class="src"><a href="#v:cos">cos</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:cos" class="selflink">#</a></p><p class="src"><a href="#v:tan">tan</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:tan" class="selflink">#</a></p><p class="src"><a href="#v:asin">asin</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:asin" class="selflink">#</a></p><p class="src"><a href="#v:acos">acos</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:acos" class="selflink">#</a></p><p class="src"><a href="#v:atan">atan</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:atan" class="selflink">#</a></p><p class="src"><a href="#v:sinh">sinh</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:sinh" class="selflink">#</a></p><p class="src"><a href="#v:cosh">cosh</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:cosh" class="selflink">#</a></p><p class="src"><a href="#v:tanh">tanh</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:tanh" class="selflink">#</a></p><p class="src"><a href="#v:asinh">asinh</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:asinh" class="selflink">#</a></p><p class="src"><a href="#v:acosh">acosh</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:acosh" class="selflink">#</a></p><p class="src"><a href="#v:atanh">atanh</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:atanh" class="selflink">#</a></p><p class="src"><a href="#v:log1p">log1p</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:log1p" class="selflink">#</a></p><p class="src"><a href="#v:expm1">expm1</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:expm1" class="selflink">#</a></p><p class="src"><a href="#v:log1pexp">log1pexp</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:log1pexp" class="selflink">#</a></p><p class="src"><a href="#v:log1mexp">log1mexp</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:log1mexp" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stencil:Num:4"></span> (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> (<a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a)</span> <a href="src/Data.Massiv.Array.Stencil.Internal.html#line-114" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stencil:Num:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil-Internal.html">Data.Massiv.Array.Stencil.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-43-">(+)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-43-" class="selflink">#</a></p><p class="src"><a href="#v:-45-">(-)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-45-" class="selflink">#</a></p><p class="src"><a href="#v:-42-">(*)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-42-" class="selflink">#</a></p><p class="src"><a href="#v:negate">negate</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:negate" class="selflink">#</a></p><p class="src"><a href="#v:abs">abs</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:abs" class="selflink">#</a></p><p class="src"><a href="#v:signum">signum</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:signum" class="selflink">#</a></p><p class="src"><a href="#v:fromInteger">fromInteger</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:fromInteger" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stencil:Fractional:5"></span> (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="../base-4.18.2.1/Prelude.html#t:Fractional" title="Prelude">Fractional</a> (<a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a)</span> <a href="src/Data.Massiv.Array.Stencil.Internal.html#line-130" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stencil:Fractional:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil-Internal.html">Data.Massiv.Array.Stencil.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-47-">(/)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:-47-" class="selflink">#</a></p><p class="src"><a href="#v:recip">recip</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:recip" class="selflink">#</a></p><p class="src"><a href="#v:fromRational">fromRational</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="#v:fromRational" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stencil:NFData:6"></span> <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="../deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> (<a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a)</span> <a href="src/Data.Massiv.Array.Stencil.Internal.html#line-36" class="link">Source</a> <a href="#t:Stencil" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stencil:NFData:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil-Internal.html">Data.Massiv.Array.Stencil.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; () <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:makeStencil" class="def">makeStencil</a> <a href="src/Data.Massiv.Array.Stencil.html#makeStencil" class="link">Source</a> <a href="#v:makeStencil" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix</td><td class="doc"><p>Size of the stencil</p></td></tr><tr><td class="src">-&gt; ix</td><td class="doc"><p>Center of the stencil</p></td></tr><tr><td class="src">-&gt; ((ix -&gt; e) -&gt; a)</td><td class="doc"><p>Stencil function that receives a &quot;get&quot; function as it's argument that can
 retrieve values of cells in the source array with respect to the center of
 the stencil. Stencil function must return a value that will be assigned to
 the cell in the result array. Offset supplied to the &quot;get&quot; function
 cannot go outside the boundaries of the stencil, otherwise an error will be
 raised during stencil creation.</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Construct a stencil from a function, which describes how to calculate the
 value at a point while having access to neighboring elements with a function
 that accepts idices relative to the center of stencil. Trying to index
 outside the stencil box will result in a runtime error upon stencil
 creation.</p><p><em>Note</em> - Once correctness of stencil is verified then switching to <code><a href="Data-Massiv-Array-Unsafe.html#v:makeUnsafeStencil" title="Data.Massiv.Array.Unsafe">makeUnsafeStencil</a></code>
 is recommended in order to get the most performance out of the <code><a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a></code></p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:makeStencil0">Example</h4><details id="ch:makeStencil0"><summary class="hide-when-js-enabled">Expand</summary><p>Below is an example of creating a <code><a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a></code>, which, when mapped over a
 2-dimensional array, will compute an average of all elements in a 3x3 square
 for each element in that array.</p><p><em>Note</em> - Make sure to add an <code>INLINE</code> pragma, otherwise performance will be terrible.</p><pre>average3x3Stencil :: Fractional a =&gt; Stencil Ix2 a a
average3x3Stencil = makeStencil (Sz (3 :. 3)) (1 :. 1) $  get -&gt;
  (  get (-1 :. -1) + get (-1 :. 0) + get (-1 :. 1) +
     get ( 0 :. -1) + get ( 0 :. 0) + get ( 0 :. 1) +
     get ( 1 :. -1) + get ( 1 :. 0) + get ( 1 :. 1)   ) / 9
{-# INLINE average3x3Stencil #-}
</pre></details><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:getStencilSize" class="def">getStencilSize</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix <a href="src/Data.Massiv.Array.Stencil.html#getStencilSize" class="link">Source</a> <a href="#v:getStencilSize" class="selflink">#</a></p><div class="doc"><p>Get the size of the stencil</p><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:getStencilCenter" class="def">getStencilCenter</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; ix <a href="src/Data.Massiv.Array.Stencil.html#getStencilCenter" class="link">Source</a> <a href="#v:getStencilCenter" class="selflink">#</a></p><div class="doc"><p>Get the index of the stencil's center</p><p><em>Since: 0.4.3</em></p></div></div><a href="#g:2" id="g:2"><h2>Padding</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Padding" class="def">Padding</a> ix e <a href="src/Data.Massiv.Array.Stencil.html#Padding" class="link">Source</a> <a href="#t:Padding" class="selflink">#</a></p><div class="doc"><p>Padding of the source array before stencil application.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:Padding0">Examples</h4><details id="ch:Padding0"><summary class="hide-when-js-enabled">Expand</summary><p>In order to see the affect of padding we can simply apply an identity stencil to an
 array:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = computeAs P $ resize' (Sz2 2 3) (Ix1 1 ... 6)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil noPadding idStencil a
</code></strong>Array DW Seq (Sz (2 :. 3))
  [ [ 1, 2, 3 ]
  , [ 4, 5, 6 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding (Sz2 1 2) (Sz2 3 4) (Fill 0)) idStencil a
</code></strong>Array DW Seq (Sz (6 :. 9))
  [ [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ]
  , [ 0, 0, 1, 2, 3, 0, 0, 0, 0 ]
  , [ 0, 0, 4, 5, 6, 0, 0, 0, 0 ]
  , [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ]
  , [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ]
  , [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ]
  ]
</pre><p>It is also a nice technique to see the border resolution strategy in action:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding (Sz2 2 3) (Sz2 2 3) Wrap) idStencil a
</code></strong>Array DW Seq (Sz (6 :. 9))
  [ [ 1, 2, 3, 1, 2, 3, 1, 2, 3 ]
  , [ 4, 5, 6, 4, 5, 6, 4, 5, 6 ]
  , [ 1, 2, 3, 1, 2, 3, 1, 2, 3 ]
  , [ 4, 5, 6, 4, 5, 6, 4, 5, 6 ]
  , [ 1, 2, 3, 1, 2, 3, 1, 2, 3 ]
  , [ 4, 5, 6, 4, 5, 6, 4, 5, 6 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding (Sz2 2 3) (Sz2 2 3) Edge) idStencil a
</code></strong>Array DW Seq (Sz (6 :. 9))
  [ [ 1, 1, 1, 1, 2, 3, 3, 3, 3 ]
  , [ 1, 1, 1, 1, 2, 3, 3, 3, 3 ]
  , [ 1, 1, 1, 1, 2, 3, 3, 3, 3 ]
  , [ 4, 4, 4, 4, 5, 6, 6, 6, 6 ]
  , [ 4, 4, 4, 4, 5, 6, 6, 6, 6 ]
  , [ 4, 4, 4, 4, 5, 6, 6, 6, 6 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding (Sz2 2 3) (Sz2 2 3) Reflect) idStencil a
</code></strong>Array DW Seq (Sz (6 :. 9))
  [ [ 6, 5, 4, 4, 5, 6, 6, 5, 4 ]
  , [ 3, 2, 1, 1, 2, 3, 3, 2, 1 ]
  , [ 3, 2, 1, 1, 2, 3, 3, 2, 1 ]
  , [ 6, 5, 4, 4, 5, 6, 6, 5, 4 ]
  , [ 6, 5, 4, 4, 5, 6, 6, 5, 4 ]
  , [ 3, 2, 1, 1, 2, 3, 3, 2, 1 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding (Sz2 2 3) (Sz2 2 3) Continue) idStencil a
</code></strong>Array DW Seq (Sz (6 :. 9))
  [ [ 1, 3, 2, 1, 2, 3, 2, 1, 3 ]
  , [ 4, 6, 5, 4, 5, 6, 5, 4, 6 ]
  , [ 1, 3, 2, 1, 2, 3, 2, 1, 3 ]
  , [ 4, 6, 5, 4, 5, 6, 5, 4, 6 ]
  , [ 1, 3, 2, 1, 2, 3, 2, 1, 3 ]
  , [ 4, 6, 5, 4, 5, 6, 5, 4, 6 ]
  ]
</pre></details><p><em>Since: 0.4.3</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Padding" class="def">Padding</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:paddingFromOrigin" class="def">paddingFromOrigin</a> :: !(<a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:paddingFromBottom" class="def">paddingFromBottom</a> :: !(<a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:paddingWithElement" class="def">paddingWithElement</a> :: !(<a href="Data-Massiv-Core-Index.html#t:Border" title="Data.Massiv.Core.Index">Border</a> e)</dfn><div class="doc"><p>Element to do padding with</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Padding">Instances</h4><details id="i:Padding" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Padding:Show:1"></span> (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> e) =&gt; <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e)</span> <a href="src/Data.Massiv.Array.Stencil.html#line-158" class="link">Source</a> <a href="#t:Padding" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Padding:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil.html">Data.Massiv.Array.Stencil</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Padding:Eq:2"></span> (<a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> ix, <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> e) =&gt; <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e)</span> <a href="src/Data.Massiv.Array.Stencil.html#line-158" class="link">Source</a> <a href="#t:Padding" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Padding:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Massiv-Array-Stencil.html">Data.Massiv.Array.Stencil</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:noPadding" class="def">noPadding</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e <a href="src/Data.Massiv.Array.Stencil.html#noPadding" class="link">Source</a> <a href="#v:noPadding" class="selflink">#</a></p><div class="doc"><p>Also known as &quot;valid&quot; padding. When stencil is applied to an array, that array will
 shrink, unless the stencil is of size 1.</p><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:samePadding" class="def">samePadding</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Core-Index.html#t:Border" title="Data.Massiv.Core.Index">Border</a> e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e <a href="src/Data.Massiv.Array.Stencil.html#samePadding" class="link">Source</a> <a href="#v:samePadding" class="selflink">#</a></p><div class="doc"><p>Padding that matches the size of the stencil, which is known as &quot;same&quot; padding,
 because when a stencil is applied to an array with such matching padding, the resulting
 array will be of the same size as the source array. This is exactly the behavior of
 <code><a href="Data-Massiv-Array-Stencil.html#v:mapStencil" title="Data.Massiv.Array.Stencil">mapStencil</a></code></p><p><em>Since: 0.4.3</em></p></div></div><a href="#g:3" id="g:3"><h2>Application</h2></a><div class="top"><p class="src"><a id="v:mapStencil" class="def">mapStencil</a> <a href="src/Data.Massiv.Array.Stencil.html#mapStencil" class="link">Source</a> <a href="#v:mapStencil" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-Massiv-Core-Index.html#t:Border" title="Data.Massiv.Core.Index">Border</a> e</td><td class="doc"><p>Border resolution technique</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a</td><td class="doc"><p>Stencil to map over the array</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e</td><td class="doc"><p>Source array</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> <a href="Data-Massiv-Array-Delayed.html#t:DW" title="Data.Massiv.Array.Delayed">DW</a> ix a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Map a constructed stencil over an array. Resulting array must be
 <code><a href="Data-Massiv-Array.html#v:compute" title="Data.Massiv.Array">compute</a></code>d in order to be useful.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:applyStencil" class="def">applyStencil</a> <a href="src/Data.Massiv.Array.Stencil.html#applyStencil" class="link">Source</a> <a href="#v:applyStencil" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a> ix e</td><td class="doc"><p>Padding to be applied to the source array. This will dictate the resulting size of
 the array. No padding will cause it to shrink by the size of the stencil</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a</td><td class="doc"><p>Stencil to apply to the array</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e</td><td class="doc"><p>Source array</p></td></tr><tr><td class="src">-&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> <a href="Data-Massiv-Array-Delayed.html#t:DW" title="Data.Massiv.Array.Delayed">DW</a> ix a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Apply a constructed stencil over an array. Resulting array must be
 <code><a href="Data-Massiv-Array.html#v:compute" title="Data.Massiv.Array">compute</a></code>d in order to be useful. Unlike <code><a href="Data-Massiv-Array-Stencil.html#v:mapStencil" title="Data.Massiv.Array.Stencil">mapStencil</a></code>, the size of
 the resulting array will not necesserally be the same as the source array, which will
 depend on the padding.</p><p><em>Since: 0.4.3</em></p></div></div><a href="#g:4" id="g:4"><h2>Common stencils</h2></a><div class="top"><p class="src"><a id="v:idStencil" class="def">idStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#idStencil" class="link">Source</a> <a href="#v:idStencil" class="selflink">#</a></p><div class="doc"><p>Identity stencil that does not change the elements of the source array.</p><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:sumStencil" class="def">sumStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#sumStencil" class="link">Source</a> <a href="#v:sumStencil" class="selflink">#</a></p><div class="doc"><p>Sum all elements in the stencil region</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:sumStencil0">Examples</h4><details id="ch:sumStencil0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = computeAs P $ iterateN (Sz2 2 5) (* 2) (1 :: Int)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (2 :. 5))
  [ [ 2, 4, 8, 16, 32 ]
  , [ 64, 128, 256, 512, 1024 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil noPadding (sumStencil (Sz2 1 2)) a
</code></strong>Array DW Seq (Sz (2 :. 4))
  [ [ 6, 12, 24, 48 ]
  , [ 192, 384, 768, 1536 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[2 + 4, 4 + 8, 8 + 16, 16 + 32] :: [Int]
</code></strong>[6,12,24,48]
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:productStencil" class="def">productStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#productStencil" class="link">Source</a> <a href="#v:productStencil" class="selflink">#</a></p><div class="doc"><p>Multiply all elements in the stencil region</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:productStencil0">Examples</h4><details id="ch:productStencil0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = computeAs P $ iterateN (Sz2 2 2) (+1) (0 :: Int)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (2 :. 2))
  [ [ 1, 2 ]
  , [ 3, 4 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding 0 2 (Fill 0)) (productStencil 2) a
</code></strong>Array DW Seq (Sz (3 :. 3))
  [ [ 24, 0, 0 ]
  , [ 0, 0, 0 ]
  , [ 0, 0, 0 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding 0 2 Reflect) (productStencil 2) a
</code></strong>Array DW Seq (Sz (3 :. 3))
  [ [ 24, 64, 24 ]
  , [ 144, 256, 144 ]
  , [ 24, 64, 24 ]
  ]
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:avgStencil" class="def">avgStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Fractional" title="Prelude">Fractional</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#avgStencil" class="link">Source</a> <a href="#v:avgStencil" class="selflink">#</a></p><div class="doc"><p>Find the average value of all elements in the stencil region</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:avgStencil0">Example</h4><details id="ch:avgStencil0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = computeAs P $ iterateN (Sz2 3 4) (+1) (10 :: Double)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (3 :. 4))
  [ [ 11.0, 12.0, 13.0, 14.0 ]
  , [ 15.0, 16.0, 17.0, 18.0 ]
  , [ 19.0, 20.0, 21.0, 22.0 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil noPadding (avgStencil (Sz2 2 3)) a
</code></strong>Array DW Seq (Sz (2 :. 2))
  [ [ 14.0, 15.0 ]
  , [ 18.0, 19.0 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Prelude.sum [11.0, 12.0, 13.0, 15.0, 16.0, 17.0] / 6 :: Double
</code></strong>14.0
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:maxStencil" class="def">maxStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Bounded" title="Prelude">Bounded</a> e, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#maxStencil" class="link">Source</a> <a href="#v:maxStencil" class="selflink">#</a></p><div class="doc"><p>Create a stencil centered at 0 that will extract the maximum value in the region of
 supplied size.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:maxStencil0">Example</h4><details id="ch:maxStencil0"><summary class="hide-when-js-enabled">Expand</summary><p>Here is a sample implementation of max pooling.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a &lt;- computeAs P &lt;$&gt; resizeM (Sz2 9 9) (Ix1 10 ..: 91)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (9 :. 9))
  [ [ 10, 11, 12, 13, 14, 15, 16, 17, 18 ]
  , [ 19, 20, 21, 22, 23, 24, 25, 26, 27 ]
  , [ 28, 29, 30, 31, 32, 33, 34, 35, 36 ]
  , [ 37, 38, 39, 40, 41, 42, 43, 44, 45 ]
  , [ 46, 47, 48, 49, 50, 51, 52, 53, 54 ]
  , [ 55, 56, 57, 58, 59, 60, 61, 62, 63 ]
  , [ 64, 65, 66, 67, 68, 69, 70, 71, 72 ]
  , [ 73, 74, 75, 76, 77, 78, 79, 80, 81 ]
  , [ 82, 83, 84, 85, 86, 87, 88, 89, 90 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>computeWithStrideAs P (Stride 3) $ mapStencil Edge (maxStencil (Sz 3)) a
</code></strong>Array P Seq (Sz (3 :. 3))
  [ [ 30, 33, 36 ]
  , [ 57, 60, 63 ]
  , [ 84, 87, 90 ]
  ]
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:minStencil" class="def">minStencil</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Bounded" title="Prelude">Bounded</a> e, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#minStencil" class="link">Source</a> <a href="#v:minStencil" class="selflink">#</a></p><div class="doc"><p>Create a stencil centered at 0 that will extract the maximum value in the region of
 supplied size.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:minStencil0">Example</h4><details id="ch:minStencil0"><summary class="hide-when-js-enabled">Expand</summary><p>Here is a sample implementation of min pooling.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a &lt;- computeAs P &lt;$&gt; resizeM (Sz2 9 9) (Ix1 10 ..: 91)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (9 :. 9))
  [ [ 10, 11, 12, 13, 14, 15, 16, 17, 18 ]
  , [ 19, 20, 21, 22, 23, 24, 25, 26, 27 ]
  , [ 28, 29, 30, 31, 32, 33, 34, 35, 36 ]
  , [ 37, 38, 39, 40, 41, 42, 43, 44, 45 ]
  , [ 46, 47, 48, 49, 50, 51, 52, 53, 54 ]
  , [ 55, 56, 57, 58, 59, 60, 61, 62, 63 ]
  , [ 64, 65, 66, 67, 68, 69, 70, 71, 72 ]
  , [ 73, 74, 75, 76, 77, 78, 79, 80, 81 ]
  , [ 82, 83, 84, 85, 86, 87, 88, 89, 90 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>computeWithStrideAs P (Stride 3) $ mapStencil Edge (minStencil (Sz 3)) a
</code></strong>Array P Seq (Sz (3 :. 3))
  [ [ 10, 13, 16 ]
  , [ 37, 40, 43 ]
  , [ 64, 67, 70 ]
  ]
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:foldlStencil" class="def">foldlStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="src/Data.Massiv.Array.Stencil.html#foldlStencil" class="link">Source</a> <a href="#v:foldlStencil" class="selflink">#</a></p><div class="doc"><p>Stencil that does a left fold in a row-major order. Regardless of the supplied size
 resulting stencil will be centered at zero, although by using <code><a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a></code> it is possible
 to overcome this limitation.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:foldlStencil0">Examples</h4><details id="ch:foldlStencil0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = computeAs P $ iterateN (Sz2 3 4) (+1) (10 :: Int)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (3 :. 4))
  [ [ 11, 12, 13, 14 ]
  , [ 15, 16, 17, 18 ]
  , [ 19, 20, 21, 22 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil noPadding (foldlStencil (flip (:)) [] (Sz2 3 2)) a
</code></strong>Array DW Seq (Sz (1 :. 3))
  [ [ [20,19,16,15,12,11], [21,20,17,16,13,12], [22,21,18,17,14,13] ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil (Padding (Sz2 1 0) 0 (Fill 10)) (foldlStencil (flip (:)) [] (Sz2 3 2)) a
</code></strong>Array DW Seq (Sz (2 :. 3))
  [ [ [16,15,12,11,10,10], [17,16,13,12,10,10], [18,17,14,13,10,10] ]
  , [ [20,19,16,15,12,11], [21,20,17,16,13,12], [22,21,18,17,14,13] ]
  ]
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:foldrStencil" class="def">foldrStencil</a> :: <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix =&gt; (e -&gt; a -&gt; a) -&gt; a -&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a <a href="src/Data.Massiv.Array.Stencil.html#foldrStencil" class="link">Source</a> <a href="#v:foldrStencil" class="selflink">#</a></p><div class="doc"><p>Stencil that does a right fold in a row-major order. Regardless of the supplied size
 resulting stencil will be centered at zero, although by using <code><a href="Data-Massiv-Array-Stencil.html#t:Padding" title="Data.Massiv.Array.Stencil">Padding</a></code> it is possible
 to overcome this limitation.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:foldrStencil0">Examples</h4><details id="ch:foldrStencil0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Massiv.Array as A
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = computeAs P $ iterateN (Sz2 3 4) (+1) (10 :: Int)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a
</code></strong>Array P Seq (Sz (3 :. 4))
  [ [ 11, 12, 13, 14 ]
  , [ 15, 16, 17, 18 ]
  , [ 19, 20, 21, 22 ]
  ]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyStencil noPadding (foldrStencil (:) [] (Sz2 2 3)) a
</code></strong>Array DW Seq (Sz (2 :. 2))
  [ [ [11,12,13,15,16,17], [12,13,14,16,17,18] ]
  , [ [15,16,17,19,20,21], [16,17,18,20,21,22] ]
  ]
</pre></details><p><em>Since: 0.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:foldStencil" class="def">foldStencil</a> :: (<a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.html#foldStencil" class="link">Source</a> <a href="#v:foldStencil" class="selflink">#</a></p><div class="doc"><p>Create a stencil that will fold all elements in the region monoidally.</p><p><em>Since: 0.4.3</em></p></div></div><a href="#g:5" id="g:5"><h2>Profunctor</h2></a><div class="top"><p class="src"><a id="v:dimapStencil" class="def">dimapStencil</a> :: (c -&gt; d) -&gt; (a -&gt; b) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix d a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix c b <a href="src/Data.Massiv.Array.Stencil.Internal.html#dimapStencil" class="link">Source</a> <a href="#v:dimapStencil" class="selflink">#</a></p><div class="doc"><p>A Profunctor dimap. Same caviat applies as in <code><a href="Data-Massiv-Array-Stencil.html#v:lmapStencil" title="Data.Massiv.Array.Stencil">lmapStencil</a></code></p><p><em>Since: 0.2.3</em></p></div></div><div class="top"><p class="src"><a id="v:lmapStencil" class="def">lmapStencil</a> :: (c -&gt; d) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix d a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix c a <a href="src/Data.Massiv.Array.Stencil.Internal.html#lmapStencil" class="link">Source</a> <a href="#v:lmapStencil" class="selflink">#</a></p><div class="doc"><p>A contravariant map of a second type parameter. In other words map a function over each element
 of the array, that the stencil will be applied to.</p><p><strong>Note</strong>: This map can be very inefficient, since for stencils larger than 1 element in size, the
 supllied function will be repeatedly applied to the same element. It is better to simply map that
 function over the source array instead.</p><p><em>Since: 0.2.3</em></p></div></div><div class="top"><p class="src"><a id="v:rmapStencil" class="def">rmapStencil</a> :: (a -&gt; b) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e a -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e b <a href="src/Data.Massiv.Array.Stencil.Internal.html#rmapStencil" class="link">Source</a> <a href="#v:rmapStencil" class="selflink">#</a></p><div class="doc"><p>A covariant map over the right most type argument. In other words the usual <code><a href="../base-4.18.2.1/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code>
 from <code><a href="../base-4.18.2.1/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code>:</p><pre>fmap == rmapStencil</pre><p><em>Since: 0.2.3</em></p></div></div><a href="#g:6" id="g:6"><h1>Convolution</h1></a><div class="top"><p class="src"><a id="v:makeConvolutionStencil" class="def">makeConvolutionStencil</a> :: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; ix -&gt; ((ix -&gt; e -&gt; e -&gt; e) -&gt; e -&gt; e) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.Convolution.html#makeConvolutionStencil" class="link">Source</a> <a href="#v:makeConvolutionStencil" class="selflink">#</a></p><div class="doc"><p>Create a convolution stencil by specifying border resolution technique and
 an accumulator function.</p><p><em>Note</em> - Using <code><a href="Data-Massiv-Array-Stencil-Unsafe.html#v:makeUnsafeConvolutionStencil" title="Data.Massiv.Array.Stencil.Unsafe">makeUnsafeConvolutionStencil</a></code> will be
 slightly faster, therefore it is recommended to switch from this function, after manual
 verification that the created stencil behaves as expected.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:makeConvolutionStencil0">Examples</h4><details id="ch:makeConvolutionStencil0"><summary class="hide-when-js-enabled">Expand</summary><p>Here is how to create a 2D horizontal Sobel Stencil:</p><pre>sobelX :: Num e =&gt; Stencil Ix2 e e
sobelX = makeConvolutionStencil (Sz2 3 3) (1 :. 1)
         $ f -&gt; f (-1 :. -1) (-1) . f (-1 :. 1) 1 .
                 f ( 0 :. -1) (-2) . f ( 0 :. 1) 2 .
                 f ( 1 :. -1) (-1) . f ( 1 :. 1) 1
{-# INLINE sobelX #-}
</pre></details><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:makeConvolutionStencilFromKernel" class="def">makeConvolutionStencilFromKernel</a> :: (<a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.Convolution.html#makeConvolutionStencilFromKernel" class="link">Source</a> <a href="#v:makeConvolutionStencilFromKernel" class="selflink">#</a></p><div class="doc"><p>Make a stencil out of a Kernel Array. This <code><a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a></code> will be slower than if
 <code><a href="Data-Massiv-Array-Stencil.html#v:makeConvolutionStencil" title="Data.Massiv.Array.Stencil">makeConvolutionStencil</a></code> is used, but sometimes we just really don't know the
 kernel at compile time.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:makeCorrelationStencil" class="def">makeCorrelationStencil</a> :: (<a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-Index.html#t:Sz" title="Data.Massiv.Core.Index">Sz</a> ix -&gt; ix -&gt; ((ix -&gt; e -&gt; e -&gt; e) -&gt; e -&gt; e) -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.Convolution.html#makeCorrelationStencil" class="link">Source</a> <a href="#v:makeCorrelationStencil" class="selflink">#</a></p><div class="doc"><p>Make a <a href="https://en.wikipedia.org/wiki/Cross-correlation">cross-correlation</a> stencil</p><p><em>Note</em> - Using <code><a href="Data-Massiv-Array-Stencil-Unsafe.html#v:makeUnsafeCorrelationStencil" title="Data.Massiv.Array.Stencil.Unsafe">makeUnsafeCorrelationStencil</a></code> will be
 much faster, therefore it is recommended to switch from this function, after manual
 verification that the created stencil behaves as expected.</p><p><em>Since: 0.1.5</em></p></div></div><div class="top"><p class="src"><a id="v:makeCorrelationStencilFromKernel" class="def">makeCorrelationStencilFromKernel</a> :: (<a href="Data-Massiv-Core.html#t:Manifest" title="Data.Massiv.Core">Manifest</a> r e, <a href="Data-Massiv-Core-Index.html#t:Index" title="Data.Massiv.Core.Index">Index</a> ix, <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> e) =&gt; <a href="Data-Massiv-Core-List.html#t:Array" title="Data.Massiv.Core.List">Array</a> r ix e -&gt; <a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a> ix e e <a href="src/Data.Massiv.Array.Stencil.Convolution.html#makeCorrelationStencilFromKernel" class="link">Source</a> <a href="#v:makeCorrelationStencilFromKernel" class="selflink">#</a></p><div class="doc"><p>Make a <a href="https://en.wikipedia.org/wiki/Cross-correlation">cross-correlation</a> stencil out of a
 Kernel Array. This <code><a href="Data-Massiv-Array-Stencil.html#t:Stencil" title="Data.Massiv.Array.Stencil">Stencil</a></code> will be slower than if <code><a href="Data-Massiv-Array-Stencil.html#v:makeCorrelationStencil" title="Data.Massiv.Array.Stencil">makeCorrelationStencil</a></code> is used, but
 sometimes we just really don't know the kernel at compile time.</p><p><em>Since: 0.1.5</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>