<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Module      : Data.Massiv.Array.Manifest</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Copyright   : (c) Alexey Kuleshevich 2018-2022</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- License     : BSD3</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Maintainer  : Alexey Kuleshevich &lt;lehins@yandex.ru&gt;</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Portability : non-portable</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Massiv.Array.Manifest</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Manifest</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Manifest"><span class="hs-identifier">Manifest</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Generate</span></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateArray"><span class="hs-identifier">generateArray</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateArrayLinear"><span class="hs-identifier">generateArrayLinear</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateArrayS"><span class="hs-identifier">generateArrayS</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateArrayLinearS"><span class="hs-identifier">generateArrayLinearS</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateSplitSeedArray"><span class="hs-identifier">generateSplitSeedArray</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Stateful worker threads</span></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateArrayWS"><span class="hs-identifier">generateArrayWS</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#generateArrayLinearWS"><span class="hs-identifier">generateArrayLinearWS</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Unfold</span></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#unfoldrPrimM_"><span class="hs-identifier">unfoldrPrimM_</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iunfoldrPrimM_"><span class="hs-identifier">iunfoldrPrimM_</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#unfoldrPrimM"><span class="hs-identifier">unfoldrPrimM</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iunfoldrPrimM"><span class="hs-identifier">iunfoldrPrimM</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#unfoldlPrimM_"><span class="hs-identifier">unfoldlPrimM_</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iunfoldlPrimM_"><span class="hs-identifier">iunfoldlPrimM_</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#unfoldlPrimM"><span class="hs-identifier">unfoldlPrimM</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iunfoldlPrimM"><span class="hs-identifier">iunfoldlPrimM</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Mapping</span></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#forPrimM"><span class="hs-identifier">forPrimM</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#forPrimM_"><span class="hs-identifier">forPrimM_</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iforPrimM"><span class="hs-identifier">iforPrimM</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iforPrimM_"><span class="hs-identifier">iforPrimM_</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iforLinearPrimM"><span class="hs-identifier">iforLinearPrimM</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#iforLinearPrimM_"><span class="hs-identifier">iforLinearPrimM_</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#for2PrimM_"><span class="hs-identifier">for2PrimM_</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html#ifor2PrimM_"><span class="hs-identifier">ifor2PrimM_</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Boxed</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#B"><span class="hs-identifier">B</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#BL"><span class="hs-identifier">BL</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#BN"><span class="hs-identifier">BN</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#N"><span class="hs-identifier">N</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#N"><span class="hs-identifier">N</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Exception.html#Uninitialized"><span class="hs-identifier">Uninitialized</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Access</span></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#findIndex"><span class="hs-identifier">findIndex</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Conversion</span></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><span class="hs-comment">-- $boxed_conversion_note</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#toLazyArray"><span class="hs-identifier">toLazyArray</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalLazyArray"><span class="hs-identifier">evalLazyArray</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#forceLazyArray"><span class="hs-identifier">forceLazyArray</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapNormalForm"><span class="hs-identifier">unwrapNormalForm</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalNormalForm"><span class="hs-identifier">evalNormalForm</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Primitive Boxed Array</span></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapLazyArray"><span class="hs-identifier">unwrapLazyArray</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#wrapLazyArray"><span class="hs-identifier">wrapLazyArray</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapArray"><span class="hs-identifier">unwrapArray</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalArray"><span class="hs-identifier">evalArray</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapMutableArray"><span class="hs-identifier">unwrapMutableArray</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapMutableLazyArray"><span class="hs-identifier">unwrapMutableLazyArray</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalMutableArray"><span class="hs-identifier">evalMutableArray</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapNormalFormArray"><span class="hs-identifier">unwrapNormalFormArray</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalNormalFormArray"><span class="hs-identifier">evalNormalFormArray</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#unwrapNormalFormMutableArray"><span class="hs-identifier">unwrapNormalFormMutableArray</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalNormalFormMutableArray"><span class="hs-identifier">evalNormalFormMutableArray</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Boxed Vector</span></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#toBoxedVector"><span class="hs-identifier">toBoxedVector</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#toBoxedMVector"><span class="hs-identifier">toBoxedMVector</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#fromBoxedVector"><span class="hs-identifier">fromBoxedVector</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#fromBoxedMVector"><span class="hs-identifier">fromBoxedMVector</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalBoxedVector"><span class="hs-identifier">evalBoxedVector</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html#evalBoxedMVector"><span class="hs-identifier">evalBoxedMVector</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Primitive</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#P"><span class="hs-identifier">P</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Prim</span></span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Conversion</span></span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Primitive ByteArray</span></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#toByteArray"><span class="hs-identifier">toByteArray</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#toByteArrayM"><span class="hs-identifier">toByteArrayM</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#unwrapByteArray"><span class="hs-identifier">unwrapByteArray</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#unwrapByteArrayOffset"><span class="hs-identifier">unwrapByteArrayOffset</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromByteArray"><span class="hs-identifier">fromByteArray</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromByteArrayM"><span class="hs-identifier">fromByteArrayM</span></a></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromByteArrayOffsetM"><span class="hs-identifier">fromByteArrayOffsetM</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#toMutableByteArray"><span class="hs-identifier">toMutableByteArray</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#unwrapMutableByteArray"><span class="hs-identifier">unwrapMutableByteArray</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#unwrapMutableByteArrayOffset"><span class="hs-identifier">unwrapMutableByteArrayOffset</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromMutableByteArray"><span class="hs-identifier">fromMutableByteArray</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromMutableByteArrayM"><span class="hs-identifier">fromMutableByteArrayM</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromMutableByteArrayOffsetM"><span class="hs-identifier">fromMutableByteArrayOffsetM</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Primitive Vector</span></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#toPrimitiveVector"><span class="hs-identifier">toPrimitiveVector</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#toPrimitiveMVector"><span class="hs-identifier">toPrimitiveMVector</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromPrimitiveVector"><span class="hs-identifier">fromPrimitiveVector</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html#fromPrimitiveMVector"><span class="hs-identifier">fromPrimitiveMVector</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Storable</span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier">S</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Storable</span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#mallocCompute"><span class="hs-identifier">mallocCompute</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#mallocCopy"><span class="hs-identifier">mallocCopy</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Conversion</span></span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Storable Vector</span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#toStorableVector"><span class="hs-identifier">toStorableVector</span></a></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#toStorableMVector"><span class="hs-identifier">toStorableMVector</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#fromStorableVector"><span class="hs-identifier">fromStorableVector</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#fromStorableMVector"><span class="hs-identifier">fromStorableMVector</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Direct Pointer Access</span></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#withPtr"><span class="hs-identifier">withPtr</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Unboxed</span></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Unboxed.html#U"><span class="hs-identifier">U</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Unbox</span></span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Conversion</span></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Unboxed Vector</span></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Unboxed.html#toUnboxedVector"><span class="hs-identifier">toUnboxedVector</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Unboxed.html#toUnboxedMVector"><span class="hs-identifier">toUnboxedMVector</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Unboxed.html#fromUnboxedVector"><span class="hs-identifier">fromUnboxedVector</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Unboxed.html#fromUnboxedMVector"><span class="hs-identifier">fromUnboxedMVector</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="hs-comment">-- * ByteString Conversion</span></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#fromByteString"><span class="hs-identifier">fromByteString</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castFromByteString"><span class="hs-identifier">castFromByteString</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#toByteString"><span class="hs-identifier">toByteString</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castToByteString"><span class="hs-identifier">castToByteString</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#toBuilder"><span class="hs-identifier">toBuilder</span></a></span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castToBuilder"><span class="hs-identifier">castToBuilder</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">findIndex</span></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder</span></span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Internal</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Unsafe</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SU</span></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Boxed.html"><span class="hs-identifier">Data.Massiv.Array.Manifest.Boxed</span></a></span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Internal.html"><span class="hs-identifier">Data.Massiv.Array.Manifest.Internal</span></a></span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Primitive.html"><span class="hs-identifier">Data.Massiv.Array.Manifest.Primitive</span></a></span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html"><span class="hs-identifier">Data.Massiv.Array.Manifest.Storable</span></a></span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Unboxed.html"><span class="hs-identifier">Data.Massiv.Array.Manifest.Unboxed</span></a></span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Mutable.html"><span class="hs-identifier">Data.Massiv.Array.Mutable</span></a></span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html"><span class="hs-identifier">Data.Massiv.Array.Ops.Fold</span></a></span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html"><span class="hs-identifier">Data.Massiv.Core.Common</span></a></span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word8</span></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- | /O(n)/ - Convert a strict ByteString into a manifest array. Will return `Nothing` if length</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- doesn't match the total number of elements of new array.</span><span>
</span><span id="line-153"></span><span class="hs-comment">--</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- @since 0.2.1</span><span>
</span><span id="line-155"></span><span id="local-6989586621679284235"><span class="annot"><a href="Data.Massiv.Array.Manifest.html#fromByteString"><span class="hs-identifier hs-type">fromByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-156"></span><span>     </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Load"><span class="hs-identifier hs-type">Load</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284235"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Ix1"><span class="hs-identifier hs-type">Ix1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Comp</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Computation strategy</span></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Strict ByteString to use as a source.</span></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284235"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span></span><span>
</span><span id="line-160"></span><span id="fromByteString"><span class="annot"><span class="annottext">fromByteString :: forall r. Load r Ix1 Word8 =&gt; Comp -&gt; ByteString -&gt; Vector r Word8
</span><a href="Data.Massiv.Array.Manifest.html#fromByteString"><span class="hs-identifier hs-var hs-var">fromByteString</span></a></span></span><span> </span><span id="local-6989586621679284438"><span class="annot"><span class="annottext">Comp
</span><a href="#local-6989586621679284438"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679284439"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679284439"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Comp -&gt; Sz Ix1 -&gt; (Ix1 -&gt; Word8) -&gt; Array r Ix1 Word8
forall r ix e.
Load r ix e =&gt;
Comp -&gt; Sz ix -&gt; (Ix1 -&gt; e) -&gt; Array r ix e
</span><a href="Data.Massiv.Core.Common.html#makeArrayLinear"><span class="hs-identifier hs-var">makeArrayLinear</span></a></span><span> </span><span class="annot"><span class="annottext">Comp
</span><a href="#local-6989586621679284438"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ix1 -&gt; Sz Ix1
forall ix. ix -&gt; Sz ix
</span><a href="Data.Massiv.Core.Index.Internal.html#SafeSz"><span class="hs-identifier hs-var">SafeSz</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Ix1
</span><span class="hs-identifier hs-var">S.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679284439"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Ix1 -&gt; Word8
</span><span class="hs-identifier hs-var">SU.unsafeIndex</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679284439"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#fromByteString"><span class="hs-pragma hs-type">fromByteString</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- | /O(n)/ - Convert any source array into a strict `ByteString`. In case when the source array is</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- actually storable, no memory copy will occur.</span><span>
</span><span id="line-165"></span><span class="hs-comment">--</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- @since 0.2.1</span><span>
</span><span id="line-167"></span><span id="local-6989586621679284247"><span id="local-6989586621679284248"><span class="annot"><a href="Data.Massiv.Array.Manifest.html#toByteString"><span class="hs-identifier hs-type">toByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-168"></span><span>     </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Load"><span class="hs-identifier hs-type">Load</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284247"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284248"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284247"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284248"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Source array</span></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span></span><span>
</span><span id="line-171"></span><span id="toByteString"><span class="annot"><span class="annottext">toByteString :: forall r ix. Load r ix Word8 =&gt; Array r ix Word8 -&gt; ByteString
</span><a href="Data.Massiv.Array.Manifest.html#toByteString"><span class="hs-identifier hs-var hs-var">toByteString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array S ix Word8 -&gt; ByteString
forall ix. Index ix =&gt; Array S ix Word8 -&gt; ByteString
</span><a href="Data.Massiv.Array.Manifest.html#castToByteString"><span class="hs-identifier hs-var">castToByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(Array S ix Word8 -&gt; ByteString)
-&gt; (Array r ix Word8 -&gt; Array S ix Word8)
-&gt; Array r ix Word8
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="hs-cpp">
#if __GLASGOW_HASKELL__ &gt;= 820
</span><span>  </span><span class="annot"><span class="annottext">Array r ix Word8 -&gt; Array S ix Word8
forall r ix e r'.
(Manifest r e, Load r' ix e) =&gt;
Array r' ix e -&gt; Array r ix e
</span><a href="Data.Massiv.Array.Manifest.Internal.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-comment">{- For ghc-8.0 `convert` results in &quot;internal error: ARR_WORDS object entered!&quot; -}</span><span class="hs-cpp">
#else
</span><span>  </span><span class="hs-identifier">compute</span><span class="hs-cpp">
#endif
</span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#toByteString"><span class="hs-pragma hs-type">toByteString</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">-- | /O(n)/ - Conversion of array monoidally into a ByteString `Builder`.</span><span>
</span><span id="line-181"></span><span class="hs-comment">--</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- @since 0.2.1</span><span>
</span><span id="line-183"></span><span id="local-6989586621679284265"><span id="local-6989586621679284266"><span id="local-6989586621679284267"><span class="annot"><a href="Data.Massiv.Array.Manifest.html#toBuilder"><span class="hs-identifier hs-type">toBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284265"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284266"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284267"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679284267"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Builder</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284266"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284265"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284267"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Builder</span></span></span></span></span><span>
</span><span id="line-184"></span><span id="toBuilder"><span class="annot"><span class="annottext">toBuilder :: forall ix r e.
(Index ix, Source r e) =&gt;
(e -&gt; Builder) -&gt; Array r ix e -&gt; Builder
</span><a href="Data.Massiv.Array.Manifest.html#toBuilder"><span class="hs-identifier hs-var hs-var">toBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; Builder) -&gt; Array r ix e -&gt; Builder
forall ix r e m.
(Index ix, Source r e, Monoid m) =&gt;
(e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldMono"><span class="hs-identifier hs-var">foldMono</span></a></span><span>
</span><span id="line-185"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#toBuilder"><span class="hs-pragma hs-type">toBuilder</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- | /O(1)/ - Cast a storable array of `Word8` to ByteString `Builder`.</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- @since 0.5.0</span><span>
</span><span id="line-190"></span><span id="local-6989586621679284277"><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castToBuilder"><span class="hs-identifier hs-type">castToBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284277"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284277"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Builder</span></span></span><span>
</span><span id="line-191"></span><span id="castToBuilder"><span class="annot"><span class="annottext">castToBuilder :: forall ix. Index ix =&gt; Array S ix Word8 -&gt; Builder
</span><a href="Data.Massiv.Array.Manifest.html#castToBuilder"><span class="hs-identifier hs-var hs-var">castToBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Builder
</span><span class="hs-identifier hs-var">byteString</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Builder)
-&gt; (Array S ix Word8 -&gt; ByteString) -&gt; Array S ix Word8 -&gt; Builder
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Array S ix Word8 -&gt; ByteString
forall ix. Index ix =&gt; Array S ix Word8 -&gt; ByteString
</span><a href="Data.Massiv.Array.Manifest.html#castToByteString"><span class="hs-identifier hs-var">castToByteString</span></a></span><span>
</span><span id="line-192"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castToBuilder"><span class="hs-pragma hs-type">castToBuilder</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-comment">-- | /O(1)/ - Cast a `S`torable array into a strict `ByteString`</span><span>
</span><span id="line-195"></span><span class="hs-comment">--</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- @since 0.3.0</span><span>
</span><span id="line-197"></span><span id="local-6989586621679284257"><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castToByteString"><span class="hs-identifier hs-type">castToByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284257"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284257"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span><span>
</span><span id="line-198"></span><span id="castToByteString"><span class="annot"><span class="annottext">castToByteString :: forall ix. Index ix =&gt; Array S ix Word8 -&gt; ByteString
</span><a href="Data.Massiv.Array.Manifest.html#castToByteString"><span class="hs-identifier hs-var hs-var">castToByteString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679284468"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679284468"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679284469"><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284469"><span class="hs-identifier hs-var">len</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Ix1 -&gt; Ix1 -&gt; ByteString
</span><span class="hs-identifier hs-var">PS</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679284468"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284469"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ForeignPtr Word8, Ix1) -&gt; ByteString)
-&gt; (Array S ix Word8 -&gt; (ForeignPtr Word8, Ix1))
-&gt; Array S ix Word8
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Array S ix Word8 -&gt; (ForeignPtr Word8, Ix1)
forall ix e. Index ix =&gt; Array S ix e -&gt; (ForeignPtr e, Ix1)
</span><a href="Data.Massiv.Array.Manifest.Storable.html#unsafeArrayToForeignPtr"><span class="hs-identifier hs-var">unsafeArrayToForeignPtr</span></a></span><span>
</span><span id="line-199"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castToByteString"><span class="hs-pragma hs-type">castToByteString</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">-- | /O(1)/ - Cast a strict `ByteString` into a `S`torable array</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- @since 0.3.0</span><span>
</span><span id="line-204"></span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castFromByteString"><span class="hs-identifier hs-type">castFromByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Comp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-205"></span><span id="castFromByteString"><span class="annot"><span class="annottext">castFromByteString :: Comp -&gt; ByteString -&gt; Vector S Word8
</span><a href="Data.Massiv.Array.Manifest.html#castFromByteString"><span class="hs-identifier hs-var hs-var">castFromByteString</span></a></span></span><span> </span><span id="local-6989586621679284472"><span class="annot"><span class="annottext">Comp
</span><a href="#local-6989586621679284472"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PS</span></span><span> </span><span id="local-6989586621679284473"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679284473"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679284474"><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284474"><span class="hs-identifier hs-var">offset</span></a></span></span><span> </span><span id="local-6989586621679284475"><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284475"><span class="hs-identifier hs-var">len</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Comp -&gt; ForeignPtr Word8 -&gt; Ix1 -&gt; Sz Ix1 -&gt; Vector S Word8
forall e.
Storable e =&gt;
Comp -&gt; ForeignPtr e -&gt; Ix1 -&gt; Sz Ix1 -&gt; Array S Ix1 e
</span><a href="Data.Massiv.Array.Manifest.Storable.html#unsafeArrayFromForeignPtr"><span class="hs-identifier hs-var">unsafeArrayFromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Comp
</span><a href="#local-6989586621679284472"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679284473"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284474"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ix1 -&gt; Sz Ix1
forall ix. Index ix =&gt; ix -&gt; Sz ix
</span><a href="Data.Massiv.Core.Index.Internal.html#Sz"><span class="hs-identifier hs-var">Sz</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284475"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#castFromByteString"><span class="hs-pragma hs-type">castFromByteString</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- $boxed_conversion_note</span><span>
</span><span id="line-209"></span><span class="hs-comment">--</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- Important part of all conversions in this section is that the actual boxed</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- `Data.Primitive.Array.Array`, which holds the pointers to values isn't copied around, it is always</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- kept as the same array. Conversion to Massiv boxed array will undergo evaluation during which</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- computation strategies will be respected.</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- | /O(n)/ - Perform a row-major search starting at @0@ for an element. Returns the index</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- of the first occurance of an element or `Nothing` if a predicate could not be satisifed</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- after it was applyied to all elements of the array.</span><span>
</span><span id="line-220"></span><span class="hs-comment">--</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- @since 0.5.5</span><span>
</span><span id="line-222"></span><span id="local-6989586621679284285"><span id="local-6989586621679284286"><span id="local-6989586621679284287"><span class="annot"><a href="Data.Massiv.Array.Manifest.html#findIndex"><span class="hs-identifier hs-type">findIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284285"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Manifest"><span class="hs-identifier hs-type">Manifest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284286"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284287"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679284287"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284286"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284285"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284287"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679284285"><span class="hs-identifier hs-type">ix</span></a></span></span></span></span><span>
</span><span id="line-223"></span><span id="findIndex"><span class="annot"><span class="annottext">findIndex :: forall ix r e.
(Index ix, Manifest r e) =&gt;
(e -&gt; Bool) -&gt; Array r ix e -&gt; Maybe ix
</span><a href="Data.Massiv.Array.Manifest.html#findIndex"><span class="hs-identifier hs-var hs-var">findIndex</span></a></span></span><span> </span><span id="local-6989586621679284499"><span class="annot"><span class="annottext">e -&gt; Bool
</span><a href="#local-6989586621679284499"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679284500"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284500"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ix1 -&gt; Maybe ix
</span><a href="#local-6989586621679284501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><span class="hs-number">0</span></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679284502"><span class="annot"><span class="annottext">sz :: Sz ix
</span><a href="#local-6989586621679284502"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Size r =&gt; Array r ix e -&gt; Sz ix
forall ix e. Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284500"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679284504"><span class="annot"><span class="annottext">k :: Ix1
</span><a href="#local-6989586621679284504"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sz ix -&gt; Ix1
forall ix. Index ix =&gt; Sz ix -&gt; Ix1
</span><a href="Data.Massiv.Core.Index.Internal.html#totalElem"><span class="hs-identifier hs-var">totalElem</span></a></span><span> </span><span class="annot"><span class="annottext">Sz ix
</span><a href="#local-6989586621679284502"><span class="hs-identifier hs-var">sz</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621679284501"><span class="annot"><span class="annottext">go :: Ix1 -&gt; Maybe ix
</span><a href="#local-6989586621679284501"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679284506"><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284506"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-228"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284506"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1 -&gt; Ix1 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284504"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">e -&gt; Bool
</span><a href="#local-6989586621679284499"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Ix1 -&gt; e
forall ix. Index ix =&gt; Array r ix e -&gt; Ix1 -&gt; e
forall r e ix. (Source r e, Index ix) =&gt; Array r ix e -&gt; Ix1 -&gt; e
</span><a href="Data.Massiv.Core.Common.html#unsafeLinearIndex"><span class="hs-identifier hs-var">unsafeLinearIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284500"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284506"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ix -&gt; Maybe ix
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ix -&gt; Maybe ix) -&gt; ix -&gt; Maybe ix
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sz ix -&gt; Ix1 -&gt; ix
forall ix. Index ix =&gt; Sz ix -&gt; Ix1 -&gt; ix
</span><a href="Data.Massiv.Core.Index.Internal.html#fromLinearIndex"><span class="hs-identifier hs-var">fromLinearIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Sz ix
</span><a href="#local-6989586621679284502"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284506"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-231"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Ix1 -&gt; Maybe ix
</span><a href="#local-6989586621679284501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ix1
</span><a href="#local-6989586621679284506"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1 -&gt; Ix1 -&gt; Ix1
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#findIndex"><span class="hs-pragma hs-type">findIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | Very similar to @`computeAs` `S`@ except load the source array into memory allocated</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- with @malloc@ on C heap. It can potentially be useful when iteroperating with some C</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- programs.</span><span>
</span><span id="line-238"></span><span class="hs-comment">--</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- @since 0.5.9</span><span>
</span><span id="line-240"></span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#mallocCompute"><span class="hs-identifier hs-type">mallocCompute</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679284309"><span class="annot"><a href="#local-6989586621679284309"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679284310"><span class="annot"><a href="#local-6989586621679284310"><span class="hs-identifier hs-type">ix</span></a></span></span><span> </span><span id="local-6989586621679284311"><span class="annot"><a href="#local-6989586621679284311"><span class="hs-identifier hs-type">e</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Size"><span class="hs-identifier hs-type">Size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284309"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Load"><span class="hs-identifier hs-type">Load</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284309"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284310"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284311"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Storable</span></span><span> </span><span class="annot"><a href="#local-6989586621679284311"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284309"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284310"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284311"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284310"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284311"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span id="mallocCompute"><span class="annot"><span class="annottext">mallocCompute :: forall r ix e.
(Size r, Load r ix e, Storable e) =&gt;
Array r ix e -&gt; IO (Array S ix e)
</span><a href="Data.Massiv.Array.Manifest.html#mallocCompute"><span class="hs-identifier hs-var hs-var">mallocCompute</span></a></span></span><span> </span><span id="local-6989586621679284536"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284536"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679284537"><span class="annot"><span class="annottext">sz :: Sz ix
</span><a href="#local-6989586621679284537"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Size r =&gt; Array r ix e -&gt; Sz ix
forall ix e. Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284536"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621679284538"><span class="annot"><span class="annottext">MArray RealWorld S ix e
</span><a href="#local-6989586621679284538"><span class="hs-identifier hs-var">marr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sz ix -&gt; IO (MArray (PrimState IO) S ix e)
forall ix e (m :: * -&gt; *).
(Index ix, Storable e, PrimMonad m) =&gt;
Sz ix -&gt; m (MArray (PrimState m) S ix e)
</span><a href="Data.Massiv.Array.Manifest.Storable.html#unsafeMallocMArray"><span class="hs-identifier hs-var">unsafeMallocMArray</span></a></span><span> </span><span class="annot"><span class="annottext">Sz ix
</span><a href="#local-6989586621679284537"><span class="hs-identifier hs-var">sz</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><span class="annottext">MArray RealWorld S ix e -&gt; Array r ix e -&gt; IO ()
forall r' ix' e r ix (m :: * -&gt; *).
(Load r' ix' e, Manifest r e, Index ix, MonadIO m) =&gt;
MArray RealWorld r ix e -&gt; Array r' ix' e -&gt; m ()
</span><a href="Data.Massiv.Array.Mutable.html#computeInto"><span class="hs-identifier hs-var">computeInto</span></a></span><span> </span><span class="annot"><span class="annottext">MArray RealWorld S ix e
</span><a href="#local-6989586621679284538"><span class="hs-identifier hs-var">marr</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284536"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">Comp -&gt; MArray (PrimState IO) S ix e -&gt; IO (Array S ix e)
forall r e ix (m :: * -&gt; *).
(Manifest r e, Index ix, PrimMonad m) =&gt;
Comp -&gt; MArray (PrimState m) r ix e -&gt; m (Array r ix e)
forall ix (m :: * -&gt; *).
(Index ix, PrimMonad m) =&gt;
Comp -&gt; MArray (PrimState m) S ix e -&gt; m (Array S ix e)
</span><a href="Data.Massiv.Core.Common.html#unsafeFreeze"><span class="hs-identifier hs-var">unsafeFreeze</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Comp
forall r ix e. Strategy r =&gt; Array r ix e -&gt; Comp
forall ix e. Array r ix e -&gt; Comp
</span><a href="Data.Massiv.Core.Common.html#getComp"><span class="hs-identifier hs-var">getComp</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679284536"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArray RealWorld S ix e
MArray (PrimState IO) S ix e
</span><a href="#local-6989586621679284538"><span class="hs-identifier hs-var">marr</span></a></span><span>
</span><span id="line-246"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#mallocCompute"><span class="hs-pragma hs-type">mallocCompute</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Allocate memory on C heap with @malloc@ and copy the source array over.</span><span>
</span><span id="line-249"></span><span class="hs-comment">--</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- @since 0.5.9</span><span>
</span><span id="line-251"></span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#mallocCopy"><span class="hs-identifier hs-type">mallocCopy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679284334"><span class="annot"><a href="#local-6989586621679284334"><span class="hs-identifier hs-type">ix</span></a></span></span><span> </span><span id="local-6989586621679284335"><span class="annot"><a href="#local-6989586621679284335"><span class="hs-identifier hs-type">e</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284334"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Storable</span></span><span> </span><span class="annot"><a href="#local-6989586621679284335"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284334"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284335"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.Storable.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284334"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679284335"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span id="mallocCopy"><span class="annot"><span class="annottext">mallocCopy :: forall ix e.
(Index ix, Storable e) =&gt;
Array S ix e -&gt; IO (Array S ix e)
</span><a href="Data.Massiv.Array.Manifest.html#mallocCopy"><span class="hs-identifier hs-var hs-var">mallocCopy</span></a></span></span><span> </span><span id="local-6989586621679284562"><span class="annot"><span class="annottext">Array S ix e
</span><a href="#local-6989586621679284562"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679284563"><span class="annot"><span class="annottext">sz :: Sz ix
</span><a href="#local-6989586621679284563"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array S ix e -&gt; Sz ix
forall r ix e. Size r =&gt; Array r ix e -&gt; Sz ix
forall ix e. Array S ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array S ix e
</span><a href="#local-6989586621679284562"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-254"></span><span>  </span><span id="local-6989586621679284564"><span class="annot"><span class="annottext">MArray RealWorld S ix e
</span><a href="#local-6989586621679284564"><span class="hs-identifier hs-var">marr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sz ix -&gt; IO (MArray (PrimState IO) S ix e)
forall ix e (m :: * -&gt; *).
(Index ix, Storable e, PrimMonad m) =&gt;
Sz ix -&gt; m (MArray (PrimState m) S ix e)
</span><a href="Data.Massiv.Array.Manifest.Storable.html#unsafeMallocMArray"><span class="hs-identifier hs-var">unsafeMallocMArray</span></a></span><span> </span><span class="annot"><span class="annottext">Sz ix
</span><a href="#local-6989586621679284563"><span class="hs-identifier hs-var">sz</span></a></span><span>
</span><span id="line-255"></span><span>  </span><span class="annot"><span class="annottext">Array S ix e
-&gt; Ix1 -&gt; MArray (PrimState IO) S ix e -&gt; Ix1 -&gt; Sz Ix1 -&gt; IO ()
forall r e ix' ix (m :: * -&gt; *).
(Manifest r e, Index ix', Index ix, PrimMonad m) =&gt;
Array r ix' e
-&gt; Ix1 -&gt; MArray (PrimState m) r ix e -&gt; Ix1 -&gt; Sz Ix1 -&gt; m ()
forall ix' ix (m :: * -&gt; *).
(Index ix', Index ix, PrimMonad m) =&gt;
Array S ix' e
-&gt; Ix1 -&gt; MArray (PrimState m) S ix e -&gt; Ix1 -&gt; Sz Ix1 -&gt; m ()
</span><a href="Data.Massiv.Core.Common.html#unsafeArrayLinearCopy"><span class="hs-identifier hs-var">unsafeArrayLinearCopy</span></a></span><span> </span><span class="annot"><span class="annottext">Array S ix e
</span><a href="#local-6989586621679284562"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArray RealWorld S ix e
MArray (PrimState IO) S ix e
</span><a href="#local-6989586621679284564"><span class="hs-identifier hs-var">marr</span></a></span><span> </span><span class="annot"><span class="annottext">Ix1
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ix1 -&gt; Sz Ix1
forall ix. ix -&gt; Sz ix
</span><a href="Data.Massiv.Core.Index.Internal.html#SafeSz"><span class="hs-identifier hs-var">SafeSz</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sz ix -&gt; Ix1
forall ix. Index ix =&gt; Sz ix -&gt; Ix1
</span><a href="Data.Massiv.Core.Index.Internal.html#totalElem"><span class="hs-identifier hs-var">totalElem</span></a></span><span> </span><span class="annot"><span class="annottext">Sz ix
</span><a href="#local-6989586621679284563"><span class="hs-identifier hs-var">sz</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>  </span><span class="annot"><span class="annottext">Comp -&gt; MArray (PrimState IO) S ix e -&gt; IO (Array S ix e)
forall r e ix (m :: * -&gt; *).
(Manifest r e, Index ix, PrimMonad m) =&gt;
Comp -&gt; MArray (PrimState m) r ix e -&gt; m (Array r ix e)
forall ix (m :: * -&gt; *).
(Index ix, PrimMonad m) =&gt;
Comp -&gt; MArray (PrimState m) S ix e -&gt; m (Array S ix e)
</span><a href="Data.Massiv.Core.Common.html#unsafeFreeze"><span class="hs-identifier hs-var">unsafeFreeze</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array S ix e -&gt; Comp
forall r ix e. Strategy r =&gt; Array r ix e -&gt; Comp
forall ix e. Array S ix e -&gt; Comp
</span><a href="Data.Massiv.Core.Common.html#getComp"><span class="hs-identifier hs-var">getComp</span></a></span><span> </span><span class="annot"><span class="annottext">Array S ix e
</span><a href="#local-6989586621679284562"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArray RealWorld S ix e
MArray (PrimState IO) S ix e
</span><a href="#local-6989586621679284564"><span class="hs-identifier hs-var">marr</span></a></span><span>
</span><span id="line-257"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Manifest.html#mallocCopy"><span class="hs-pragma hs-type">mallocCopy</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-258"></span></pre></body></html>