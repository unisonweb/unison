<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span class="hs-cpp">

#ifdef TRUSTWORTHY
</span><span class="hs-pragma">{-# LANGUAGE Trustworthy #-}</span><span> </span><span class="hs-comment">-- vector, hashable</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">
#include &quot;lens-common.h&quot;
</span><span>
</span><span id="line-12"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Module      :  Control.Lens.Indexed</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Copyright   :  (C) 2012-16 Edward Kmett</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE)</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Stability   :  provisional</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- Portability :  Rank2Types</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- (The classes in here need to be defined together for @DefaultSignatures@ to work.)</span><span>
</span><span id="line-22"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Lens.Indexed</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">(</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexing</span></span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier">Indexable</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Conjoined"><span class="hs-identifier">Conjoined</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier">Indexed</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#%3C."><span class="hs-operator">(&lt;.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#%3C.%3E"><span class="hs-operator">(&lt;.&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#.%3E"><span class="hs-operator">(.&gt;)</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#selfIndex"><span class="hs-identifier">selfIndex</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#reindexed"><span class="hs-identifier">reindexed</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#icompose"><span class="hs-identifier">icompose</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#indexing"><span class="hs-identifier">indexing</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#indexing64"><span class="hs-identifier">indexing64</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexed Functors</span></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FunctorWithIndex</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Indexed Functor Combinators</span></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#imapped"><span class="hs-identifier">imapped</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexed Foldables</span></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FoldableWithIndex</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Indexed Foldable Combinators</span></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#ifolded"><span class="hs-identifier">ifolded</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">iany</span></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">iall</span></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">inone</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">none</span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">itraverse_</span></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ifor_</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">imapM_</span></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">iforM_</span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">iconcatMap</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ifind</span></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ifoldrM</span></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ifoldlM</span></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">itoList</span></span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Converting to Folds</span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#withIndex"><span class="hs-identifier">withIndex</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#asIndex"><span class="hs-identifier">asIndex</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Restricting by Index</span></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#indices"><span class="hs-identifier">indices</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#index"><span class="hs-identifier">index</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexed Traversables</span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TraversableWithIndex</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexed Traversable Combinators</span></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-identifier">itraversed</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ifor</span></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">imapM</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">iforM</span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">imapAccumR</span></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">imapAccumL</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexed Folds with Reified Monoid</span></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#ifoldMapBy"><span class="hs-identifier">ifoldMapBy</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#ifoldMapByOf"><span class="hs-identifier">ifoldMapByOf</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Indexed Traversals with Reified Applicative</span></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraverseBy"><span class="hs-identifier">itraverseBy</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraverseByOf"><span class="hs-identifier">itraverseByOf</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.WithIndex</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable.WithIndex</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable.WithIndex</span></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Fold.html"><span class="hs-identifier">Control.Lens.Fold</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html"><span class="hs-identifier">Control.Lens.Getter</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Fold.html"><span class="hs-identifier">Control.Lens.Internal.Fold</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html"><span class="hs-identifier">Control.Lens.Internal.Indexed</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Prelude.html"><span class="hs-identifier">Control.Lens.Internal.Prelude</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html"><span class="hs-identifier">Control.Lens.Setter</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Traversal.html"><span class="hs-identifier">Control.Lens.Traversal</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Lens.Type.html"><span class="hs-identifier">Control.Lens.Type</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Reflection</span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Lazy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Seq</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Vector</span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntMap</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Vector</span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">9</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#%3C.%3E"><span class="hs-operator hs-type">&lt;.&gt;</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-type">&lt;.</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-type">.&gt;</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XNoOverloadedStrings</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Lens</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- &gt;&gt;&gt; import qualified Data.Map as Map</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- | Compose an 'Indexed' function with a non-indexed function.</span><span>
</span><span id="line-114"></span><span class="hs-comment">--</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- Mnemonically, the @&lt;@ points to the indexing we want to preserve.</span><span>
</span><span id="line-116"></span><span class="hs-comment">--</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- &gt;&gt;&gt; let nestedMap = (fmap Map.fromList . Map.fromList) [(1, [(10, &quot;one,ten&quot;), (20, &quot;one,twenty&quot;)]), (2, [(30, &quot;two,thirty&quot;), (40,&quot;two,forty&quot;)])]</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- &gt;&gt;&gt; nestedMap^..(itraversed&lt;.itraversed).withIndex</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- [(1,&quot;one,ten&quot;),(1,&quot;one,twenty&quot;),(2,&quot;two,thirty&quot;),(2,&quot;two,forty&quot;)]</span><span>
</span><span id="line-120"></span><span id="local-6989586621679364050"><span id="local-6989586621679364051"><span id="local-6989586621679364053"><span id="local-6989586621679364054"><span id="local-6989586621679364056"><span id="local-6989586621679364057"><span id="local-6989586621679364058"><span class="annot"><a href="Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-type">(&lt;.)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364050"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364051"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364050"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364053"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364054"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364056"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364057"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364058"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364053"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364054"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364051"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364057"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364058"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364056"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-121"></span><span id="%3C."><span class="annot"><span class="annottext">&lt;. :: forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var hs-var">(&lt;.)</span></a></span></span><span> </span><span id="local-6989586621679364388"><span class="annot"><span class="annottext">Indexed i s t -&gt; r
</span><a href="#local-6989586621679364388"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679364389"><span class="annot"><span class="annottext">(a -&gt; b) -&gt; s -&gt; t
</span><a href="#local-6989586621679364389"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679364390"><span class="annot"><span class="annottext">p a b
</span><a href="#local-6989586621679364390"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Indexed i s t -&gt; r
</span><a href="#local-6989586621679364388"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed i s t -&gt; r)
-&gt; ((i -&gt; s -&gt; t) -&gt; Indexed i s t) -&gt; (i -&gt; s -&gt; t) -&gt; r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(i -&gt; s -&gt; t) -&gt; Indexed i s t
forall i a b. (i -&gt; a -&gt; b) -&gt; Indexed i a b
</span><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-var">Indexed</span></a></span><span> </span><span class="annot"><span class="annottext">((i -&gt; s -&gt; t) -&gt; r) -&gt; (i -&gt; s -&gt; t) -&gt; r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; s -&gt; t
</span><a href="#local-6989586621679364389"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; s -&gt; t) -&gt; (i -&gt; a -&gt; b) -&gt; i -&gt; s -&gt; t
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">p a b -&gt; i -&gt; a -&gt; b
forall a b. p a b -&gt; i -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p a b
</span><a href="#local-6989586621679364390"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-122"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;.</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">-- | Compose a non-indexed function with an 'Indexed' function.</span><span>
</span><span id="line-125"></span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- Mnemonically, the @&gt;@ points to the indexing we want to preserve.</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- This is the same as @('.')@.</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- @f '.' g@ (and @f '.&gt;' g@) gives you the index of @g@ unless @g@ is index-preserving, like a</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- 'Prism', 'Iso' or 'Equality', in which case it'll pass through the index of @f@.</span><span>
</span><span id="line-132"></span><span class="hs-comment">--</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- &gt;&gt;&gt; let nestedMap = (fmap Map.fromList . Map.fromList) [(1, [(10, &quot;one,ten&quot;), (20, &quot;one,twenty&quot;)]), (2, [(30, &quot;two,thirty&quot;), (40,&quot;two,forty&quot;)])]</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- &gt;&gt;&gt; nestedMap^..(itraversed.&gt;itraversed).withIndex</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- [(10,&quot;one,ten&quot;),(20,&quot;one,twenty&quot;),(30,&quot;two,thirty&quot;),(40,&quot;two,forty&quot;)]</span><span>
</span><span id="line-136"></span><span id="local-6989586621679364396"><span id="local-6989586621679364397"><span id="local-6989586621679364398"><span class="annot"><a href="Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-type">(.&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364396"><span class="hs-identifier hs-type">st</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364397"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364398"><span class="hs-identifier hs-type">kab</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364396"><span class="hs-identifier hs-type">st</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364398"><span class="hs-identifier hs-type">kab</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364397"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-137"></span><span id=".%3E"><span class="annot"><span class="annottext">.&gt; :: forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var hs-var">(.&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(st -&gt; r) -&gt; (kab -&gt; st) -&gt; kab -&gt; r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">(.)</span></span><span>
</span><span id="line-138"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">.&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | Use a value itself as its own index. This is essentially an indexed version of 'id'.</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- Note: When used to modify the value, this can break the index requirements assumed by 'indices' and similar,</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- so this is only properly an 'IndexedGetter', but it can be used as more.</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- 'selfIndex' ::&#160;'IndexedGetter' a a b</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-148"></span><span id="local-6989586621679364082"><span id="local-6989586621679364083"><span id="local-6989586621679364084"><span class="annot"><a href="Control.Lens.Indexed.html#selfIndex"><span class="hs-identifier hs-type">selfIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364082"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364083"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364083"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364082"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364084"><span class="hs-identifier hs-type">fb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364082"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364084"><span class="hs-identifier hs-type">fb</span></a></span></span></span></span><span>
</span><span id="line-149"></span><span id="selfIndex"><span class="annot"><span class="annottext">selfIndex :: forall a (p :: * -&gt; * -&gt; *) fb. Indexable a p =&gt; p a fb -&gt; a -&gt; fb
</span><a href="Control.Lens.Indexed.html#selfIndex"><span class="hs-identifier hs-var hs-var">selfIndex</span></a></span></span><span> </span><span id="local-6989586621679364403"><span class="annot"><span class="annottext">p a fb
</span><a href="#local-6989586621679364403"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679364404"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364404"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p a fb -&gt; a -&gt; a -&gt; fb
forall a b. p a b -&gt; a -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p a fb
</span><a href="#local-6989586621679364403"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364404"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364404"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-150"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#selfIndex"><span class="hs-pragma hs-type">selfIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="annot"><span class="hs-comment">-- | Remap the index.</span></span><span>
</span><span id="line-153"></span><span id="local-6989586621679364088"><span id="local-6989586621679364089"><span id="local-6989586621679364090"><span id="local-6989586621679364091"><span id="local-6989586621679364092"><span id="local-6989586621679364093"><span class="annot"><a href="Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-type">reindexed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364088"><span class="hs-identifier hs-type">j</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364089"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364090"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364088"><span class="hs-identifier hs-type">j</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364090"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364091"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364092"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364093"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364089"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364091"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364092"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364093"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-154"></span><span id="reindexed"><span class="annot"><span class="annottext">reindexed :: forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var hs-var">reindexed</span></a></span></span><span> </span><span id="local-6989586621679364407"><span class="annot"><span class="annottext">i -&gt; j
</span><a href="#local-6989586621679364407"><span class="hs-identifier hs-var">ij</span></a></span></span><span> </span><span id="local-6989586621679364408"><span class="annot"><span class="annottext">Indexed i a b -&gt; r
</span><a href="#local-6989586621679364408"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679364409"><span class="annot"><span class="annottext">p a b
</span><a href="#local-6989586621679364409"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Indexed i a b -&gt; r
</span><a href="#local-6989586621679364408"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed i a b -&gt; r)
-&gt; ((i -&gt; a -&gt; b) -&gt; Indexed i a b) -&gt; (i -&gt; a -&gt; b) -&gt; r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(i -&gt; a -&gt; b) -&gt; Indexed i a b
forall i a b. (i -&gt; a -&gt; b) -&gt; Indexed i a b
</span><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-var">Indexed</span></a></span><span> </span><span class="annot"><span class="annottext">((i -&gt; a -&gt; b) -&gt; r) -&gt; (i -&gt; a -&gt; b) -&gt; r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">p a b -&gt; j -&gt; a -&gt; b
forall a b. p a b -&gt; j -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p a b
</span><a href="#local-6989586621679364409"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(j -&gt; a -&gt; b) -&gt; (i -&gt; j) -&gt; i -&gt; a -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; j
</span><a href="#local-6989586621679364407"><span class="hs-identifier hs-var">ij</span></a></span><span>
</span><span id="line-155"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#reindexed"><span class="hs-pragma hs-type">reindexed</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- | Composition of 'Indexed' functions.</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- Mnemonically, the @\&lt;@ and @\&gt;@ points to the fact that we want to preserve the indices.</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- &gt;&gt;&gt; let nestedMap = (fmap Map.fromList . Map.fromList) [(1, [(10, &quot;one,ten&quot;), (20, &quot;one,twenty&quot;)]), (2, [(30, &quot;two,thirty&quot;), (40,&quot;two,forty&quot;)])]</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- &gt;&gt;&gt; nestedMap^..(itraversed&lt;.&gt;itraversed).withIndex</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- [((1,10),&quot;one,ten&quot;),((1,20),&quot;one,twenty&quot;),((2,30),&quot;two,thirty&quot;),((2,40),&quot;two,forty&quot;)]</span><span>
</span><span id="line-164"></span><span id="local-6989586621679364100"><span id="local-6989586621679364101"><span id="local-6989586621679364102"><span id="local-6989586621679364103"><span id="local-6989586621679364104"><span id="local-6989586621679364105"><span id="local-6989586621679364106"><span id="local-6989586621679364107"><span class="annot"><a href="Control.Lens.Indexed.html#%3C.%3E"><span class="hs-operator hs-type">(&lt;.&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364100"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679364101"><span class="hs-identifier hs-type">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679364102"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364100"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364103"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364104"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364105"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364101"><span class="hs-identifier hs-type">j</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364106"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364107"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364103"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364104"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364102"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364106"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364107"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364105"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-165"></span><span id="local-6989586621679364412"><span class="annot"><span class="annottext">Indexed i s t -&gt; r
</span><a href="#local-6989586621679364412"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="%3C.%3E"><span class="annot"><span class="annottext">&lt;.&gt; :: forall i j (p :: * -&gt; * -&gt; *) s t r a b.
Indexable (i, j) p =&gt;
(Indexed i s t -&gt; r) -&gt; (Indexed j a b -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="Control.Lens.Indexed.html#%3C.%3E"><span class="hs-operator hs-var hs-var">&lt;.&gt;</span></a></span></span><span> </span><span id="local-6989586621679364413"><span class="annot"><span class="annottext">Indexed j a b -&gt; s -&gt; t
</span><a href="#local-6989586621679364413"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(i -&gt; j -&gt; (i, j))
-&gt; (Indexed i s t -&gt; r) -&gt; (Indexed j a b -&gt; s -&gt; t) -&gt; p a b -&gt; r
forall p (c :: * -&gt; * -&gt; *) i j s t r a b.
Indexable p c =&gt;
(i -&gt; j -&gt; p)
-&gt; (Indexed i s t -&gt; r) -&gt; (Indexed j a b -&gt; s -&gt; t) -&gt; c a b -&gt; r
</span><a href="Control.Lens.Indexed.html#icompose"><span class="hs-identifier hs-var">icompose</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Indexed i s t -&gt; r
</span><a href="#local-6989586621679364412"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed j a b -&gt; s -&gt; t
</span><a href="#local-6989586621679364413"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-166"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;.&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><span class="hs-comment">-- | Composition of 'Indexed' functions with a user supplied function for combining indices.</span></span><span>
</span><span id="line-169"></span><span id="local-6989586621679364116"><span id="local-6989586621679364117"><span id="local-6989586621679364118"><span id="local-6989586621679364119"><span id="local-6989586621679364120"><span id="local-6989586621679364121"><span id="local-6989586621679364122"><span id="local-6989586621679364123"><span id="local-6989586621679364124"><span class="annot"><a href="Control.Lens.Indexed.html#icompose"><span class="hs-identifier hs-type">icompose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364116"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364117"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364118"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364119"><span class="hs-identifier hs-type">j</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364116"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364118"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364120"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364121"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364122"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364119"><span class="hs-identifier hs-type">j</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364123"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364124"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364120"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364121"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364117"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364123"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364124"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364122"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-170"></span><span id="icompose"><span class="annot"><span class="annottext">icompose :: forall p (c :: * -&gt; * -&gt; *) i j s t r a b.
Indexable p c =&gt;
(i -&gt; j -&gt; p)
-&gt; (Indexed i s t -&gt; r) -&gt; (Indexed j a b -&gt; s -&gt; t) -&gt; c a b -&gt; r
</span><a href="Control.Lens.Indexed.html#icompose"><span class="hs-identifier hs-var hs-var">icompose</span></a></span></span><span> </span><span id="local-6989586621679364416"><span class="annot"><span class="annottext">i -&gt; j -&gt; p
</span><a href="#local-6989586621679364416"><span class="hs-identifier hs-var">ijk</span></a></span></span><span> </span><span id="local-6989586621679364417"><span class="annot"><span class="annottext">Indexed i s t -&gt; r
</span><a href="#local-6989586621679364417"><span class="hs-identifier hs-var">istr</span></a></span></span><span> </span><span id="local-6989586621679364418"><span class="annot"><span class="annottext">Indexed j a b -&gt; s -&gt; t
</span><a href="#local-6989586621679364418"><span class="hs-identifier hs-var">jabst</span></a></span></span><span> </span><span id="local-6989586621679364419"><span class="annot"><span class="annottext">c a b
</span><a href="#local-6989586621679364419"><span class="hs-identifier hs-var">cab</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Indexed i s t -&gt; r
</span><a href="#local-6989586621679364417"><span class="hs-identifier hs-var">istr</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed i s t -&gt; r)
-&gt; ((i -&gt; s -&gt; t) -&gt; Indexed i s t) -&gt; (i -&gt; s -&gt; t) -&gt; r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(i -&gt; s -&gt; t) -&gt; Indexed i s t
forall i a b. (i -&gt; a -&gt; b) -&gt; Indexed i a b
</span><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-var">Indexed</span></a></span><span> </span><span class="annot"><span class="annottext">((i -&gt; s -&gt; t) -&gt; r) -&gt; (i -&gt; s -&gt; t) -&gt; r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679364420"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364420"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Indexed j a b -&gt; s -&gt; t
</span><a href="#local-6989586621679364418"><span class="hs-identifier hs-var">jabst</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed j a b -&gt; s -&gt; t)
-&gt; ((j -&gt; a -&gt; b) -&gt; Indexed j a b) -&gt; (j -&gt; a -&gt; b) -&gt; s -&gt; t
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(j -&gt; a -&gt; b) -&gt; Indexed j a b
forall i a b. (i -&gt; a -&gt; b) -&gt; Indexed i a b
</span><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-var">Indexed</span></a></span><span> </span><span class="annot"><span class="annottext">((j -&gt; a -&gt; b) -&gt; s -&gt; t) -&gt; (j -&gt; a -&gt; b) -&gt; s -&gt; t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679364421"><span class="annot"><span class="annottext">j
</span><a href="#local-6989586621679364421"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">c a b -&gt; p -&gt; a -&gt; b
forall a b. c a b -&gt; p -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">c a b
</span><a href="#local-6989586621679364419"><span class="hs-identifier hs-var">cab</span></a></span><span> </span><span class="annot"><span class="annottext">(p -&gt; a -&gt; b) -&gt; p -&gt; a -&gt; b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; j -&gt; p
</span><a href="#local-6989586621679364416"><span class="hs-identifier hs-var">ijk</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364420"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">j
</span><a href="#local-6989586621679364421"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-171"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#icompose"><span class="hs-pragma hs-type">icompose</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- Restricting by index</span><span>
</span><span id="line-175"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- | This allows you to filter an 'IndexedFold', 'IndexedGetter', 'IndexedTraversal' or 'IndexedLens' based on a predicate</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- on the indices.</span><span>
</span><span id="line-179"></span><span class="hs-comment">--</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- &gt;&gt;&gt; [&quot;hello&quot;,&quot;the&quot;,&quot;world&quot;,&quot;!!!&quot;]^..traversed.indices even</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- [&quot;hello&quot;,&quot;world&quot;]</span><span>
</span><span id="line-182"></span><span class="hs-comment">--</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- &gt;&gt;&gt; over (traversed.indices (&gt;0)) Prelude.reverse $ [&quot;He&quot;,&quot;was&quot;,&quot;stressed&quot;,&quot;o_O&quot;]</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- [&quot;He&quot;,&quot;saw&quot;,&quot;desserts&quot;,&quot;O_o&quot;]</span><span>
</span><span id="line-185"></span><span id="local-6989586621679364136"><span id="local-6989586621679364137"><span id="local-6989586621679364138"><span id="local-6989586621679364139"><span class="annot"><a href="Control.Lens.Indexed.html#indices"><span class="hs-identifier hs-type">indices</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364136"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364137"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679364138"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364136"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#Optical%27"><span class="hs-identifier hs-type">Optical'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364137"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364136"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679364138"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364139"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364139"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-186"></span><span id="indices"><span class="annot"><span class="annottext">indices :: forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) a.
(Indexable i p, Applicative f) =&gt;
(i -&gt; Bool) -&gt; Optical' p (Indexed i) f a a
</span><a href="Control.Lens.Indexed.html#indices"><span class="hs-identifier hs-var hs-var">indices</span></a></span></span><span> </span><span id="local-6989586621679364427"><span class="annot"><span class="annottext">i -&gt; Bool
</span><a href="#local-6989586621679364427"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679364428"><span class="annot"><span class="annottext">p a (f a)
</span><a href="#local-6989586621679364428"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(i -&gt; a -&gt; f a) -&gt; Indexed i a (f a)
forall i a b. (i -&gt; a -&gt; b) -&gt; Indexed i a b
</span><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-var">Indexed</span></a></span><span> </span><span class="annot"><span class="annottext">((i -&gt; a -&gt; f a) -&gt; Indexed i a (f a))
-&gt; (i -&gt; a -&gt; f a) -&gt; Indexed i a (f a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679364429"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364429"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679364430"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364430"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">i -&gt; Bool
</span><a href="#local-6989586621679364427"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364429"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">p a (f a) -&gt; i -&gt; a -&gt; f a
forall a b. p a b -&gt; i -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p a (f a)
</span><a href="#local-6989586621679364428"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364429"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364430"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364430"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-187"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#indices"><span class="hs-pragma hs-type">indices</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- | This allows you to filter an 'IndexedFold', 'IndexedGetter', 'IndexedTraversal' or 'IndexedLens' based on an index.</span><span>
</span><span id="line-190"></span><span class="hs-comment">--</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- &gt;&gt;&gt; [&quot;hello&quot;,&quot;the&quot;,&quot;world&quot;,&quot;!!!&quot;]^?traversed.index 2</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- Just &quot;world&quot;</span><span>
</span><span id="line-193"></span><span id="local-6989586621679364147"><span id="local-6989586621679364148"><span id="local-6989586621679364149"><span id="local-6989586621679364150"><span class="annot"><a href="Control.Lens.Indexed.html#index"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364147"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364148"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364147"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679364149"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364147"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#Optical%27"><span class="hs-identifier hs-type">Optical'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364148"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-type">Indexed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364147"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679364149"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364150"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364150"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-194"></span><span id="index"><span class="annot"><span class="annottext">index :: forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) a.
(Indexable i p, Eq i, Applicative f) =&gt;
i -&gt; Optical' p (Indexed i) f a a
</span><a href="Control.Lens.Indexed.html#index"><span class="hs-identifier hs-var hs-var">index</span></a></span></span><span> </span><span id="local-6989586621679364437"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364437"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621679364438"><span class="annot"><span class="annottext">p a (f a)
</span><a href="#local-6989586621679364438"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(i -&gt; a -&gt; f a) -&gt; Indexed i a (f a)
forall i a b. (i -&gt; a -&gt; b) -&gt; Indexed i a b
</span><a href="Control.Lens.Internal.Indexed.html#Indexed"><span class="hs-identifier hs-var">Indexed</span></a></span><span> </span><span class="annot"><span class="annottext">((i -&gt; a -&gt; f a) -&gt; Indexed i a (f a))
-&gt; (i -&gt; a -&gt; f a) -&gt; Indexed i a (f a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679364439"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364439"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679364440"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364440"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364437"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">i -&gt; i -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364439"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">p a (f a) -&gt; i -&gt; a -&gt; f a
forall a b. p a b -&gt; i -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p a (f a)
</span><a href="#local-6989586621679364438"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364439"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364440"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364440"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-195"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#index"><span class="hs-pragma hs-type">index</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- FunctorWithIndex</span><span>
</span><span id="line-200"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-- | The 'IndexedSetter' for a 'FunctorWithIndex'.</span><span>
</span><span id="line-203"></span><span class="hs-comment">--</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- If you don't need access to the index, then 'mapped' is more flexible in what it accepts.</span><span>
</span><span id="line-205"></span><span id="local-6989586621679364156"><span id="local-6989586621679364157"><span id="local-6989586621679364159"><span id="local-6989586621679364160"><span class="annot"><a href="Control.Lens.Indexed.html#imapped"><span class="hs-identifier hs-type">imapped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FunctorWithIndex</span></span><span> </span><span class="annot"><a href="#local-6989586621679364156"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364157"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#IndexedSetter"><span class="hs-identifier hs-type">IndexedSetter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364156"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364157"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364159"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364157"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364160"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679364159"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364160"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-206"></span><span id="imapped"><span class="annot"><span class="annottext">imapped :: forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
IndexedSetter i (f a) (f b) a b
</span><a href="Control.Lens.Indexed.html#imapped"><span class="hs-identifier hs-var hs-var">imapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((p ~ (-&gt;)) =&gt; (a -&gt; f b) -&gt; f a -&gt; f (f b))
-&gt; (p a (f b) -&gt; f a -&gt; f (f b)) -&gt; p a (f b) -&gt; f a -&gt; f (f b)
forall (p :: * -&gt; * -&gt; *) (q :: * -&gt; * -&gt; *) a b r.
Conjoined p =&gt;
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
forall (q :: * -&gt; * -&gt; *) a b r.
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
</span><a href="Control.Lens.Internal.Indexed.html#conjoined"><span class="hs-identifier hs-var">conjoined</span></a></span><span> </span><span class="annot"><span class="annottext">(p ~ (-&gt;)) =&gt; (a -&gt; f b) -&gt; f a -&gt; f (f b)
(a -&gt; f b) -&gt; f a -&gt; f (f b)
Setter (f a) (f b) a b
forall (f :: * -&gt; *) a b. Functor f =&gt; Setter (f a) (f b) a b
</span><a href="Control.Lens.Setter.html#mapped"><span class="hs-identifier hs-var">mapped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((i -&gt; a -&gt; b) -&gt; f a -&gt; f b) -&gt; IndexedSetter i (f a) (f b) a b
forall i a b s t.
((i -&gt; a -&gt; b) -&gt; s -&gt; t) -&gt; IndexedSetter i s t a b
</span><a href="Control.Lens.Setter.html#isets"><span class="hs-identifier hs-var">isets</span></a></span><span> </span><span class="annot"><span class="annottext">(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
forall a b. (i -&gt; a -&gt; b) -&gt; f a -&gt; f b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">imap</span></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#imapped"><span class="hs-pragma hs-type">imapped</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- FoldableWithIndex</span><span>
</span><span id="line-211"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | The 'IndexedFold' of a 'FoldableWithIndex' container.</span><span>
</span><span id="line-214"></span><span class="hs-comment">--</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- @'ifolded' '.' 'asIndex'@ is a fold over the keys of a 'FoldableWithIndex'.</span><span>
</span><span id="line-216"></span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- &gt;&gt;&gt; Data.Map.fromList [(2, &quot;hello&quot;), (1, &quot;world&quot;)]^..ifolded.asIndex</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- [1,2]</span><span>
</span><span id="line-219"></span><span id="local-6989586621679364188"><span id="local-6989586621679364189"><span id="local-6989586621679364191"><span class="annot"><a href="Control.Lens.Indexed.html#ifolded"><span class="hs-identifier hs-type">ifolded</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FoldableWithIndex</span></span><span> </span><span class="annot"><a href="#local-6989586621679364188"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364189"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#IndexedFold"><span class="hs-identifier hs-type">IndexedFold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364188"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364189"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364191"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679364191"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-220"></span><span id="ifolded"><span class="annot"><span class="annottext">ifolded :: forall i (f :: * -&gt; *) a.
FoldableWithIndex i f =&gt;
IndexedFold i (f a) a
</span><a href="Control.Lens.Indexed.html#ifolded"><span class="hs-identifier hs-var hs-var">ifolded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((p ~ (-&gt;)) =&gt; (a -&gt; f a) -&gt; f a -&gt; f (f a))
-&gt; (p a (f a) -&gt; f a -&gt; f (f a)) -&gt; p a (f a) -&gt; f a -&gt; f (f a)
forall (p :: * -&gt; * -&gt; *) (q :: * -&gt; * -&gt; *) a b r.
Conjoined p =&gt;
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
forall (q :: * -&gt; * -&gt; *) a b r.
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
</span><a href="Control.Lens.Internal.Indexed.html#conjoined"><span class="hs-identifier hs-var">conjoined</span></a></span><span> </span><span class="annot"><span class="annottext">(p ~ (-&gt;)) =&gt; (a -&gt; f a) -&gt; f a -&gt; f (f a)
(a -&gt; f a) -&gt; f a -&gt; f (f a)
forall (f :: * -&gt; *) a. Foldable f =&gt; IndexedFold Int (f a) a
IndexedFold Int (f a) a
</span><a href="Control.Lens.Fold.html#folded"><span class="hs-identifier hs-var">folded</span></a></span><span> </span><span class="annot"><span class="annottext">((p a (f a) -&gt; f a -&gt; f (f a)) -&gt; p a (f a) -&gt; f a -&gt; f (f a))
-&gt; (p a (f a) -&gt; f a -&gt; f (f a)) -&gt; p a (f a) -&gt; f a -&gt; f (f a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679364485"><span class="annot"><span class="annottext">p a (f a)
</span><a href="#local-6989586621679364485"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a -&gt; f (f a)
forall (f :: * -&gt; *) a b.
(Functor f, Contravariant f) =&gt;
f a -&gt; f b
</span><span class="hs-identifier hs-var">phantom</span></span><span> </span><span class="annot"><span class="annottext">(f a -&gt; f (f a)) -&gt; (f a -&gt; f a) -&gt; f a -&gt; f (f a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Folding f a -&gt; f a
forall (f :: * -&gt; *) a. Folding f a -&gt; f a
</span><a href="Control.Lens.Internal.Fold.html#getFolding"><span class="hs-identifier hs-var">getFolding</span></a></span><span> </span><span class="annot"><span class="annottext">(Folding f a -&gt; f a) -&gt; (f a -&gt; Folding f a) -&gt; f a -&gt; f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(i -&gt; a -&gt; Folding f a) -&gt; f a -&gt; Folding f a
forall m a. Monoid m =&gt; (i -&gt; a -&gt; m) -&gt; f a -&gt; m
forall i (f :: * -&gt; *) m a.
(FoldableWithIndex i f, Monoid m) =&gt;
(i -&gt; a -&gt; m) -&gt; f a -&gt; m
</span><span class="hs-identifier hs-var">ifoldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679364489"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364489"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a -&gt; Folding f a
forall (f :: * -&gt; *) a. f a -&gt; Folding f a
</span><a href="Control.Lens.Internal.Fold.html#Folding"><span class="hs-identifier hs-var">Folding</span></a></span><span> </span><span class="annot"><span class="annottext">(f a -&gt; Folding f a) -&gt; (a -&gt; f a) -&gt; a -&gt; Folding f a
forall a b c (q :: * -&gt; * -&gt; *).
Coercible c b =&gt;
q b c -&gt; (a -&gt; b) -&gt; a -&gt; c
forall (p :: * -&gt; * -&gt; *) a b c (q :: * -&gt; * -&gt; *).
(Profunctor p, Coercible c b) =&gt;
q b c -&gt; p a b -&gt; p a c
</span><span class="hs-operator hs-var">#.</span></span><span> </span><span class="annot"><span class="annottext">p a (f a) -&gt; i -&gt; a -&gt; f a
forall a b. p a b -&gt; i -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p a (f a)
</span><a href="#local-6989586621679364485"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364489"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#ifolded"><span class="hs-pragma hs-type">ifolded</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- TraversableWithIndex</span><span>
</span><span id="line-225"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="annot"><span class="hs-comment">-- | The 'IndexedTraversal' of a 'TraversableWithIndex' container.</span></span><span>
</span><span id="line-228"></span><span id="local-6989586621679364223"><span id="local-6989586621679364224"><span id="local-6989586621679364226"><span id="local-6989586621679364227"><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-identifier hs-type">itraversed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraversableWithIndex</span></span><span> </span><span class="annot"><a href="#local-6989586621679364223"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364224"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#IndexedTraversal"><span class="hs-identifier hs-type">IndexedTraversal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364223"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364224"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364226"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364224"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364227"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679364226"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364227"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-229"></span><span id="itraversed"><span class="annot"><span class="annottext">itraversed :: forall i (t :: * -&gt; *) a b.
TraversableWithIndex i t =&gt;
IndexedTraversal i (t a) (t b) a b
</span><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-identifier hs-var hs-var">itraversed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((p ~ (-&gt;)) =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (p a (f b) -&gt; t a -&gt; f (t b)) -&gt; p a (f b) -&gt; t a -&gt; f (t b)
forall (p :: * -&gt; * -&gt; *) (q :: * -&gt; * -&gt; *) a b r.
Conjoined p =&gt;
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
forall (q :: * -&gt; * -&gt; *) a b r.
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
</span><a href="Control.Lens.Internal.Indexed.html#conjoined"><span class="hs-identifier hs-var">conjoined</span></a></span><span> </span><span class="annot"><span class="annottext">(p ~ (-&gt;)) =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b)
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(i -&gt; a -&gt; f b) -&gt; t a -&gt; f (t b)
forall i (t :: * -&gt; *) (f :: * -&gt; *) a b.
(TraversableWithIndex i t, Applicative f) =&gt;
(i -&gt; a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(i -&gt; a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">itraverse</span></span><span> </span><span class="annot"><span class="annottext">((i -&gt; a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (p a (f b) -&gt; i -&gt; a -&gt; f b) -&gt; p a (f b) -&gt; t a -&gt; f (t b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">p a (f b) -&gt; i -&gt; a -&gt; f b
forall a b. p a b -&gt; i -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">[</span><span class="hs-pragma">0</span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- Instances</span><span>
</span><span id="line-234"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-237"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; mapList&quot;</span></span><span>    </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364507"><span id="local-6989586621679364508"><span class="annot"><a href="Control.Lens.Setter.html#sets"><span class="hs-pragma hs-type">sets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">fmap</span></span><span>        </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#ASetter"><span class="hs-pragma hs-type">ASetter</span></a></span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679364507"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">]</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679364508"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="#local-6989586621679364507"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364508"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-238"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; imapList&quot;</span></span><span>   </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364511"><span id="local-6989586621679364512"><span class="annot"><a href="Control.Lens.Setter.html#isets"><span class="hs-pragma hs-type">isets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">imap</span></span><span>       </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#AnIndexedSetter"><span class="hs-pragma hs-type">AnIndexedSetter</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679364511"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">]</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679364512"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="#local-6989586621679364511"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364512"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-239"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; foldrList&quot;</span></span><span>  </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364514"><span id="local-6989586621679364515"><span class="annot"><a href="Control.Lens.Fold.html#foldring"><span class="hs-pragma hs-type">foldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">foldr</span></span><span>   </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#Getting"><span class="hs-pragma hs-type">Getting</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364514"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679364515"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="#local-6989586621679364515"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-240"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; ifoldrList&quot;</span></span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364520"><span id="local-6989586621679364521"><span class="annot"><a href="Control.Lens.Fold.html#ifoldring"><span class="hs-pragma hs-type">ifoldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">ifoldr</span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#IndexedGetting"><span class="hs-pragma hs-type">IndexedGetting</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364520"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679364521"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="#local-6989586621679364521"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-241"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-244"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; mapIntMap&quot;</span></span><span>    </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364524"><span id="local-6989586621679364525"><span class="annot"><a href="Control.Lens.Setter.html#sets"><span class="hs-pragma hs-type">sets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IntMap.map</span></span><span>               </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#ASetter"><span class="hs-pragma hs-type">ASetter</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364524"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364525"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364524"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364525"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-245"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; imapIntMap&quot;</span></span><span>   </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364527"><span id="local-6989586621679364528"><span class="annot"><a href="Control.Lens.Setter.html#isets"><span class="hs-pragma hs-type">isets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IntMap.mapWithKey</span></span><span>       </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#AnIndexedSetter"><span class="hs-pragma hs-type">AnIndexedSetter</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364527"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364528"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364527"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364528"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-246"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; foldrIntMap&quot;</span></span><span>  </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364530"><span id="local-6989586621679364531"><span class="annot"><a href="Control.Lens.Fold.html#foldring"><span class="hs-pragma hs-type">foldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IntMap.foldr</span></span><span>         </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#Getting"><span class="hs-pragma hs-type">Getting</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364530"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364531"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364531"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-247"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; ifoldrIntMap&quot;</span></span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364533"><span id="local-6989586621679364534"><span class="annot"><a href="Control.Lens.Fold.html#ifoldring"><span class="hs-pragma hs-type">ifoldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IntMap.foldrWithKey</span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#IndexedGetting"><span class="hs-pragma hs-type">IndexedGetting</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364533"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364534"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364534"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-248"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-251"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; mapMap&quot;</span></span><span>    </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364536"><span id="local-6989586621679364537"><span id="local-6989586621679364538"><span class="annot"><a href="Control.Lens.Setter.html#sets"><span class="hs-pragma hs-type">sets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Map.map</span></span><span>               </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#ASetter"><span class="hs-pragma hs-type">ASetter</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679364536"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364537"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679364536"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364538"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364537"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364538"><span class="hs-pragma hs-type">b</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-252"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; imapMap&quot;</span></span><span>   </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364540"><span id="local-6989586621679364541"><span id="local-6989586621679364542"><span class="annot"><a href="Control.Lens.Setter.html#isets"><span class="hs-pragma hs-type">isets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Map.mapWithKey</span></span><span>       </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#AnIndexedSetter"><span class="hs-pragma hs-type">AnIndexedSetter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364540"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679364540"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364541"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679364540"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364542"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364541"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364542"><span class="hs-pragma hs-type">b</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-253"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; foldrMap&quot;</span></span><span>  </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364544"><span id="local-6989586621679364545"><span id="local-6989586621679364546"><span class="annot"><a href="Control.Lens.Fold.html#foldring"><span class="hs-pragma hs-type">foldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Map.foldr</span></span><span>         </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#Getting"><span class="hs-pragma hs-type">Getting</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364544"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679364545"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364546"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364546"><span class="hs-pragma hs-type">a</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-254"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; ifoldrMap&quot;</span></span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364548"><span id="local-6989586621679364549"><span id="local-6989586621679364550"><span class="annot"><a href="Control.Lens.Fold.html#ifoldring"><span class="hs-pragma hs-type">ifoldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Map.foldrWithKey</span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#IndexedGetting"><span class="hs-pragma hs-type">IndexedGetting</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364548"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364549"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679364548"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364550"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364550"><span class="hs-pragma hs-type">a</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-255"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-258"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; mapHashMap&quot;</span></span><span>    </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364552"><span id="local-6989586621679364553"><span id="local-6989586621679364554"><span class="annot"><a href="Control.Lens.Setter.html#sets"><span class="hs-pragma hs-type">sets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">HashMap.map</span></span><span>               </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#ASetter"><span class="hs-pragma hs-type">ASetter</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364552"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364553"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364552"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364554"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364553"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364554"><span class="hs-pragma hs-type">b</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-259"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; imapHashMap&quot;</span></span><span>   </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364556"><span id="local-6989586621679364557"><span id="local-6989586621679364558"><span class="annot"><a href="Control.Lens.Setter.html#isets"><span class="hs-pragma hs-type">isets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">HashMap.mapWithKey</span></span><span>       </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#AnIndexedSetter"><span class="hs-pragma hs-type">AnIndexedSetter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364556"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364556"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364557"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364556"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364558"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364557"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364558"><span class="hs-pragma hs-type">b</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-260"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; foldrHashMap&quot;</span></span><span>  </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364560"><span id="local-6989586621679364561"><span id="local-6989586621679364562"><span class="annot"><a href="Control.Lens.Fold.html#foldring"><span class="hs-pragma hs-type">foldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">HashMap.foldr</span></span><span>         </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#Getting"><span class="hs-pragma hs-type">Getting</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364560"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364561"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364562"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364562"><span class="hs-pragma hs-type">a</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-261"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; ifoldrHashMap&quot;</span></span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364564"><span id="local-6989586621679364565"><span id="local-6989586621679364566"><span class="annot"><a href="Control.Lens.Fold.html#ifoldring"><span class="hs-pragma hs-type">ifoldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">HashMap.foldrWithKey</span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#IndexedGetting"><span class="hs-pragma hs-type">IndexedGetting</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364564"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364565"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679364564"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364566"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364566"><span class="hs-pragma hs-type">a</span></a></span></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-262"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-265"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; mapSeq&quot;</span></span><span>    </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364568"><span id="local-6989586621679364569"><span class="annot"><a href="Control.Lens.Setter.html#sets"><span class="hs-pragma hs-type">sets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">fmap</span></span><span>                    </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#ASetter"><span class="hs-pragma hs-type">ASetter</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364568"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364569"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364568"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364569"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-266"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; imapSeq&quot;</span></span><span>   </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364570"><span id="local-6989586621679364571"><span class="annot"><a href="Control.Lens.Setter.html#isets"><span class="hs-pragma hs-type">isets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Seq.mapWithIndex</span></span><span>       </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#AnIndexedSetter"><span class="hs-pragma hs-type">AnIndexedSetter</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364570"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364571"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364570"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364571"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-267"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; foldrSeq&quot;</span></span><span>  </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364573"><span id="local-6989586621679364574"><span class="annot"><a href="Control.Lens.Fold.html#foldring"><span class="hs-pragma hs-type">foldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">foldr</span></span><span>               </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#Getting"><span class="hs-pragma hs-type">Getting</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364573"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364574"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364574"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-268"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; ifoldrSeq&quot;</span></span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364575"><span id="local-6989586621679364576"><span class="annot"><a href="Control.Lens.Fold.html#ifoldring"><span class="hs-pragma hs-type">ifoldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Seq.foldrWithIndex</span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#IndexedGetting"><span class="hs-pragma hs-type">IndexedGetting</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364575"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679364576"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364576"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-269"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-272"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; mapVector&quot;</span></span><span>    </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364578"><span id="local-6989586621679364579"><span class="annot"><a href="Control.Lens.Setter.html#sets"><span class="hs-pragma hs-type">sets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Vector.map</span></span><span>         </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#ASetter"><span class="hs-pragma hs-type">ASetter</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679364578"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679364579"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364578"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364579"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-273"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; imapVector&quot;</span></span><span>   </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364581"><span id="local-6989586621679364582"><span class="annot"><a href="Control.Lens.Setter.html#isets"><span class="hs-pragma hs-type">isets</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Vector.imap</span></span><span>       </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Setter.html#AnIndexedSetter"><span class="hs-pragma hs-type">AnIndexedSetter</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679364581"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679364582"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364581"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364582"><span class="hs-pragma hs-type">b</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-274"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; foldrVector&quot;</span></span><span>  </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364584"><span id="local-6989586621679364585"><span class="annot"><a href="Control.Lens.Fold.html#foldring"><span class="hs-pragma hs-type">foldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Vector.foldr</span></span><span>   </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#Getting"><span class="hs-pragma hs-type">Getting</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364584"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679364585"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364585"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-275"></span><span class="annot"><span class="hs-pragma">&quot;itraversed -&gt; ifoldrVector&quot;</span></span><span> </span><span class="annot"><a href="Control.Lens.Indexed.html#itraversed"><span class="hs-pragma hs-type">itraversed</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span id="local-6989586621679364587"><span id="local-6989586621679364588"><span class="annot"><a href="Control.Lens.Fold.html#ifoldring"><span class="hs-pragma hs-type">ifoldring</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Vector.ifoldr</span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Control.Lens.Getter.html#IndexedGetting"><span class="hs-pragma hs-type">IndexedGetting</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679364587"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679364588"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679364588"><span class="hs-pragma hs-type">a</span></a></span></span></span><span class="hs-pragma">;</span><span>
</span><span id="line-276"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- Indexed Folds with Reified Monoid</span><span>
</span><span id="line-280"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span id="local-6989586621679364244"><span id="local-6989586621679364245"><span id="local-6989586621679364246"><span id="local-6989586621679364247"><span class="annot"><a href="Control.Lens.Indexed.html#ifoldMapBy"><span class="hs-identifier hs-type">ifoldMapBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FoldableWithIndex</span></span><span> </span><span class="annot"><a href="#local-6989586621679364244"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364245"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364246"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364246"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364246"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364246"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364244"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364247"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364246"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364245"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364247"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364246"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-283"></span><span id="ifoldMapBy"><span class="annot"><span class="annottext">ifoldMapBy :: forall i (t :: * -&gt; *) r a.
FoldableWithIndex i t =&gt;
(r -&gt; r -&gt; r) -&gt; r -&gt; (i -&gt; a -&gt; r) -&gt; t a -&gt; r
</span><a href="Control.Lens.Indexed.html#ifoldMapBy"><span class="hs-identifier hs-var hs-var">ifoldMapBy</span></a></span></span><span> </span><span id="local-6989586621679364591"><span class="annot"><span class="annottext">r -&gt; r -&gt; r
</span><a href="#local-6989586621679364591"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679364592"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679364592"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679364593"><span class="annot"><span class="annottext">i -&gt; a -&gt; r
</span><a href="#local-6989586621679364593"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; r -&gt; r)
-&gt; r
-&gt; (forall s.
    Reifies s (ReifiedMonoid r) =&gt;
    t a -&gt; ReflectedMonoid r s)
-&gt; t a
-&gt; r
forall a t.
(a -&gt; a -&gt; a)
-&gt; a
-&gt; (forall s.
    Reifies s (ReifiedMonoid a) =&gt;
    t -&gt; ReflectedMonoid a s)
-&gt; t
-&gt; a
</span><span class="hs-identifier hs-var">reifyMonoid</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; r -&gt; r
</span><a href="#local-6989586621679364591"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679364592"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(i -&gt; a -&gt; ReflectedMonoid r s) -&gt; t a -&gt; ReflectedMonoid r s
forall m a. Monoid m =&gt; (i -&gt; a -&gt; m) -&gt; t a -&gt; m
forall i (f :: * -&gt; *) m a.
(FoldableWithIndex i f, Monoid m) =&gt;
(i -&gt; a -&gt; m) -&gt; f a -&gt; m
</span><span class="hs-identifier hs-var">ifoldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679364599"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364599"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679364600"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364600"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">r -&gt; ReflectedMonoid r s
forall {k} a (s :: k). a -&gt; ReflectedMonoid a s
</span><span class="hs-identifier hs-var">ReflectedMonoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; a -&gt; r
</span><a href="#local-6989586621679364593"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364599"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364600"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span id="local-6989586621679364265"><span id="local-6989586621679364266"><span id="local-6989586621679364267"><span id="local-6989586621679364268"><span class="annot"><a href="Control.Lens.Indexed.html#ifoldMapByOf"><span class="hs-identifier hs-type">ifoldMapByOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#IndexedFold"><span class="hs-identifier hs-type">IndexedFold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364265"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364266"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364267"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364268"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364268"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364268"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364268"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364265"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364267"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364268"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364266"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364268"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-286"></span><span id="ifoldMapByOf"><span class="annot"><span class="annottext">ifoldMapByOf :: forall i t a r.
IndexedFold i t a -&gt; (r -&gt; r -&gt; r) -&gt; r -&gt; (i -&gt; a -&gt; r) -&gt; t -&gt; r
</span><a href="Control.Lens.Indexed.html#ifoldMapByOf"><span class="hs-identifier hs-var hs-var">ifoldMapByOf</span></a></span></span><span> </span><span id="local-6989586621679364602"><span class="annot"><span class="annottext">IndexedFold i t a
</span><a href="#local-6989586621679364602"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679364603"><span class="annot"><span class="annottext">r -&gt; r -&gt; r
</span><a href="#local-6989586621679364603"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679364604"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679364604"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679364605"><span class="annot"><span class="annottext">i -&gt; a -&gt; r
</span><a href="#local-6989586621679364605"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; r -&gt; r)
-&gt; r
-&gt; (forall s.
    Reifies s (ReifiedMonoid r) =&gt;
    t -&gt; ReflectedMonoid r s)
-&gt; t
-&gt; r
forall a t.
(a -&gt; a -&gt; a)
-&gt; a
-&gt; (forall s.
    Reifies s (ReifiedMonoid a) =&gt;
    t -&gt; ReflectedMonoid a s)
-&gt; t
-&gt; a
</span><span class="hs-identifier hs-var">reifyMonoid</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; r -&gt; r
</span><a href="#local-6989586621679364603"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679364604"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IndexedGetting i (ReflectedMonoid r s) t a
-&gt; (i -&gt; a -&gt; ReflectedMonoid r s) -&gt; t -&gt; ReflectedMonoid r s
forall i m s a. IndexedGetting i m s a -&gt; (i -&gt; a -&gt; m) -&gt; s -&gt; m
</span><a href="Control.Lens.Fold.html#ifoldMapOf"><span class="hs-identifier hs-var">ifoldMapOf</span></a></span><span> </span><span class="annot"><span class="annottext">IndexedGetting i (ReflectedMonoid r s) t a
IndexedFold i t a
</span><a href="#local-6989586621679364602"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679364616"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364616"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679364617"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364617"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">r -&gt; ReflectedMonoid r s
forall {k} a (s :: k). a -&gt; ReflectedMonoid a s
</span><span class="hs-identifier hs-var">ReflectedMonoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; a -&gt; r
</span><a href="#local-6989586621679364605"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364616"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364617"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span id="local-6989586621679364284"><span id="local-6989586621679364285"><span id="local-6989586621679364287"><span id="local-6989586621679364290"><span id="local-6989586621679364291"><span class="annot"><a href="Control.Lens.Indexed.html#itraverseBy"><span class="hs-identifier hs-type">itraverseBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraversableWithIndex</span></span><span> </span><span class="annot"><a href="#local-6989586621679364284"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364285"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679364286"><span class="annot"><a href="#local-6989586621679364286"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679364286"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364287"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364286"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679364288"><span class="annot"><a href="#local-6989586621679364288"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621679364289"><span class="annot"><a href="#local-6989586621679364289"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679364287"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364288"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364289"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364287"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364288"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364287"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364289"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364284"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364287"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364291"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364285"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364287"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364285"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364291"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-289"></span><span id="itraverseBy"><span class="annot"><span class="annottext">itraverseBy :: forall i (t :: * -&gt; *) (f :: * -&gt; *) a b.
TraversableWithIndex i t =&gt;
(forall x. x -&gt; f x)
-&gt; (forall x y. f (x -&gt; y) -&gt; f x -&gt; f y)
-&gt; (i -&gt; a -&gt; f b)
-&gt; t a
-&gt; f (t b)
</span><a href="Control.Lens.Indexed.html#itraverseBy"><span class="hs-identifier hs-var hs-var">itraverseBy</span></a></span></span><span> </span><span id="local-6989586621679364619"><span class="annot"><span class="annottext">forall x. x -&gt; f x
</span><a href="#local-6989586621679364619"><span class="hs-identifier hs-var">pur</span></a></span></span><span> </span><span id="local-6989586621679364620"><span class="annot"><span class="annottext">forall x y. f (x -&gt; y) -&gt; f x -&gt; f y
</span><a href="#local-6989586621679364620"><span class="hs-identifier hs-var">app</span></a></span></span><span> </span><span id="local-6989586621679364621"><span class="annot"><span class="annottext">i -&gt; a -&gt; f b
</span><a href="#local-6989586621679364621"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. x -&gt; f x)
-&gt; (forall x y. f (x -&gt; y) -&gt; f x -&gt; f y)
-&gt; (forall s.
    Reifies s (ReifiedApplicative f) =&gt;
    t a -&gt; ReflectedApplicative f s (t b))
-&gt; t a
-&gt; f (t b)
forall (f :: * -&gt; *) t a.
(forall x. x -&gt; f x)
-&gt; (forall x y. f (x -&gt; y) -&gt; f x -&gt; f y)
-&gt; (forall s.
    Reifies s (ReifiedApplicative f) =&gt;
    t -&gt; ReflectedApplicative f s a)
-&gt; t
-&gt; f a
</span><span class="hs-identifier hs-var">reifyApplicative</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; f x
forall x. x -&gt; f x
</span><a href="#local-6989586621679364619"><span class="hs-identifier hs-var">pur</span></a></span><span> </span><span class="annot"><span class="annottext">f (x -&gt; y) -&gt; f x -&gt; f y
forall x y. f (x -&gt; y) -&gt; f x -&gt; f y
</span><a href="#local-6989586621679364620"><span class="hs-identifier hs-var">app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(i -&gt; a -&gt; ReflectedApplicative f s b)
-&gt; t a -&gt; ReflectedApplicative f s (t b)
forall i (t :: * -&gt; *) (f :: * -&gt; *) a b.
(TraversableWithIndex i t, Applicative f) =&gt;
(i -&gt; a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(i -&gt; a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">itraverse</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679364627"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364627"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679364628"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364628"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f b -&gt; ReflectedApplicative f s b
forall {k} {k1} (f :: k -&gt; *) (s :: k1) (a :: k).
f a -&gt; ReflectedApplicative f s a
</span><span class="hs-identifier hs-var">ReflectedApplicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; a -&gt; f b
</span><a href="#local-6989586621679364621"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364627"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364628"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span id="local-6989586621679364318"><span id="local-6989586621679364319"><span id="local-6989586621679364320"><span id="local-6989586621679364321"><span id="local-6989586621679364322"><span id="local-6989586621679364324"><span class="annot"><a href="Control.Lens.Indexed.html#itraverseByOf"><span class="hs-identifier hs-type">itraverseByOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Lens.Type.html#IndexedTraversal"><span class="hs-identifier hs-type">IndexedTraversal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364318"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364319"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364320"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364321"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364322"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679364323"><span class="annot"><a href="#local-6989586621679364323"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679364323"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364324"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364323"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679364325"><span class="annot"><a href="#local-6989586621679364325"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621679364326"><span class="annot"><a href="#local-6989586621679364326"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679364324"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364325"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364326"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364324"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364325"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364324"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364326"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679364318"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364321"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364324"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364322"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364319"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679364324"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679364320"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-292"></span><span id="itraverseByOf"><span class="annot"><span class="annottext">itraverseByOf :: forall i s t a b (f :: * -&gt; *).
IndexedTraversal i s t a b
-&gt; (forall x. x -&gt; f x)
-&gt; (forall x y. f (x -&gt; y) -&gt; f x -&gt; f y)
-&gt; (i -&gt; a -&gt; f b)
-&gt; s
-&gt; f t
</span><a href="Control.Lens.Indexed.html#itraverseByOf"><span class="hs-identifier hs-var hs-var">itraverseByOf</span></a></span></span><span> </span><span id="local-6989586621679364630"><span class="annot"><span class="annottext">IndexedTraversal i s t a b
</span><a href="#local-6989586621679364630"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679364631"><span class="annot"><span class="annottext">forall x. x -&gt; f x
</span><a href="#local-6989586621679364631"><span class="hs-identifier hs-var">pur</span></a></span></span><span> </span><span id="local-6989586621679364632"><span class="annot"><span class="annottext">forall x y. f (x -&gt; y) -&gt; f x -&gt; f y
</span><a href="#local-6989586621679364632"><span class="hs-identifier hs-var">app</span></a></span></span><span> </span><span id="local-6989586621679364633"><span class="annot"><span class="annottext">i -&gt; a -&gt; f b
</span><a href="#local-6989586621679364633"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. x -&gt; f x)
-&gt; (forall x y. f (x -&gt; y) -&gt; f x -&gt; f y)
-&gt; (forall s.
    Reifies s (ReifiedApplicative f) =&gt;
    s -&gt; ReflectedApplicative f s t)
-&gt; s
-&gt; f t
forall (f :: * -&gt; *) t a.
(forall x. x -&gt; f x)
-&gt; (forall x y. f (x -&gt; y) -&gt; f x -&gt; f y)
-&gt; (forall s.
    Reifies s (ReifiedApplicative f) =&gt;
    t -&gt; ReflectedApplicative f s a)
-&gt; t
-&gt; f a
</span><span class="hs-identifier hs-var">reifyApplicative</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; f x
forall x. x -&gt; f x
</span><a href="#local-6989586621679364631"><span class="hs-identifier hs-var">pur</span></a></span><span> </span><span class="annot"><span class="annottext">f (x -&gt; y) -&gt; f x -&gt; f y
forall x y. f (x -&gt; y) -&gt; f x -&gt; f y
</span><a href="#local-6989586621679364632"><span class="hs-identifier hs-var">app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Indexed i a (ReflectedApplicative f s b)
 -&gt; s -&gt; ReflectedApplicative f s t)
-&gt; (i -&gt; a -&gt; ReflectedApplicative f s b)
-&gt; s
-&gt; ReflectedApplicative f s t
forall i a (f :: * -&gt; *) b s t.
(Indexed i a (f b) -&gt; s -&gt; f t) -&gt; (i -&gt; a -&gt; f b) -&gt; s -&gt; f t
</span><a href="Control.Lens.Traversal.html#itraverseOf"><span class="hs-identifier hs-var">itraverseOf</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed i a (ReflectedApplicative f s b)
-&gt; s -&gt; ReflectedApplicative f s t
IndexedTraversal i s t a b
</span><a href="#local-6989586621679364630"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679364639"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364639"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679364640"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364640"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f b -&gt; ReflectedApplicative f s b
forall {k} {k1} (f :: k -&gt; *) (s :: k1) (a :: k).
f a -&gt; ReflectedApplicative f s a
</span><span class="hs-identifier hs-var">ReflectedApplicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; a -&gt; f b
</span><a href="#local-6989586621679364633"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679364639"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679364640"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-293"></span></pre></body></html>