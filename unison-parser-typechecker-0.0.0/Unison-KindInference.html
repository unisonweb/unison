<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Unison.KindInference</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">unison-parser-typechecker-0.0.0</span><ul class="links" id="page-menu"><li><a href="src/Unison.KindInference.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Unison.KindInference</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Kind inference for Unison</p><p>Unison has Type, -&gt;, and Ability kinds</p><p>An algorithm sketch: First break all decls into strongly connected
 components in reverse topological order. Then, for each component,
 generate kind constraints that arise from the constructors in the
 decl to discover constraints on the decl vars. These constraints
 are then given to a constraint solver that determines a unique kind
 for each type variable. Unconstrained variables are defaulted to
 kind Type (just like Haskell 98). This is done by <code><a href="Unison-KindInference.html#v:inferDecls" title="Unison.KindInference">inferDecls</a></code>.</p><p>Afterwards, the <code><a href="Unison-KindInference-Solve-Monad.html#t:SolveState" title="Unison.KindInference.Solve.Monad">SolveState</a></code> holds the kinds of all decls and we
 can check that type annotations in terms that may mention the
 decls are well-kinded with <code><a href="Unison-KindInference.html#v:kindCheckAnnotations" title="Unison.KindInference">kindCheckAnnotations</a></code>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:inferDecls">inferDecls</a> :: <span class="keyword">forall</span> v loc. (<a href="../unison-core1-0.0.0/Unison-Var.html#t:Var" title="Unison.Var">Var</a> v, <a href="Unison-Codebase-BuiltinAnnotation.html#t:BuiltinAnnotation" title="Unison.Codebase.BuiltinAnnotation">BuiltinAnnotation</a> loc, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> loc, <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> loc) =&gt; <a href="Unison-PrettyPrintEnv.html#t:PrettyPrintEnv" title="Unison.PrettyPrintEnv">PrettyPrintEnv</a> -&gt; <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="../unison-core-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> (<a href="../unison-core1-0.0.0/Unison-DataDeclaration.html#t:Decl" title="Unison.DataDeclaration">Decl</a> v loc) -&gt; <a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc)) (<a href="Unison-KindInference-Solve-Monad.html#t:SolveState" title="Unison.KindInference.Solve.Monad">SolveState</a> v loc)</li><li class="src short"><a href="#v:kindCheckAnnotations">kindCheckAnnotations</a> :: <span class="keyword">forall</span> v loc. (<a href="../unison-core1-0.0.0/Unison-Var.html#t:Var" title="Unison.Var">Var</a> v, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> loc, <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> loc, <a href="Unison-Codebase-BuiltinAnnotation.html#t:BuiltinAnnotation" title="Unison.Codebase.BuiltinAnnotation">BuiltinAnnotation</a> loc) =&gt; <a href="Unison-PrettyPrintEnv.html#t:PrettyPrintEnv" title="Unison.PrettyPrintEnv">PrettyPrintEnv</a> -&gt; <a href="Unison-KindInference-Solve-Monad.html#t:SolveState" title="Unison.KindInference.Solve.Monad">SolveState</a> v loc -&gt; <a href="../unison-core1-0.0.0/Unison-Term.html#t:Term" title="Unison.Term">Term</a> v loc -&gt; <a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc)) ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:KindError">KindError</a> v loc</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:inferDecls" class="def">inferDecls</a> :: <span class="keyword">forall</span> v loc. (<a href="../unison-core1-0.0.0/Unison-Var.html#t:Var" title="Unison.Var">Var</a> v, <a href="Unison-Codebase-BuiltinAnnotation.html#t:BuiltinAnnotation" title="Unison.Codebase.BuiltinAnnotation">BuiltinAnnotation</a> loc, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> loc, <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> loc) =&gt; <a href="Unison-PrettyPrintEnv.html#t:PrettyPrintEnv" title="Unison.PrettyPrintEnv">PrettyPrintEnv</a> -&gt; <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="../unison-core-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> (<a href="../unison-core1-0.0.0/Unison-DataDeclaration.html#t:Decl" title="Unison.DataDeclaration">Decl</a> v loc) -&gt; <a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc)) (<a href="Unison-KindInference-Solve-Monad.html#t:SolveState" title="Unison.KindInference.Solve.Monad">SolveState</a> v loc) <a href="src/Unison.KindInference.html#inferDecls" class="link">Source</a> <a href="#v:inferDecls" class="selflink">#</a></p><div class="doc"><p>Infer the kinds of all decl vars</p></div></div><div class="top"><p class="src"><a id="v:kindCheckAnnotations" class="def">kindCheckAnnotations</a> :: <span class="keyword">forall</span> v loc. (<a href="../unison-core1-0.0.0/Unison-Var.html#t:Var" title="Unison.Var">Var</a> v, <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> loc, <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> loc, <a href="Unison-Codebase-BuiltinAnnotation.html#t:BuiltinAnnotation" title="Unison.Codebase.BuiltinAnnotation">BuiltinAnnotation</a> loc) =&gt; <a href="Unison-PrettyPrintEnv.html#t:PrettyPrintEnv" title="Unison.PrettyPrintEnv">PrettyPrintEnv</a> -&gt; <a href="Unison-KindInference-Solve-Monad.html#t:SolveState" title="Unison.KindInference.Solve.Monad">SolveState</a> v loc -&gt; <a href="../unison-core1-0.0.0/Unison-Term.html#t:Term" title="Unison.Term">Term</a> v loc -&gt; <a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc)) () <a href="src/Unison.KindInference.html#kindCheckAnnotations" class="link">Source</a> <a href="#v:kindCheckAnnotations" class="selflink">#</a></p><div class="doc"><p>Check that all annotations in a term are well-kinded</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:KindError" class="def">KindError</a> v loc <a href="src/Unison.KindInference.Error.html#KindError" class="link">Source</a> <a href="#t:KindError" class="selflink">#</a></p><div class="doc"><p>Errors that may arise during kind inference</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:KindError">Instances</h4><details id="i:KindError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KindError:Show:1"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc)</span> <a href="src/Unison.KindInference.Error.html#line-109" class="link">Source</a> <a href="#t:KindError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KindError:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Unison-KindInference-Error.html">Unison.KindInference.Error</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Unison-KindInference.html#t:KindError" title="Unison.KindInference">KindError</a> v loc] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>