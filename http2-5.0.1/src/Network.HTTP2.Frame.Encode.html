<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Network.HTTP2.Frame.Encode</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrame"><span class="hs-identifier">encodeFrame</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrameChunks"><span class="hs-identifier">encodeFrameChunks</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeader"><span class="hs-identifier">encodeFrameHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeaderBuf"><span class="hs-identifier">encodeFrameHeaderBuf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFramePayload"><span class="hs-identifier">encodeFramePayload</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier">EncodeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeInfo"><span class="hs-identifier">encodeInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Internal</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unsafeCreate</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign.Ptr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Ptr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">plusPtr</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.ByteOrder</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">N</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.Control</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WindowSize</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Imports.html"><span class="hs-identifier">Imports</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html"><span class="hs-identifier">Network.HTTP2.Frame.Types</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">type</span><span> </span><span id="Builder"><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-var">Builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">]</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="annot"><span class="hs-comment">-- | Auxiliary information for frame encoding.</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">data</span><span> </span><span id="EncodeInfo"><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-var">EncodeInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EncodeInfo"><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-var">EncodeInfo</span></a></span></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="encodeFlags"><span class="annot"><span class="annottext">EncodeInfo -&gt; FrameFlags
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-identifier hs-var hs-var">encodeFlags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameFlags"><span class="hs-identifier hs-type">FrameFlags</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Flags to be set in a frame header</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="encodeStreamId"><span class="annot"><span class="annottext">EncodeInfo -&gt; StreamId
</span><a href="Network.HTTP2.Frame.Encode.html#encodeStreamId"><span class="hs-identifier hs-var hs-var">encodeStreamId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#StreamId"><span class="hs-identifier hs-type">StreamId</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Stream id to be set in a frame header</span></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="encodePadding"><span class="annot"><span class="annottext">EncodeInfo -&gt; Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodePadding"><span class="hs-identifier hs-var hs-var">encodePadding</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#Padding"><span class="hs-identifier hs-type">Padding</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Padding if any. In the case where this value is set but the priority flag is not set, this value gets preference over the priority flag. So, if this value is set, the priority flag is also set.</span></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679114263"><span id="local-6989586621679114274"><span id="local-6989586621679114278"><span class="annot"><span class="annottext">StreamId -&gt; EncodeInfo -&gt; ShowS
[EncodeInfo] -&gt; ShowS
EncodeInfo -&gt; String
(StreamId -&gt; EncodeInfo -&gt; ShowS)
-&gt; (EncodeInfo -&gt; String)
-&gt; ([EncodeInfo] -&gt; ShowS)
-&gt; Show EncodeInfo
forall a.
(StreamId -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: StreamId -&gt; EncodeInfo -&gt; ShowS
showsPrec :: StreamId -&gt; EncodeInfo -&gt; ShowS
$cshow :: EncodeInfo -&gt; String
show :: EncodeInfo -&gt; String
$cshowList :: [EncodeInfo] -&gt; ShowS
showList :: [EncodeInfo] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114283"><span id="local-6989586621679114287"><span id="local-6989586621679114290"><span id="local-6989586621679114309"><span class="annot"><span class="annottext">ReadPrec [EncodeInfo]
ReadPrec EncodeInfo
StreamId -&gt; ReadS EncodeInfo
ReadS [EncodeInfo]
(StreamId -&gt; ReadS EncodeInfo)
-&gt; ReadS [EncodeInfo]
-&gt; ReadPrec EncodeInfo
-&gt; ReadPrec [EncodeInfo]
-&gt; Read EncodeInfo
forall a.
(StreamId -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: StreamId -&gt; ReadS EncodeInfo
readsPrec :: StreamId -&gt; ReadS EncodeInfo
$creadList :: ReadS [EncodeInfo]
readList :: ReadS [EncodeInfo]
$creadPrec :: ReadPrec EncodeInfo
readPrec :: ReadPrec EncodeInfo
$creadListPrec :: ReadPrec [EncodeInfo]
readListPrec :: ReadPrec [EncodeInfo]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-comment">-- | A smart builder of 'EncodeInfo'.</span><span>
</span><span id="line-40"></span><span class="hs-comment">--</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- &gt;&gt;&gt; encodeInfo setAck 0</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- EncodeInfo {encodeFlags = 1, encodeStreamId = 0, encodePadding = Nothing}</span><span>
</span><span id="line-43"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeInfo"><span class="hs-identifier hs-type">encodeInfo</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameFlags"><span class="hs-identifier hs-type">FrameFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameFlags"><span class="hs-identifier hs-type">FrameFlags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ stream identifier</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span>
</span><span id="line-48"></span><span id="encodeInfo"><span class="annot"><span class="annottext">encodeInfo :: (FrameFlags -&gt; FrameFlags) -&gt; StreamId -&gt; EncodeInfo
</span><a href="Network.HTTP2.Frame.Encode.html#encodeInfo"><span class="hs-identifier hs-var hs-var">encodeInfo</span></a></span></span><span> </span><span id="local-6989586621679114313"><span class="annot"><span class="annottext">FrameFlags -&gt; FrameFlags
</span><a href="#local-6989586621679114313"><span class="hs-identifier hs-var">set</span></a></span></span><span> </span><span id="local-6989586621679114314"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114314"><span class="hs-identifier hs-var">sid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FrameFlags -&gt; StreamId -&gt; Maybe Padding -&gt; EncodeInfo
</span><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-var">EncodeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameFlags -&gt; FrameFlags
</span><a href="#local-6989586621679114313"><span class="hs-identifier hs-var">set</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="Network.HTTP2.Frame.Types.html#defaultFlags"><span class="hs-identifier hs-var">defaultFlags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114314"><span class="hs-identifier hs-var">sid</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Padding
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- | Encoding an HTTP/2 frame to 'ByteString'.</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- This function is not efficient enough for high performace</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- program because of the concatenation of 'ByteString'.</span><span>
</span><span id="line-55"></span><span class="hs-comment">--</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- &gt;&gt;&gt; encodeFrame (encodeInfo id 1) (DataFrame &quot;body&quot;)</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- &quot;\NUL\NUL\EOT\NUL\NUL\NUL\NUL\NUL\SOHbody&quot;</span><span>
</span><span id="line-58"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrame"><span class="hs-identifier hs-type">encodeFrame</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FramePayload"><span class="hs-identifier hs-type">FramePayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-59"></span><span id="encodeFrame"><span class="annot"><span class="annottext">encodeFrame :: EncodeInfo -&gt; FramePayload -&gt; Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrame"><span class="hs-identifier hs-var hs-var">encodeFrame</span></a></span></span><span> </span><span id="local-6989586621679114316"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114316"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span id="local-6989586621679114317"><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114317"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; Padding
</span><span class="hs-identifier hs-var">BS.concat</span></span><span> </span><span class="annot"><span class="annottext">([Padding] -&gt; Padding) -&gt; [Padding] -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EncodeInfo -&gt; FramePayload -&gt; [Padding]
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrameChunks"><span class="hs-identifier hs-var">encodeFrameChunks</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114316"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114317"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-comment">-- | Encoding an HTTP/2 frame to ['ByteString'].</span><span>
</span><span id="line-62"></span><span class="hs-comment">--   This is suitable for sendMany.</span><span>
</span><span id="line-63"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrameChunks"><span class="hs-identifier hs-type">encodeFrameChunks</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FramePayload"><span class="hs-identifier hs-type">FramePayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">]</span><span>
</span><span id="line-64"></span><span id="encodeFrameChunks"><span class="annot"><span class="annottext">encodeFrameChunks :: EncodeInfo -&gt; FramePayload -&gt; [Padding]
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrameChunks"><span class="hs-identifier hs-var hs-var">encodeFrameChunks</span></a></span></span><span> </span><span id="local-6989586621679114319"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114319"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span id="local-6989586621679114320"><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114320"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114321"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Padding]
</span><a href="#local-6989586621679114322"><span class="hs-identifier hs-var">bss</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>    </span><span id="local-6989586621679114323"><span class="annot"><span class="annottext">ftid :: FrameType
</span><a href="#local-6989586621679114323"><span class="hs-identifier hs-var hs-var">ftid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FramePayload -&gt; FrameType
</span><a href="Network.HTTP2.Frame.Types.html#framePayloadToFrameType"><span class="hs-identifier hs-var">framePayloadToFrameType</span></a></span><span> </span><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114320"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span id="local-6989586621679114321"><span class="annot"><span class="annottext">bs :: Padding
</span><a href="#local-6989586621679114321"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FrameType -&gt; FrameHeader -&gt; Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeader"><span class="hs-identifier hs-var">encodeFrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">FrameType
</span><a href="#local-6989586621679114323"><span class="hs-identifier hs-var">ftid</span></a></span><span> </span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114325"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679114325"><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114325"><span class="hs-identifier hs-var">header</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114322"><span class="annot"><span class="annottext">[Padding]
</span><a href="#local-6989586621679114322"><span class="hs-identifier hs-var">bss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EncodeInfo -&gt; FramePayload -&gt; (FrameHeader, [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFramePayload"><span class="hs-identifier hs-var">encodeFramePayload</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114319"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114320"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Encoding an HTTP/2 frame header.</span><span>
</span><span id="line-71"></span><span class="hs-comment">--   The frame header must be completed.</span><span>
</span><span id="line-72"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeader"><span class="hs-identifier hs-type">encodeFrameHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameType"><span class="hs-identifier hs-type">FrameType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-73"></span><span id="encodeFrameHeader"><span class="annot"><span class="annottext">encodeFrameHeader :: FrameType -&gt; FrameHeader -&gt; Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeader"><span class="hs-identifier hs-var hs-var">encodeFrameHeader</span></a></span></span><span> </span><span id="local-6989586621679114326"><span class="annot"><span class="annottext">FrameType
</span><a href="#local-6989586621679114326"><span class="hs-identifier hs-var">ftid</span></a></span></span><span> </span><span id="local-6989586621679114327"><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114327"><span class="hs-identifier hs-var">fhdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
</span><span class="hs-identifier hs-var">unsafeCreate</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="Network.HTTP2.Frame.Types.html#frameHeaderLength"><span class="hs-identifier hs-var">frameHeaderLength</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr FrameFlags -&gt; IO ()) -&gt; Padding)
-&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FrameType -&gt; FrameHeader -&gt; Ptr FrameFlags -&gt; IO ()
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeaderBuf"><span class="hs-identifier hs-var">encodeFrameHeaderBuf</span></a></span><span> </span><span class="annot"><span class="annottext">FrameType
</span><a href="#local-6989586621679114326"><span class="hs-identifier hs-var">ftid</span></a></span><span> </span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114327"><span class="hs-identifier hs-var">fhdr</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | Writing an encoded HTTP/2 frame header to the buffer.</span><span>
</span><span id="line-76"></span><span class="hs-comment">--   The length of the buffer must be larger than or equal to 9 bytes.</span><span>
</span><span id="line-77"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeaderBuf"><span class="hs-identifier hs-type">encodeFrameHeaderBuf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameType"><span class="hs-identifier hs-type">FrameType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span id="encodeFrameHeaderBuf"><span class="annot"><span class="annottext">encodeFrameHeaderBuf :: FrameType -&gt; FrameHeader -&gt; Ptr FrameFlags -&gt; IO ()
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFrameHeaderBuf"><span class="hs-identifier hs-var hs-var">encodeFrameHeaderBuf</span></a></span></span><span> </span><span id="local-6989586621679114329"><span class="annot"><span class="annottext">FrameType
</span><a href="#local-6989586621679114329"><span class="hs-identifier hs-var">ftid</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114331"><span id="local-6989586621679114332"><span id="local-6989586621679114333"><span class="annot"><span class="annottext">StreamId
FrameFlags
payloadLength :: StreamId
flags :: FrameFlags
streamId :: StreamId
payloadLength :: FrameHeader -&gt; StreamId
flags :: FrameHeader -&gt; FrameFlags
streamId :: FrameHeader -&gt; StreamId
</span><a href="#local-6989586621679114331"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114337"><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114337"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><span class="annottext">Word32 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke24</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679114339"><span class="hs-identifier hs-var">plen</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114337"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">0</span></span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="annottext">FrameFlags -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke8</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114341"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114337"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">3</span></span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><span class="annottext">FrameFlags -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke8</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114332"><span class="hs-identifier hs-var">flags</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114337"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">4</span></span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><span class="annottext">Word32 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke32</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679114343"><span class="hs-identifier hs-var">sid</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114337"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">5</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621679114339"><span class="annot"><span class="annottext">plen :: Word32
</span><a href="#local-6989586621679114339"><span class="hs-identifier hs-var hs-var">plen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114331"><span class="hs-identifier hs-var">payloadLength</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span id="local-6989586621679114341"><span class="annot"><span class="annottext">typ :: FrameFlags
</span><a href="#local-6989586621679114341"><span class="hs-identifier hs-var hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FrameType -&gt; FrameFlags
</span><a href="Network.HTTP2.Frame.Types.html#fromFrameType"><span class="hs-identifier hs-var">fromFrameType</span></a></span><span> </span><span class="annot"><span class="annottext">FrameType
</span><a href="#local-6989586621679114329"><span class="hs-identifier hs-var">ftid</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span id="local-6989586621679114343"><span class="annot"><span class="annottext">sid :: Word32
</span><a href="#local-6989586621679114343"><span class="hs-identifier hs-var hs-var">sid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114333"><span class="hs-identifier hs-var">streamId</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Encoding an HTTP/2 frame payload.</span><span>
</span><span id="line-89"></span><span class="hs-comment">--   This returns a complete frame header and chunks of payload.</span><span>
</span><span id="line-90"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFramePayload"><span class="hs-identifier hs-type">encodeFramePayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FramePayload"><span class="hs-identifier hs-type">FramePayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span id="encodeFramePayload"><span class="annot"><span class="annottext">encodeFramePayload :: EncodeInfo -&gt; FramePayload -&gt; (FrameHeader, [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFramePayload"><span class="hs-identifier hs-var hs-var">encodeFramePayload</span></a></span></span><span> </span><span id="local-6989586621679114351"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114351"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span id="local-6989586621679114352"><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114352"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114353"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114354"><span class="hs-identifier hs-var">builder</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679114353"><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114353"><span class="hs-identifier hs-var">header</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114354"><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114354"><span class="hs-identifier hs-var">builder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EncodeInfo -&gt; FramePayload -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114351"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">FramePayload
</span><a href="#local-6989586621679114352"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-type">buildFramePayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FramePayload"><span class="hs-identifier hs-type">FramePayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span id="buildFramePayload"><span class="annot"><span class="annottext">buildFramePayload :: EncodeInfo -&gt; FramePayload -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var hs-var">buildFramePayload</span></a></span></span><span> </span><span id="local-6989586621679114356"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114356"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#DataFrame"><span class="hs-identifier hs-type">DataFrame</span></a></span><span> </span><span id="local-6989586621679114358"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114358"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadData"><span class="hs-identifier hs-var">buildFramePayloadData</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114356"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114358"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-100"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114360"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114360"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#HeadersFrame"><span class="hs-identifier hs-type">HeadersFrame</span></a></span><span> </span><span id="local-6989586621679114362"><span class="annot"><span class="annottext">Maybe Priority
</span><a href="#local-6989586621679114362"><span class="hs-identifier hs-var">mpri</span></a></span></span><span> </span><span id="local-6989586621679114363"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114363"><span class="hs-identifier hs-var">hdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; Maybe Priority
-&gt; Padding
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadHeaders"><span class="hs-identifier hs-var">buildFramePayloadHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114360"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Priority
</span><a href="#local-6989586621679114362"><span class="hs-identifier hs-var">mpri</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114363"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-102"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114365"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114365"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#PriorityFrame"><span class="hs-identifier hs-type">PriorityFrame</span></a></span><span> </span><span id="local-6989586621679114367"><span class="annot"><span class="annottext">Priority
</span><a href="#local-6989586621679114367"><span class="hs-identifier hs-var">pri</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; Priority -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPriority"><span class="hs-identifier hs-var">buildFramePayloadPriority</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114365"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="#local-6989586621679114367"><span class="hs-identifier hs-var">pri</span></a></span><span>
</span><span id="line-104"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114369"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114369"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#RSTStreamFrame"><span class="hs-identifier hs-type">RSTStreamFrame</span></a></span><span> </span><span id="local-6989586621679114371"><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114371"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; ErrorCode -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadRSTStream"><span class="hs-identifier hs-var">buildFramePayloadRSTStream</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114369"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114371"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-106"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114373"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114373"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#SettingsFrame"><span class="hs-identifier hs-type">SettingsFrame</span></a></span><span> </span><span id="local-6989586621679114375"><span class="annot"><span class="annottext">SettingsList
</span><a href="#local-6989586621679114375"><span class="hs-identifier hs-var">settings</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; SettingsList -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadSettings"><span class="hs-identifier hs-var">buildFramePayloadSettings</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114373"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">SettingsList
</span><a href="#local-6989586621679114375"><span class="hs-identifier hs-var">settings</span></a></span><span>
</span><span id="line-108"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114377"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114377"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#PushPromiseFrame"><span class="hs-identifier hs-type">PushPromiseFrame</span></a></span><span> </span><span id="local-6989586621679114379"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114379"><span class="hs-identifier hs-var">sid</span></a></span></span><span> </span><span id="local-6989586621679114380"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114380"><span class="hs-identifier hs-var">hdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; StreamId -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPushPromise"><span class="hs-identifier hs-var">buildFramePayloadPushPromise</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114377"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114379"><span class="hs-identifier hs-var">sid</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114380"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-110"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114382"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114382"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#PingFrame"><span class="hs-identifier hs-type">PingFrame</span></a></span><span> </span><span id="local-6989586621679114384"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114384"><span class="hs-identifier hs-var">opaque</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPing"><span class="hs-identifier hs-var">buildFramePayloadPing</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114382"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114384"><span class="hs-identifier hs-var">opaque</span></a></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114386"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114386"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#GoAwayFrame"><span class="hs-identifier hs-type">GoAwayFrame</span></a></span><span> </span><span id="local-6989586621679114388"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114388"><span class="hs-identifier hs-var">sid</span></a></span></span><span> </span><span id="local-6989586621679114389"><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114389"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679114390"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114390"><span class="hs-identifier hs-var">debug</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; StreamId
-&gt; ErrorCode
-&gt; Padding
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadGoAway"><span class="hs-identifier hs-var">buildFramePayloadGoAway</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114386"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114388"><span class="hs-identifier hs-var">sid</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114389"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114390"><span class="hs-identifier hs-var">debug</span></a></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114392"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114392"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#WindowUpdateFrame"><span class="hs-identifier hs-type">WindowUpdateFrame</span></a></span><span> </span><span id="local-6989586621679114394"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114394"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; StreamId -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadWindowUpdate"><span class="hs-identifier hs-var">buildFramePayloadWindowUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114392"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114394"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-116"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114396"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114396"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#ContinuationFrame"><span class="hs-identifier hs-type">ContinuationFrame</span></a></span><span> </span><span id="local-6989586621679114398"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114398"><span class="hs-identifier hs-var">hdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadContinuation"><span class="hs-identifier hs-var">buildFramePayloadContinuation</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114396"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114398"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-118"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayload"><span class="hs-identifier hs-var">buildFramePayload</span></a></span><span> </span><span id="local-6989586621679114400"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114400"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#UnknownFrame"><span class="hs-identifier hs-type">UnknownFrame</span></a></span><span> </span><span class="annot"><span class="annottext">FrameType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679114402"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114402"><span class="hs-identifier hs-var">opaque</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadUnknown"><span class="hs-identifier hs-var">buildFramePayloadUnknown</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114400"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114402"><span class="hs-identifier hs-var">opaque</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-type">buildPadding</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Payload length.</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span id="buildPadding"><span class="annot"><span class="annottext">buildPadding :: EncodeInfo
-&gt; ([Padding] -&gt; [Padding])
-&gt; StreamId
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-var hs-var">buildPadding</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">encodePadding :: EncodeInfo -&gt; Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodePadding"><span class="hs-identifier hs-var">encodePadding</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Padding
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114405"><span id="local-6989586621679114406"><span class="annot"><span class="annottext">StreamId
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114407"><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114407"><span class="hs-identifier hs-var">builder</span></a></span></span><span> </span><span id="local-6989586621679114408"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114408"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114409"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114407"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>    </span><span id="local-6989586621679114409"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114409"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114408"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114405"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114406"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-133"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-var">buildPadding</span></a></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">encodePadding :: EncodeInfo -&gt; Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodePadding"><span class="hs-identifier hs-var">encodePadding</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679114410"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114410"><span class="hs-identifier hs-var">padding</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114411"><span id="local-6989586621679114412"><span class="annot"><span class="annottext">StreamId
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114413"><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114413"><span class="hs-identifier hs-var">btarget</span></a></span></span><span> </span><span id="local-6989586621679114414"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114414"><span class="hs-identifier hs-var">targetLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114415"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114416"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621679114415"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114415"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114417"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114418"><span class="hs-identifier hs-var">newflags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114412"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span id="local-6989586621679114416"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114416"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114419"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Padding] -&gt; [Padding])
-&gt; ([Padding] -&gt; [Padding]) -&gt; [Padding] -&gt; [Padding]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114413"><span class="hs-identifier hs-var">btarget</span></a></span><span> </span><span class="annot"><span class="annottext">([Padding] -&gt; [Padding])
-&gt; ([Padding] -&gt; [Padding]) -&gt; [Padding] -&gt; [Padding]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114410"><span class="hs-identifier hs-var">padding</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679114419"><span class="annot"><span class="annottext">b1 :: Padding
</span><a href="#local-6989586621679114419"><span class="hs-identifier hs-var hs-var">b1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FrameFlags -&gt; Padding
</span><span class="hs-identifier hs-var">BS.singleton</span></span><span> </span><span class="annot"><span class="annottext">(FrameFlags -&gt; Padding) -&gt; FrameFlags -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114425"><span class="hs-identifier hs-var">paddingLength</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621679114425"><span class="annot"><span class="annottext">paddingLength :: StreamId
</span><a href="#local-6989586621679114425"><span class="hs-identifier hs-var hs-var">paddingLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114410"><span class="hs-identifier hs-var">padding</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span id="local-6989586621679114417"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114417"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114414"><span class="hs-identifier hs-var">targetLength</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114425"><span class="hs-identifier hs-var">paddingLength</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">1</span></span><span>
</span><span id="line-141"></span><span>    </span><span id="local-6989586621679114418"><span class="annot"><span class="annottext">newflags :: FrameFlags
</span><a href="#local-6989586621679114418"><span class="hs-identifier hs-var hs-var">newflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FrameFlags -&gt; FrameFlags
</span><a href="Network.HTTP2.Frame.Types.html#setPadded"><span class="hs-identifier hs-var">setPadded</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114411"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildPriority"><span class="hs-identifier hs-type">buildPriority</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#Priority"><span class="hs-identifier hs-type">Priority</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span>
</span><span id="line-144"></span><span id="buildPriority"><span class="annot"><span class="annottext">buildPriority :: Priority -&gt; [Padding] -&gt; [Padding]
</span><a href="Network.HTTP2.Frame.Encode.html#buildPriority"><span class="hs-identifier hs-var hs-var">buildPriority</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#Priority"><span class="hs-identifier hs-type">Priority</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114435"><span id="local-6989586621679114436"><span id="local-6989586621679114437"><span class="annot"><span class="annottext">Bool
StreamId
exclusive :: Bool
streamDependency :: StreamId
weight :: StreamId
exclusive :: Priority -&gt; Bool
streamDependency :: Priority -&gt; StreamId
weight :: Priority -&gt; StreamId
</span><a href="#local-6989586621679114435"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114441"><span class="hs-identifier hs-var">builder</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679114441"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114441"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114442"><span class="hs-identifier hs-var">priority</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>    </span><span id="local-6989586621679114443"><span class="annot"><span class="annottext">estream :: StreamId
</span><a href="#local-6989586621679114443"><span class="hs-identifier hs-var hs-var">estream</span></a></span></span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679114435"><span class="hs-identifier hs-var">exclusive</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId
</span><a href="Network.HTTP2.Frame.Types.html#setExclusive"><span class="hs-identifier hs-var">setExclusive</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114436"><span class="hs-identifier hs-var">streamDependency</span></a></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114436"><span class="hs-identifier hs-var">streamDependency</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679114442"><span class="annot"><span class="annottext">priority :: Padding
</span><a href="#local-6989586621679114442"><span class="hs-identifier hs-var hs-var">priority</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
</span><span class="hs-identifier hs-var">unsafeCreate</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">5</span></span><span> </span><span class="annot"><span class="annottext">((Ptr FrameFlags -&gt; IO ()) -&gt; Padding)
-&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679114446"><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114446"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-151"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679114449"><span class="annot"><span class="annottext">esid :: Word32
</span><a href="#local-6989586621679114449"><span class="hs-identifier hs-var hs-var">esid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114443"><span class="hs-identifier hs-var">estream</span></a></span><span>
</span><span id="line-152"></span><span>            </span><span id="local-6989586621679114454"><span class="annot"><span class="annottext">w :: FrameFlags
</span><a href="#local-6989586621679114454"><span class="hs-identifier hs-var hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(StreamId -&gt; FrameFlags) -&gt; StreamId -&gt; FrameFlags
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114437"><span class="hs-identifier hs-var">weight</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">1</span></span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><span class="annottext">Word32 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke32</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679114449"><span class="hs-identifier hs-var">esid</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114446"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">0</span></span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><span class="annottext">FrameFlags -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke8</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114454"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114446"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">4</span></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadData"><span class="hs-identifier hs-type">buildFramePayloadData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span id="buildFramePayloadData"><span class="annot"><span class="annottext">buildFramePayloadData :: EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadData"><span class="hs-identifier hs-var hs-var">buildFramePayloadData</span></a></span></span><span> </span><span id="local-6989586621679114455"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114455"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span id="local-6989586621679114456"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114456"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; ([Padding] -&gt; [Padding])
-&gt; StreamId
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-var">buildPadding</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114455"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114457"><span class="hs-identifier hs-var">builder</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114458"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621679114457"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114457"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114456"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621679114458"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114458"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114456"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadHeaders"><span class="hs-identifier hs-type">buildFramePayloadHeaders</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#Priority"><span class="hs-identifier hs-type">Priority</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#HeaderBlockFragment"><span class="hs-identifier hs-type">HeaderBlockFragment</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span id="buildFramePayloadHeaders"><span class="annot"><span class="annottext">buildFramePayloadHeaders :: EncodeInfo
-&gt; Maybe Priority
-&gt; Padding
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadHeaders"><span class="hs-identifier hs-var hs-var">buildFramePayloadHeaders</span></a></span></span><span> </span><span id="local-6989586621679114460"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114460"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Priority
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621679114461"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114461"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; ([Padding] -&gt; [Padding])
-&gt; StreamId
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-var">buildPadding</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114460"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114462"><span class="hs-identifier hs-var">builder</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114463"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621679114462"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114462"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114461"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621679114463"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114463"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114461"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-174"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadHeaders"><span class="hs-identifier hs-var">buildFramePayloadHeaders</span></a></span><span> </span><span id="local-6989586621679114464"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114464"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679114465"><span class="annot"><span class="annottext">Priority
</span><a href="#local-6989586621679114465"><span class="hs-identifier hs-var">pri</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679114466"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114466"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; ([Padding] -&gt; [Padding])
-&gt; StreamId
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-var">buildPadding</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114467"><span class="hs-identifier hs-var">einfo'</span></a></span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114468"><span class="hs-identifier hs-var">builder</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114469"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>    </span><span id="local-6989586621679114468"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114468"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Priority -&gt; [Padding] -&gt; [Padding]
</span><a href="Network.HTTP2.Frame.Encode.html#buildPriority"><span class="hs-identifier hs-var">buildPriority</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="#local-6989586621679114465"><span class="hs-identifier hs-var">pri</span></a></span><span> </span><span class="annot"><span class="annottext">([Padding] -&gt; [Padding])
-&gt; ([Padding] -&gt; [Padding]) -&gt; [Padding] -&gt; [Padding]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114466"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621679114469"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114469"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114466"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">5</span></span><span>
</span><span id="line-179"></span><span>    </span><span id="local-6989586621679114467"><span class="annot"><span class="annottext">einfo' :: EncodeInfo
</span><a href="#local-6989586621679114467"><span class="hs-identifier hs-var hs-var">einfo'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114464"><span class="hs-identifier hs-var">einfo</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#setPriority"><span class="hs-identifier hs-type">setPriority</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679114464"><span class="hs-identifier hs-type">einfo</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPriority"><span class="hs-identifier hs-type">buildFramePayloadPriority</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#Priority"><span class="hs-identifier hs-type">Priority</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span id="buildFramePayloadPriority"><span class="annot"><span class="annottext">buildFramePayloadPriority :: EncodeInfo -&gt; Priority -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPriority"><span class="hs-identifier hs-var hs-var">buildFramePayloadPriority</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114473"><span id="local-6989586621679114474"><span id="local-6989586621679114475"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114476"><span class="annot"><span class="annottext">Priority
</span><a href="#local-6989586621679114476"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114477"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114478"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621679114478"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114478"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Priority -&gt; [Padding] -&gt; [Padding]
</span><a href="Network.HTTP2.Frame.Encode.html#buildPriority"><span class="hs-identifier hs-var">buildPriority</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="#local-6989586621679114476"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span id="local-6989586621679114477"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114477"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">5</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114473"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114474"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadRSTStream"><span class="hs-identifier hs-type">buildFramePayloadRSTStream</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#ErrorCode"><span class="hs-identifier hs-type">ErrorCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span id="buildFramePayloadRSTStream"><span class="annot"><span class="annottext">buildFramePayloadRSTStream :: EncodeInfo -&gt; ErrorCode -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadRSTStream"><span class="hs-identifier hs-var hs-var">buildFramePayloadRSTStream</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114479"><span id="local-6989586621679114480"><span id="local-6989586621679114481"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114482"><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114482"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114483"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114484"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621679114484"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114484"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114485"><span class="hs-identifier hs-var">b4</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621679114485"><span class="annot"><span class="annottext">b4 :: Padding
</span><a href="#local-6989586621679114485"><span class="hs-identifier hs-var hs-var">b4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Padding
</span><span class="hs-identifier hs-var">N.bytestring32</span></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; Padding) -&gt; Word32 -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ErrorCode -&gt; Word32
</span><a href="Network.HTTP2.Frame.Types.html#fromErrorCode"><span class="hs-identifier hs-var">fromErrorCode</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114482"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span id="local-6989586621679114483"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114483"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114479"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114480"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadSettings"><span class="hs-identifier hs-type">buildFramePayloadSettings</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#SettingsList"><span class="hs-identifier hs-type">SettingsList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span id="buildFramePayloadSettings"><span class="annot"><span class="annottext">buildFramePayloadSettings :: EncodeInfo -&gt; SettingsList -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadSettings"><span class="hs-identifier hs-var hs-var">buildFramePayloadSettings</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114488"><span id="local-6989586621679114489"><span id="local-6989586621679114490"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114491"><span class="annot"><span class="annottext">SettingsList
</span><a href="#local-6989586621679114491"><span class="hs-identifier hs-var">alist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114492"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114493"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>    </span><span id="local-6989586621679114493"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114493"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114494"><span class="hs-identifier hs-var">settings</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>    </span><span id="local-6989586621679114494"><span class="annot"><span class="annottext">settings :: Padding
</span><a href="#local-6989586621679114494"><span class="hs-identifier hs-var hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
</span><span class="hs-identifier hs-var">unsafeCreate</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114496"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr FrameFlags -&gt; IO ()) -&gt; Padding)
-&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679114497"><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114497"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags -&gt; SettingsList -&gt; IO ()
forall {a}.
Integral a =&gt;
Ptr FrameFlags -&gt; [(SettingsKey, a)] -&gt; IO ()
</span><a href="#local-6989586621679114498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114497"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">SettingsList
</span><a href="#local-6989586621679114491"><span class="hs-identifier hs-var">alist</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span id="local-6989586621679114498"><span class="annot"><span class="annottext">go :: Ptr FrameFlags -&gt; [(SettingsKey, a)] -&gt; IO ()
</span><a href="#local-6989586621679114498"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><a href="#local-6989586621679114498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679114520"><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114520"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679114521"><span class="annot"><span class="annottext">SettingsKey
</span><a href="#local-6989586621679114521"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114522"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679114522"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679114523"><span class="annot"><span class="annottext">[(SettingsKey, a)]
</span><a href="#local-6989586621679114523"><span class="hs-identifier hs-var">kvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">Word16 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke16</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SettingsKey -&gt; Word16
</span><a href="Network.HTTP2.Frame.Types.html#fromSettingsKey"><span class="hs-identifier hs-var">fromSettingsKey</span></a></span><span> </span><span class="annot"><span class="annottext">SettingsKey
</span><a href="#local-6989586621679114521"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114520"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">0</span></span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">Word32 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679114522"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114520"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">2</span></span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">Ptr FrameFlags -&gt; [(SettingsKey, a)] -&gt; IO ()
</span><a href="#local-6989586621679114498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114520"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags -&gt; StreamId -&gt; Ptr FrameFlags
forall a b. Ptr a -&gt; StreamId -&gt; Ptr b
</span><span class="hs-operator hs-var">`plusPtr`</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">6</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SettingsKey, a)]
</span><a href="#local-6989586621679114523"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679114496"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114496"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SettingsList -&gt; StreamId
forall a. [a] -&gt; StreamId
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; StreamId
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">SettingsList
</span><a href="#local-6989586621679114491"><span class="hs-identifier hs-var">alist</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">6</span></span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679114492"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114492"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114496"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114488"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114489"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPushPromise"><span class="hs-identifier hs-type">buildFramePayloadPushPromise</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#StreamId"><span class="hs-identifier hs-type">StreamId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#HeaderBlockFragment"><span class="hs-identifier hs-type">HeaderBlockFragment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span id="buildFramePayloadPushPromise"><span class="annot"><span class="annottext">buildFramePayloadPushPromise :: EncodeInfo
-&gt; StreamId -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPushPromise"><span class="hs-identifier hs-var hs-var">buildFramePayloadPushPromise</span></a></span></span><span> </span><span id="local-6989586621679114532"><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114532"><span class="hs-identifier hs-var">einfo</span></a></span></span><span> </span><span id="local-6989586621679114533"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114533"><span class="hs-identifier hs-var">sid</span></a></span></span><span> </span><span id="local-6989586621679114534"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114534"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EncodeInfo
-&gt; ([Padding] -&gt; [Padding])
-&gt; StreamId
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildPadding"><span class="hs-identifier hs-var">buildPadding</span></a></span><span> </span><span class="annot"><span class="annottext">EncodeInfo
</span><a href="#local-6989586621679114532"><span class="hs-identifier hs-var">einfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114535"><span class="hs-identifier hs-var">builder</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114536"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621679114535"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114535"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114537"><span class="hs-identifier hs-var">b4</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Padding] -&gt; [Padding])
-&gt; ([Padding] -&gt; [Padding]) -&gt; [Padding] -&gt; [Padding]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114534"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621679114537"><span class="annot"><span class="annottext">b4 :: Padding
</span><a href="#local-6989586621679114537"><span class="hs-identifier hs-var hs-var">b4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Padding
</span><span class="hs-identifier hs-var">N.bytestring32</span></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; Padding) -&gt; Word32 -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114533"><span class="hs-identifier hs-var">sid</span></a></span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621679114536"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114536"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114534"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPing"><span class="hs-identifier hs-type">buildFramePayloadPing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span id="buildFramePayloadPing"><span class="annot"><span class="annottext">buildFramePayloadPing :: EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadPing"><span class="hs-identifier hs-var hs-var">buildFramePayloadPing</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114542"><span id="local-6989586621679114543"><span id="local-6989586621679114544"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114545"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114545"><span class="hs-identifier hs-var">odata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114546"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114547"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621679114547"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114547"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114545"><span class="hs-identifier hs-var">odata</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>    </span><span id="local-6989586621679114546"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114546"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114542"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114543"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadGoAway"><span class="hs-identifier hs-type">buildFramePayloadGoAway</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#StreamId"><span class="hs-identifier hs-type">StreamId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#ErrorCode"><span class="hs-identifier hs-type">ErrorCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span id="buildFramePayloadGoAway"><span class="annot"><span class="annottext">buildFramePayloadGoAway :: EncodeInfo
-&gt; StreamId
-&gt; ErrorCode
-&gt; Padding
-&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadGoAway"><span class="hs-identifier hs-var hs-var">buildFramePayloadGoAway</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114548"><span id="local-6989586621679114549"><span id="local-6989586621679114550"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114551"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114551"><span class="hs-identifier hs-var">sid</span></a></span></span><span> </span><span id="local-6989586621679114552"><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114552"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679114553"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114553"><span class="hs-identifier hs-var">debug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114554"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114555"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621679114555"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114555"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114556"><span class="hs-identifier hs-var">b8</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Padding] -&gt; [Padding])
-&gt; ([Padding] -&gt; [Padding]) -&gt; [Padding] -&gt; [Padding]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114553"><span class="hs-identifier hs-var">debug</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621679114558"><span class="annot"><span class="annottext">len0 :: StreamId
</span><a href="#local-6989586621679114558"><span class="hs-identifier hs-var hs-var">len0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">8</span></span><span>
</span><span id="line-228"></span><span>    </span><span id="local-6989586621679114556"><span class="annot"><span class="annottext">b8 :: Padding
</span><a href="#local-6989586621679114556"><span class="hs-identifier hs-var hs-var">b8</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
</span><span class="hs-identifier hs-var">unsafeCreate</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114558"><span class="hs-identifier hs-var">len0</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr FrameFlags -&gt; IO ()) -&gt; Padding)
-&gt; (Ptr FrameFlags -&gt; IO ()) -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679114562"><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114562"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-229"></span><span>        </span><span class="annot"><span class="annottext">Word32 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StreamId -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114551"><span class="hs-identifier hs-var">sid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114562"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">0</span></span><span>
</span><span id="line-230"></span><span>        </span><span class="annot"><span class="annottext">Word32 -&gt; Ptr FrameFlags -&gt; StreamId -&gt; IO ()
</span><span class="hs-identifier hs-var">N.poke32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ErrorCode -&gt; Word32
</span><a href="Network.HTTP2.Frame.Types.html#fromErrorCode"><span class="hs-identifier hs-var">fromErrorCode</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorCode
</span><a href="#local-6989586621679114552"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr FrameFlags
</span><a href="#local-6989586621679114562"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">4</span></span><span>
</span><span id="line-231"></span><span>    </span><span id="local-6989586621679114564"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114564"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114558"><span class="hs-identifier hs-var">len0</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; StreamId -&gt; StreamId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114553"><span class="hs-identifier hs-var">debug</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621679114554"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114554"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114564"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114548"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114549"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadWindowUpdate"><span class="hs-identifier hs-type">buildFramePayloadWindowUpdate</span></a></span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">WindowSize</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span id="buildFramePayloadWindowUpdate"><span class="annot"><span class="annottext">buildFramePayloadWindowUpdate :: EncodeInfo -&gt; StreamId -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadWindowUpdate"><span class="hs-identifier hs-var hs-var">buildFramePayloadWindowUpdate</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114565"><span id="local-6989586621679114566"><span id="local-6989586621679114567"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114568"><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114568"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114569"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114570"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-comment">-- fixme: reserve bit</span><span>
</span><span id="line-239"></span><span>    </span><span id="local-6989586621679114570"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114570"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114571"><span class="hs-identifier hs-var">b4</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>    </span><span id="local-6989586621679114571"><span class="annot"><span class="annottext">b4 :: Padding
</span><a href="#local-6989586621679114571"><span class="hs-identifier hs-var hs-var">b4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Padding
</span><span class="hs-identifier hs-var">N.bytestring32</span></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; Padding) -&gt; Word32 -&gt; Padding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114568"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679114569"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114569"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114565"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114566"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadContinuation"><span class="hs-identifier hs-type">buildFramePayloadContinuation</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#HeaderBlockFragment"><span class="hs-identifier hs-type">HeaderBlockFragment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span id="buildFramePayloadContinuation"><span class="annot"><span class="annottext">buildFramePayloadContinuation :: EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadContinuation"><span class="hs-identifier hs-var hs-var">buildFramePayloadContinuation</span></a></span></span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621679114574"><span id="local-6989586621679114575"><span id="local-6989586621679114576"><span class="annot"><span class="annottext">StreamId
Maybe Padding
FrameFlags
encodeFlags :: EncodeInfo -&gt; FrameFlags
encodeStreamId :: EncodeInfo -&gt; StreamId
encodePadding :: EncodeInfo -&gt; Maybe Padding
encodeFlags :: FrameFlags
encodeStreamId :: StreamId
encodePadding :: Maybe Padding
</span><a href="Network.HTTP2.Frame.Encode.html#encodeFlags"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679114577"><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114577"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FrameHeader
</span><a href="#local-6989586621679114578"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114579"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621679114579"><span class="annot"><span class="annottext">builder :: [Padding] -&gt; [Padding]
</span><a href="#local-6989586621679114579"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114577"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">Padding -&gt; [Padding] -&gt; [Padding]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span id="local-6989586621679114580"><span class="annot"><span class="annottext">len :: StreamId
</span><a href="#local-6989586621679114580"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Padding -&gt; StreamId
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">Padding
</span><a href="#local-6989586621679114577"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span id="local-6989586621679114578"><span class="annot"><span class="annottext">header :: FrameHeader
</span><a href="#local-6989586621679114578"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StreamId -&gt; FrameFlags -&gt; StreamId -&gt; FrameHeader
</span><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-var">FrameHeader</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114580"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">FrameFlags
</span><a href="#local-6989586621679114574"><span class="hs-identifier hs-var">encodeFlags</span></a></span><span> </span><span class="annot"><span class="annottext">StreamId
</span><a href="#local-6989586621679114575"><span class="hs-identifier hs-var">encodeStreamId</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadUnknown"><span class="hs-identifier hs-type">buildFramePayloadUnknown</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#EncodeInfo"><span class="hs-identifier hs-type">EncodeInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP2.Frame.Types.html#FrameHeader"><span class="hs-identifier hs-type">FrameHeader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.HTTP2.Frame.Encode.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span id="buildFramePayloadUnknown"><span class="annot"><span class="annottext">buildFramePayloadUnknown :: EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadUnknown"><span class="hs-identifier hs-var hs-var">buildFramePayloadUnknown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EncodeInfo -&gt; Padding -&gt; (FrameHeader, [Padding] -&gt; [Padding])
</span><a href="Network.HTTP2.Frame.Encode.html#buildFramePayloadData"><span class="hs-identifier hs-var">buildFramePayloadData</span></a></span><span>
</span><span id="line-253"></span></pre></body></html>