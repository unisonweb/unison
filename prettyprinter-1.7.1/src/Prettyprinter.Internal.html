<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns        #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DefaultSignatures   #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable  #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric       #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings   #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_HADDOCK not-home #-}</span><span class="hs-cpp">

#include &quot;version-compatibility-macros.h&quot;
</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- | __Warning: internal module!__ This means that the API may change</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- arbitrarily between versions without notice. Depending on this module may</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- lead to unexpected breakages, so proceed with caution!</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- For a stable API, use the non-internal modules. For the special case of</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- writing adaptors to this library&#8217;s @'Doc'@ type, see</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- &quot;Prettyprinter.Internal.Type&quot;.</span><span>
</span><span id="line-20"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Prettyprinter.Internal</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Documents</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier">Doc</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Basic functionality</span></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier">Pretty</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#viaShow"><span class="hs-identifier">viaShow</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier">unsafeViaShow</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#unsafeTextWithoutNewlines"><span class="hs-identifier">unsafeTextWithoutNewlines</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#emptyDoc"><span class="hs-identifier">emptyDoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier">nest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#line"><span class="hs-identifier">line</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#line%27"><span class="hs-identifier">line'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#softline"><span class="hs-identifier">softline</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#softline%27"><span class="hs-identifier">softline'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#hardline"><span class="hs-identifier">hardline</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Primitives for alternative layouts</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier">group</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier">flatAlt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Alignment functions</span></span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#align"><span class="hs-identifier">align</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#hang"><span class="hs-identifier">hang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#indent"><span class="hs-identifier">indent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#encloseSep"><span class="hs-identifier">encloseSep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#list"><span class="hs-identifier">list</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#tupled"><span class="hs-identifier">tupled</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Binary functions</span></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator">(&lt;+&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><span class="hs-comment">-- * List functions</span></span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier">concatWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** 'sep' family</span></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#hsep"><span class="hs-identifier">hsep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#vsep"><span class="hs-identifier">vsep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#fillSep"><span class="hs-identifier">fillSep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#sep"><span class="hs-identifier">sep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** 'cat' family</span></span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier">hcat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#vcat"><span class="hs-identifier">vcat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#fillCat"><span class="hs-identifier">fillCat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#cat"><span class="hs-identifier">cat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Others</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#punctuate"><span class="hs-identifier">punctuate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Reactive/conditional layouts</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier">column</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#nesting"><span class="hs-identifier">nesting</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#width"><span class="hs-identifier">width</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#pageWidth"><span class="hs-identifier">pageWidth</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Filler functions</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#fill"><span class="hs-identifier">fill</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#fillBreak"><span class="hs-identifier">fillBreak</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><span class="hs-comment">-- * General convenience</span></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#plural"><span class="hs-identifier">plural</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#enclose"><span class="hs-identifier">enclose</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#surround"><span class="hs-identifier">surround</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Annotations</span></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#annotate"><span class="hs-identifier">annotate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#unAnnotate"><span class="hs-identifier">unAnnotate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#reAnnotate"><span class="hs-identifier">reAnnotate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#alterAnnotations"><span class="hs-identifier">alterAnnotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#unAnnotateS"><span class="hs-identifier">unAnnotateS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#reAnnotateS"><span class="hs-identifier">reAnnotateS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#alterAnnotationsS"><span class="hs-identifier">alterAnnotationsS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Optimization</span></span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#fuse"><span class="hs-identifier">fuse</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#FusionDepth"><span class="hs-identifier">FusionDepth</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Layout</span></span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier">SimpleDocStream</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier">PageWidth</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#defaultPageWidth"><span class="hs-identifier">defaultPageWidth</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier">LayoutOptions</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#defaultLayoutOptions"><span class="hs-identifier">defaultLayoutOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#layoutPretty"><span class="hs-identifier">layoutPretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#layoutCompact"><span class="hs-identifier">layoutCompact</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#layoutSmart"><span class="hs-identifier">layoutSmart</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#removeTrailingWhitespace"><span class="hs-identifier">removeTrailingWhitespace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Rendering</span></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier">renderShowS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal helpers</span></span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#textSpaces"><span class="hs-identifier">textSpaces</span></a></span><span>
</span><span id="line-81"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IsString</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>           </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span>      </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- Depending on the Cabal file, this might be from base, or for older builds,</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- from the semigroups package.</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semigroup</span></span><span class="hs-cpp">

#if NATURAL_IN_BASE
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Numeric.Natural</span></span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">
#if !(FOLDABLE_TRAVERSABLE_IN_PRELUDE)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Foldable</span><span>    </span><span class="hs-special">(</span><span class="hs-identifier">Foldable</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Traversable</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Traversable</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span>          </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">foldr</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">foldr1</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">
#if FUNCTOR_IDENTITY_IN_BASE
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Identity</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Prettyprinter.Render.Util.Panic.html"><span class="hs-identifier">Prettyprinter.Render.Util.Panic</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-comment">-- | The abstract data type @'Doc' ann@ represents pretty documents that have</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- been annotated with data of type @ann@.</span><span>
</span><span id="line-122"></span><span class="hs-comment">--</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- More specifically, a value of type @'Doc'@ represents a non-empty set of</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- possible layouts of a document. The layout functions select one of these</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- possibilities, taking into account things like the width of the output</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- document.</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- The annotation is an arbitrary piece of data associated with (part of) a</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- document. Annotations may be used by the rendering backends in order to</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- display output differently, such as</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span class="hs-comment">--   - color information (e.g. when rendering to the terminal)</span><span>
</span><span id="line-133"></span><span class="hs-comment">--   - mouseover text (e.g. when rendering to rich HTML)</span><span>
</span><span id="line-134"></span><span class="hs-comment">--   - whether to show something or not (to allow simple or detailed versions)</span><span>
</span><span id="line-135"></span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- The simplest way to display a 'Doc' is via the 'Show' class.</span><span>
</span><span id="line-137"></span><span class="hs-comment">--</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn (show (vsep [&quot;hello&quot;, &quot;world&quot;]))</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- hello</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- world</span><span>
</span><span id="line-141"></span><span class="hs-keyword">data</span><span> </span><span id="Doc"><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-var">Doc</span></a></span></span><span> </span><span id="local-6989586621679069325"><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-comment">-- | Occurs when flattening a line. The layouter will reject this document,</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-comment">-- choosing a more suitable rendering.</span><span>
</span><span id="line-145"></span><span>    </span><span id="Fail"><span class="annot"><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><span class="hs-comment">-- | The empty document; conceptually the unit of 'Cat'</span></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Empty"><span class="annot"><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="hs-comment">-- | invariant: not '\n'</span></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Char"><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-comment">-- | Invariants: at least two characters long, does not contain '\n'. For</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-comment">-- empty documents, there is @Empty@; for singleton documents, there is</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-comment">-- @Char@; newlines should be replaced by e.g. @Line@.</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-comment">-- Since the frequently used 'T.length' of 'Text' is /O(length)/, we cache</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-comment">-- it in this constructor.</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Text"><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Hard line break</span></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Line"><span class="annot"><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-comment">-- | Lay out the first 'Doc', but when flattened (via 'group'), prefer</span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-comment">-- the second.</span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-comment">-- The layout algorithms work under the assumption that the first</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-comment">-- alternative is less wide than the flattened second alternative.</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="FlatAlt"><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-var">FlatAlt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Concatenation of two documents</span></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Cat"><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Document indented by a number of columns</span></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Nest"><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-comment">-- | Invariant: The first lines of first document should be longer than the</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-comment">-- first lines of the second one, so the layout algorithm can pick the one</span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-comment">-- that fits best. Used to implement layout alternatives for 'group'.</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Union"><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="hs-comment">-- | React on the current cursor position, see 'column'</span></span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Column"><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-var">Column</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="hs-comment">-- | React on the document's width, see 'pageWidth'</span></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="WithPageWidth"><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-var">WithPageWidth</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier hs-type">PageWidth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><span class="hs-comment">-- | React on the current nesting level, see 'nesting'</span></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Nesting"><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-var">Nesting</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-comment">-- | Add an annotation to the enclosed 'Doc'. Can be used for example to add</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-comment">-- styling directives or alt texts that can then be used by the renderer.</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Annotated"><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069325"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679069697"><span id="local-6989586621679069699"><span class="annot"><span class="annottext">(forall x. Doc ann -&gt; Rep (Doc ann) x)
-&gt; (forall x. Rep (Doc ann) x -&gt; Doc ann) -&gt; Generic (Doc ann)
forall x. Rep (Doc ann) x -&gt; Doc ann
forall x. Doc ann -&gt; Rep (Doc ann) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall ann x. Rep (Doc ann) x -&gt; Doc ann
forall ann x. Doc ann -&gt; Rep (Doc ann) x
$cfrom :: forall ann x. Doc ann -&gt; Rep (Doc ann) x
from :: forall x. Doc ann -&gt; Rep (Doc ann) x
$cto :: forall ann x. Rep (Doc ann) x -&gt; Doc ann
to :: forall x. Rep (Doc ann) x -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- x '&lt;&gt;' y = 'hcat' [x, y]</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-200"></span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;hello&quot; &lt;&gt; &quot;world&quot; :: Doc ann</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- helloworld</span><span>
</span><span id="line-203"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069318"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069318"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-204"></span><span>    </span><span id="local-6989586621679069707"><span class="annot"><span class="annottext">&lt;&gt; :: Doc ann -&gt; Doc ann -&gt; Doc ann
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679069708"><span class="annot"><span class="annottext">sconcat :: NonEmpty (Doc ann) -&gt; Doc ann
</span><a href="#local-6989586621679069708"><span class="hs-identifier hs-var hs-var hs-var hs-var">sconcat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679069710"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069710"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679069712"><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679069712"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier hs-var">hcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069710"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679069712"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679069730"><span class="annot"><span class="annottext">stimes :: forall b. Integral b =&gt; b -&gt; Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679069730"><span class="hs-identifier hs-var hs-var hs-var hs-var">stimes</span></a></span></span><span> </span><span id="local-6989586621679069732"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679069732"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679069733"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069733"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-207"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679069732"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; b -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>
</span><span id="line-208"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679069732"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; b -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-number">1</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069733"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-209"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-210"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679069742"><span class="annot"><span class="annottext">n' :: Int
</span><a href="#local-6989586621679069742"><span class="hs-identifier hs-var hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679069732"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-211"></span><span>              </span><span id="local-6989586621679069743"><span class="annot"><span class="annottext">nx :: Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var hs-var">nx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier hs-var">hcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; [Doc ann]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069742"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069733"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069733"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-213"></span><span>              </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>
</span><span id="line-214"></span><span>              </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>
</span><span id="line-215"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679069745"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679069745"><span class="hs-identifier hs-var">c</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069742"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069742"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679069745"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679069748"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069748"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679069749"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679069749"><span class="hs-identifier hs-var">t</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069742"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069748"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679069742"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679069749"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>              </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-218"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-219"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-220"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-221"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-222"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-223"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-224"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-225"></span><span>              </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679069743"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- 'mempty' = 'emptyDoc'</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- 'mconcat' = 'hcat'</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-232"></span><span class="hs-comment">--</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- &gt;&gt;&gt; mappend &quot;hello&quot; &quot;world&quot; :: Doc ann</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- helloworld</span><span>
</span><span id="line-235"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069334"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069334"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679069758"><span class="annot"><span class="annottext">mempty :: Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#emptyDoc"><span class="hs-identifier hs-var">emptyDoc</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621679069760"><span class="annot"><span class="annottext">mappend :: Doc ann -&gt; Doc ann -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621679069761"><span class="annot"><span class="annottext">mconcat :: [Doc ann] -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mconcat</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier hs-var">hcat</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (&quot;hello\nworld&quot;)</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- hello</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- world</span><span>
</span><span id="line-243"></span><span class="hs-comment">--</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- This instance uses the 'Pretty' 'Text' instance, and uses the same newline to</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- 'line' conversion.</span><span>
</span><span id="line-246"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069337"><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069337"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621679069767"><span class="annot"><span class="annottext">fromString :: String -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc ann) -&gt; (String -&gt; Text) -&gt; String -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- | Alter the document&#8217;s annotations.</span><span>
</span><span id="line-250"></span><span class="hs-comment">--</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- This instance makes 'Doc' more flexible (because it can be used in</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- 'Functor'-polymorphic values), but @'fmap'@ is much less readable compared to</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- using @'reAnnotate'@ in code that only works for @'Doc'@ anyway. Consider</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- using the latter when the type does not matter.</span><span>
</span><span id="line-255"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069773"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621679069777"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; Doc a -&gt; Doc b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Doc a -&gt; Doc b
forall a b. (a -&gt; b) -&gt; Doc a -&gt; Doc b
</span><a href="Prettyprinter.Internal.html#reAnnotate"><span class="hs-identifier hs-var">reAnnotate</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-comment">-- | Overloaded conversion to 'Doc'.</span><span>
</span><span id="line-259"></span><span class="hs-comment">--</span><span>
</span><span id="line-260"></span><span class="hs-comment">-- Laws:</span><span>
</span><span id="line-261"></span><span class="hs-comment">--</span><span>
</span><span id="line-262"></span><span class="hs-comment">--   1. output should be pretty. :-)</span><span>
</span><span id="line-263"></span><span class="hs-keyword">class</span><span> </span><span id="Pretty"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-var">Pretty</span></a></span></span><span> </span><span id="local-6989586621679069340"><span class="annot"><a href="#local-6989586621679069340"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-comment">-- | &gt;&gt;&gt; pretty 1 &lt;+&gt; pretty &quot;hello&quot; &lt;+&gt; pretty 1.234</span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-comment">-- 1 hello 1.234</span><span>
</span><span id="line-267"></span><span>    </span><span id="pretty"><span class="annot"><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679069339"><span class="annot"><a href="#local-6989586621679069340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069339"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="pretty"><span class="annot"><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679069351"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679069340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069351"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-270"></span><span>    </span><span id="local-6989586621679069779"><span class="annot"><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var">pretty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-comment">-- | @'prettyList'@ is only used to define the @instance</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-comment">-- 'Pretty' a =&gt; 'Pretty' [a]@. In normal circumstances only the @'pretty'@</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-comment">-- function is used.</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; prettyList [1, 23, 456]</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-comment">-- [1, 23, 456]</span><span>
</span><span id="line-278"></span><span>    </span><span id="prettyList"><span class="annot"><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-type">prettyList</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679069355"><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679069340"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069355"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-279"></span><span>    </span><span id="local-6989586621679069783"><span class="annot"><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-var hs-var">prettyList</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#align"><span class="hs-identifier hs-var">align</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; ([a] -&gt; Doc ann) -&gt; [a] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#list"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="annottext">([Doc ann] -&gt; Doc ann) -&gt; ([a] -&gt; [Doc ann]) -&gt; [a] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Doc ann) -&gt; [a] -&gt; [Doc ann]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc ann
forall ann. a -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-pragma">{-# MINIMAL</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#pretty"><span class="hs-pragma hs-type">pretty</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- $</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- Issue #67: Nested lists were not aligned with &#187;pretty&#171;, leading to non-pretty</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- output, violating the Pretty class law.</span><span>
</span><span id="line-286"></span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty (replicate 2 (replicate 4 (1, replicate 8 2)))</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- [ [ (1, [2, 2, 2, 2, 2, 2, 2, 2])</span><span>
</span><span id="line-289"></span><span class="hs-comment">--   , (1, [2, 2, 2, 2, 2, 2, 2, 2])</span><span>
</span><span id="line-290"></span><span class="hs-comment">--   , (1, [2, 2, 2, 2, 2, 2, 2, 2])</span><span>
</span><span id="line-291"></span><span class="hs-comment">--   , (1, [2, 2, 2, 2, 2, 2, 2, 2]) ]</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- , [ (1, [2, 2, 2, 2, 2, 2, 2, 2])</span><span>
</span><span id="line-293"></span><span class="hs-comment">--   , (1, [2, 2, 2, 2, 2, 2, 2, 2])</span><span>
</span><span id="line-294"></span><span class="hs-comment">--   , (1, [2, 2, 2, 2, 2, 2, 2, 2])</span><span>
</span><span id="line-295"></span><span class="hs-comment">--   , (1, [2, 2, 2, 2, 2, 2, 2, 2]) ] ]</span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069363"><span id="local-6989586621679069364"><span id="local-6989586621679069788"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069363"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679069363"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069364"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621679069793"><span class="annot"><span class="annottext">pretty :: forall ann. Const a b -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc ann
forall ann. a -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Doc ann) -&gt; (Const a b -&gt; a) -&gt; Const a b -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Const a b -&gt; a
forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span class="hs-cpp">

#if FUNCTOR_IDENTITY_IN_BASE
</span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (Identity 1)</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- 1</span><span>
</span><span id="line-303"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069371"><span id="local-6989586621679069798"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069371"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="annot"><a href="#local-6989586621679069371"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>  </span><span id="local-6989586621679069802"><span class="annot"><span class="annottext">pretty :: forall ann. Identity a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc ann
forall ann. a -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Doc ann) -&gt; (Identity a -&gt; a) -&gt; Identity a -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Identity a -&gt; a
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty [1,2,3]</span><span>
</span><span id="line-308"></span><span class="hs-comment">-- [1, 2, 3]</span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069375"><span id="local-6989586621679069807"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679069375"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>    </span><span id="local-6989586621679069811"><span class="annot"><span class="annottext">pretty :: forall ann. [a] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Doc ann
forall ann. [a] -&gt; Doc ann
forall a ann. Pretty a =&gt; [a] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069378"><span id="local-6989586621679069815"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069378"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621679069378"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>    </span><span id="local-6989586621679069819"><span class="annot"><span class="annottext">pretty :: forall ann. NonEmpty a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679069820"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679069820"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span id="local-6989586621679069821"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679069821"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Doc ann
forall ann. [a] -&gt; Doc ann
forall a ann. Pretty a =&gt; [a] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679069820"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679069821"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty ()</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- ()</span><span>
</span><span id="line-317"></span><span class="hs-comment">--</span><span>
</span><span id="line-318"></span><span class="hs-comment">-- The argument is not used:</span><span>
</span><span id="line-319"></span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty (error &quot;Strict?&quot; :: ())</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- ()</span><span>
</span><span id="line-322"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069824"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>    </span><span id="local-6989586621679069828"><span class="annot"><span class="annottext">pretty :: forall ann. () -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;()&quot;</span></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty True</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-327"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069831"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-328"></span><span>    </span><span id="local-6989586621679069836"><span class="annot"><span class="annottext">pretty :: forall ann. Bool -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;True&quot;</span></span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;False&quot;</span></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">-- | Instead of @('pretty' '\n')@, consider using @'line'@ as a more readable</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- alternative.</span><span>
</span><span id="line-333"></span><span class="hs-comment">--</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty 'f' &lt;&gt; pretty 'o' &lt;&gt; pretty 'o'</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- foo</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty (&quot;string&quot; :: String)</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- string</span><span>
</span><span id="line-338"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-339"></span><span>    </span><span id="local-6989586621679069840"><span class="annot"><span class="annottext">pretty :: forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#line"><span class="hs-identifier hs-var">line</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span id="local-6989586621679069841"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679069841"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc ann
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679069841"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-cpp">

#ifdef MIN_VERSION_text
</span><span>    </span><span id="local-6989586621679069845"><span class="annot"><span class="annottext">prettyList :: forall ann. String -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc ann) -&gt; (String -&gt; Text) -&gt; String -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text) -&gt; (String -&gt; Text) -&gt; String -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall a. IsString a =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span class="hs-cpp">
#else
</span><span>    </span><span class="hs-identifier">prettyList</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">vsep</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">map</span><span> </span><span class="hs-identifier">unsafeTextWithoutNewlines</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">T.splitOn</span><span> </span><span class="hs-string">&quot;\n&quot;</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- | Convenience function to convert a 'Show'able value to a 'Doc'. If the</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- 'String' does not contain newlines, consider using the more performant</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- 'unsafeViaShow'.</span><span>
</span><span id="line-351"></span><span id="local-6989586621679069353"><span id="local-6989586621679069354"><span class="annot"><a href="Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-type">viaShow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679069353"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069353"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069354"><span class="hs-identifier hs-type">ann</span></a></span></span></span><span>
</span><span id="line-352"></span><span id="viaShow"><span class="annot"><span class="annottext">viaShow :: forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var hs-var">viaShow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc ann) -&gt; (a -&gt; Text) -&gt; a -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (a -&gt; String) -&gt; a -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-comment">-- | Convenience function to convert a 'Show'able value /that must not contain</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- newlines/ to a 'Doc'. If there may be newlines, use 'viaShow' instead.</span><span>
</span><span id="line-356"></span><span id="local-6989586621679069851"><span id="local-6989586621679069852"><span class="annot"><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-type">unsafeViaShow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679069851"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069851"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069852"><span class="hs-identifier hs-type">ann</span></a></span></span></span><span>
</span><span id="line-357"></span><span id="unsafeViaShow"><span class="annot"><span class="annottext">unsafeViaShow :: forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var hs-var">unsafeViaShow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeTextWithoutNewlines"><span class="hs-identifier hs-var">unsafeTextWithoutNewlines</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc ann) -&gt; (a -&gt; Text) -&gt; a -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (a -&gt; String) -&gt; a -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (123 :: Int)</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- 123</span><span>
</span><span id="line-361"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069857"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069862"><span class="annot"><span class="annottext">pretty :: forall ann. Int -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069865"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int8</span></span></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069870"><span class="annot"><span class="annottext">pretty :: forall ann. Int8 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int8 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-363"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069873"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int16</span></span></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069878"><span class="annot"><span class="annottext">pretty :: forall ann. Int16 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int16 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-364"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069881"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069886"><span class="annot"><span class="annottext">pretty :: forall ann. Int32 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-365"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069889"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069894"><span class="annot"><span class="annottext">pretty :: forall ann. Int64 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-366"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069897"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069902"><span class="annot"><span class="annottext">pretty :: forall ann. Word -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-367"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069905"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069910"><span class="annot"><span class="annottext">pretty :: forall ann. Word8 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-368"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069913"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069918"><span class="annot"><span class="annottext">pretty :: forall ann. Word16 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-369"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069921"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069926"><span class="annot"><span class="annottext">pretty :: forall ann. Word32 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-370"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069929"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069934"><span class="annot"><span class="annottext">pretty :: forall ann. Word64 -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (2^123 :: Integer)</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- 10633823966279326983230456482242756608</span><span>
</span><span id="line-374"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069937"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069942"><span class="annot"><span class="annottext">pretty :: forall ann. Integer -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span class="hs-cpp">

#if NATURAL_IN_BASE
</span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069945"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069950"><span class="annot"><span class="annottext">pretty :: forall ann. Natural -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (pi :: Float)</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- 3.1415927</span><span>
</span><span id="line-382"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069953"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Float</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069958"><span class="annot"><span class="annottext">pretty :: forall ann. Float -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Float -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (exp 1 :: Double)</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- 2.71828182845904...</span><span>
</span><span id="line-386"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069961"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679069966"><span class="annot"><span class="annottext">pretty :: forall ann. Double -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier hs-var">unsafeViaShow</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (123, &quot;hello&quot;)</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- (123, hello)</span><span>
</span><span id="line-390"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069406"><span id="local-6989586621679069407"><span id="local-6989586621679069971"><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069406"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069407"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679069406"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679069407"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-391"></span><span>    </span><span id="local-6989586621679069976"><span class="annot"><span class="annottext">pretty :: forall ann. (a1, a2) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679069977"><span class="annot"><span class="annottext">a1
</span><a href="#local-6989586621679069977"><span class="hs-identifier hs-var">x1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679069978"><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621679069978"><span class="hs-identifier hs-var">x2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#tupled"><span class="hs-identifier hs-var">tupled</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a1 -&gt; Doc ann
forall ann. a1 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a1
</span><a href="#local-6989586621679069977"><span class="hs-identifier hs-var">x1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a2 -&gt; Doc ann
forall ann. a2 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621679069978"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- | &gt;&gt;&gt; pretty (123, &quot;hello&quot;, False)</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- (123, hello, False)</span><span>
</span><span id="line-395"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069412"><span id="local-6989586621679069413"><span id="local-6989586621679069414"><span id="local-6989586621679069984"><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069412"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069413"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069414"><span class="hs-identifier hs-type">a3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679069412"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679069413"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679069414"><span class="hs-identifier hs-type">a3</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621679069990"><span class="annot"><span class="annottext">pretty :: forall ann. (a1, a2, a3) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679069991"><span class="annot"><span class="annottext">a1
</span><a href="#local-6989586621679069991"><span class="hs-identifier hs-var">x1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679069992"><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621679069992"><span class="hs-identifier hs-var">x2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679069993"><span class="annot"><span class="annottext">a3
</span><a href="#local-6989586621679069993"><span class="hs-identifier hs-var">x3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#tupled"><span class="hs-identifier hs-var">tupled</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a1 -&gt; Doc ann
forall ann. a1 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a1
</span><a href="#local-6989586621679069991"><span class="hs-identifier hs-var">x1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a2 -&gt; Doc ann
forall ann. a2 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621679069992"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a3 -&gt; Doc ann
forall ann. a3 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a3
</span><a href="#local-6989586621679069993"><span class="hs-identifier hs-var">x3</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">--    -- | &gt;&gt;&gt; pretty (123, &quot;hello&quot;, False, ())</span><span>
</span><span id="line-399"></span><span class="hs-comment">--    -- (123, hello, False, ())</span><span>
</span><span id="line-400"></span><span class="hs-comment">--    instance (Pretty a1, Pretty a2, Pretty a3, Pretty a4) =&gt; Pretty (a1,a2,a3,a4) where</span><span>
</span><span id="line-401"></span><span class="hs-comment">--        pretty (x1,x2,x3,x4) = tupled [pretty x1, pretty x2, pretty x3, pretty x4]</span><span>
</span><span id="line-402"></span><span class="hs-comment">--</span><span>
</span><span id="line-403"></span><span class="hs-comment">--    -- | &gt;&gt;&gt; pretty (123, &quot;hello&quot;, False, (), 3.14)</span><span>
</span><span id="line-404"></span><span class="hs-comment">--    -- (123, hello, False, (), 3.14)</span><span>
</span><span id="line-405"></span><span class="hs-comment">--    instance (Pretty a1, Pretty a2, Pretty a3, Pretty a4, Pretty a5) =&gt; Pretty (a1,a2,a3,a4,a5) where</span><span>
</span><span id="line-406"></span><span class="hs-comment">--        pretty (x1,x2,x3,x4,x5) = tupled [pretty x1, pretty x2, pretty x3, pretty x4, pretty x5]</span><span>
</span><span id="line-407"></span><span class="hs-comment">--</span><span>
</span><span id="line-408"></span><span class="hs-comment">--    -- | &gt;&gt;&gt; pretty (123, &quot;hello&quot;, False, (), 3.14, Just 2.71)</span><span>
</span><span id="line-409"></span><span class="hs-comment">--    -- ( 123</span><span>
</span><span id="line-410"></span><span class="hs-comment">--    -- , hello</span><span>
</span><span id="line-411"></span><span class="hs-comment">--    -- , False</span><span>
</span><span id="line-412"></span><span class="hs-comment">--    -- , ()</span><span>
</span><span id="line-413"></span><span class="hs-comment">--    -- , 3.14</span><span>
</span><span id="line-414"></span><span class="hs-comment">--    -- , 2.71 )</span><span>
</span><span id="line-415"></span><span class="hs-comment">--    instance (Pretty a1, Pretty a2, Pretty a3, Pretty a4, Pretty a5, Pretty a6) =&gt; Pretty (a1,a2,a3,a4,a5,a6) where</span><span>
</span><span id="line-416"></span><span class="hs-comment">--        pretty (x1,x2,x3,x4,x5,x6) = tupled [pretty x1, pretty x2, pretty x3, pretty x4, pretty x5, pretty x6]</span><span>
</span><span id="line-417"></span><span class="hs-comment">--</span><span>
</span><span id="line-418"></span><span class="hs-comment">--    -- | &gt;&gt;&gt; pretty (123, &quot;hello&quot;, False, (), 3.14, Just 2.71, [1,2,3])</span><span>
</span><span id="line-419"></span><span class="hs-comment">--    -- ( 123</span><span>
</span><span id="line-420"></span><span class="hs-comment">--    -- , hello</span><span>
</span><span id="line-421"></span><span class="hs-comment">--    -- , False</span><span>
</span><span id="line-422"></span><span class="hs-comment">--    -- , ()</span><span>
</span><span id="line-423"></span><span class="hs-comment">--    -- , 3.14</span><span>
</span><span id="line-424"></span><span class="hs-comment">--    -- , 2.71</span><span>
</span><span id="line-425"></span><span class="hs-comment">--    -- , [1, 2, 3] )</span><span>
</span><span id="line-426"></span><span class="hs-comment">--    instance (Pretty a1, Pretty a2, Pretty a3, Pretty a4, Pretty a5, Pretty a6, Pretty a7) =&gt; Pretty (a1,a2,a3,a4,a5,a6,a7) where</span><span>
</span><span id="line-427"></span><span class="hs-comment">--        pretty (x1,x2,x3,x4,x5,x6,x7) = tupled [pretty x1, pretty x2, pretty x3, pretty x4, pretty x5, pretty x6, pretty x7]</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-comment">-- | Ignore 'Nothing's, print 'Just' contents.</span><span>
</span><span id="line-430"></span><span class="hs-comment">--</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty (Just True)</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- &gt;&gt;&gt; braces (pretty (Nothing :: Maybe Bool))</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- {}</span><span>
</span><span id="line-435"></span><span class="hs-comment">--</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty [Just 1, Nothing, Just 3, Nothing]</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- [1, 3]</span><span>
</span><span id="line-438"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069417"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069417"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679069417"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-439"></span><span>    </span><span id="local-6989586621679070000"><span class="annot"><span class="annottext">pretty :: forall ann. Maybe a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; (a -&gt; Doc ann) -&gt; Maybe a -&gt; Doc ann
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc ann
forall ann. a -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span>
</span><span id="line-440"></span><span>    </span><span id="local-6989586621679070003"><span class="annot"><span class="annottext">prettyList :: forall ann. [Maybe a] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Doc ann
forall ann. [a] -&gt; Doc ann
forall a ann. Pretty a =&gt; [a] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Doc ann) -&gt; ([Maybe a] -&gt; [a]) -&gt; [Maybe a] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Maybe a] -&gt; [a]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span class="hs-cpp">

#ifdef MIN_VERSION_text
</span><span class="hs-comment">-- | Automatically converts all newlines to @'line'@.</span><span>
</span><span id="line-444"></span><span class="hs-comment">--</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty (&quot;hello\nworld&quot; :: Text)</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- hello</span><span>
</span><span id="line-447"></span><span class="hs-comment">-- world</span><span>
</span><span id="line-448"></span><span class="hs-comment">--</span><span>
</span><span id="line-449"></span><span class="hs-comment">-- Note that  @'line'@ can be undone by @'group'@:</span><span>
</span><span id="line-450"></span><span class="hs-comment">--</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- &gt;&gt;&gt; group (pretty (&quot;hello\nworld&quot; :: Text))</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- hello world</span><span>
</span><span id="line-453"></span><span class="hs-comment">--</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- Manually use @'hardline'@ if you /definitely/ want newlines.</span><span>
</span><span id="line-455"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070007"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679070012"><span class="annot"><span class="annottext">pretty :: forall ann. Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var">vsep</span></a></span><span> </span><span class="annot"><span class="annottext">([Doc ann] -&gt; Doc ann) -&gt; (Text -&gt; [Doc ann]) -&gt; Text -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc ann) -&gt; [Text] -&gt; [Doc ann]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeTextWithoutNewlines"><span class="hs-identifier hs-var">unsafeTextWithoutNewlines</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Doc ann]) -&gt; (Text -&gt; [Text]) -&gt; Text -&gt; [Doc ann]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text -&gt; [Text]
Text -&gt; Text -&gt; [Text]
</span><span class="hs-identifier hs-var">T.splitOn</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="annot"><span class="hs-comment">-- | (lazy 'Text' instance, identical to the strict version)</span></span><span>
</span><span id="line-458"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070016"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679070020"><span class="annot"><span class="annottext">pretty :: forall ann. Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc ann) -&gt; (Text -&gt; Text) -&gt; Text -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><span class="hs-identifier hs-var">Lazy.toStrict</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- | Finding a good example for printing something that does not exist is hard,</span><span>
</span><span id="line-462"></span><span class="hs-comment">-- so here is an example of printing a list full of nothing.</span><span>
</span><span id="line-463"></span><span class="hs-comment">--</span><span>
</span><span id="line-464"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty ([] :: [Void])</span><span>
</span><span id="line-465"></span><span class="hs-comment">-- []</span><span>
</span><span id="line-466"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070024"><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679070027"><span class="annot"><span class="annottext">pretty :: forall ann. Void -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Void -&gt; Doc ann
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="hs-comment">-- | @(unsafeTextWithoutNewlines s)@ contains the literal string @s@.</span><span>
</span><span id="line-471"></span><span class="hs-comment">--</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- The string must not contain any newline characters, since this is an</span><span>
</span><span id="line-473"></span><span class="hs-comment">-- invariant of the 'Text' constructor.</span><span>
</span><span id="line-474"></span><span id="local-6989586621679070029"><span class="annot"><a href="Prettyprinter.Internal.html#unsafeTextWithoutNewlines"><span class="hs-identifier hs-type">unsafeTextWithoutNewlines</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070029"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-475"></span><span id="unsafeTextWithoutNewlines"><span class="annot"><span class="annottext">unsafeTextWithoutNewlines :: forall ann. Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#unsafeTextWithoutNewlines"><span class="hs-identifier hs-var hs-var">unsafeTextWithoutNewlines</span></a></span></span><span> </span><span id="local-6989586621679070030"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070030"><span class="hs-identifier hs-var">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Char, Text)
</span><span class="hs-identifier hs-var">T.uncons</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070030"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Char, Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>
</span><span id="line-477"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070032"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070032"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679070033"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070033"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070033"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc ann
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070032"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-479"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">T.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070030"><span class="hs-identifier hs-var">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070030"><span class="hs-identifier hs-var">text</span></a></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-comment">-- | The empty document behaves like @('pretty' &quot;&quot;)@, so it has a height of 1.</span><span>
</span><span id="line-482"></span><span class="hs-comment">-- This may lead to surprising behaviour if we expect it to bear no weight</span><span>
</span><span id="line-483"></span><span class="hs-comment">-- inside e.g. 'vcat', where we get an empty line of output from it ('parens'</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- for visibility only):</span><span>
</span><span id="line-485"></span><span class="hs-comment">--</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- &gt;&gt;&gt; vsep [&quot;hello&quot;, parens emptyDoc, &quot;world&quot;]</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- hello</span><span>
</span><span id="line-488"></span><span class="hs-comment">-- ()</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- world</span><span>
</span><span id="line-490"></span><span class="hs-comment">--</span><span>
</span><span id="line-491"></span><span class="hs-comment">-- Together with '&lt;&gt;', 'emptyDoc' forms the 'Monoid' 'Doc'.</span><span>
</span><span id="line-492"></span><span id="local-6989586621679070035"><span class="annot"><a href="Prettyprinter.Internal.html#emptyDoc"><span class="hs-identifier hs-type">emptyDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070035"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-493"></span><span id="emptyDoc"><span class="annot"><span class="annottext">emptyDoc :: forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#emptyDoc"><span class="hs-identifier hs-var hs-var">emptyDoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span class="hs-comment">-- | @('nest' i x)@ lays out the document @x@ with the current nesting level</span><span>
</span><span id="line-496"></span><span class="hs-comment">-- (indentation of the following lines) increased by @i@. Negative values are</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- allowed, and decrease the nesting level accordingly.</span><span>
</span><span id="line-498"></span><span class="hs-comment">--</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- &gt;&gt;&gt; vsep [nest 4 (vsep [&quot;lorem&quot;, &quot;ipsum&quot;, &quot;dolor&quot;]), &quot;sit&quot;, &quot;amet&quot;]</span><span>
</span><span id="line-500"></span><span class="hs-comment">-- lorem</span><span>
</span><span id="line-501"></span><span class="hs-comment">--     ipsum</span><span>
</span><span id="line-502"></span><span class="hs-comment">--     dolor</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- sit</span><span>
</span><span id="line-504"></span><span class="hs-comment">-- amet</span><span>
</span><span id="line-505"></span><span class="hs-comment">--</span><span>
</span><span id="line-506"></span><span class="hs-comment">-- See also</span><span>
</span><span id="line-507"></span><span class="hs-comment">--</span><span>
</span><span id="line-508"></span><span class="hs-comment">--   * 'hang' ('nest' relative to current cursor position instead of</span><span>
</span><span id="line-509"></span><span class="hs-comment">--      current nesting level)</span><span>
</span><span id="line-510"></span><span class="hs-comment">--   * 'align' (set nesting level to current cursor position)</span><span>
</span><span id="line-511"></span><span class="hs-comment">--   * 'indent' (increase indentation on the spot, padding with spaces).</span><span>
</span><span id="line-512"></span><span id="local-6989586621679069431"><span class="annot"><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Change of nesting level</span></span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069431"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069431"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-516"></span><span id="nest"><span class="annot"><span class="annottext">nest :: forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier hs-var hs-var">nest</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621679070039"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070039"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070039"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-comment">-- Optimization</span><span>
</span><span id="line-517"></span><span class="annot"><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span id="local-6989586621679070040"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070040"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070041"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070041"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070040"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070041"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="hs-comment">-- | The @'line'@ document advances to the next line and indents to the current</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- nesting level.</span><span>
</span><span id="line-521"></span><span class="hs-comment">--</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;lorem ipsum&quot; &lt;&gt; line &lt;&gt; &quot;dolor sit amet&quot;</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- &gt;&gt;&gt; doc</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-525"></span><span class="hs-comment">-- dolor sit amet</span><span>
</span><span id="line-526"></span><span class="hs-comment">--</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- @'line'@ behaves like @'space'@ if the line break is undone by 'group':</span><span>
</span><span id="line-528"></span><span class="hs-comment">--</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- &gt;&gt;&gt; group doc</span><span>
</span><span id="line-530"></span><span class="hs-comment">-- lorem ipsum dolor sit amet</span><span>
</span><span id="line-531"></span><span id="local-6989586621679070042"><span class="annot"><a href="Prettyprinter.Internal.html#line"><span class="hs-identifier hs-type">line</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070042"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-532"></span><span id="line"><span class="annot"><span class="annottext">line :: forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#line"><span class="hs-identifier hs-var hs-var">line</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-var">FlatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Doc ann
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="hs-comment">-- | @'line''@ is like @'line'@, but behaves like @'mempty'@ if the line break</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- is undone by 'group' (instead of @'space'@).</span><span>
</span><span id="line-536"></span><span class="hs-comment">--</span><span>
</span><span id="line-537"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;lorem ipsum&quot; &lt;&gt; line' &lt;&gt; &quot;dolor sit amet&quot;</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- &gt;&gt;&gt; doc</span><span>
</span><span id="line-539"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-540"></span><span class="hs-comment">-- dolor sit amet</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- &gt;&gt;&gt; group doc</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- lorem ipsumdolor sit amet</span><span>
</span><span id="line-543"></span><span id="local-6989586621679070043"><span class="annot"><a href="Prettyprinter.Internal.html#line%27"><span class="hs-identifier hs-type">line'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070043"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-544"></span><span id="line%27"><span class="annot"><span class="annottext">line' :: forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#line%27"><span class="hs-identifier hs-var hs-var">line'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-var">FlatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span class="hs-comment">-- | @softline@ behaves like @'space'@ if the resulting output fits the page,</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- otherwise like @'line'@.</span><span>
</span><span id="line-548"></span><span class="hs-comment">--</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- Here, we have enough space to put everything in one line:</span><span>
</span><span id="line-550"></span><span class="hs-comment">--</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;lorem ipsum&quot; &lt;&gt; softline &lt;&gt; &quot;dolor sit amet&quot;</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- lorem ipsum dolor sit amet</span><span>
</span><span id="line-554"></span><span class="hs-comment">--</span><span>
</span><span id="line-555"></span><span class="hs-comment">-- If we narrow the page to width 10, the layouter produces a line break:</span><span>
</span><span id="line-556"></span><span class="hs-comment">--</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 doc</span><span>
</span><span id="line-558"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-559"></span><span class="hs-comment">-- dolor sit amet</span><span>
</span><span id="line-560"></span><span class="hs-comment">--</span><span>
</span><span id="line-561"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-562"></span><span class="hs-comment">-- 'softline' = 'group' 'line'</span><span>
</span><span id="line-563"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-564"></span><span id="local-6989586621679070045"><span class="annot"><a href="Prettyprinter.Internal.html#softline"><span class="hs-identifier hs-type">softline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070045"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-565"></span><span id="softline"><span class="annot"><span class="annottext">softline :: forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#softline"><span class="hs-identifier hs-var hs-var">softline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Doc ann
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>
</span><span id="line-566"></span><span>
</span><span id="line-567"></span><span class="hs-comment">-- | @'softline''@ is like @'softline'@, but behaves like @'mempty'@ if the</span><span>
</span><span id="line-568"></span><span class="hs-comment">-- resulting output does not fit on the page (instead of @'space'@). In other</span><span>
</span><span id="line-569"></span><span class="hs-comment">-- words, @'line'@ is to @'line''@ how @'softline'@ is to @'softline''@.</span><span>
</span><span id="line-570"></span><span class="hs-comment">--</span><span>
</span><span id="line-571"></span><span class="hs-comment">-- With enough space, we get direct concatenation:</span><span>
</span><span id="line-572"></span><span class="hs-comment">--</span><span>
</span><span id="line-573"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;ThisWord&quot; &lt;&gt; softline' &lt;&gt; &quot;IsWayTooLong&quot;</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- ThisWordIsWayTooLong</span><span>
</span><span id="line-576"></span><span class="hs-comment">--</span><span>
</span><span id="line-577"></span><span class="hs-comment">-- If we narrow the page to width 10, the layouter produces a line break:</span><span>
</span><span id="line-578"></span><span class="hs-comment">--</span><span>
</span><span id="line-579"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 doc</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- ThisWord</span><span>
</span><span id="line-581"></span><span class="hs-comment">-- IsWayTooLong</span><span>
</span><span id="line-582"></span><span class="hs-comment">--</span><span>
</span><span id="line-583"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- 'softline'' = 'group' 'line''</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-586"></span><span id="local-6989586621679070046"><span class="annot"><a href="Prettyprinter.Internal.html#softline%27"><span class="hs-identifier hs-type">softline'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070046"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-587"></span><span id="softline%27"><span class="annot"><span class="annottext">softline' :: forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#softline%27"><span class="hs-identifier hs-var hs-var">softline'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span class="hs-comment">-- | A @'hardline'@ is /always/ laid out as a line break, even when 'group'ed or</span><span>
</span><span id="line-590"></span><span class="hs-comment">-- when there is plenty of space. Note that it might still be simply discarded</span><span>
</span><span id="line-591"></span><span class="hs-comment">-- if it is part of a 'flatAlt' inside a 'group'.</span><span>
</span><span id="line-592"></span><span class="hs-comment">--</span><span>
</span><span id="line-593"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;lorem ipsum&quot; &lt;&gt; hardline &lt;&gt; &quot;dolor sit amet&quot;</span><span>
</span><span id="line-594"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 1000 doc</span><span>
</span><span id="line-595"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-596"></span><span class="hs-comment">-- dolor sit amet</span><span>
</span><span id="line-597"></span><span class="hs-comment">--</span><span>
</span><span id="line-598"></span><span class="hs-comment">-- &gt;&gt;&gt; group doc</span><span>
</span><span id="line-599"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-600"></span><span class="hs-comment">-- dolor sit amet</span><span>
</span><span id="line-601"></span><span id="local-6989586621679070048"><span class="annot"><a href="Prettyprinter.Internal.html#hardline"><span class="hs-identifier hs-type">hardline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070048"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-602"></span><span id="hardline"><span class="annot"><span class="annottext">hardline :: forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#hardline"><span class="hs-identifier hs-var hs-var">hardline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-comment">-- | @('group' x)@ tries laying out @x@ into a single line by removing the</span><span>
</span><span id="line-605"></span><span class="hs-comment">-- contained line breaks; if this does not fit the page, or when a 'hardline'</span><span>
</span><span id="line-606"></span><span class="hs-comment">-- within @x@ prevents it from being flattened, @x@ is laid out without any</span><span>
</span><span id="line-607"></span><span class="hs-comment">-- changes.</span><span>
</span><span id="line-608"></span><span class="hs-comment">--</span><span>
</span><span id="line-609"></span><span class="hs-comment">-- The 'group' function is key to layouts that adapt to available space nicely.</span><span>
</span><span id="line-610"></span><span class="hs-comment">--</span><span>
</span><span id="line-611"></span><span class="hs-comment">-- See 'vcat', 'line', or 'flatAlt' for examples that are related, or make good</span><span>
</span><span id="line-612"></span><span class="hs-comment">-- use of it.</span><span>
</span><span id="line-613"></span><span id="local-6989586621679070049"><span class="annot"><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier hs-type">group</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070049"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070049"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-614"></span><span class="hs-comment">-- See note [Group: special flattening]</span><span>
</span><span id="line-615"></span><span id="group"><span class="annot"><span class="annottext">group :: forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier hs-var hs-var">group</span></a></span></span><span> </span><span id="local-6989586621679070050"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-616"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-617"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span id="local-6989586621679070051"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070051"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679070052"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070052"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var">changesUponFlattening</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070052"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-618"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070055"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070055"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070055"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070051"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-619"></span><span>        </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070052"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070051"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-620"></span><span>        </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070051"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-621"></span><span>    </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var">changesUponFlattening</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-622"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070058"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070058"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070058"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-623"></span><span>        </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-624"></span><span>        </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070050"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="hs-comment">-- Note [Group: special flattening]</span><span>
</span><span id="line-627"></span><span class="hs-comment">--</span><span>
</span><span id="line-628"></span><span class="hs-comment">-- Since certain documents do not change under removal of newlines etc, there is</span><span>
</span><span id="line-629"></span><span class="hs-comment">-- no point in creating a 'Union' of the flattened and unflattened version &#8211; all</span><span>
</span><span id="line-630"></span><span class="hs-comment">-- this does is introducing two branches for the layout algorithm to take,</span><span>
</span><span id="line-631"></span><span class="hs-comment">-- resulting in potentially exponential behavior on deeply nested examples, such</span><span>
</span><span id="line-632"></span><span class="hs-comment">-- as</span><span>
</span><span id="line-633"></span><span class="hs-comment">--</span><span>
</span><span id="line-634"></span><span class="hs-comment">--     pathological n = iterate (\x -&gt;  hsep [x, sep []] ) &quot;foobar&quot; !! n</span><span>
</span><span id="line-635"></span><span class="hs-comment">--</span><span>
</span><span id="line-636"></span><span class="hs-comment">-- See https://github.com/quchen/prettyprinter/issues/22 for the  corresponding</span><span>
</span><span id="line-637"></span><span class="hs-comment">-- ticket.</span><span>
</span><span id="line-638"></span><span>
</span><span id="line-639"></span><span class="hs-keyword">data</span><span> </span><span id="FlattenResult"><span class="annot"><a href="Prettyprinter.Internal.html#FlattenResult"><span class="hs-identifier hs-var">FlattenResult</span></a></span></span><span> </span><span id="local-6989586621679069443"><span class="annot"><a href="#local-6989586621679069443"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-640"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Flattened"><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679069443"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-641"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ @a@ is likely flatter than the input.</span></span><span>
</span><span id="line-642"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AlreadyFlat"><span class="annot"><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span></span><span>
</span><span id="line-643"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ The input was already flat, e.g. a 'Text'.</span></span><span>
</span><span id="line-644"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="NeverFlat"><span class="annot"><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span></span><span>
</span><span id="line-645"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ The input couldn't be flattened: It contained a 'Line' or 'Fail'.</span></span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070061"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#FlattenResult"><span class="hs-identifier hs-type">FlattenResult</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-648"></span><span>    </span><span id="local-6989586621679070064"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; FlattenResult a -&gt; FlattenResult b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679070065"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679070065"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070066"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679070066"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; FlattenResult b
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679070065"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679070066"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FlattenResult a
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlattenResult b
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>
</span><span id="line-650"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FlattenResult a
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlattenResult b
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>
</span><span id="line-651"></span><span>
</span><span id="line-652"></span><span class="hs-comment">-- | Choose the first element of each @Union@, and discard the first field of</span><span>
</span><span id="line-653"></span><span class="hs-comment">-- all @FlatAlt@s.</span><span>
</span><span id="line-654"></span><span class="hs-comment">--</span><span>
</span><span id="line-655"></span><span class="hs-comment">-- The result is 'Flattened' if the element might change depending on the layout</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- algorithm (i.e. contains differently renderable sub-documents), and 'AlreadyFlat'</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- if the document is static (e.g. contains only a plain 'Empty' node).</span><span>
</span><span id="line-658"></span><span class="hs-comment">-- 'NeverFlat' is returned when the document cannot be flattened because it</span><span>
</span><span id="line-659"></span><span class="hs-comment">-- contains a hard 'Line' or 'Fail'.</span><span>
</span><span id="line-660"></span><span class="hs-comment">-- See [Group: special flattening] for further explanations.</span><span>
</span><span id="line-661"></span><span id="local-6989586621679069440"><span class="annot"><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-type">changesUponFlattening</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069440"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#FlattenResult"><span class="hs-identifier hs-type">FlattenResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069440"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-662"></span><span id="changesUponFlattening"><span class="annot"><span class="annottext">changesUponFlattening :: forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var hs-var">changesUponFlattening</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070069"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070069"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070069"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-663"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070070"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070070"><span class="hs-identifier hs-var">y</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070070"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>    </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>
</span><span id="line-665"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span> </span><span id="local-6989586621679070072"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070072"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070072"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-666"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070073"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070073"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070074"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070074"><span class="hs-identifier hs-var">x</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; FlattenResult (Doc ann) -&gt; FlattenResult (Doc ann)
forall a b. (a -&gt; b) -&gt; FlattenResult a -&gt; FlattenResult b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070073"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var">changesUponFlattening</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070074"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-667"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679070075"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070075"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070076"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070076"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; FlattenResult (Doc ann) -&gt; FlattenResult (Doc ann)
forall a b. (a -&gt; b) -&gt; FlattenResult a -&gt; FlattenResult b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann -&gt; Doc ann -&gt; Doc ann
forall ann. ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070075"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var">changesUponFlattening</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070076"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span id="local-6989586621679070077"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070077"><span class="hs-identifier hs-var">f</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-var">Column</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070077"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span> </span><span id="local-6989586621679070078"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070078"><span class="hs-identifier hs-var">f</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-var">Nesting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070078"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span> </span><span id="local-6989586621679070079"><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070079"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PageWidth -&gt; Doc ann) -&gt; Doc ann
forall ann. (PageWidth -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-var">WithPageWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; (PageWidth -&gt; Doc ann) -&gt; PageWidth -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070079"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070080"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070080"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070081"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070081"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var">changesUponFlattening</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070080"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall ann. Doc ann -&gt; FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#changesUponFlattening"><span class="hs-identifier hs-var">changesUponFlattening</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070081"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-674"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>    </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>
</span><span id="line-675"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>
</span><span id="line-676"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070082"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070082"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070083"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070083"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070082"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070083"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070084"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070084"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070084"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070081"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-type">Flattened</span></a></span><span> </span><span id="local-6989586621679070085"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070085"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; FlattenResult (Doc ann)
forall a. a -&gt; FlattenResult a
</span><a href="Prettyprinter.Internal.html#Flattened"><span class="hs-identifier hs-var">Flattened</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070080"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070085"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span>    </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>
</span><span id="line-682"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>
</span><span id="line-683"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#AlreadyFlat"><span class="hs-identifier hs-var">AlreadyFlat</span></a></span><span>
</span><span id="line-684"></span><span>    </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlattenResult (Doc ann)
forall a. FlattenResult a
</span><a href="Prettyprinter.Internal.html#NeverFlat"><span class="hs-identifier hs-var">NeverFlat</span></a></span><span>
</span><span id="line-685"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-comment">-- Flatten, but don&#8217;t report whether anything changes.</span><span>
</span><span id="line-687"></span><span>    </span><span id="local-6989586621679070086"><span class="annot"><a href="#local-6989586621679070071"><span class="hs-identifier hs-type">flatten</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070086"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070086"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-688"></span><span>    </span><span id="local-6989586621679070071"><span class="annot"><span class="annottext">flatten :: forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var hs-var">flatten</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070087"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070087"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070087"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-689"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070088"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070088"><span class="hs-identifier hs-var">y</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070088"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-690"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070089"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070089"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070090"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070090"><span class="hs-identifier hs-var">y</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070089"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070090"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070091"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070091"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070092"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070092"><span class="hs-identifier hs-var">x</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070091"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070092"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-692"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>
</span><span id="line-693"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span> </span><span id="local-6989586621679070093"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070093"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070093"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-694"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span id="local-6989586621679070094"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070094"><span class="hs-identifier hs-var">f</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-var">Column</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070094"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span> </span><span id="local-6989586621679070095"><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070095"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(PageWidth -&gt; Doc ann) -&gt; Doc ann
forall ann. (PageWidth -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-var">WithPageWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; (PageWidth -&gt; Doc ann) -&gt; PageWidth -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070095"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span> </span><span id="local-6989586621679070096"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070096"><span class="hs-identifier hs-var">f</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-var">Nesting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070096"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679070097"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070097"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070098"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070098"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ann -&gt; Doc ann -&gt; Doc ann
forall ann. ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070097"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070071"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070098"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span>
</span><span id="line-699"></span><span>        </span><span id="local-6989586621679070099"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070099"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070099"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-700"></span><span>        </span><span id="local-6989586621679070100"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070100"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070100"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-701"></span><span>        </span><span id="local-6989586621679070101"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070101"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070101"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-702"></span><span>        </span><span id="local-6989586621679070102"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070102"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070102"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="hs-comment">-- | By default, @('flatAlt' x y)@ renders as @x@. However when 'group'ed,</span><span>
</span><span id="line-707"></span><span class="hs-comment">-- @y@ will be preferred, with @x@ as the fallback for the case when @y@</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- doesn't fit.</span><span>
</span><span id="line-709"></span><span class="hs-comment">--</span><span>
</span><span id="line-710"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = flatAlt &quot;a&quot; &quot;b&quot;</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- &gt;&gt;&gt; putDoc doc</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- a</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- &gt;&gt;&gt; putDoc (group doc)</span><span>
</span><span id="line-714"></span><span class="hs-comment">-- b</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 0 (group doc)</span><span>
</span><span id="line-716"></span><span class="hs-comment">-- a</span><span>
</span><span id="line-717"></span><span class="hs-comment">--</span><span>
</span><span id="line-718"></span><span class="hs-comment">-- 'flatAlt' is particularly useful for defining conditional separators such as</span><span>
</span><span id="line-719"></span><span class="hs-comment">--</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-721"></span><span class="hs-comment">-- softline = 'group' ('flatAlt' 'hardline' &quot; &quot;)</span><span>
</span><span id="line-722"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-723"></span><span class="hs-comment">--</span><span>
</span><span id="line-724"></span><span class="hs-comment">-- &gt;&gt;&gt; let hello = &quot;Hello&quot; &lt;&gt; softline &lt;&gt; &quot;world!&quot;</span><span>
</span><span id="line-725"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 12 hello</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- Hello world!</span><span>
</span><span id="line-727"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 11 hello</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- Hello</span><span>
</span><span id="line-729"></span><span class="hs-comment">-- world!</span><span>
</span><span id="line-730"></span><span class="hs-comment">--</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- === __Example: Haskell's do-notation__</span><span>
</span><span id="line-732"></span><span class="hs-comment">--</span><span>
</span><span id="line-733"></span><span class="hs-comment">-- We can use this to render Haskell's do-notation nicely:</span><span>
</span><span id="line-734"></span><span class="hs-comment">--</span><span>
</span><span id="line-735"></span><span class="hs-comment">-- &gt;&gt;&gt; let open        = flatAlt &quot;&quot; &quot;{ &quot;</span><span>
</span><span id="line-736"></span><span class="hs-comment">-- &gt;&gt;&gt; let close       = flatAlt &quot;&quot; &quot; }&quot;</span><span>
</span><span id="line-737"></span><span class="hs-comment">-- &gt;&gt;&gt; let separator   = flatAlt &quot;&quot; &quot;; &quot;</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- &gt;&gt;&gt; let prettyDo xs = group (&quot;do&quot; &lt;+&gt; align (encloseSep open close separator xs))</span><span>
</span><span id="line-739"></span><span class="hs-comment">-- &gt;&gt;&gt; let statements  = [&quot;name:_ &lt;- getArgs&quot;, &quot;let greet = \&quot;Hello, \&quot; &lt;&gt; name&quot;, &quot;putStrLn greet&quot;]</span><span>
</span><span id="line-740"></span><span class="hs-comment">--</span><span>
</span><span id="line-741"></span><span class="hs-comment">-- This is put into a single line with @{;}@ style if it fits:</span><span>
</span><span id="line-742"></span><span class="hs-comment">--</span><span>
</span><span id="line-743"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 (prettyDo statements)</span><span>
</span><span id="line-744"></span><span class="hs-comment">-- do { name:_ &lt;- getArgs; let greet = &quot;Hello, &quot; &lt;&gt; name; putStrLn greet }</span><span>
</span><span id="line-745"></span><span class="hs-comment">--</span><span>
</span><span id="line-746"></span><span class="hs-comment">-- When there is not enough space the statements are broken up into lines</span><span>
</span><span id="line-747"></span><span class="hs-comment">-- nicely:</span><span>
</span><span id="line-748"></span><span class="hs-comment">--</span><span>
</span><span id="line-749"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 (prettyDo statements)</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- do name:_ &lt;- getArgs</span><span>
</span><span id="line-751"></span><span class="hs-comment">--    let greet = &quot;Hello, &quot; &lt;&gt; name</span><span>
</span><span id="line-752"></span><span class="hs-comment">--    putStrLn greet</span><span>
</span><span id="line-753"></span><span class="hs-comment">--</span><span>
</span><span id="line-754"></span><span class="hs-comment">-- === Notes</span><span>
</span><span id="line-755"></span><span class="hs-comment">--</span><span>
</span><span id="line-756"></span><span class="hs-comment">-- Users should be careful to choose @x@ to be less wide than @y@.</span><span>
</span><span id="line-757"></span><span class="hs-comment">-- Otherwise, if @y@ turns out not to fit the page, we fall back on an even</span><span>
</span><span id="line-758"></span><span class="hs-comment">-- wider layout:</span><span>
</span><span id="line-759"></span><span class="hs-comment">--</span><span>
</span><span id="line-760"></span><span class="hs-comment">-- &gt;&gt;&gt; let ugly = group (flatAlt &quot;even wider&quot; &quot;too wide&quot;)</span><span>
</span><span id="line-761"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 7 ugly</span><span>
</span><span id="line-762"></span><span class="hs-comment">-- even wider</span><span>
</span><span id="line-763"></span><span class="hs-comment">--</span><span>
</span><span id="line-764"></span><span class="hs-comment">-- Also note that 'group' will flatten @y@:</span><span>
</span><span id="line-765"></span><span class="hs-comment">--</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- &gt;&gt;&gt; putDoc (group (flatAlt &quot;x&quot; (&quot;y&quot; &lt;&gt; line &lt;&gt; &quot;y&quot;)))</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- y y</span><span>
</span><span id="line-768"></span><span class="hs-comment">--</span><span>
</span><span id="line-769"></span><span class="hs-comment">-- This also means that an &quot;unflattenable&quot; @y@ which contains a hard linebreak</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- will /never/ be rendered:</span><span>
</span><span id="line-771"></span><span class="hs-comment">--</span><span>
</span><span id="line-772"></span><span class="hs-comment">-- &gt;&gt;&gt; putDoc (group (flatAlt &quot;x&quot; (&quot;y&quot; &lt;&gt; hardline &lt;&gt; &quot;y&quot;)))</span><span>
</span><span id="line-773"></span><span class="hs-comment">-- x</span><span>
</span><span id="line-774"></span><span id="local-6989586621679070103"><span class="annot"><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier hs-type">flatAlt</span></a></span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070103"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Default</span></span><span>
</span><span id="line-776"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070103"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Preferred when 'group'ed</span></span><span>
</span><span id="line-777"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070103"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-778"></span><span id="flatAlt"><span class="annot"><span class="annottext">flatAlt :: forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier hs-var hs-var">flatAlt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-var">FlatAlt</span></a></span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span class="hs-comment">-- | @('align' x)@ lays out the document @x@ with the nesting level set to the</span><span>
</span><span id="line-783"></span><span class="hs-comment">-- current column. It is used for example to implement 'hang'.</span><span>
</span><span id="line-784"></span><span class="hs-comment">--</span><span>
</span><span id="line-785"></span><span class="hs-comment">-- As an example, we will put a document right above another one, regardless of</span><span>
</span><span id="line-786"></span><span class="hs-comment">-- the current nesting level. Without 'align'ment, the second line is put simply</span><span>
</span><span id="line-787"></span><span class="hs-comment">-- below everything we've had so far:</span><span>
</span><span id="line-788"></span><span class="hs-comment">--</span><span>
</span><span id="line-789"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;lorem&quot; &lt;+&gt; vsep [&quot;ipsum&quot;, &quot;dolor&quot;]</span><span>
</span><span id="line-790"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-791"></span><span class="hs-comment">-- dolor</span><span>
</span><span id="line-792"></span><span class="hs-comment">--</span><span>
</span><span id="line-793"></span><span class="hs-comment">-- If we add an 'align' to the mix, the @'vsep'@'s contents all start in the</span><span>
</span><span id="line-794"></span><span class="hs-comment">-- same column:</span><span>
</span><span id="line-795"></span><span class="hs-comment">--</span><span>
</span><span id="line-796"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;lorem&quot; &lt;+&gt; align (vsep [&quot;ipsum&quot;, &quot;dolor&quot;])</span><span>
</span><span id="line-797"></span><span class="hs-comment">-- lorem ipsum</span><span>
</span><span id="line-798"></span><span class="hs-comment">--       dolor</span><span>
</span><span id="line-799"></span><span id="local-6989586621679069357"><span class="annot"><a href="Prettyprinter.Internal.html#align"><span class="hs-identifier hs-type">align</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069357"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069357"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-800"></span><span id="align"><span class="annot"><span class="annottext">align :: forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#align"><span class="hs-identifier hs-var hs-var">align</span></a></span></span><span> </span><span id="local-6989586621679070105"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070105"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier hs-var">column</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070106"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070106"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#nesting"><span class="hs-identifier hs-var">nesting</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070107"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070107"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070106"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070107"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070105"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- nesting might be negative!</span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span class="hs-comment">-- | @('hang' i x)@ lays out the document @x@ with a nesting level set to the</span><span>
</span><span id="line-803"></span><span class="hs-comment">-- /current column/ plus @i@. Negative values are allowed, and decrease the</span><span>
</span><span id="line-804"></span><span class="hs-comment">-- nesting level accordingly.</span><span>
</span><span id="line-805"></span><span class="hs-comment">--</span><span>
</span><span id="line-806"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = reflow &quot;Indenting these words with hang&quot;</span><span>
</span><span id="line-807"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 24 (&quot;prefix&quot; &lt;+&gt; hang 4 doc)</span><span>
</span><span id="line-808"></span><span class="hs-comment">-- prefix Indenting these</span><span>
</span><span id="line-809"></span><span class="hs-comment">--            words with</span><span>
</span><span id="line-810"></span><span class="hs-comment">--            hang</span><span>
</span><span id="line-811"></span><span class="hs-comment">--</span><span>
</span><span id="line-812"></span><span class="hs-comment">-- This differs from 'nest', which is based on the /current nesting level/ plus</span><span>
</span><span id="line-813"></span><span class="hs-comment">-- @i@. When you're not sure, try the more efficient 'nest' first. In our</span><span>
</span><span id="line-814"></span><span class="hs-comment">-- example, this would yield</span><span>
</span><span id="line-815"></span><span class="hs-comment">--</span><span>
</span><span id="line-816"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = reflow &quot;Indenting these words with nest&quot;</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 24 (&quot;prefix&quot; &lt;+&gt; nest 4 doc)</span><span>
</span><span id="line-818"></span><span class="hs-comment">-- prefix Indenting these</span><span>
</span><span id="line-819"></span><span class="hs-comment">--     words with nest</span><span>
</span><span id="line-820"></span><span class="hs-comment">--</span><span>
</span><span id="line-821"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-822"></span><span class="hs-comment">-- 'hang' i doc = 'align' ('nest' i doc)</span><span>
</span><span id="line-823"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-824"></span><span id="local-6989586621679070108"><span class="annot"><a href="Prettyprinter.Internal.html#hang"><span class="hs-identifier hs-type">hang</span></a></span><span>
</span><span id="line-825"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Change of nesting level, relative to the start of the first line</span></span><span>
</span><span id="line-826"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070108"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-827"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070108"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-828"></span><span id="hang"><span class="annot"><span class="annottext">hang :: forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hang"><span class="hs-identifier hs-var hs-var">hang</span></a></span></span><span> </span><span id="local-6989586621679070109"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070109"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070110"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070110"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#align"><span class="hs-identifier hs-var">align</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070109"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070110"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span>
</span><span id="line-830"></span><span class="hs-comment">-- | @('indent' i x)@ indents document @x@ by @i@ columns, starting from the</span><span>
</span><span id="line-831"></span><span class="hs-comment">-- current cursor position.</span><span>
</span><span id="line-832"></span><span class="hs-comment">--</span><span>
</span><span id="line-833"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = reflow &quot;The indent function indents these words!&quot;</span><span>
</span><span id="line-834"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 24 (&quot;prefix&quot; &lt;&gt; indent 4 doc)</span><span>
</span><span id="line-835"></span><span class="hs-comment">-- prefix    The indent</span><span>
</span><span id="line-836"></span><span class="hs-comment">--           function</span><span>
</span><span id="line-837"></span><span class="hs-comment">--           indents these</span><span>
</span><span id="line-838"></span><span class="hs-comment">--           words!</span><span>
</span><span id="line-839"></span><span class="hs-comment">--</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-841"></span><span class="hs-comment">-- 'indent' i d = 'hang' i ({i spaces} &lt;&gt; d)</span><span>
</span><span id="line-842"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-843"></span><span id="local-6989586621679070111"><span class="annot"><a href="Prettyprinter.Internal.html#indent"><span class="hs-identifier hs-type">indent</span></a></span><span>
</span><span id="line-844"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Number of spaces to increase indentation by</span></span><span>
</span><span id="line-845"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070111"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-846"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070111"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-847"></span><span id="indent"><span class="annot"><span class="annottext">indent :: forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#indent"><span class="hs-identifier hs-var hs-var">indent</span></a></span></span><span> </span><span id="local-6989586621679070113"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070113"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070114"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070114"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070113"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann
forall ann. Int -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#spaces"><span class="hs-identifier hs-var">spaces</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070113"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070114"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span class="hs-comment">-- | @('encloseSep' l r sep xs)@ concatenates the documents @xs@ separated by</span><span>
</span><span id="line-850"></span><span class="hs-comment">-- @sep@, and encloses the resulting document by @l@ and @r@.</span><span>
</span><span id="line-851"></span><span class="hs-comment">--</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- The documents are laid out horizontally if that fits the page:</span><span>
</span><span id="line-853"></span><span class="hs-comment">--</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;list&quot; &lt;+&gt; align (encloseSep lbracket rbracket comma (map pretty [1,20,300,4000]))</span><span>
</span><span id="line-855"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-856"></span><span class="hs-comment">-- list [1,20,300,4000]</span><span>
</span><span id="line-857"></span><span class="hs-comment">--</span><span>
</span><span id="line-858"></span><span class="hs-comment">-- If there is not enough space, then the input is split into lines entry-wise</span><span>
</span><span id="line-859"></span><span class="hs-comment">-- therwise they are laid out vertically, with separators put in the front:</span><span>
</span><span id="line-860"></span><span class="hs-comment">--</span><span>
</span><span id="line-861"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 doc</span><span>
</span><span id="line-862"></span><span class="hs-comment">-- list [1</span><span>
</span><span id="line-863"></span><span class="hs-comment">--      ,20</span><span>
</span><span id="line-864"></span><span class="hs-comment">--      ,300</span><span>
</span><span id="line-865"></span><span class="hs-comment">--      ,4000]</span><span>
</span><span id="line-866"></span><span class="hs-comment">--</span><span>
</span><span id="line-867"></span><span class="hs-comment">-- Note that @doc@ contains an explicit call to 'align' so that the list items</span><span>
</span><span id="line-868"></span><span class="hs-comment">-- are aligned vertically.</span><span>
</span><span id="line-869"></span><span class="hs-comment">--</span><span>
</span><span id="line-870"></span><span class="hs-comment">-- For putting separators at the end of entries instead, have a look at</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- 'punctuate'.</span><span>
</span><span id="line-872"></span><span id="local-6989586621679069451"><span class="annot"><a href="Prettyprinter.Internal.html#encloseSep"><span class="hs-identifier hs-type">encloseSep</span></a></span><span>
</span><span id="line-873"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069451"><span class="hs-identifier hs-type">ann</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ left delimiter</span></span><span>
</span><span id="line-874"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069451"><span class="hs-identifier hs-type">ann</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ right delimiter</span></span><span>
</span><span id="line-875"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069451"><span class="hs-identifier hs-type">ann</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ separator</span></span><span>
</span><span id="line-876"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069451"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ input documents</span></span><span>
</span><span id="line-877"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069451"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-878"></span><span id="encloseSep"><span class="annot"><span class="annottext">encloseSep :: forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#encloseSep"><span class="hs-identifier hs-var hs-var">encloseSep</span></a></span></span><span> </span><span id="local-6989586621679070121"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070121"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070122"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070122"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679070123"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070123"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679070124"><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070124"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070124"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-879"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070121"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070122"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-880"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621679070125"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070125"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070121"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070125"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070122"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-881"></span><span>    </span><span class="annot"><span class="annottext">[Doc ann]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#cat"><span class="hs-identifier hs-var">cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann)
-&gt; [Doc ann] -&gt; [Doc ann] -&gt; [Doc ann]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070121"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070123"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070124"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070122"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span class="hs-comment">-- | Haskell-inspired variant of 'encloseSep' with braces and comma as</span><span>
</span><span id="line-884"></span><span class="hs-comment">-- separator.</span><span>
</span><span id="line-885"></span><span class="hs-comment">--</span><span>
</span><span id="line-886"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = list (map pretty [1,20,300,4000])</span><span>
</span><span id="line-887"></span><span class="hs-comment">--</span><span>
</span><span id="line-888"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-889"></span><span class="hs-comment">-- [1, 20, 300, 4000]</span><span>
</span><span id="line-890"></span><span class="hs-comment">--</span><span>
</span><span id="line-891"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 doc</span><span>
</span><span id="line-892"></span><span class="hs-comment">-- [ 1</span><span>
</span><span id="line-893"></span><span class="hs-comment">-- , 20</span><span>
</span><span id="line-894"></span><span class="hs-comment">-- , 300</span><span>
</span><span id="line-895"></span><span class="hs-comment">-- , 4000 ]</span><span>
</span><span id="line-896"></span><span id="local-6989586621679070128"><span class="annot"><a href="Prettyprinter.Internal.html#list"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070128"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070128"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-897"></span><span id="list"><span class="annot"><span class="annottext">list :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#list"><span class="hs-identifier hs-var hs-var">list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; ([Doc ann] -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; [Doc ann] -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#encloseSep"><span class="hs-identifier hs-var">encloseSep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier hs-var">flatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;[ &quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;[&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-898"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier hs-var">flatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot; ]&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;]&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-899"></span><span>                          </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;, &quot;</span></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span class="hs-comment">-- | Haskell-inspired variant of 'encloseSep' with parentheses and comma as</span><span>
</span><span id="line-902"></span><span class="hs-comment">-- separator.</span><span>
</span><span id="line-903"></span><span class="hs-comment">--</span><span>
</span><span id="line-904"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = tupled (map pretty [1,20,300,4000])</span><span>
</span><span id="line-905"></span><span class="hs-comment">--</span><span>
</span><span id="line-906"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-907"></span><span class="hs-comment">-- (1, 20, 300, 4000)</span><span>
</span><span id="line-908"></span><span class="hs-comment">--</span><span>
</span><span id="line-909"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 doc</span><span>
</span><span id="line-910"></span><span class="hs-comment">-- ( 1</span><span>
</span><span id="line-911"></span><span class="hs-comment">-- , 20</span><span>
</span><span id="line-912"></span><span class="hs-comment">-- , 300</span><span>
</span><span id="line-913"></span><span class="hs-comment">-- , 4000 )</span><span>
</span><span id="line-914"></span><span id="local-6989586621679070134"><span class="annot"><a href="Prettyprinter.Internal.html#tupled"><span class="hs-identifier hs-type">tupled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070134"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070134"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-915"></span><span id="tupled"><span class="annot"><span class="annottext">tupled :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#tupled"><span class="hs-identifier hs-var hs-var">tupled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; ([Doc ann] -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; [Doc ann] -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#encloseSep"><span class="hs-identifier hs-var">encloseSep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier hs-var">flatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;( &quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-916"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier hs-var">flatAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot; )&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>                            </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;, &quot;</span></span><span>
</span><span id="line-918"></span><span>
</span><span id="line-919"></span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="hs-comment">-- | @(x '&lt;+&gt;' y)@ concatenates document @x@ and @y@ with a @'space'@ in</span><span>
</span><span id="line-922"></span><span class="hs-comment">-- between.</span><span>
</span><span id="line-923"></span><span class="hs-comment">--</span><span>
</span><span id="line-924"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;hello&quot; &lt;+&gt; &quot;world&quot;</span><span>
</span><span id="line-925"></span><span class="hs-comment">-- hello world</span><span>
</span><span id="line-926"></span><span class="hs-comment">--</span><span>
</span><span id="line-927"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-928"></span><span class="hs-comment">-- x '&lt;+&gt;' y = x '&lt;&gt;' 'space' '&lt;&gt;' y</span><span>
</span><span id="line-929"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-930"></span><span id="local-6989586621679070140"><span class="annot"><a href="Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator hs-type">(&lt;+&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070140"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070140"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070140"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-931"></span><span id="local-6989586621679070143"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070143"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%3C%2B%3E"><span class="annot"><span class="annottext">&lt;+&gt; :: forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator hs-var hs-var">&lt;+&gt;</span></a></span></span><span> </span><span id="local-6989586621679070144"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070144"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070143"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc ann
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070144"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-932"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">6</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-comment">-- like &lt;&gt;</span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-comment">-- | Concatenate all documents element-wise with a binary function.</span><span>
</span><span id="line-937"></span><span class="hs-comment">--</span><span>
</span><span id="line-938"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-939"></span><span class="hs-comment">-- 'concatWith' _ [] = 'mempty'</span><span>
</span><span id="line-940"></span><span class="hs-comment">-- 'concatWith' (**) [x,y,z] = x ** y ** z</span><span>
</span><span id="line-941"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-942"></span><span class="hs-comment">--</span><span>
</span><span id="line-943"></span><span class="hs-comment">-- Multiple convenience definitions based on 'concatWith' are already predefined,</span><span>
</span><span id="line-944"></span><span class="hs-comment">-- for example:</span><span>
</span><span id="line-945"></span><span class="hs-comment">--</span><span>
</span><span id="line-946"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-947"></span><span class="hs-comment">-- 'hsep'    = 'concatWith' ('&lt;+&gt;')</span><span>
</span><span id="line-948"></span><span class="hs-comment">-- 'fillSep' = 'concatWith' (\\x y -&gt; x '&lt;&gt;' 'softline' '&lt;&gt;' y)</span><span>
</span><span id="line-949"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-950"></span><span class="hs-comment">--</span><span>
</span><span id="line-951"></span><span class="hs-comment">-- This is also useful to define customized joiners:</span><span>
</span><span id="line-952"></span><span class="hs-comment">--</span><span>
</span><span id="line-953"></span><span class="hs-comment">-- &gt;&gt;&gt; concatWith (surround dot) [&quot;Prettyprinter&quot;, &quot;Render&quot;, &quot;Text&quot;]</span><span>
</span><span id="line-954"></span><span class="hs-comment">-- Prettyprinter.Render.Text</span><span>
</span><span id="line-955"></span><span id="local-6989586621679069460"><span id="local-6989586621679069461"><span class="annot"><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-type">concatWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679069460"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069461"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069461"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069461"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069460"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069461"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069461"><span class="hs-identifier hs-type">ann</span></a></span></span></span><span>
</span><span id="line-956"></span><span id="concatWith"><span class="annot"><span class="annottext">concatWith :: forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var hs-var">concatWith</span></a></span></span><span> </span><span id="local-6989586621679070149"><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070149"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679070150"><span class="annot"><span class="annottext">t (Doc ann)
</span><a href="#local-6989586621679070150"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-cpp">
#if !(FOLDABLE_TRAVERSABLE_IN_PRELUDE)
</span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">foldr</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">False</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">True</span><span> </span><span class="hs-identifier">ds</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">mempty</span><span class="hs-cpp">
#else
</span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">t (Doc ann) -&gt; Bool
forall a. t a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">t (Doc ann)
</span><a href="#local-6989586621679070150"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-cpp">
#endif
</span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070149"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t (Doc ann)
</span><a href="#local-6989586621679070150"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-963"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-pragma hs-type">concatWith</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-964"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-pragma hs-type">concatWith</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679070153"><span class="hs-pragma">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-pragma hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070153"><span class="hs-pragma hs-type">ann</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-pragma hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070153"><span class="hs-pragma hs-type">ann</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-pragma hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070153"><span class="hs-pragma hs-type">ann</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-pragma hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070153"><span class="hs-pragma hs-type">ann</span></a></span><span class="hs-pragma">]</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-pragma hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070153"><span class="hs-pragma hs-type">ann</span></a></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-965"></span><span>
</span><span id="line-966"></span><span class="hs-comment">-- | @('hsep' xs)@ concatenates all documents @xs@ horizontally with @'&lt;+&gt;'@,</span><span>
</span><span id="line-967"></span><span class="hs-comment">-- i.e. it puts a space between all entries.</span><span>
</span><span id="line-968"></span><span class="hs-comment">--</span><span>
</span><span id="line-969"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = Util.words &quot;lorem ipsum dolor sit amet&quot;</span><span>
</span><span id="line-970"></span><span class="hs-comment">--</span><span>
</span><span id="line-971"></span><span class="hs-comment">-- &gt;&gt;&gt; hsep docs</span><span>
</span><span id="line-972"></span><span class="hs-comment">-- lorem ipsum dolor sit amet</span><span>
</span><span id="line-973"></span><span class="hs-comment">--</span><span>
</span><span id="line-974"></span><span class="hs-comment">-- @'hsep'@ does not introduce line breaks on its own, even when the page is too</span><span>
</span><span id="line-975"></span><span class="hs-comment">-- narrow:</span><span>
</span><span id="line-976"></span><span class="hs-comment">--</span><span>
</span><span id="line-977"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 5 (hsep docs)</span><span>
</span><span id="line-978"></span><span class="hs-comment">-- lorem ipsum dolor sit amet</span><span>
</span><span id="line-979"></span><span class="hs-comment">--</span><span>
</span><span id="line-980"></span><span class="hs-comment">-- For automatic line breaks, consider using 'fillSep' instead.</span><span>
</span><span id="line-981"></span><span id="local-6989586621679070154"><span class="annot"><a href="Prettyprinter.Internal.html#hsep"><span class="hs-identifier hs-type">hsep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070154"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070154"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-982"></span><span id="hsep"><span class="annot"><span class="annottext">hsep :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hsep"><span class="hs-identifier hs-var hs-var">hsep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var">concatWith</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator hs-var">(&lt;+&gt;)</span></a></span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span class="hs-comment">-- | @('vsep' xs)@ concatenates all documents @xs@ above each other. If a</span><span>
</span><span id="line-985"></span><span class="hs-comment">-- 'group' undoes the line breaks inserted by @vsep@, the documents are</span><span>
</span><span id="line-986"></span><span class="hs-comment">-- separated with a 'space' instead.</span><span>
</span><span id="line-987"></span><span class="hs-comment">--</span><span>
</span><span id="line-988"></span><span class="hs-comment">-- Using 'vsep' alone yields</span><span>
</span><span id="line-989"></span><span class="hs-comment">--</span><span>
</span><span id="line-990"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;prefix&quot; &lt;+&gt; vsep [&quot;text&quot;, &quot;to&quot;, &quot;lay&quot;, &quot;out&quot;]</span><span>
</span><span id="line-991"></span><span class="hs-comment">-- prefix text</span><span>
</span><span id="line-992"></span><span class="hs-comment">-- to</span><span>
</span><span id="line-993"></span><span class="hs-comment">-- lay</span><span>
</span><span id="line-994"></span><span class="hs-comment">-- out</span><span>
</span><span id="line-995"></span><span class="hs-comment">--</span><span>
</span><span id="line-996"></span><span class="hs-comment">-- 'group'ing a 'vsep' separates the documents with a 'space' if it fits the</span><span>
</span><span id="line-997"></span><span class="hs-comment">-- page (and does nothing otherwise). See the @'sep'@ convenience function for</span><span>
</span><span id="line-998"></span><span class="hs-comment">-- this use case.</span><span>
</span><span id="line-999"></span><span class="hs-comment">--</span><span>
</span><span id="line-1000"></span><span class="hs-comment">-- The 'align' function can be used to align the documents under their first</span><span>
</span><span id="line-1001"></span><span class="hs-comment">-- element:</span><span>
</span><span id="line-1002"></span><span class="hs-comment">--</span><span>
</span><span id="line-1003"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;prefix&quot; &lt;+&gt; align (vsep [&quot;text&quot;, &quot;to&quot;, &quot;lay&quot;, &quot;out&quot;])</span><span>
</span><span id="line-1004"></span><span class="hs-comment">-- prefix text</span><span>
</span><span id="line-1005"></span><span class="hs-comment">--        to</span><span>
</span><span id="line-1006"></span><span class="hs-comment">--        lay</span><span>
</span><span id="line-1007"></span><span class="hs-comment">--        out</span><span>
</span><span id="line-1008"></span><span class="hs-comment">--</span><span>
</span><span id="line-1009"></span><span class="hs-comment">-- Since 'group'ing a 'vsep' is rather common, 'sep' is a built-in for doing</span><span>
</span><span id="line-1010"></span><span class="hs-comment">-- that.</span><span>
</span><span id="line-1011"></span><span id="local-6989586621679070157"><span class="annot"><a href="Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-type">vsep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070157"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070157"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1012"></span><span id="vsep"><span class="annot"><span class="annottext">vsep :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var hs-var">vsep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var">concatWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070161"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070161"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070162"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070162"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070161"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#line"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070162"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>
</span><span id="line-1014"></span><span class="hs-comment">-- | @('fillSep' xs)@ concatenates the documents @xs@ horizontally with @'&lt;+&gt;'@</span><span>
</span><span id="line-1015"></span><span class="hs-comment">-- as long as it fits the page, then inserts a @'line'@ and continues doing that</span><span>
</span><span id="line-1016"></span><span class="hs-comment">-- for all documents in @xs@. (@'line'@ means that if 'group'ed, the documents</span><span>
</span><span id="line-1017"></span><span class="hs-comment">-- are separated with a 'space' instead of newlines. Use 'fillCat' if you do not</span><span>
</span><span id="line-1018"></span><span class="hs-comment">-- want a 'space'.)</span><span>
</span><span id="line-1019"></span><span class="hs-comment">--</span><span>
</span><span id="line-1020"></span><span class="hs-comment">-- Let's print some words to fill the line:</span><span>
</span><span id="line-1021"></span><span class="hs-comment">--</span><span>
</span><span id="line-1022"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = take 20 (cycle [&quot;lorem&quot;, &quot;ipsum&quot;, &quot;dolor&quot;, &quot;sit&quot;, &quot;amet&quot;])</span><span>
</span><span id="line-1023"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 (&quot;Docs:&quot; &lt;+&gt; fillSep docs)</span><span>
</span><span id="line-1024"></span><span class="hs-comment">-- Docs: lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor</span><span>
</span><span id="line-1025"></span><span class="hs-comment">-- sit amet lorem ipsum dolor sit amet</span><span>
</span><span id="line-1026"></span><span class="hs-comment">--</span><span>
</span><span id="line-1027"></span><span class="hs-comment">-- The same document, printed at a width of only 40, yields</span><span>
</span><span id="line-1028"></span><span class="hs-comment">--</span><span>
</span><span id="line-1029"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 40 (&quot;Docs:&quot; &lt;+&gt; fillSep docs)</span><span>
</span><span id="line-1030"></span><span class="hs-comment">-- Docs: lorem ipsum dolor sit amet lorem</span><span>
</span><span id="line-1031"></span><span class="hs-comment">-- ipsum dolor sit amet lorem ipsum dolor</span><span>
</span><span id="line-1032"></span><span class="hs-comment">-- sit amet lorem ipsum dolor sit amet</span><span>
</span><span id="line-1033"></span><span id="local-6989586621679070163"><span class="annot"><a href="Prettyprinter.Internal.html#fillSep"><span class="hs-identifier hs-type">fillSep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070163"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070163"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1034"></span><span id="fillSep"><span class="annot"><span class="annottext">fillSep :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#fillSep"><span class="hs-identifier hs-var hs-var">fillSep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var">concatWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070167"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070167"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070168"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070168"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070167"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#softline"><span class="hs-identifier hs-var">softline</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070168"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span class="hs-comment">-- | @('sep' xs)@ tries laying out the documents @xs@ separated with 'space's,</span><span>
</span><span id="line-1037"></span><span class="hs-comment">-- and if this does not fit the page, separates them with newlines. This is what</span><span>
</span><span id="line-1038"></span><span class="hs-comment">-- differentiates it from 'vsep', which always lays out its contents beneath</span><span>
</span><span id="line-1039"></span><span class="hs-comment">-- each other.</span><span>
</span><span id="line-1040"></span><span class="hs-comment">--</span><span>
</span><span id="line-1041"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;prefix&quot; &lt;+&gt; sep [&quot;text&quot;, &quot;to&quot;, &quot;lay&quot;, &quot;out&quot;]</span><span>
</span><span id="line-1042"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-1043"></span><span class="hs-comment">-- prefix text to lay out</span><span>
</span><span id="line-1044"></span><span class="hs-comment">--</span><span>
</span><span id="line-1045"></span><span class="hs-comment">-- With a narrower layout, the entries are separated by newlines:</span><span>
</span><span id="line-1046"></span><span class="hs-comment">--</span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 20 doc</span><span>
</span><span id="line-1048"></span><span class="hs-comment">-- prefix text</span><span>
</span><span id="line-1049"></span><span class="hs-comment">-- to</span><span>
</span><span id="line-1050"></span><span class="hs-comment">-- lay</span><span>
</span><span id="line-1051"></span><span class="hs-comment">-- out</span><span>
</span><span id="line-1052"></span><span class="hs-comment">--</span><span>
</span><span id="line-1053"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1054"></span><span class="hs-comment">-- 'sep' = 'group' . 'vsep'</span><span>
</span><span id="line-1055"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1056"></span><span id="local-6989586621679070169"><span class="annot"><a href="Prettyprinter.Internal.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070169"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070169"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1057"></span><span id="sep"><span class="annot"><span class="annottext">sep :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#sep"><span class="hs-identifier hs-var hs-var">sep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; ([Doc ann] -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var">vsep</span></a></span><span>
</span><span id="line-1058"></span><span>
</span><span id="line-1059"></span><span>
</span><span id="line-1060"></span><span>
</span><span id="line-1061"></span><span class="hs-comment">-- | @('hcat' xs)@ concatenates all documents @xs@ horizontally with @'&lt;&gt;'@</span><span>
</span><span id="line-1062"></span><span class="hs-comment">-- (i.e. without any spacing).</span><span>
</span><span id="line-1063"></span><span class="hs-comment">--</span><span>
</span><span id="line-1064"></span><span class="hs-comment">-- It is provided only for consistency, since it is identical to 'mconcat'.</span><span>
</span><span id="line-1065"></span><span class="hs-comment">--</span><span>
</span><span id="line-1066"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = Util.words &quot;lorem ipsum dolor&quot;</span><span>
</span><span id="line-1067"></span><span class="hs-comment">-- &gt;&gt;&gt; hcat docs</span><span>
</span><span id="line-1068"></span><span class="hs-comment">-- loremipsumdolor</span><span>
</span><span id="line-1069"></span><span id="local-6989586621679069319"><span class="annot"><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier hs-type">hcat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069319"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069319"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1070"></span><span id="hcat"><span class="annot"><span class="annottext">hcat :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier hs-var hs-var">hcat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var">concatWith</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span class="hs-comment">-- | @('vcat' xs)@ vertically concatenates the documents @xs@. If it is</span><span>
</span><span id="line-1073"></span><span class="hs-comment">-- 'group'ed, the line breaks are removed.</span><span>
</span><span id="line-1074"></span><span class="hs-comment">--</span><span>
</span><span id="line-1075"></span><span class="hs-comment">-- In other words @'vcat'@ is like @'vsep'@, with newlines removed instead of</span><span>
</span><span id="line-1076"></span><span class="hs-comment">-- replaced by 'space's.</span><span>
</span><span id="line-1077"></span><span class="hs-comment">--</span><span>
</span><span id="line-1078"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = Util.words &quot;lorem ipsum dolor&quot;</span><span>
</span><span id="line-1079"></span><span class="hs-comment">-- &gt;&gt;&gt; vcat docs</span><span>
</span><span id="line-1080"></span><span class="hs-comment">-- lorem</span><span>
</span><span id="line-1081"></span><span class="hs-comment">-- ipsum</span><span>
</span><span id="line-1082"></span><span class="hs-comment">-- dolor</span><span>
</span><span id="line-1083"></span><span class="hs-comment">-- &gt;&gt;&gt; group (vcat docs)</span><span>
</span><span id="line-1084"></span><span class="hs-comment">-- loremipsumdolor</span><span>
</span><span id="line-1085"></span><span class="hs-comment">--</span><span>
</span><span id="line-1086"></span><span class="hs-comment">-- Since 'group'ing a 'vcat' is rather common, 'cat' is a built-in shortcut for</span><span>
</span><span id="line-1087"></span><span class="hs-comment">-- it.</span><span>
</span><span id="line-1088"></span><span id="local-6989586621679070172"><span class="annot"><a href="Prettyprinter.Internal.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070172"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070172"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1089"></span><span id="vcat"><span class="annot"><span class="annottext">vcat :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#vcat"><span class="hs-identifier hs-var hs-var">vcat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var">concatWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070176"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070176"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070177"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070177"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070176"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#line%27"><span class="hs-identifier hs-var">line'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070177"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="hs-comment">-- | @('fillCat' xs)@ concatenates documents @xs@ horizontally with @'&lt;&gt;'@ as</span><span>
</span><span id="line-1092"></span><span class="hs-comment">-- long as it fits the page, then inserts a @'line''@ and continues doing that</span><span>
</span><span id="line-1093"></span><span class="hs-comment">-- for all documents in @xs@. This is similar to how an ordinary word processor</span><span>
</span><span id="line-1094"></span><span class="hs-comment">-- lays out the text if you just keep typing after you hit the maximum line</span><span>
</span><span id="line-1095"></span><span class="hs-comment">-- length.</span><span>
</span><span id="line-1096"></span><span class="hs-comment">--</span><span>
</span><span id="line-1097"></span><span class="hs-comment">-- (@'line''@ means that if 'group'ed, the documents are separated with nothing</span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- instead of newlines. See 'fillSep' if you want a 'space' instead.)</span><span>
</span><span id="line-1099"></span><span class="hs-comment">--</span><span>
</span><span id="line-1100"></span><span class="hs-comment">-- Observe the difference between 'fillSep' and 'fillCat'. 'fillSep'</span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- concatenates the entries 'space'd when 'group'ed:</span><span>
</span><span id="line-1102"></span><span class="hs-comment">--</span><span>
</span><span id="line-1103"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = take 20 (cycle ([&quot;lorem&quot;, &quot;ipsum&quot;, &quot;dolor&quot;, &quot;sit&quot;, &quot;amet&quot;]))</span><span>
</span><span id="line-1104"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 40 (&quot;Grouped:&quot; &lt;+&gt; group (fillSep docs))</span><span>
</span><span id="line-1105"></span><span class="hs-comment">-- Grouped: lorem ipsum dolor sit amet</span><span>
</span><span id="line-1106"></span><span class="hs-comment">-- lorem ipsum dolor sit amet lorem ipsum</span><span>
</span><span id="line-1107"></span><span class="hs-comment">-- dolor sit amet lorem ipsum dolor sit</span><span>
</span><span id="line-1108"></span><span class="hs-comment">-- amet</span><span>
</span><span id="line-1109"></span><span class="hs-comment">--</span><span>
</span><span id="line-1110"></span><span class="hs-comment">-- On the other hand, 'fillCat' concatenates the entries directly when</span><span>
</span><span id="line-1111"></span><span class="hs-comment">-- 'group'ed:</span><span>
</span><span id="line-1112"></span><span class="hs-comment">--</span><span>
</span><span id="line-1113"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 40 (&quot;Grouped:&quot; &lt;+&gt; group (fillCat docs))</span><span>
</span><span id="line-1114"></span><span class="hs-comment">-- Grouped: loremipsumdolorsitametlorem</span><span>
</span><span id="line-1115"></span><span class="hs-comment">-- ipsumdolorsitametloremipsumdolorsitamet</span><span>
</span><span id="line-1116"></span><span class="hs-comment">-- loremipsumdolorsitamet</span><span>
</span><span id="line-1117"></span><span id="local-6989586621679070178"><span class="annot"><a href="Prettyprinter.Internal.html#fillCat"><span class="hs-identifier hs-type">fillCat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070178"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070178"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1118"></span><span id="fillCat"><span class="annot"><span class="annottext">fillCat :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#fillCat"><span class="hs-identifier hs-var hs-var">fillCat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall (t :: * -&gt; *) ann.
Foldable t =&gt;
(Doc ann -&gt; Doc ann -&gt; Doc ann) -&gt; t (Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier hs-var">concatWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070182"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070182"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070183"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070183"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070182"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#softline%27"><span class="hs-identifier hs-var">softline'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070183"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>
</span><span id="line-1120"></span><span class="hs-comment">-- | @('cat' xs)@ tries laying out the documents @xs@ separated with nothing,</span><span>
</span><span id="line-1121"></span><span class="hs-comment">-- and if this does not fit the page, separates them with newlines. This is what</span><span>
</span><span id="line-1122"></span><span class="hs-comment">-- differentiates it from 'vcat', which always lays out its contents beneath</span><span>
</span><span id="line-1123"></span><span class="hs-comment">-- each other.</span><span>
</span><span id="line-1124"></span><span class="hs-comment">--</span><span>
</span><span id="line-1125"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = Util.words &quot;lorem ipsum dolor&quot;</span><span>
</span><span id="line-1126"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 (&quot;Docs:&quot; &lt;+&gt; cat docs)</span><span>
</span><span id="line-1127"></span><span class="hs-comment">-- Docs: loremipsumdolor</span><span>
</span><span id="line-1128"></span><span class="hs-comment">--</span><span>
</span><span id="line-1129"></span><span class="hs-comment">-- When there is enough space, the documents are put above one another:</span><span>
</span><span id="line-1130"></span><span class="hs-comment">--</span><span>
</span><span id="line-1131"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 10 (&quot;Docs:&quot; &lt;+&gt; cat docs)</span><span>
</span><span id="line-1132"></span><span class="hs-comment">-- Docs: lorem</span><span>
</span><span id="line-1133"></span><span class="hs-comment">-- ipsum</span><span>
</span><span id="line-1134"></span><span class="hs-comment">-- dolor</span><span>
</span><span id="line-1135"></span><span class="hs-comment">--</span><span>
</span><span id="line-1136"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1137"></span><span class="hs-comment">-- 'cat' = 'group' . 'vcat'</span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1139"></span><span id="local-6989586621679070184"><span class="annot"><a href="Prettyprinter.Internal.html#cat"><span class="hs-identifier hs-type">cat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070184"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070184"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1140"></span><span id="cat"><span class="annot"><span class="annottext">cat :: forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#cat"><span class="hs-identifier hs-var hs-var">cat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; ([Doc ann] -&gt; Doc ann) -&gt; [Doc ann] -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; Doc ann
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1141"></span><span>
</span><span id="line-1142"></span><span>
</span><span id="line-1143"></span><span>
</span><span id="line-1144"></span><span class="hs-comment">-- | @('punctuate' p xs)@ appends @p@ to all but the last document in @xs@.</span><span>
</span><span id="line-1145"></span><span class="hs-comment">--</span><span>
</span><span id="line-1146"></span><span class="hs-comment">-- &gt;&gt;&gt; let docs = punctuate comma (Util.words &quot;lorem ipsum dolor sit amet&quot;)</span><span>
</span><span id="line-1147"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 (hsep docs)</span><span>
</span><span id="line-1148"></span><span class="hs-comment">-- lorem, ipsum, dolor, sit, amet</span><span>
</span><span id="line-1149"></span><span class="hs-comment">--</span><span>
</span><span id="line-1150"></span><span class="hs-comment">-- The separators are put at the end of the entries, which we can see if we</span><span>
</span><span id="line-1151"></span><span class="hs-comment">-- position the result vertically:</span><span>
</span><span id="line-1152"></span><span class="hs-comment">--</span><span>
</span><span id="line-1153"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 20 (vsep docs)</span><span>
</span><span id="line-1154"></span><span class="hs-comment">-- lorem,</span><span>
</span><span id="line-1155"></span><span class="hs-comment">-- ipsum,</span><span>
</span><span id="line-1156"></span><span class="hs-comment">-- dolor,</span><span>
</span><span id="line-1157"></span><span class="hs-comment">-- sit,</span><span>
</span><span id="line-1158"></span><span class="hs-comment">-- amet</span><span>
</span><span id="line-1159"></span><span class="hs-comment">--</span><span>
</span><span id="line-1160"></span><span class="hs-comment">-- If you want put the commas in front of their elements instead of at the end,</span><span>
</span><span id="line-1161"></span><span class="hs-comment">-- you should use 'tupled' or, in general, 'encloseSep'.</span><span>
</span><span id="line-1162"></span><span id="local-6989586621679069475"><span class="annot"><a href="Prettyprinter.Internal.html#punctuate"><span class="hs-identifier hs-type">punctuate</span></a></span><span>
</span><span id="line-1163"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069475"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Punctuation, e.g. 'comma'</span></span><span>
</span><span id="line-1164"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069475"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1165"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069475"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1166"></span><span id="punctuate"><span class="annot"><span class="annottext">punctuate :: forall ann. Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
</span><a href="Prettyprinter.Internal.html#punctuate"><span class="hs-identifier hs-var hs-var">punctuate</span></a></span></span><span> </span><span id="local-6989586621679070185"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070185"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; [Doc ann]
</span><a href="#local-6989586621679070186"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1167"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1168"></span><span>    </span><span id="local-6989586621679070186"><span class="annot"><span class="annottext">go :: [Doc ann] -&gt; [Doc ann]
</span><a href="#local-6989586621679070186"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1169"></span><span>    </span><span class="annot"><a href="#local-6989586621679070186"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679070188"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070188"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070188"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1170"></span><span>    </span><span class="annot"><a href="#local-6989586621679070186"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070189"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070189"><span class="hs-identifier hs-var">d</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679070190"><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070190"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070189"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070185"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann] -&gt; [Doc ann]
</span><a href="#local-6989586621679070186"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070190"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span class="hs-comment">-- | Layout a document depending on which column it starts at. 'align' is</span><span>
</span><span id="line-1175"></span><span class="hs-comment">-- implemented in terms of 'column'.</span><span>
</span><span id="line-1176"></span><span class="hs-comment">--</span><span>
</span><span id="line-1177"></span><span class="hs-comment">-- &gt;&gt;&gt; column (\l -&gt; &quot;Columns are&quot; &lt;+&gt; pretty l &lt;&gt; &quot;-based.&quot;)</span><span>
</span><span id="line-1178"></span><span class="hs-comment">-- Columns are 0-based.</span><span>
</span><span id="line-1179"></span><span class="hs-comment">--</span><span>
</span><span id="line-1180"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;prefix&quot; &lt;+&gt; column (\l -&gt; &quot;| &lt;- column&quot; &lt;+&gt; pretty l)</span><span>
</span><span id="line-1181"></span><span class="hs-comment">-- &gt;&gt;&gt; vsep [indent n doc | n &lt;- [0,4,8]]</span><span>
</span><span id="line-1182"></span><span class="hs-comment">-- prefix | &lt;- column 7</span><span>
</span><span id="line-1183"></span><span class="hs-comment">--     prefix | &lt;- column 11</span><span>
</span><span id="line-1184"></span><span class="hs-comment">--         prefix | &lt;- column 15</span><span>
</span><span id="line-1185"></span><span id="local-6989586621679070191"><span class="annot"><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier hs-type">column</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070191"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070191"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1186"></span><span id="column"><span class="annot"><span class="annottext">column :: forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier hs-var hs-var">column</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-var">Column</span></a></span><span>
</span><span id="line-1187"></span><span>
</span><span id="line-1188"></span><span class="hs-comment">-- | Layout a document depending on the current 'nest'ing level. 'align' is</span><span>
</span><span id="line-1189"></span><span class="hs-comment">-- implemented in terms of 'nesting'.</span><span>
</span><span id="line-1190"></span><span class="hs-comment">--</span><span>
</span><span id="line-1191"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;prefix&quot; &lt;+&gt; nesting (\l -&gt; brackets (&quot;Nested:&quot; &lt;+&gt; pretty l))</span><span>
</span><span id="line-1192"></span><span class="hs-comment">-- &gt;&gt;&gt; vsep [indent n doc | n &lt;- [0,4,8]]</span><span>
</span><span id="line-1193"></span><span class="hs-comment">-- prefix [Nested: 0]</span><span>
</span><span id="line-1194"></span><span class="hs-comment">--     prefix [Nested: 4]</span><span>
</span><span id="line-1195"></span><span class="hs-comment">--         prefix [Nested: 8]</span><span>
</span><span id="line-1196"></span><span id="local-6989586621679070192"><span class="annot"><a href="Prettyprinter.Internal.html#nesting"><span class="hs-identifier hs-type">nesting</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070192"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070192"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1197"></span><span id="nesting"><span class="annot"><span class="annottext">nesting :: forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#nesting"><span class="hs-identifier hs-var hs-var">nesting</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-var">Nesting</span></a></span><span>
</span><span id="line-1198"></span><span>
</span><span id="line-1199"></span><span class="hs-comment">-- | @('width' doc f)@ lays out the document 'doc', and makes the column width</span><span>
</span><span id="line-1200"></span><span class="hs-comment">-- of it available to a function.</span><span>
</span><span id="line-1201"></span><span class="hs-comment">--</span><span>
</span><span id="line-1202"></span><span class="hs-comment">-- &gt;&gt;&gt; let annotate doc = width (brackets doc) (\w -&gt; &quot; &lt;- width:&quot; &lt;+&gt; pretty w)</span><span>
</span><span id="line-1203"></span><span class="hs-comment">-- &gt;&gt;&gt; align (vsep (map annotate [&quot;---&quot;, &quot;------&quot;, indent 3 &quot;---&quot;, vsep [&quot;---&quot;, indent 4 &quot;---&quot;]]))</span><span>
</span><span id="line-1204"></span><span class="hs-comment">-- [---] &lt;- width: 5</span><span>
</span><span id="line-1205"></span><span class="hs-comment">-- [------] &lt;- width: 8</span><span>
</span><span id="line-1206"></span><span class="hs-comment">-- [   ---] &lt;- width: 8</span><span>
</span><span id="line-1207"></span><span class="hs-comment">-- [---</span><span>
</span><span id="line-1208"></span><span class="hs-comment">--     ---] &lt;- width: 8</span><span>
</span><span id="line-1209"></span><span id="local-6989586621679069479"><span class="annot"><a href="Prettyprinter.Internal.html#width"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069479"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069479"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069479"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1210"></span><span id="width"><span class="annot"><span class="annottext">width :: forall ann. Doc ann -&gt; (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#width"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span id="local-6989586621679070195"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070195"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621679070196"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070196"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-1211"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier hs-var">column</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070197"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070197"><span class="hs-identifier hs-var">colStart</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1212"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070195"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier hs-var">column</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070198"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070198"><span class="hs-identifier hs-var">colEnd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1213"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070196"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070198"><span class="hs-identifier hs-var">colEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070197"><span class="hs-identifier hs-var">colStart</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1214"></span><span>
</span><span id="line-1215"></span><span class="hs-comment">-- | Layout a document depending on the page width, if one has been specified.</span><span>
</span><span id="line-1216"></span><span class="hs-comment">--</span><span>
</span><span id="line-1217"></span><span class="hs-comment">-- &gt;&gt;&gt; let prettyPageWidth (AvailablePerLine l r) = &quot;Width:&quot; &lt;+&gt; pretty l &lt;&gt; &quot;, ribbon fraction:&quot; &lt;+&gt; pretty r</span><span>
</span><span id="line-1218"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;prefix&quot; &lt;+&gt; pageWidth (brackets . prettyPageWidth)</span><span>
</span><span id="line-1219"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 32 (vsep [indent n doc | n &lt;- [0,4,8]])</span><span>
</span><span id="line-1220"></span><span class="hs-comment">-- prefix [Width: 32, ribbon fraction: 1.0]</span><span>
</span><span id="line-1221"></span><span class="hs-comment">--     prefix [Width: 32, ribbon fraction: 1.0]</span><span>
</span><span id="line-1222"></span><span class="hs-comment">--         prefix [Width: 32, ribbon fraction: 1.0]</span><span>
</span><span id="line-1223"></span><span id="local-6989586621679070199"><span class="annot"><a href="Prettyprinter.Internal.html#pageWidth"><span class="hs-identifier hs-type">pageWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier hs-type">PageWidth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070199"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070199"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1224"></span><span id="pageWidth"><span class="annot"><span class="annottext">pageWidth :: forall ann. (PageWidth -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#pageWidth"><span class="hs-identifier hs-var hs-var">pageWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PageWidth -&gt; Doc ann) -&gt; Doc ann
forall ann. (PageWidth -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-var">WithPageWidth</span></a></span><span>
</span><span id="line-1225"></span><span>
</span><span id="line-1226"></span><span>
</span><span id="line-1227"></span><span>
</span><span id="line-1228"></span><span class="hs-comment">-- | @('fill' i x)@ lays out the document @x@. It then appends @space@s until</span><span>
</span><span id="line-1229"></span><span class="hs-comment">-- the width is equal to @i@. If the width of @x@ is already larger, nothing is</span><span>
</span><span id="line-1230"></span><span class="hs-comment">-- appended.</span><span>
</span><span id="line-1231"></span><span class="hs-comment">--</span><span>
</span><span id="line-1232"></span><span class="hs-comment">-- This function is quite useful in practice to output a list of bindings:</span><span>
</span><span id="line-1233"></span><span class="hs-comment">--</span><span>
</span><span id="line-1234"></span><span class="hs-comment">-- &gt;&gt;&gt; let types = [(&quot;empty&quot;,&quot;Doc&quot;), (&quot;nest&quot;,&quot;Int -&gt; Doc -&gt; Doc&quot;), (&quot;fillSep&quot;,&quot;[Doc] -&gt; Doc&quot;)]</span><span>
</span><span id="line-1235"></span><span class="hs-comment">-- &gt;&gt;&gt; let ptype (name, tp) = fill 5 (pretty name) &lt;+&gt; &quot;::&quot; &lt;+&gt; pretty tp</span><span>
</span><span id="line-1236"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;let&quot; &lt;+&gt; align (vcat (map ptype types))</span><span>
</span><span id="line-1237"></span><span class="hs-comment">-- let empty :: Doc</span><span>
</span><span id="line-1238"></span><span class="hs-comment">--     nest  :: Int -&gt; Doc -&gt; Doc</span><span>
</span><span id="line-1239"></span><span class="hs-comment">--     fillSep :: [Doc] -&gt; Doc</span><span>
</span><span id="line-1240"></span><span id="local-6989586621679070200"><span class="annot"><a href="Prettyprinter.Internal.html#fill"><span class="hs-identifier hs-type">fill</span></a></span><span>
</span><span id="line-1241"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Append spaces until the document is at least this wide</span></span><span>
</span><span id="line-1242"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070200"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1243"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070200"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1244"></span><span id="fill"><span class="annot"><span class="annottext">fill :: forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#fill"><span class="hs-identifier hs-var hs-var">fill</span></a></span></span><span> </span><span id="local-6989586621679070202"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070202"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679070203"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070203"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; (Int -&gt; Doc ann) -&gt; Doc ann
forall ann. Doc ann -&gt; (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#width"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070203"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070204"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070204"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
forall ann. Int -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#spaces"><span class="hs-identifier hs-var">spaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070202"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070204"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1245"></span><span>
</span><span id="line-1246"></span><span class="hs-comment">-- | @('fillBreak' i x)@ first lays out the document @x@. It then appends @space@s</span><span>
</span><span id="line-1247"></span><span class="hs-comment">-- until the width is equal to @i@. If the width of @x@ is already larger than</span><span>
</span><span id="line-1248"></span><span class="hs-comment">-- @i@, the nesting level is increased by @i@ and a @line@ is appended. When we</span><span>
</span><span id="line-1249"></span><span class="hs-comment">-- redefine @ptype@ in the example given in 'fill' to use @'fillBreak'@, we get</span><span>
</span><span id="line-1250"></span><span class="hs-comment">-- a useful variation of the output:</span><span>
</span><span id="line-1251"></span><span class="hs-comment">--</span><span>
</span><span id="line-1252"></span><span class="hs-comment">-- &gt;&gt;&gt; let types = [(&quot;empty&quot;,&quot;Doc&quot;), (&quot;nest&quot;,&quot;Int -&gt; Doc -&gt; Doc&quot;), (&quot;fillSep&quot;,&quot;[Doc] -&gt; Doc&quot;)]</span><span>
</span><span id="line-1253"></span><span class="hs-comment">-- &gt;&gt;&gt; let ptype (name, tp) = fillBreak 5 (pretty name) &lt;+&gt; &quot;::&quot; &lt;+&gt; pretty tp</span><span>
</span><span id="line-1254"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;let&quot; &lt;+&gt; align (vcat (map ptype types))</span><span>
</span><span id="line-1255"></span><span class="hs-comment">-- let empty :: Doc</span><span>
</span><span id="line-1256"></span><span class="hs-comment">--     nest  :: Int -&gt; Doc -&gt; Doc</span><span>
</span><span id="line-1257"></span><span class="hs-comment">--     fillSep</span><span>
</span><span id="line-1258"></span><span class="hs-comment">--           :: [Doc] -&gt; Doc</span><span>
</span><span id="line-1259"></span><span id="local-6989586621679070205"><span class="annot"><a href="Prettyprinter.Internal.html#fillBreak"><span class="hs-identifier hs-type">fillBreak</span></a></span><span>
</span><span id="line-1260"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Append spaces until the document is at least this wide</span></span><span>
</span><span id="line-1261"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070205"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1262"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070205"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1263"></span><span id="fillBreak"><span class="annot"><span class="annottext">fillBreak :: forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#fillBreak"><span class="hs-identifier hs-var hs-var">fillBreak</span></a></span></span><span> </span><span id="local-6989586621679070208"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070208"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679070209"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070209"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; (Int -&gt; Doc ann) -&gt; Doc ann
forall ann. Doc ann -&gt; (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#width"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070209"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070210"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070210"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1264"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070210"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070208"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1265"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070208"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#line%27"><span class="hs-identifier hs-var">line'</span></a></span><span>
</span><span id="line-1266"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
forall ann. Int -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#spaces"><span class="hs-identifier hs-var">spaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070208"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070210"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span>
</span><span id="line-1268"></span><span class="annot"><span class="hs-comment">-- | Insert a number of spaces. Negative values count as 0.</span></span><span>
</span><span id="line-1269"></span><span id="local-6989586621679070212"><span class="annot"><a href="Prettyprinter.Internal.html#spaces"><span class="hs-identifier hs-type">spaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070212"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1270"></span><span id="spaces"><span class="annot"><span class="annottext">spaces :: forall ann. Int -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#spaces"><span class="hs-identifier hs-var hs-var">spaces</span></a></span></span><span> </span><span id="local-6989586621679070217"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070217"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-1271"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070217"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>
</span><span id="line-1272"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070217"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc ann
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span>
</span><span id="line-1273"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070217"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text
</span><a href="Prettyprinter.Internal.html#textSpaces"><span class="hs-identifier hs-var">textSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070217"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1274"></span><span>
</span><span id="line-1275"></span><span class="hs-comment">-- $</span><span>
</span><span id="line-1276"></span><span class="hs-comment">-- prop&gt; \(NonNegative n) -&gt; length (show (spaces n)) == n</span><span>
</span><span id="line-1277"></span><span class="hs-comment">--</span><span>
</span><span id="line-1278"></span><span class="hs-comment">-- &gt;&gt;&gt; case spaces 1 of Char ' ' -&gt; True; _ -&gt; False</span><span>
</span><span id="line-1279"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-1280"></span><span class="hs-comment">--</span><span>
</span><span id="line-1281"></span><span class="hs-comment">-- &gt;&gt;&gt; case spaces 0 of Empty -&gt; True; _ -&gt; False</span><span>
</span><span id="line-1282"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-1283"></span><span class="hs-comment">--</span><span>
</span><span id="line-1284"></span><span class="hs-comment">-- prop&gt; \(Positive n) -&gt; case (spaces (-n)) of Empty -&gt; True; _ -&gt; False</span><span>
</span><span id="line-1285"></span><span>
</span><span id="line-1286"></span><span>
</span><span id="line-1287"></span><span>
</span><span id="line-1288"></span><span class="hs-comment">-- | @('plural' n one many)@ is @one@ if @n@ is @1@, and @many@ otherwise. A</span><span>
</span><span id="line-1289"></span><span class="hs-comment">-- typical use case is  adding a plural &quot;s&quot;.</span><span>
</span><span id="line-1290"></span><span class="hs-comment">--</span><span>
</span><span id="line-1291"></span><span class="hs-comment">-- &gt;&gt;&gt; let things = [True]</span><span>
</span><span id="line-1292"></span><span class="hs-comment">-- &gt;&gt;&gt; let amount = length things</span><span>
</span><span id="line-1293"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty things &lt;+&gt; &quot;has&quot; &lt;+&gt; pretty amount &lt;+&gt; plural &quot;entry&quot; &quot;entries&quot; amount</span><span>
</span><span id="line-1294"></span><span class="hs-comment">-- [True] has 1 entry</span><span>
</span><span id="line-1295"></span><span id="local-6989586621679069485"><span id="local-6989586621679069486"><span class="annot"><a href="Prettyprinter.Internal.html#plural"><span class="hs-identifier hs-type">plural</span></a></span><span>
</span><span id="line-1296"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679069485"><span class="hs-identifier hs-type">amount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679069485"><span class="hs-identifier hs-type">amount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1297"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069486"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ @1@ case</span></span><span>
</span><span id="line-1298"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069486"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ other cases</span></span><span>
</span><span id="line-1299"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069485"><span class="hs-identifier hs-type">amount</span></a></span><span>
</span><span id="line-1300"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069486"><span class="hs-identifier hs-type">doc</span></a></span></span></span><span>
</span><span id="line-1301"></span><span id="plural"><span class="annot"><span class="annottext">plural :: forall amount doc.
(Num amount, Eq amount) =&gt;
doc -&gt; doc -&gt; amount -&gt; doc
</span><a href="Prettyprinter.Internal.html#plural"><span class="hs-identifier hs-var hs-var">plural</span></a></span></span><span> </span><span id="local-6989586621679070222"><span class="annot"><span class="annottext">doc
</span><a href="#local-6989586621679070222"><span class="hs-identifier hs-var">one</span></a></span></span><span> </span><span id="local-6989586621679070223"><span class="annot"><span class="annottext">doc
</span><a href="#local-6989586621679070223"><span class="hs-identifier hs-var">multiple</span></a></span></span><span> </span><span id="local-6989586621679070224"><span class="annot"><span class="annottext">amount
</span><a href="#local-6989586621679070224"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-1302"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">amount
</span><a href="#local-6989586621679070224"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">amount -&gt; amount -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">amount
</span><span class="hs-number">1</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">doc
</span><a href="#local-6989586621679070222"><span class="hs-identifier hs-var">one</span></a></span><span>
</span><span id="line-1303"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">doc
</span><a href="#local-6989586621679070223"><span class="hs-identifier hs-var">multiple</span></a></span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span class="hs-comment">-- | @('enclose' l r x)@ encloses document @x@ between documents @l@ and @r@</span><span>
</span><span id="line-1306"></span><span class="hs-comment">-- using @'&lt;&gt;'@.</span><span>
</span><span id="line-1307"></span><span class="hs-comment">--</span><span>
</span><span id="line-1308"></span><span class="hs-comment">-- &gt;&gt;&gt; enclose &quot;A&quot; &quot;Z&quot; &quot;&#183;&quot;</span><span>
</span><span id="line-1309"></span><span class="hs-comment">-- A&#183;Z</span><span>
</span><span id="line-1310"></span><span class="hs-comment">--</span><span>
</span><span id="line-1311"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1312"></span><span class="hs-comment">-- 'enclose' l r x = l '&lt;&gt;' x '&lt;&gt;' r</span><span>
</span><span id="line-1313"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1314"></span><span id="local-6989586621679069489"><span class="annot"><a href="Prettyprinter.Internal.html#enclose"><span class="hs-identifier hs-type">enclose</span></a></span><span>
</span><span id="line-1315"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069489"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ L</span></span><span>
</span><span id="line-1316"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069489"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ R</span></span><span>
</span><span id="line-1317"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069489"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ x</span></span><span>
</span><span id="line-1318"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069489"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ LxR</span></span><span>
</span><span id="line-1319"></span><span id="enclose"><span class="annot"><span class="annottext">enclose :: forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#enclose"><span class="hs-identifier hs-var hs-var">enclose</span></a></span></span><span> </span><span id="local-6989586621679070227"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070227"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070228"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070228"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679070229"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070229"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070227"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070229"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070228"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1320"></span><span>
</span><span id="line-1321"></span><span class="hs-comment">-- | @('surround' x l r)@ surrounds document @x@ with @l@ and @r@.</span><span>
</span><span id="line-1322"></span><span class="hs-comment">--</span><span>
</span><span id="line-1323"></span><span class="hs-comment">-- &gt;&gt;&gt; surround &quot;&#183;&quot; &quot;A&quot; &quot;Z&quot;</span><span>
</span><span id="line-1324"></span><span class="hs-comment">-- A&#183;Z</span><span>
</span><span id="line-1325"></span><span class="hs-comment">--</span><span>
</span><span id="line-1326"></span><span class="hs-comment">-- This is merely an argument reordering of @'enclose'@, but allows for</span><span>
</span><span id="line-1327"></span><span class="hs-comment">-- definitions like</span><span>
</span><span id="line-1328"></span><span class="hs-comment">--</span><span>
</span><span id="line-1329"></span><span class="hs-comment">-- &gt;&gt;&gt; concatWith (surround dot) [&quot;Prettyprinter&quot;, &quot;Render&quot;, &quot;Text&quot;]</span><span>
</span><span id="line-1330"></span><span class="hs-comment">-- Prettyprinter.Render.Text</span><span>
</span><span id="line-1331"></span><span id="local-6989586621679070230"><span class="annot"><a href="Prettyprinter.Internal.html#surround"><span class="hs-identifier hs-type">surround</span></a></span><span>
</span><span id="line-1332"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070230"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1333"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070230"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1334"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070230"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1335"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070230"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1336"></span><span id="surround"><span class="annot"><span class="annottext">surround :: forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#surround"><span class="hs-identifier hs-var hs-var">surround</span></a></span></span><span> </span><span id="local-6989586621679070233"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070233"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070234"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070234"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070235"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070235"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070234"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070233"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070235"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1337"></span><span>
</span><span id="line-1338"></span><span>
</span><span id="line-1339"></span><span>
</span><span id="line-1340"></span><span>
</span><span id="line-1341"></span><span>
</span><span id="line-1342"></span><span>
</span><span id="line-1343"></span><span class="hs-comment">-- | Add an annotation to a @'Doc'@. This annotation can then be used by the</span><span>
</span><span id="line-1344"></span><span class="hs-comment">-- renderer to e.g. add color to certain parts of the output. For a full</span><span>
</span><span id="line-1345"></span><span class="hs-comment">-- tutorial example on how to use it, see the</span><span>
</span><span id="line-1346"></span><span class="hs-comment">-- &quot;Prettyprinter.Render.Tutorials.StackMachineTutorial&quot; or</span><span>
</span><span id="line-1347"></span><span class="hs-comment">-- &quot;Prettyprinter.Render.Tutorials.TreeRenderingTutorial&quot; modules.</span><span>
</span><span id="line-1348"></span><span class="hs-comment">--</span><span>
</span><span id="line-1349"></span><span class="hs-comment">-- This function is only relevant for custom formats with their own annotations,</span><span>
</span><span id="line-1350"></span><span class="hs-comment">-- and not relevant for basic prettyprinting. The predefined renderers, e.g.</span><span>
</span><span id="line-1351"></span><span class="hs-comment">-- &quot;Prettyprinter.Render.Text&quot;, should be enough for the most common</span><span>
</span><span id="line-1352"></span><span class="hs-comment">-- needs.</span><span>
</span><span id="line-1353"></span><span id="local-6989586621679070236"><span class="annot"><a href="Prettyprinter.Internal.html#annotate"><span class="hs-identifier hs-type">annotate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679070236"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070236"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070236"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1354"></span><span id="annotate"><span class="annot"><span class="annottext">annotate :: forall ann. ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#annotate"><span class="hs-identifier hs-var hs-var">annotate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ann -&gt; Doc ann -&gt; Doc ann
forall ann. ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span>
</span><span id="line-1355"></span><span>
</span><span id="line-1356"></span><span class="hs-comment">-- | Remove all annotations.</span><span>
</span><span id="line-1357"></span><span class="hs-comment">--</span><span>
</span><span id="line-1358"></span><span class="hs-comment">-- Although 'unAnnotate' is idempotent with respect to rendering,</span><span>
</span><span id="line-1359"></span><span class="hs-comment">--</span><span>
</span><span id="line-1360"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1361"></span><span class="hs-comment">-- 'unAnnotate' . 'unAnnotate' = 'unAnnotate'</span><span>
</span><span id="line-1362"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1363"></span><span class="hs-comment">--</span><span>
</span><span id="line-1364"></span><span class="hs-comment">-- it should not be used without caution, for each invocation traverses the</span><span>
</span><span id="line-1365"></span><span class="hs-comment">-- entire contained document. If possible, it is preferrable to unannotate after</span><span>
</span><span id="line-1366"></span><span class="hs-comment">-- producing the layout by using 'unAnnotateS'.</span><span>
</span><span id="line-1367"></span><span id="local-6989586621679069493"><span id="local-6989586621679069494"><span class="annot"><a href="Prettyprinter.Internal.html#unAnnotate"><span class="hs-identifier hs-type">unAnnotate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069493"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069494"><span class="hs-identifier hs-type">xxx</span></a></span></span></span><span>
</span><span id="line-1368"></span><span id="unAnnotate"><span class="annot"><span class="annottext">unAnnotate :: forall ann xxx. Doc ann -&gt; Doc xxx
</span><a href="Prettyprinter.Internal.html#unAnnotate"><span class="hs-identifier hs-var hs-var">unAnnotate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ann -&gt; [xxx]) -&gt; Doc ann -&gt; Doc xxx
forall ann ann'. (ann -&gt; [ann']) -&gt; Doc ann -&gt; Doc ann'
</span><a href="Prettyprinter.Internal.html#alterAnnotations"><span class="hs-identifier hs-var">alterAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[xxx] -&gt; ann -&gt; [xxx]
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span class="hs-comment">-- | Change the annotation of a 'Doc'ument.</span><span>
</span><span id="line-1371"></span><span class="hs-comment">--</span><span>
</span><span id="line-1372"></span><span class="hs-comment">-- Useful in particular to embed documents with one form of annotation in a more</span><span>
</span><span id="line-1373"></span><span class="hs-comment">-- generally annotated document.</span><span>
</span><span id="line-1374"></span><span class="hs-comment">--</span><span>
</span><span id="line-1375"></span><span class="hs-comment">-- Since this traverses the entire @'Doc'@ tree, including parts that are not</span><span>
</span><span id="line-1376"></span><span class="hs-comment">-- rendered due to other layouts fitting better, it is preferrable to reannotate</span><span>
</span><span id="line-1377"></span><span class="hs-comment">-- after producing the layout by using @'reAnnotateS'@.</span><span>
</span><span id="line-1378"></span><span class="hs-comment">--</span><span>
</span><span id="line-1379"></span><span class="hs-comment">-- Since @'reAnnotate'@ has the right type and satisfies @'reAnnotate id = id'@,</span><span>
</span><span id="line-1380"></span><span class="hs-comment">-- it is used to define the @'Functor'@ instance of @'Doc'@.</span><span>
</span><span id="line-1381"></span><span id="local-6989586621679070238"><span id="local-6989586621679070239"><span class="annot"><a href="Prettyprinter.Internal.html#reAnnotate"><span class="hs-identifier hs-type">reAnnotate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679070238"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679070239"><span class="hs-identifier hs-type">ann'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070238"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070239"><span class="hs-identifier hs-type">ann'</span></a></span></span></span><span>
</span><span id="line-1382"></span><span id="reAnnotate"><span class="annot"><span class="annottext">reAnnotate :: forall a b. (a -&gt; b) -&gt; Doc a -&gt; Doc b
</span><a href="Prettyprinter.Internal.html#reAnnotate"><span class="hs-identifier hs-var hs-var">reAnnotate</span></a></span></span><span> </span><span id="local-6989586621679070242"><span class="annot"><span class="annottext">ann -&gt; ann'
</span><a href="#local-6989586621679070242"><span class="hs-identifier hs-var">re</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ann -&gt; [ann']) -&gt; Doc ann -&gt; Doc ann'
forall ann ann'. (ann -&gt; [ann']) -&gt; Doc ann -&gt; Doc ann'
</span><a href="Prettyprinter.Internal.html#alterAnnotations"><span class="hs-identifier hs-var">alterAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann' -&gt; [ann']
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ann' -&gt; [ann']) -&gt; (ann -&gt; ann') -&gt; ann -&gt; [ann']
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ann -&gt; ann'
</span><a href="#local-6989586621679070242"><span class="hs-identifier hs-var">re</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1383"></span><span>
</span><span id="line-1384"></span><span class="hs-comment">-- | Change the annotations of a 'Doc'ument. Individual annotations can be</span><span>
</span><span id="line-1385"></span><span class="hs-comment">-- removed, changed, or replaced by multiple ones.</span><span>
</span><span id="line-1386"></span><span class="hs-comment">--</span><span>
</span><span id="line-1387"></span><span class="hs-comment">-- This is a general function that combines 'unAnnotate' and 'reAnnotate', and</span><span>
</span><span id="line-1388"></span><span class="hs-comment">-- it is useful for mapping semantic annotations (such as &#187;this is a keyword&#171;)</span><span>
</span><span id="line-1389"></span><span class="hs-comment">-- to display annotations (such as &#187;this is red and underlined&#171;), because some</span><span>
</span><span id="line-1390"></span><span class="hs-comment">-- backends may not care about certain annotations, while others may.</span><span>
</span><span id="line-1391"></span><span class="hs-comment">--</span><span>
</span><span id="line-1392"></span><span class="hs-comment">-- Annotations earlier in the new list will be applied earlier, i.e. returning</span><span>
</span><span id="line-1393"></span><span class="hs-comment">-- @[Bold, Green]@ will result in a bold document that contains green text, and</span><span>
</span><span id="line-1394"></span><span class="hs-comment">-- not vice-versa.</span><span>
</span><span id="line-1395"></span><span class="hs-comment">--</span><span>
</span><span id="line-1396"></span><span class="hs-comment">-- Since this traverses the entire @'Doc'@ tree, including parts that are not</span><span>
</span><span id="line-1397"></span><span class="hs-comment">-- rendered due to other layouts fitting better, it is preferrable to reannotate</span><span>
</span><span id="line-1398"></span><span class="hs-comment">-- after producing the layout by using @'alterAnnotationsS'@.</span><span>
</span><span id="line-1399"></span><span id="local-6989586621679069497"><span id="local-6989586621679069498"><span class="annot"><a href="Prettyprinter.Internal.html#alterAnnotations"><span class="hs-identifier hs-type">alterAnnotations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679069497"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679069498"><span class="hs-identifier hs-type">ann'</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069497"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069498"><span class="hs-identifier hs-type">ann'</span></a></span></span></span><span>
</span><span id="line-1400"></span><span id="alterAnnotations"><span class="annot"><span class="annottext">alterAnnotations :: forall ann ann'. (ann -&gt; [ann']) -&gt; Doc ann -&gt; Doc ann'
</span><a href="Prettyprinter.Internal.html#alterAnnotations"><span class="hs-identifier hs-var hs-var">alterAnnotations</span></a></span></span><span> </span><span id="local-6989586621679070243"><span class="annot"><span class="annottext">ann -&gt; [ann']
</span><a href="#local-6989586621679070243"><span class="hs-identifier hs-var">re</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1401"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1402"></span><span>    </span><span id="local-6989586621679070244"><span class="annot"><span class="annottext">go :: Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070246"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070246"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070246"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1403"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann'
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>
</span><span id="line-1404"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann'
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>
</span><span id="line-1405"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070247"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070247"><span class="hs-identifier hs-var">c</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc ann'
forall ann. Char -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070247"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1406"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070248"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070248"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070249"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070249"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann'
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070248"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070249"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1407"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann'
forall ann. Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>
</span><span id="line-1408"></span><span>
</span><span id="line-1409"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span id="local-6989586621679070250"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070250"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070251"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070251"><span class="hs-identifier hs-var">y</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann' -&gt; Doc ann' -&gt; Doc ann'
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-var">FlatAlt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070250"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070251"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1410"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070252"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070252"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070253"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070253"><span class="hs-identifier hs-var">y</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann' -&gt; Doc ann' -&gt; Doc ann'
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070252"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070253"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1411"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070254"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070254"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070255"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070255"><span class="hs-identifier hs-var">x</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann' -&gt; Doc ann'
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070254"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070255"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1412"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span> </span><span id="local-6989586621679070256"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070256"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070257"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070257"><span class="hs-identifier hs-var">y</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann' -&gt; Doc ann' -&gt; Doc ann'
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070256"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070257"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1413"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span id="local-6989586621679070258"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070258"><span class="hs-identifier hs-var">f</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann') -&gt; Doc ann'
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-var">Column</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann') -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070258"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span> </span><span id="local-6989586621679070259"><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070259"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(PageWidth -&gt; Doc ann') -&gt; Doc ann'
forall ann. (PageWidth -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-var">WithPageWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann')
-&gt; (PageWidth -&gt; Doc ann) -&gt; PageWidth -&gt; Doc ann'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070259"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1415"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span> </span><span id="local-6989586621679070260"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070260"><span class="hs-identifier hs-var">f</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann') -&gt; Doc ann'
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-var">Nesting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann') -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070260"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679070261"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070261"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070262"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070262"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ann' -&gt; Doc ann' -&gt; Doc ann') -&gt; Doc ann' -&gt; [ann'] -&gt; Doc ann'
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">ann' -&gt; Doc ann' -&gt; Doc ann'
forall ann. ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann'
</span><a href="#local-6989586621679070244"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070262"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann -&gt; [ann']
</span><a href="#local-6989586621679070243"><span class="hs-identifier hs-var">re</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070261"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1417"></span><span>
</span><span id="line-1418"></span><span class="hs-comment">-- $</span><span>
</span><span id="line-1419"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = &quot;lorem&quot; &lt;+&gt; annotate () &quot;ipsum&quot; &lt;+&gt; &quot;dolor&quot;</span><span>
</span><span id="line-1420"></span><span class="hs-comment">-- &gt;&gt;&gt; let re () = [&quot;FOO&quot;, &quot;BAR&quot;]</span><span>
</span><span id="line-1421"></span><span class="hs-comment">-- &gt;&gt;&gt; layoutPretty defaultLayoutOptions (alterAnnotations re doc)</span><span>
</span><span id="line-1422"></span><span class="hs-comment">-- SText 5 &quot;lorem&quot; (SChar ' ' (SAnnPush &quot;FOO&quot; (SAnnPush &quot;BAR&quot; (SText 5 &quot;ipsum&quot; (SAnnPop (SAnnPop (SChar ' ' (SText 5 &quot;dolor&quot; SEmpty))))))))</span><span>
</span><span id="line-1423"></span><span>
</span><span id="line-1424"></span><span class="annot"><span class="hs-comment">-- | Remove all annotations. 'unAnnotate' for 'SimpleDocStream'.</span></span><span>
</span><span id="line-1425"></span><span id="local-6989586621679069509"><span id="local-6989586621679069511"><span class="annot"><a href="Prettyprinter.Internal.html#unAnnotateS"><span class="hs-identifier hs-type">unAnnotateS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069509"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069511"><span class="hs-identifier hs-type">xxx</span></a></span></span></span><span>
</span><span id="line-1426"></span><span id="unAnnotateS"><span class="annot"><span class="annottext">unAnnotateS :: forall ann xxx. SimpleDocStream ann -&gt; SimpleDocStream xxx
</span><a href="Prettyprinter.Internal.html#unAnnotateS"><span class="hs-identifier hs-var hs-var">unAnnotateS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream xxx
forall ann xxx. SimpleDocStream ann -&gt; SimpleDocStream xxx
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1427"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1428"></span><span>    </span><span id="local-6989586621679070264"><span class="annot"><span class="annottext">go :: SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070265"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070265"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070265"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1429"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1430"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1431"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679070269"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070269"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679070270"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070270"><span class="hs-identifier hs-var">rest</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070269"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070270"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070272"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070272"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070273"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070273"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679070274"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070274"><span class="hs-identifier hs-var">rest</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070272"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070273"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070274"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1433"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070276"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070276"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070277"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070277"><span class="hs-identifier hs-var">rest</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070276"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070277"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1434"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070279"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070279"><span class="hs-identifier hs-var">rest</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070279"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1435"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070281"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070281"><span class="hs-identifier hs-var">_ann</span></a></span></span><span> </span><span id="local-6989586621679070282"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070282"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070264"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070282"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1436"></span><span>
</span><span id="line-1437"></span><span class="annot"><span class="hs-comment">-- | Change the annotation of a document. 'reAnnotate' for 'SimpleDocStream'.</span></span><span>
</span><span id="line-1438"></span><span id="local-6989586621679069517"><span id="local-6989586621679069518"><span class="annot"><a href="Prettyprinter.Internal.html#reAnnotateS"><span class="hs-identifier hs-type">reAnnotateS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679069517"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679069518"><span class="hs-identifier hs-type">ann'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069517"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069518"><span class="hs-identifier hs-type">ann'</span></a></span></span></span><span>
</span><span id="line-1439"></span><span id="reAnnotateS"><span class="annot"><span class="annottext">reAnnotateS :: forall ann ann'.
(ann -&gt; ann') -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="Prettyprinter.Internal.html#reAnnotateS"><span class="hs-identifier hs-var hs-var">reAnnotateS</span></a></span></span><span> </span><span id="local-6989586621679070283"><span class="annot"><span class="annottext">ann -&gt; ann'
</span><a href="#local-6989586621679070283"><span class="hs-identifier hs-var">re</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1440"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1441"></span><span>    </span><span id="local-6989586621679070284"><span class="annot"><span class="annottext">go :: SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070285"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070285"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070285"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1442"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann'
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1443"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann'
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1444"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679070286"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070286"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679070287"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070287"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070286"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070287"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070288"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070288"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070289"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070289"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679070290"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070290"><span class="hs-identifier hs-var">rest</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070288"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070289"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070290"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1446"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070291"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070291"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070292"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070292"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070291"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070292"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070293"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070293"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070293"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1448"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070294"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070294"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070295"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070295"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ann' -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann -&gt; ann'
</span><a href="#local-6989586621679070283"><span class="hs-identifier hs-var">re</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070294"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070284"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070295"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span class="hs-keyword">data</span><span> </span><span id="AnnotationRemoval"><span class="annot"><a href="Prettyprinter.Internal.html#AnnotationRemoval"><span class="hs-identifier hs-var">AnnotationRemoval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Remove"><span class="annot"><a href="Prettyprinter.Internal.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DontRemove"><span class="annot"><a href="Prettyprinter.Internal.html#DontRemove"><span class="hs-identifier hs-var">DontRemove</span></a></span></span><span>
</span><span id="line-1451"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-1452"></span><span>
</span><span id="line-1453"></span><span class="hs-comment">-- | Change the annotation of a document to a different annotation, or none at</span><span>
</span><span id="line-1454"></span><span class="hs-comment">-- all. 'alterAnnotations' for 'SimpleDocStream'.</span><span>
</span><span id="line-1455"></span><span class="hs-comment">--</span><span>
</span><span id="line-1456"></span><span class="hs-comment">-- Note that the 'Doc' version is more flexible, since it allows changing a</span><span>
</span><span id="line-1457"></span><span class="hs-comment">-- single annotation to multiple ones.</span><span>
</span><span id="line-1458"></span><span class="hs-comment">-- ('Prettyprinter.Render.Util.SimpleDocTree.SimpleDocTree' restores</span><span>
</span><span id="line-1459"></span><span class="hs-comment">-- this flexibility again.)</span><span>
</span><span id="line-1460"></span><span id="local-6989586621679069521"><span id="local-6989586621679069522"><span class="annot"><a href="Prettyprinter.Internal.html#alterAnnotationsS"><span class="hs-identifier hs-type">alterAnnotationsS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679069521"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679069522"><span class="hs-identifier hs-type">ann'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069521"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069522"><span class="hs-identifier hs-type">ann'</span></a></span></span></span><span>
</span><span id="line-1461"></span><span id="alterAnnotationsS"><span class="annot"><span class="annottext">alterAnnotationsS :: forall ann ann'.
(ann -&gt; Maybe ann') -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="Prettyprinter.Internal.html#alterAnnotationsS"><span class="hs-identifier hs-var hs-var">alterAnnotationsS</span></a></span></span><span> </span><span id="local-6989586621679070298"><span class="annot"><span class="annottext">ann -&gt; Maybe ann'
</span><a href="#local-6989586621679070298"><span class="hs-identifier hs-var">re</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1462"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1463"></span><span>    </span><span class="hs-comment">-- We keep a stack of whether to remove a pop so that we can remove exactly</span><span>
</span><span id="line-1464"></span><span>    </span><span class="hs-comment">-- the pops corresponding to annotations that mapped to Nothing.</span><span>
</span><span id="line-1465"></span><span>    </span><span id="local-6989586621679070299"><span class="annot"><span class="annottext">go :: [AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679070300"><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070301"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070301"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070301"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1466"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann'
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1467"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann'
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1468"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679070302"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070302"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679070303"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070303"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070302"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070303"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070304"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070304"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070305"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070305"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679070306"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070306"><span class="hs-identifier hs-var">rest</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070304"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070305"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070306"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1470"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070307"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070307"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070308"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070308"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070307"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070308"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1471"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070309"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070309"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070310"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070310"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ann -&gt; Maybe ann'
</span><a href="#local-6989586621679070298"><span class="hs-identifier hs-var">re</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070309"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1472"></span><span>            </span><span class="annot"><span class="annottext">Maybe ann'
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotationRemoval
</span><a href="Prettyprinter.Internal.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span><span class="annot"><span class="annottext">AnnotationRemoval -&gt; [AnnotationRemoval] -&gt; [AnnotationRemoval]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070310"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1473"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679070311"><span class="annot"><span class="annottext">ann'
</span><a href="#local-6989586621679070311"><span class="hs-identifier hs-var">ann'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ann' -&gt; SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann'
</span><a href="#local-6989586621679070311"><span class="hs-identifier hs-var">ann'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotationRemoval
</span><a href="Prettyprinter.Internal.html#DontRemove"><span class="hs-identifier hs-var">DontRemove</span></a></span><span class="annot"><span class="annottext">AnnotationRemoval -&gt; [AnnotationRemoval] -&gt; [AnnotationRemoval]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070310"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1474"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070312"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070312"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070300"><span class="hs-identifier hs-var">stack</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1475"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann'
forall void. void
</span><a href="Prettyprinter.Render.Util.Panic.html#panicPeekedEmpty"><span class="hs-identifier hs-var">panicPeekedEmpty</span></a></span><span>
</span><span id="line-1476"></span><span>            </span><span class="annot"><span class="annottext">AnnotationRemoval
</span><a href="Prettyprinter.Internal.html#DontRemove"><span class="hs-identifier hs-var">DontRemove</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679070314"><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070314"><span class="hs-identifier hs-var">stack'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann' -&gt; SimpleDocStream ann'
forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070314"><span class="hs-identifier hs-var">stack'</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070312"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1477"></span><span>            </span><span class="annot"><span class="annottext">AnnotationRemoval
</span><a href="Prettyprinter.Internal.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679070315"><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070315"><span class="hs-identifier hs-var">stack'</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="#local-6989586621679070299"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotationRemoval]
</span><a href="#local-6989586621679070315"><span class="hs-identifier hs-var">stack'</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070312"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1478"></span><span>
</span><span id="line-1479"></span><span class="annot"><span class="hs-comment">-- | Fusion depth parameter, used by 'fuse'.</span></span><span>
</span><span id="line-1480"></span><span class="hs-keyword">data</span><span> </span><span id="FusionDepth"><span class="annot"><a href="Prettyprinter.Internal.html#FusionDepth"><span class="hs-identifier hs-var">FusionDepth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1481"></span><span>
</span><span id="line-1482"></span><span>    </span><span class="hs-comment">-- | Do not dive deep into nested documents, fusing mostly concatenations of</span><span>
</span><span id="line-1483"></span><span>    </span><span class="hs-comment">-- text nodes together.</span><span>
</span><span id="line-1484"></span><span>    </span><span id="Shallow"><span class="annot"><a href="Prettyprinter.Internal.html#Shallow"><span class="hs-identifier hs-var">Shallow</span></a></span></span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span>    </span><span class="hs-comment">-- | Recurse into all parts of the 'Doc', including different layout</span><span>
</span><span id="line-1487"></span><span>    </span><span class="hs-comment">-- alternatives, and location-sensitive values such as created by 'nesting'</span><span>
</span><span id="line-1488"></span><span>    </span><span class="hs-comment">-- which cannot be fused before, but only during, the layout process. As a</span><span>
</span><span id="line-1489"></span><span>    </span><span class="hs-comment">-- result, the performance cost of using deep fusion is often hard to</span><span>
</span><span id="line-1490"></span><span>    </span><span class="hs-comment">-- predict, and depends on the interplay between page layout and document to</span><span>
</span><span id="line-1491"></span><span>    </span><span class="hs-comment">-- prettyprint.</span><span>
</span><span id="line-1492"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1493"></span><span>    </span><span class="hs-comment">-- This value should only be used if profiling shows it is significantly</span><span>
</span><span id="line-1494"></span><span>    </span><span class="hs-comment">-- faster than using 'Shallow'.</span><span>
</span><span id="line-1495"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Deep"><span class="annot"><a href="Prettyprinter.Internal.html#Deep"><span class="hs-identifier hs-var">Deep</span></a></span></span><span>
</span><span id="line-1496"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070319"><span id="local-6989586621679070321"><span class="annot"><span class="annottext">FusionDepth -&gt; FusionDepth -&gt; Bool
(FusionDepth -&gt; FusionDepth -&gt; Bool)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; Bool) -&gt; Eq FusionDepth
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FusionDepth -&gt; FusionDepth -&gt; Bool
== :: FusionDepth -&gt; FusionDepth -&gt; Bool
$c/= :: FusionDepth -&gt; FusionDepth -&gt; Bool
/= :: FusionDepth -&gt; FusionDepth -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070328"><span id="local-6989586621679070330"><span id="local-6989586621679070332"><span id="local-6989586621679070336"><span id="local-6989586621679070339"><span id="local-6989586621679070342"><span id="local-6989586621679070345"><span class="annot"><span class="annottext">Eq FusionDepth
Eq FusionDepth =&gt;
(FusionDepth -&gt; FusionDepth -&gt; Ordering)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; Bool)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; Bool)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; Bool)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; Bool)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; FusionDepth)
-&gt; (FusionDepth -&gt; FusionDepth -&gt; FusionDepth)
-&gt; Ord FusionDepth
FusionDepth -&gt; FusionDepth -&gt; Bool
FusionDepth -&gt; FusionDepth -&gt; Ordering
FusionDepth -&gt; FusionDepth -&gt; FusionDepth
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: FusionDepth -&gt; FusionDepth -&gt; Ordering
compare :: FusionDepth -&gt; FusionDepth -&gt; Ordering
$c&lt; :: FusionDepth -&gt; FusionDepth -&gt; Bool
&lt; :: FusionDepth -&gt; FusionDepth -&gt; Bool
$c&lt;= :: FusionDepth -&gt; FusionDepth -&gt; Bool
&lt;= :: FusionDepth -&gt; FusionDepth -&gt; Bool
$c&gt; :: FusionDepth -&gt; FusionDepth -&gt; Bool
&gt; :: FusionDepth -&gt; FusionDepth -&gt; Bool
$c&gt;= :: FusionDepth -&gt; FusionDepth -&gt; Bool
&gt;= :: FusionDepth -&gt; FusionDepth -&gt; Bool
$cmax :: FusionDepth -&gt; FusionDepth -&gt; FusionDepth
max :: FusionDepth -&gt; FusionDepth -&gt; FusionDepth
$cmin :: FusionDepth -&gt; FusionDepth -&gt; FusionDepth
min :: FusionDepth -&gt; FusionDepth -&gt; FusionDepth
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070349"><span id="local-6989586621679070351"><span id="local-6989586621679070355"><span class="annot"><span class="annottext">Int -&gt; FusionDepth -&gt; ShowS
[FusionDepth] -&gt; ShowS
FusionDepth -&gt; String
(Int -&gt; FusionDepth -&gt; ShowS)
-&gt; (FusionDepth -&gt; String)
-&gt; ([FusionDepth] -&gt; ShowS)
-&gt; Show FusionDepth
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FusionDepth -&gt; ShowS
showsPrec :: Int -&gt; FusionDepth -&gt; ShowS
$cshow :: FusionDepth -&gt; String
show :: FusionDepth -&gt; String
$cshowList :: [FusionDepth] -&gt; ShowS
showList :: [FusionDepth] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1497"></span><span>
</span><span id="line-1498"></span><span class="hs-comment">-- | @('fuse' depth doc)@ combines text nodes so they can be rendered more</span><span>
</span><span id="line-1499"></span><span class="hs-comment">-- efficiently. A fused document is always laid out identical to its unfused</span><span>
</span><span id="line-1500"></span><span class="hs-comment">-- version.</span><span>
</span><span id="line-1501"></span><span class="hs-comment">--</span><span>
</span><span id="line-1502"></span><span class="hs-comment">-- When laying a 'Doc'ument out to a 'SimpleDocStream', every component of the</span><span>
</span><span id="line-1503"></span><span class="hs-comment">-- input is translated directly to the simpler output format. This sometimes</span><span>
</span><span id="line-1504"></span><span class="hs-comment">-- yields undesirable chunking when many pieces have been concatenated together.</span><span>
</span><span id="line-1505"></span><span class="hs-comment">--</span><span>
</span><span id="line-1506"></span><span class="hs-comment">-- For example</span><span>
</span><span id="line-1507"></span><span class="hs-comment">--</span><span>
</span><span id="line-1508"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;a&quot; &lt;&gt; &quot;b&quot; &lt;&gt; pretty 'c' &lt;&gt; &quot;d&quot;</span><span>
</span><span id="line-1509"></span><span class="hs-comment">-- abcd</span><span>
</span><span id="line-1510"></span><span class="hs-comment">--</span><span>
</span><span id="line-1511"></span><span class="hs-comment">-- results in a chain of four entries in a 'SimpleDocStream', although this is fully</span><span>
</span><span id="line-1512"></span><span class="hs-comment">-- equivalent to the tightly packed</span><span>
</span><span id="line-1513"></span><span class="hs-comment">--</span><span>
</span><span id="line-1514"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;abcd&quot; :: Doc ann</span><span>
</span><span id="line-1515"></span><span class="hs-comment">-- abcd</span><span>
</span><span id="line-1516"></span><span class="hs-comment">--</span><span>
</span><span id="line-1517"></span><span class="hs-comment">-- which is only a single 'SimpleDocStream' entry, and can be processed faster.</span><span>
</span><span id="line-1518"></span><span class="hs-comment">--</span><span>
</span><span id="line-1519"></span><span class="hs-comment">-- It is therefore a good idea to run 'fuse' on concatenations of lots of small</span><span>
</span><span id="line-1520"></span><span class="hs-comment">-- strings that are used many times:</span><span>
</span><span id="line-1521"></span><span class="hs-comment">--</span><span>
</span><span id="line-1522"></span><span class="hs-comment">-- &gt;&gt;&gt; let oftenUsed = fuse Shallow (&quot;a&quot; &lt;&gt; &quot;b&quot; &lt;&gt; pretty 'c' &lt;&gt; &quot;d&quot;)</span><span>
</span><span id="line-1523"></span><span class="hs-comment">-- &gt;&gt;&gt; hsep (replicate 5 oftenUsed)</span><span>
</span><span id="line-1524"></span><span class="hs-comment">-- abcd abcd abcd abcd abcd</span><span>
</span><span id="line-1525"></span><span id="local-6989586621679069529"><span class="annot"><a href="Prettyprinter.Internal.html#fuse"><span class="hs-identifier hs-type">fuse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#FusionDepth"><span class="hs-identifier hs-type">FusionDepth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069529"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069529"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1526"></span><span id="fuse"><span class="annot"><span class="annottext">fuse :: forall ann. FusionDepth -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#fuse"><span class="hs-identifier hs-var hs-var">fuse</span></a></span></span><span> </span><span id="local-6989586621679070358"><span class="annot"><span class="annottext">FusionDepth
</span><a href="#local-6989586621679070358"><span class="hs-identifier hs-var">depth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1527"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1528"></span><span>    </span><span id="local-6989586621679070359"><span class="annot"><span class="annottext">go :: Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070371"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070371"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070371"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1529"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span> </span><span id="local-6989586621679070372"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070372"><span class="hs-identifier hs-var">x</span></a></span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070372"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1530"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070373"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070373"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070373"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1531"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070374"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070374"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070375"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070375"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070374"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070375"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070376"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070376"><span class="hs-identifier hs-var">lt</span></a></span></span><span> </span><span id="local-6989586621679070377"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070377"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070378"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070378"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070376"><span class="hs-identifier hs-var">lt</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Char -&gt; Text
</span><span class="hs-identifier hs-var">T.snoc</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070377"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070378"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1533"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070381"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070381"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070382"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070382"><span class="hs-identifier hs-var">lt</span></a></span></span><span> </span><span id="local-6989586621679070383"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070383"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070382"><span class="hs-identifier hs-var">lt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070381"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070383"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070385"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070385"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span id="local-6989586621679070386"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070386"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070387"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070387"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span id="local-6989586621679070388"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070388"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Doc ann
forall ann. Int -&gt; Text -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070385"><span class="hs-identifier hs-var">l1</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070387"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070386"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070388"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1535"></span><span>
</span><span id="line-1536"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070389"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070389"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070390"><span class="annot"><span class="annottext">y :: Doc ann
</span><a href="#local-6989586621679070390"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span id="local-6989586621679070391"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070391"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070389"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070390"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070391"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1537"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070392"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070392"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070393"><span class="annot"><span class="annottext">y :: Doc ann
</span><a href="#local-6989586621679070393"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span id="local-6989586621679070394"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070394"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070392"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070393"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070394"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1538"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070395"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070395"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070396"><span class="annot"><span class="annottext">y :: Doc ann
</span><a href="#local-6989586621679070396"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span id="local-6989586621679070397"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070397"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070395"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070396"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070397"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1539"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070398"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070398"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070399"><span class="annot"><span class="annottext">y :: Doc ann
</span><a href="#local-6989586621679070399"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span id="local-6989586621679070400"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070400"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070398"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070399"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070400"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>
</span><span id="line-1541"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070401"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070401"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070402"><span class="annot"><span class="annottext">y :: Doc ann
</span><a href="#local-6989586621679070402"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679070403"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070403"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070401"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070402"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070403"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1542"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070404"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070404"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070405"><span class="annot"><span class="annottext">y :: Doc ann
</span><a href="#local-6989586621679070405"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679070406"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070406"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070404"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070405"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070406"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1543"></span><span>
</span><span id="line-1544"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070407"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070407"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070408"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070408"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-var">Cat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070407"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070408"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1545"></span><span>
</span><span id="line-1546"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070409"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070409"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070410"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070410"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621679070411"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070411"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070413"><span class="annot"><span class="annottext">fused :: Doc ann
</span><a href="#local-6989586621679070413"><span class="hs-identifier hs-var hs-var">fused</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070409"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070410"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070411"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1547"></span><span>                             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070413"><span class="hs-identifier hs-var">fused</span></a></span><span>
</span><span id="line-1548"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070414"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070414"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-type">Empty</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070414"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1549"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070415"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070415"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070415"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1550"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070416"><span class="annot"><span class="annottext">x :: Doc ann
</span><a href="#local-6989586621679070416"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070416"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1551"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621679070417"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070417"><span class="hs-identifier hs-var">x</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070417"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1552"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070418"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070418"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070419"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070419"><span class="hs-identifier hs-var">x</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; Doc ann
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-var">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070418"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070419"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679070420"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070420"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070421"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070421"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ann -&gt; Doc ann -&gt; Doc ann
forall ann. ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070420"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070421"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1555"></span><span>
</span><span id="line-1556"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span id="local-6989586621679070422"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070422"><span class="hs-identifier hs-var">x1</span></a></span></span><span> </span><span id="local-6989586621679070423"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070423"><span class="hs-identifier hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-var">FlatAlt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070422"><span class="hs-identifier hs-var">x1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070423"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span> </span><span id="local-6989586621679070424"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070424"><span class="hs-identifier hs-var">x1</span></a></span></span><span> </span><span id="local-6989586621679070425"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070425"><span class="hs-identifier hs-var">x2</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-var">Union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070424"><span class="hs-identifier hs-var">x1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070425"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span>        </span><span id="local-6989586621679070426"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070426"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FusionDepth
</span><a href="#local-6989586621679070358"><span class="hs-identifier hs-var">depth</span></a></span><span> </span><span class="annot"><span class="annottext">FusionDepth -&gt; FusionDepth -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FusionDepth
</span><a href="Prettyprinter.Internal.html#Shallow"><span class="hs-identifier hs-var">Shallow</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070426"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1560"></span><span>
</span><span id="line-1561"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span id="local-6989586621679070427"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070427"><span class="hs-identifier hs-var">f</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-var">Column</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070427"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1562"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span> </span><span id="local-6989586621679070428"><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070428"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(PageWidth -&gt; Doc ann) -&gt; Doc ann
forall ann. (PageWidth -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-var">WithPageWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann)
-&gt; (PageWidth -&gt; Doc ann) -&gt; PageWidth -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070428"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1563"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span> </span><span id="local-6989586621679070429"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070429"><span class="hs-identifier hs-var">f</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc ann) -&gt; Doc ann
forall ann. (Int -&gt; Doc ann) -&gt; Doc ann
</span><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-var">Nesting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann
</span><a href="#local-6989586621679070359"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc ann -&gt; Doc ann) -&gt; (Int -&gt; Doc ann) -&gt; Int -&gt; Doc ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070429"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1564"></span><span>
</span><span id="line-1565"></span><span>        </span><span id="local-6989586621679070430"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070430"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070430"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1566"></span><span>
</span><span id="line-1567"></span><span>
</span><span id="line-1568"></span><span>
</span><span id="line-1569"></span><span class="hs-comment">-- | The data type @SimpleDocStream@ represents laid out documents and is used</span><span>
</span><span id="line-1570"></span><span class="hs-comment">-- by the display functions.</span><span>
</span><span id="line-1571"></span><span class="hs-comment">--</span><span>
</span><span id="line-1572"></span><span class="hs-comment">-- A simplified view is that @'Doc' = ['SimpleDocStream']@, and the layout</span><span>
</span><span id="line-1573"></span><span class="hs-comment">-- functions pick one of the 'SimpleDocStream's based on which one fits the</span><span>
</span><span id="line-1574"></span><span class="hs-comment">-- layout constraints best. This means that 'SimpleDocStream' has all complexity</span><span>
</span><span id="line-1575"></span><span class="hs-comment">-- contained in 'Doc' resolved, making it very easy to convert it to other</span><span>
</span><span id="line-1576"></span><span class="hs-comment">-- formats, such as plain text or terminal output.</span><span>
</span><span id="line-1577"></span><span class="hs-comment">--</span><span>
</span><span id="line-1578"></span><span class="hs-comment">-- To write your own @'Doc'@ to X converter, it is therefore sufficient to</span><span>
</span><span id="line-1579"></span><span class="hs-comment">-- convert from @'SimpleDocStream'@. The &#187;Render&#171; submodules provide some</span><span>
</span><span id="line-1580"></span><span class="hs-comment">-- built-in converters to do so, and helpers to create own ones.</span><span>
</span><span id="line-1581"></span><span class="hs-keyword">data</span><span> </span><span id="SimpleDocStream"><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-var">SimpleDocStream</span></a></span></span><span> </span><span id="local-6989586621679069516"><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1582"></span><span>      </span><span id="SFail"><span class="annot"><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span></span><span>
</span><span id="line-1583"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SEmpty"><span class="annot"><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span></span><span>
</span><span id="line-1584"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SChar"><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span>    </span><span class="annot"><span class="hs-comment">-- | 'T.length' is /O(n)/, so we cache it in the 'Int' field.</span></span><span>
</span><span id="line-1587"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SText"><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1588"></span><span>
</span><span id="line-1589"></span><span>    </span><span class="annot"><span class="hs-comment">-- | @Int@ = indentation level for the (next) line</span></span><span>
</span><span id="line-1590"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SLine"><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1591"></span><span>
</span><span id="line-1592"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Add an annotation to the remaining document.</span></span><span>
</span><span id="line-1593"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SAnnPush"><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1594"></span><span>
</span><span id="line-1595"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Remove a previously pushed annotation.</span></span><span>
</span><span id="line-1596"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SAnnPop"><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069516"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1597"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070433"><span id="local-6989586621679070448"><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
(SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; (SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; Eq (SimpleDocStream ann)
forall ann.
Eq ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall ann.
Eq ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
== :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
$c/= :: forall ann.
Eq ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
/= :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070455"><span id="local-6989586621679070470"><span id="local-6989586621679070473"><span id="local-6989586621679070476"><span id="local-6989586621679070479"><span id="local-6989586621679070482"><span id="local-6989586621679070485"><span class="annot"><span class="annottext">Eq (SimpleDocStream ann)
Eq (SimpleDocStream ann) =&gt;
(SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Ordering)
-&gt; (SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; (SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; (SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; (SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; (SimpleDocStream ann
    -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann)
-&gt; (SimpleDocStream ann
    -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann)
-&gt; Ord (SimpleDocStream ann)
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Ordering
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall ann. Ord ann =&gt; Eq (SimpleDocStream ann)
forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Ordering
forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
$ccompare :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Ordering
compare :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Ordering
$c&lt; :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
&lt; :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
$c&lt;= :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
&lt;= :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
$c&gt; :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
&gt; :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
$c&gt;= :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
&gt;= :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; Bool
$cmax :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
max :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
$cmin :: forall ann.
Ord ann =&gt;
SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
min :: SimpleDocStream ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070489"><span id="local-6989586621679070509"><span id="local-6989586621679070512"><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; ShowS
[SimpleDocStream ann] -&gt; ShowS
SimpleDocStream ann -&gt; String
(Int -&gt; SimpleDocStream ann -&gt; ShowS)
-&gt; (SimpleDocStream ann -&gt; String)
-&gt; ([SimpleDocStream ann] -&gt; ShowS)
-&gt; Show (SimpleDocStream ann)
forall ann. Show ann =&gt; Int -&gt; SimpleDocStream ann -&gt; ShowS
forall ann. Show ann =&gt; [SimpleDocStream ann] -&gt; ShowS
forall ann. Show ann =&gt; SimpleDocStream ann -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall ann. Show ann =&gt; Int -&gt; SimpleDocStream ann -&gt; ShowS
showsPrec :: Int -&gt; SimpleDocStream ann -&gt; ShowS
$cshow :: forall ann. Show ann =&gt; SimpleDocStream ann -&gt; String
show :: SimpleDocStream ann -&gt; String
$cshowList :: forall ann. Show ann =&gt; [SimpleDocStream ann] -&gt; ShowS
showList :: [SimpleDocStream ann] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070515"><span id="local-6989586621679070517"><span class="annot"><span class="annottext">(forall x. SimpleDocStream ann -&gt; Rep (SimpleDocStream ann) x)
-&gt; (forall x. Rep (SimpleDocStream ann) x -&gt; SimpleDocStream ann)
-&gt; Generic (SimpleDocStream ann)
forall x. Rep (SimpleDocStream ann) x -&gt; SimpleDocStream ann
forall x. SimpleDocStream ann -&gt; Rep (SimpleDocStream ann) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall ann x. Rep (SimpleDocStream ann) x -&gt; SimpleDocStream ann
forall ann x. SimpleDocStream ann -&gt; Rep (SimpleDocStream ann) x
$cfrom :: forall ann x. SimpleDocStream ann -&gt; Rep (SimpleDocStream ann) x
from :: forall x. SimpleDocStream ann -&gt; Rep (SimpleDocStream ann) x
$cto :: forall ann x. Rep (SimpleDocStream ann) x -&gt; SimpleDocStream ann
to :: forall x. Rep (SimpleDocStream ann) x -&gt; SimpleDocStream ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span>
</span><span id="line-1599"></span><span class="hs-comment">-- | Remove all trailing space characters.</span><span>
</span><span id="line-1600"></span><span class="hs-comment">--</span><span>
</span><span id="line-1601"></span><span class="hs-comment">-- This has some performance impact, because it does an entire additional pass</span><span>
</span><span id="line-1602"></span><span class="hs-comment">-- over the 'SimpleDocStream'.</span><span>
</span><span id="line-1603"></span><span class="hs-comment">--</span><span>
</span><span id="line-1604"></span><span class="hs-comment">-- No trimming will be done inside annotations, which are considered to contain</span><span>
</span><span id="line-1605"></span><span class="hs-comment">-- no (trimmable) whitespace, since the annotation might actually be /about/ the</span><span>
</span><span id="line-1606"></span><span class="hs-comment">-- whitespace, for example a renderer that colors the background of trailing</span><span>
</span><span id="line-1607"></span><span class="hs-comment">-- whitespace, as e.g. @git diff@ can be configured to do.</span><span>
</span><span id="line-1608"></span><span class="hs-comment">--</span><span>
</span><span id="line-1609"></span><span class="hs-comment">-- /Historical note:/ Since v1.7.0, 'layoutPretty' and 'layoutSmart' avoid</span><span>
</span><span id="line-1610"></span><span class="hs-comment">-- producing the trailing whitespace that was the original motivation for</span><span>
</span><span id="line-1611"></span><span class="hs-comment">-- creating 'removeTrailingWhitespace'.</span><span>
</span><span id="line-1612"></span><span class="hs-comment">-- See &lt;https://github.com/quchen/prettyprinter/pull/139&gt; for some background</span><span>
</span><span id="line-1613"></span><span class="hs-comment">-- info.</span><span>
</span><span id="line-1614"></span><span id="local-6989586621679070519"><span class="annot"><a href="Prettyprinter.Internal.html#removeTrailingWhitespace"><span class="hs-identifier hs-type">removeTrailingWhitespace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070519"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070519"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1615"></span><span id="removeTrailingWhitespace"><span class="annot"><span class="annottext">removeTrailingWhitespace :: forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#removeTrailingWhitespace"><span class="hs-identifier hs-var hs-var">removeTrailingWhitespace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1617"></span><span>    </span><span id="local-6989586621679069543"><span class="annot"><a href="#local-6989586621679070522"><span class="hs-identifier hs-type">commitWhitespace</span></a></span><span>
</span><span id="line-1618"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Withheld lines</span><span>
</span><span id="line-1619"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">-- Withheld spaces</span><span>
</span><span id="line-1620"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069543"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1621"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069543"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1622"></span><span>    </span><span id="local-6989586621679070522"><span class="annot"><span class="annottext">commitWhitespace :: forall ann.
[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070522"><span class="hs-identifier hs-var hs-var">commitWhitespace</span></a></span></span><span> </span><span id="local-6989586621679070527"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070527"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070528"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070528"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679070529"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070529"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070527"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1623"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070528"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1624"></span><span>                       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070529"><span class="hs-identifier hs-var">sds</span></a></span><span>
</span><span id="line-1625"></span><span>                       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070529"><span class="hs-identifier hs-var">sds</span></a></span><span>
</span><span id="line-1626"></span><span>                       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070528"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text
</span><a href="Prettyprinter.Internal.html#textSpaces"><span class="hs-identifier hs-var">textSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070528"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070529"><span class="hs-identifier hs-var">sds</span></a></span><span>
</span><span id="line-1627"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679070530"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070530"><span class="hs-identifier hs-var">i</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679070531"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070531"><span class="hs-identifier hs-var">is'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070533"><span class="annot"><span class="annottext">end :: SimpleDocStream ann
</span><a href="#local-6989586621679070533"><span class="hs-identifier hs-var hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070530"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070528"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070529"><span class="hs-identifier hs-var">sds</span></a></span><span>
</span><span id="line-1628"></span><span>                   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. [Int] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070534"><span class="hs-identifier hs-var">prependEmptyLines</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070531"><span class="hs-identifier hs-var">is'</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070533"><span class="hs-identifier hs-var">end</span></a></span><span>
</span><span id="line-1629"></span><span>
</span><span id="line-1630"></span><span>    </span><span id="local-6989586621679069545"><span class="annot"><a href="#local-6989586621679070534"><span class="hs-identifier hs-type">prependEmptyLines</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069545"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069545"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1631"></span><span>    </span><span id="local-6989586621679070534"><span class="annot"><span class="annottext">prependEmptyLines :: forall ann. [Int] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070534"><span class="hs-identifier hs-var hs-var">prependEmptyLines</span></a></span></span><span> </span><span id="local-6989586621679070536"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070536"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span id="local-6989586621679070537"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070537"><span class="hs-identifier hs-var">sds0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann)
-&gt; SimpleDocStream ann -&gt; [Int] -&gt; SimpleDocStream ann
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070538"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070538"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070538"><span class="hs-identifier hs-var">sds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070537"><span class="hs-identifier hs-var">sds0</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070536"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-1632"></span><span>
</span><span id="line-1633"></span><span>    </span><span id="local-6989586621679069542"><span class="annot"><a href="#local-6989586621679070520"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#WhitespaceStrippingState"><span class="hs-identifier hs-type">WhitespaceStrippingState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069542"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069542"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1634"></span><span>    </span><span class="hs-comment">-- We do not strip whitespace inside annotated documents, since it might</span><span>
</span><span id="line-1635"></span><span>    </span><span class="hs-comment">-- actually be relevant there.</span><span>
</span><span id="line-1636"></span><span>    </span><span id="local-6989586621679070520"><span class="annot"><span class="annottext">go :: forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679070547"><span class="annot"><span class="annottext">annLevel :: WhitespaceStrippingState
</span><a href="#local-6989586621679070547"><span class="hs-identifier hs-var">annLevel</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#AnnotationLevel"><span class="hs-identifier hs-type">AnnotationLevel</span></a></span><span> </span><span id="local-6989586621679070549"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070549"><span class="hs-identifier hs-var">annLvl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070550"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070550"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070550"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1637"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1638"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1639"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679070551"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070551"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679070552"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070552"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070551"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
</span><a href="#local-6989586621679070547"><span class="hs-identifier hs-var">annLevel</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070552"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1640"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070553"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070553"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070554"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070554"><span class="hs-identifier hs-var">text</span></a></span></span><span> </span><span id="local-6989586621679070555"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070555"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070553"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070554"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
</span><a href="#local-6989586621679070547"><span class="hs-identifier hs-var">annLevel</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070555"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070556"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070556"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070557"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070557"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070556"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
</span><a href="#local-6989586621679070547"><span class="hs-identifier hs-var">annLevel</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070557"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1642"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070558"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070558"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070559"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070559"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070562"><span class="annot"><span class="annottext">annLvl' :: Int
</span><a href="#local-6989586621679070562"><span class="hs-identifier hs-var hs-var">annLvl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070549"><span class="hs-identifier hs-var">annLvl</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1643"></span><span>                             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070558"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#AnnotationLevel"><span class="hs-identifier hs-var">AnnotationLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070562"><span class="hs-identifier hs-var">annLvl'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070559"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1644"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070563"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070563"><span class="hs-identifier hs-var">rest</span></a></span></span><span>
</span><span id="line-1645"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070549"><span class="hs-identifier hs-var">annLvl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070566"><span class="annot"><span class="annottext">annLvl' :: Int
</span><a href="#local-6989586621679070566"><span class="hs-identifier hs-var hs-var">annLvl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070549"><span class="hs-identifier hs-var">annLvl</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1646"></span><span>                             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#AnnotationLevel"><span class="hs-identifier hs-var">AnnotationLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070566"><span class="hs-identifier hs-var">annLvl'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070563"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1647"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070563"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1648"></span><span>    </span><span class="hs-comment">-- Record all spaces/lines encountered, and once proper text starts again,</span><span>
</span><span id="line-1649"></span><span>    </span><span class="hs-comment">-- release only the necessary ones.</span><span>
</span><span id="line-1650"></span><span>    </span><span class="annot"><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-type">RecordedWhitespace</span></a></span><span> </span><span id="local-6989586621679070567"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span></span><span> </span><span id="local-6989586621679070568"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070568"><span class="hs-identifier hs-var">withheldSpaces</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070569"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070569"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070569"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1651"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1652"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. [Int] -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070534"><span class="hs-identifier hs-var">prependEmptyLines</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1653"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679070570"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070570"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679070571"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070571"><span class="hs-identifier hs-var">rest</span></a></span></span><span>
</span><span id="line-1654"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070570"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070568"><span class="hs-identifier hs-var">withheldSpaces</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070571"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1655"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070522"><span class="hs-identifier hs-var">commitWhitespace</span></a></span><span>
</span><span id="line-1656"></span><span>                               </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span>
</span><span id="line-1657"></span><span>                               </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070568"><span class="hs-identifier hs-var">withheldSpaces</span></a></span><span>
</span><span id="line-1658"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070570"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070571"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1659"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070572"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070572"><span class="hs-identifier hs-var">textLength</span></a></span></span><span> </span><span id="local-6989586621679070573"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070573"><span class="hs-identifier hs-var">text</span></a></span></span><span> </span><span id="local-6989586621679070574"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070574"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1660"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679070576"><span class="annot"><span class="annottext">stripped :: Text
</span><a href="#local-6989586621679070576"><span class="hs-identifier hs-var hs-var">stripped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.dropWhileEnd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070573"><span class="hs-identifier hs-var">text</span></a></span><span>
</span><span id="line-1661"></span><span>                </span><span id="local-6989586621679070578"><span class="annot"><span class="annottext">strippedLength :: Int
</span><a href="#local-6989586621679070578"><span class="hs-identifier hs-var hs-var">strippedLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">T.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070576"><span class="hs-identifier hs-var">stripped</span></a></span><span>
</span><span id="line-1662"></span><span>                </span><span id="local-6989586621679070580"><span class="annot"><span class="annottext">trailingLength :: Int
</span><a href="#local-6989586621679070580"><span class="hs-identifier hs-var hs-var">trailingLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070572"><span class="hs-identifier hs-var">textLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070578"><span class="hs-identifier hs-var">strippedLength</span></a></span><span>
</span><span id="line-1663"></span><span>                </span><span id="local-6989586621679070583"><span class="annot"><span class="annottext">isOnlySpace :: Bool
</span><a href="#local-6989586621679070583"><span class="hs-identifier hs-var hs-var">isOnlySpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070578"><span class="hs-identifier hs-var">strippedLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1664"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679070583"><span class="hs-identifier hs-var">isOnlySpace</span></a></span><span>
</span><span id="line-1665"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070568"><span class="hs-identifier hs-var">withheldSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070572"><span class="hs-identifier hs-var">textLength</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070574"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1666"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070522"><span class="hs-identifier hs-var">commitWhitespace</span></a></span><span>
</span><span id="line-1667"></span><span>                        </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span>
</span><span id="line-1668"></span><span>                        </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070568"><span class="hs-identifier hs-var">withheldSpaces</span></a></span><span>
</span><span id="line-1669"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070578"><span class="hs-identifier hs-var">strippedLength</span></a></span><span>
</span><span id="line-1670"></span><span>                               </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070576"><span class="hs-identifier hs-var">stripped</span></a></span><span>
</span><span id="line-1671"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070580"><span class="hs-identifier hs-var">trailingLength</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070574"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1672"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070584"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070584"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070585"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070585"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070584"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; [Int]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070585"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1673"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070586"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070586"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070587"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070587"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
[Int] -&gt; Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070522"><span class="hs-identifier hs-var">commitWhitespace</span></a></span><span>
</span><span id="line-1674"></span><span>                                 </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679070567"><span class="hs-identifier hs-var">withheldLines</span></a></span><span>
</span><span id="line-1675"></span><span>                                 </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070568"><span class="hs-identifier hs-var">withheldSpaces</span></a></span><span>
</span><span id="line-1676"></span><span>                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070586"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
WhitespaceStrippingState
-&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070520"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; WhitespaceStrippingState
</span><a href="Prettyprinter.Internal.html#AnnotationLevel"><span class="hs-identifier hs-var">AnnotationLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070587"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1677"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SimpleDocStream ann
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Tried skipping spaces in unannotated data! Please report this as a bug in 'prettyprinter'.&quot;</span></span><span>
</span><span id="line-1678"></span><span>
</span><span id="line-1679"></span><span class="hs-keyword">data</span><span> </span><span id="WhitespaceStrippingState"><span class="annot"><a href="Prettyprinter.Internal.html#WhitespaceStrippingState"><span class="hs-identifier hs-var">WhitespaceStrippingState</span></a></span></span><span>
</span><span id="line-1680"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="AnnotationLevel"><span class="annot"><a href="Prettyprinter.Internal.html#AnnotationLevel"><span class="hs-identifier hs-var">AnnotationLevel</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1681"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="RecordedWhitespace"><span class="annot"><a href="Prettyprinter.Internal.html#RecordedWhitespace"><span class="hs-identifier hs-var">RecordedWhitespace</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1682"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ [Newline with indentation i] Spaces</span></span><span>
</span><span id="line-1683"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-1684"></span><span>
</span><span id="line-1685"></span><span>
</span><span id="line-1686"></span><span>
</span><span id="line-1687"></span><span class="hs-comment">-- $</span><span>
</span><span id="line-1688"></span><span class="hs-comment">-- &gt;&gt;&gt; import qualified Data.Text.IO as T</span><span>
</span><span id="line-1689"></span><span class="hs-comment">-- &gt;&gt;&gt; doc = &quot;lorem&quot; &lt;&gt; hardline &lt;&gt; hardline &lt;&gt; pretty &quot;ipsum&quot;</span><span>
</span><span id="line-1690"></span><span class="hs-comment">-- &gt;&gt;&gt; go = T.putStrLn . renderStrict . removeTrailingWhitespace . layoutPretty defaultLayoutOptions</span><span>
</span><span id="line-1691"></span><span class="hs-comment">-- &gt;&gt;&gt; go doc</span><span>
</span><span id="line-1692"></span><span class="hs-comment">-- lorem</span><span>
</span><span id="line-1693"></span><span class="hs-comment">-- &lt;BLANKLINE&gt;</span><span>
</span><span id="line-1694"></span><span class="hs-comment">-- ipsum</span><span>
</span><span id="line-1695"></span><span>
</span><span id="line-1696"></span><span>
</span><span id="line-1697"></span><span>
</span><span id="line-1698"></span><span class="hs-comment">-- | Alter the document&#8217;s annotations.</span><span>
</span><span id="line-1699"></span><span class="hs-comment">--</span><span>
</span><span id="line-1700"></span><span class="hs-comment">-- This instance makes 'SimpleDocStream' more flexible (because it can be used in</span><span>
</span><span id="line-1701"></span><span class="hs-comment">-- 'Functor'-polymorphic values), but @'fmap'@ is much less readable compared to</span><span>
</span><span id="line-1702"></span><span class="hs-comment">-- using @'reAnnotateST'@ in code that only works for @'SimpleDocStream'@ anyway.</span><span>
</span><span id="line-1703"></span><span class="hs-comment">-- Consider using the latter when the type does not matter.</span><span>
</span><span id="line-1704"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070591"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1705"></span><span>    </span><span id="local-6989586621679070594"><span class="annot"><span class="annottext">fmap :: forall ann ann'.
(ann -&gt; ann') -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; SimpleDocStream a -&gt; SimpleDocStream b
forall ann ann'.
(ann -&gt; ann') -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann'
</span><a href="Prettyprinter.Internal.html#reAnnotateS"><span class="hs-identifier hs-var">reAnnotateS</span></a></span><span>
</span><span id="line-1706"></span><span>
</span><span id="line-1707"></span><span class="annot"><span class="hs-comment">-- | Collect all annotations from a document.</span></span><span>
</span><span id="line-1708"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070596"><span id="local-6989586621679070603"><span id="local-6989586621679070608"><span id="local-6989586621679070611"><span id="local-6989586621679070614"><span id="local-6989586621679070617"><span id="local-6989586621679070620"><span id="local-6989586621679070623"><span id="local-6989586621679070626"><span id="local-6989586621679070629"><span id="local-6989586621679070632"><span id="local-6989586621679070635"><span id="local-6989586621679070640"><span id="local-6989586621679070645"><span id="local-6989586621679070650"><span id="local-6989586621679070655"><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1709"></span><span>    </span><span id="local-6989586621679070663"><span class="annot"><span class="annottext">foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070663"><span class="hs-identifier hs-var hs-var hs-var hs-var">foldMap</span></a></span></span><span> </span><span id="local-6989586621679070665"><span class="annot"><span class="annottext">a -&gt; m
</span><a href="#local-6989586621679070665"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1710"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1711"></span><span>        </span><span id="local-6989586621679070666"><span class="annot"><span class="annottext">go :: SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070671"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070671"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070671"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1712"></span><span>            </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1713"></span><span>            </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1714"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070672"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070672"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070672"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1715"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070673"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070673"><span class="hs-identifier hs-var">rest</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070673"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1716"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070674"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070674"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070674"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1717"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070675"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679070675"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070676"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070676"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; m
</span><a href="#local-6989586621679070665"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679070675"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070676"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1718"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070677"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070677"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; m
</span><a href="#local-6989586621679070666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070677"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1719"></span><span>
</span><span id="line-1720"></span><span class="hs-comment">-- | Transform a document based on its annotations, possibly leveraging</span><span>
</span><span id="line-1721"></span><span class="hs-comment">-- 'Applicative' effects.</span><span>
</span><span id="line-1722"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679070684"><span id="local-6989586621679070690"><span id="local-6989586621679070695"><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1723"></span><span>    </span><span id="local-6989586621679070703"><span class="annot"><span class="annottext">traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070703"><span class="hs-identifier hs-var hs-var hs-var hs-var">traverse</span></a></span></span><span> </span><span id="local-6989586621679070705"><span class="annot"><span class="annottext">a -&gt; f b
</span><a href="#local-6989586621679070705"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1724"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1725"></span><span>        </span><span id="local-6989586621679070706"><span class="annot"><span class="annottext">go :: SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679070716"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070716"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070716"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1726"></span><span>            </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream b -&gt; f (SimpleDocStream b)
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream b
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1727"></span><span>            </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream b -&gt; f (SimpleDocStream b)
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream b
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1728"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679070717"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070717"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679070718"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070718"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream b -&gt; SimpleDocStream b
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070717"><span class="hs-identifier hs-var">c</span></a></span><span>   </span><span class="annot"><span class="annottext">(SimpleDocStream b -&gt; SimpleDocStream b)
-&gt; f (SimpleDocStream b) -&gt; f (SimpleDocStream b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070718"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1729"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070720"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070720"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070721"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070721"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679070722"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070722"><span class="hs-identifier hs-var">rest</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream b -&gt; SimpleDocStream b
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070720"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070721"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleDocStream b -&gt; SimpleDocStream b)
-&gt; f (SimpleDocStream b) -&gt; f (SimpleDocStream b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070722"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1730"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070723"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070723"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070724"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070724"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream b -&gt; SimpleDocStream b
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070723"><span class="hs-identifier hs-var">i</span></a></span><span>   </span><span class="annot"><span class="annottext">(SimpleDocStream b -&gt; SimpleDocStream b)
-&gt; f (SimpleDocStream b) -&gt; f (SimpleDocStream b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070724"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1731"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span id="local-6989586621679070725"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679070725"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070726"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070726"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; SimpleDocStream b -&gt; SimpleDocStream b
forall ann. ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span><span>  </span><span class="annot"><span class="annottext">(b -&gt; SimpleDocStream b -&gt; SimpleDocStream b)
-&gt; f b -&gt; f (SimpleDocStream b -&gt; SimpleDocStream b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f b
</span><a href="#local-6989586621679070705"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679070725"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">f (SimpleDocStream b -&gt; SimpleDocStream b)
-&gt; f (SimpleDocStream b) -&gt; f (SimpleDocStream b)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070726"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1732"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070727"><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070727"><span class="hs-identifier hs-var">rest</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream b -&gt; SimpleDocStream b
forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span><span>   </span><span class="annot"><span class="annottext">(SimpleDocStream b -&gt; SimpleDocStream b)
-&gt; f (SimpleDocStream b) -&gt; f (SimpleDocStream b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a -&gt; f (SimpleDocStream b)
</span><a href="#local-6989586621679070706"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream a
</span><a href="#local-6989586621679070727"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1733"></span><span>
</span><span id="line-1734"></span><span class="hs-comment">-- | Decide whether a 'SimpleDocStream' fits the constraints given, namely</span><span>
</span><span id="line-1735"></span><span class="hs-comment">--</span><span>
</span><span id="line-1736"></span><span class="hs-comment">--   - original indentation of the current line</span><span>
</span><span id="line-1737"></span><span class="hs-comment">--   - current column</span><span>
</span><span id="line-1738"></span><span class="hs-comment">--   - initial indentation of the alternative 'SimpleDocStream' if it</span><span>
</span><span id="line-1739"></span><span class="hs-comment">--     starts with a line break (used by 'layoutSmart')</span><span>
</span><span id="line-1740"></span><span class="hs-comment">--   - width in which to fit the first line</span><span>
</span><span id="line-1741"></span><span class="hs-keyword">newtype</span><span> </span><span id="FittingPredicate"><span class="annot"><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-var">FittingPredicate</span></a></span></span><span> </span><span id="local-6989586621679069602"><span class="annot"><a href="#local-6989586621679069602"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1742"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FittingPredicate"><span class="annot"><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-var">FittingPredicate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1743"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1744"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1745"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069602"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1746"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-1747"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-1748"></span><span>
</span><span id="line-1749"></span><span class="annot"><span class="hs-comment">-- | List of nesting level/document pairs yet to be laid out.</span></span><span>
</span><span id="line-1750"></span><span class="hs-keyword">data</span><span> </span><span id="LayoutPipeline"><span class="annot"><a href="Prettyprinter.Internal.html#LayoutPipeline"><span class="hs-identifier hs-var">LayoutPipeline</span></a></span></span><span> </span><span id="local-6989586621679069615"><span class="annot"><a href="#local-6989586621679069615"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1751"></span><span>      </span><span id="Nil"><span class="annot"><a href="Prettyprinter.Internal.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span></span><span>
</span><span id="line-1752"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Cons"><span class="annot"><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069615"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutPipeline"><span class="hs-identifier hs-type">LayoutPipeline</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069615"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1753"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="UndoAnn"><span class="annot"><a href="Prettyprinter.Internal.html#UndoAnn"><span class="hs-identifier hs-var">UndoAnn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutPipeline"><span class="hs-identifier hs-type">LayoutPipeline</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069615"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1754"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-1755"></span><span>
</span><span id="line-1756"></span><span class="hs-comment">-- | Maximum number of characters that fit in one line. The layout algorithms</span><span>
</span><span id="line-1757"></span><span class="hs-comment">-- will try not to exceed the set limit by inserting line breaks when applicable</span><span>
</span><span id="line-1758"></span><span class="hs-comment">-- (e.g. via 'softline'').</span><span>
</span><span id="line-1759"></span><span class="hs-keyword">data</span><span> </span><span id="PageWidth"><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier hs-var">PageWidth</span></a></span></span><span>
</span><span id="line-1760"></span><span>
</span><span id="line-1761"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="AvailablePerLine"><span class="annot"><a href="Prettyprinter.Internal.html#AvailablePerLine"><span class="hs-identifier hs-var">AvailablePerLine</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-1762"></span><span>    </span><span class="hs-comment">-- ^ Layouters should not exceed the specified space per line.</span><span>
</span><span id="line-1763"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1764"></span><span>    </span><span class="hs-comment">--   - The 'Int' is the number of characters, including whitespace, that</span><span>
</span><span id="line-1765"></span><span>    </span><span class="hs-comment">--     fit in a line. A typical value is 80.</span><span>
</span><span id="line-1766"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1767"></span><span>    </span><span class="hs-comment">--   - The 'Double' is the ribbon with, i.e. the fraction of the total</span><span>
</span><span id="line-1768"></span><span>    </span><span class="hs-comment">--     page width that can be printed on. This allows limiting the length</span><span>
</span><span id="line-1769"></span><span>    </span><span class="hs-comment">--     of printable text per line. Values must be between 0 and 1, and</span><span>
</span><span id="line-1770"></span><span>    </span><span class="hs-comment">--     0.4 to 1 is typical.</span><span>
</span><span id="line-1771"></span><span>
</span><span id="line-1772"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Unbounded"><span class="annot"><a href="Prettyprinter.Internal.html#Unbounded"><span class="hs-identifier hs-var">Unbounded</span></a></span></span><span>
</span><span id="line-1773"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Layouters should not introduce line breaks on their own.</span></span><span>
</span><span id="line-1774"></span><span>
</span><span id="line-1775"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070735"><span id="local-6989586621679070740"><span class="annot"><span class="annottext">PageWidth -&gt; PageWidth -&gt; Bool
(PageWidth -&gt; PageWidth -&gt; Bool)
-&gt; (PageWidth -&gt; PageWidth -&gt; Bool) -&gt; Eq PageWidth
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: PageWidth -&gt; PageWidth -&gt; Bool
== :: PageWidth -&gt; PageWidth -&gt; Bool
$c/= :: PageWidth -&gt; PageWidth -&gt; Bool
/= :: PageWidth -&gt; PageWidth -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070746"><span id="local-6989586621679070751"><span id="local-6989586621679070755"><span id="local-6989586621679070759"><span id="local-6989586621679070762"><span id="local-6989586621679070765"><span id="local-6989586621679070768"><span class="annot"><span class="annottext">Eq PageWidth
Eq PageWidth =&gt;
(PageWidth -&gt; PageWidth -&gt; Ordering)
-&gt; (PageWidth -&gt; PageWidth -&gt; Bool)
-&gt; (PageWidth -&gt; PageWidth -&gt; Bool)
-&gt; (PageWidth -&gt; PageWidth -&gt; Bool)
-&gt; (PageWidth -&gt; PageWidth -&gt; Bool)
-&gt; (PageWidth -&gt; PageWidth -&gt; PageWidth)
-&gt; (PageWidth -&gt; PageWidth -&gt; PageWidth)
-&gt; Ord PageWidth
PageWidth -&gt; PageWidth -&gt; Bool
PageWidth -&gt; PageWidth -&gt; Ordering
PageWidth -&gt; PageWidth -&gt; PageWidth
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: PageWidth -&gt; PageWidth -&gt; Ordering
compare :: PageWidth -&gt; PageWidth -&gt; Ordering
$c&lt; :: PageWidth -&gt; PageWidth -&gt; Bool
&lt; :: PageWidth -&gt; PageWidth -&gt; Bool
$c&lt;= :: PageWidth -&gt; PageWidth -&gt; Bool
&lt;= :: PageWidth -&gt; PageWidth -&gt; Bool
$c&gt; :: PageWidth -&gt; PageWidth -&gt; Bool
&gt; :: PageWidth -&gt; PageWidth -&gt; Bool
$c&gt;= :: PageWidth -&gt; PageWidth -&gt; Bool
&gt;= :: PageWidth -&gt; PageWidth -&gt; Bool
$cmax :: PageWidth -&gt; PageWidth -&gt; PageWidth
max :: PageWidth -&gt; PageWidth -&gt; PageWidth
$cmin :: PageWidth -&gt; PageWidth -&gt; PageWidth
min :: PageWidth -&gt; PageWidth -&gt; PageWidth
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070771"><span id="local-6989586621679070776"><span id="local-6989586621679070780"><span class="annot"><span class="annottext">Int -&gt; PageWidth -&gt; ShowS
[PageWidth] -&gt; ShowS
PageWidth -&gt; String
(Int -&gt; PageWidth -&gt; ShowS)
-&gt; (PageWidth -&gt; String)
-&gt; ([PageWidth] -&gt; ShowS)
-&gt; Show PageWidth
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; PageWidth -&gt; ShowS
showsPrec :: Int -&gt; PageWidth -&gt; ShowS
$cshow :: PageWidth -&gt; String
show :: PageWidth -&gt; String
$cshowList :: [PageWidth] -&gt; ShowS
showList :: [PageWidth] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1776"></span><span>
</span><span id="line-1777"></span><span class="annot"><a href="Prettyprinter.Internal.html#defaultPageWidth"><span class="hs-identifier hs-type">defaultPageWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier hs-type">PageWidth</span></a></span><span>
</span><span id="line-1778"></span><span id="defaultPageWidth"><span class="annot"><span class="annottext">defaultPageWidth :: PageWidth
</span><a href="Prettyprinter.Internal.html#defaultPageWidth"><span class="hs-identifier hs-var hs-var">defaultPageWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; PageWidth
</span><a href="Prettyprinter.Internal.html#AvailablePerLine"><span class="hs-identifier hs-var">AvailablePerLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">80</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1779"></span><span>
</span><span id="line-1780"></span><span class="annot"><span class="hs-comment">-- | The remaining width on the current line.</span></span><span>
</span><span id="line-1781"></span><span class="annot"><a href="Prettyprinter.Internal.html#remainingWidth"><span class="hs-identifier hs-type">remainingWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1782"></span><span id="remainingWidth"><span class="annot"><span class="annottext">remainingWidth :: Int -&gt; Double -&gt; Int -&gt; Int -&gt; Int
</span><a href="Prettyprinter.Internal.html#remainingWidth"><span class="hs-identifier hs-var hs-var">remainingWidth</span></a></span></span><span> </span><span id="local-6989586621679070783"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070783"><span class="hs-identifier hs-var">lineLength</span></a></span></span><span> </span><span id="local-6989586621679070784"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679070784"><span class="hs-identifier hs-var">ribbonFraction</span></a></span></span><span> </span><span id="local-6989586621679070785"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070785"><span class="hs-identifier hs-var">lineIndent</span></a></span></span><span> </span><span id="local-6989586621679070786"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070786"><span class="hs-identifier hs-var">currentColumn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1783"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070788"><span class="hs-identifier hs-var">columnsLeftInLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070789"><span class="hs-identifier hs-var">columnsLeftInRibbon</span></a></span><span>
</span><span id="line-1784"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1785"></span><span>    </span><span id="local-6989586621679070788"><span class="annot"><span class="annottext">columnsLeftInLine :: Int
</span><a href="#local-6989586621679070788"><span class="hs-identifier hs-var hs-var">columnsLeftInLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070783"><span class="hs-identifier hs-var">lineLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070786"><span class="hs-identifier hs-var">currentColumn</span></a></span><span>
</span><span id="line-1786"></span><span>    </span><span id="local-6989586621679070789"><span class="annot"><span class="annottext">columnsLeftInRibbon :: Int
</span><a href="#local-6989586621679070789"><span class="hs-identifier hs-var hs-var">columnsLeftInRibbon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070785"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070793"><span class="hs-identifier hs-var">ribbonWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070786"><span class="hs-identifier hs-var">currentColumn</span></a></span><span>
</span><span id="line-1787"></span><span>    </span><span id="local-6989586621679070793"><span class="annot"><span class="annottext">ribbonWidth :: Int
</span><a href="#local-6989586621679070793"><span class="hs-identifier hs-var hs-var">ribbonWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1788"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (Double -&gt; Int) -&gt; Double -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070783"><span class="hs-identifier hs-var">lineLength</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (Double -&gt; Int) -&gt; Double -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Int
forall b. Integral b =&gt; Double -&gt; b
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">floor</span></span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070783"><span class="hs-identifier hs-var">lineLength</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679070784"><span class="hs-identifier hs-var">ribbonFraction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span>
</span><span id="line-1791"></span><span class="hs-comment">-- $ Test to avoid surprising behaviour</span><span>
</span><span id="line-1792"></span><span class="hs-comment">-- &gt;&gt;&gt; Unbounded &gt; AvailablePerLine maxBound 1</span><span>
</span><span id="line-1793"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-1794"></span><span>
</span><span id="line-1795"></span><span class="annot"><span class="hs-comment">-- | Options to influence the layout algorithms.</span></span><span>
</span><span id="line-1796"></span><span class="hs-keyword">newtype</span><span> </span><span id="LayoutOptions"><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-var">LayoutOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LayoutOptions"><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-var">LayoutOptions</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="layoutPageWidth"><span class="annot"><span class="annottext">LayoutOptions -&gt; PageWidth
</span><a href="Prettyprinter.Internal.html#layoutPageWidth"><span class="hs-identifier hs-var hs-var">layoutPageWidth</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier hs-type">PageWidth</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1797"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070810"><span id="local-6989586621679070814"><span class="annot"><span class="annottext">LayoutOptions -&gt; LayoutOptions -&gt; Bool
(LayoutOptions -&gt; LayoutOptions -&gt; Bool)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; Bool) -&gt; Eq LayoutOptions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
== :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
$c/= :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
/= :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070821"><span id="local-6989586621679070825"><span id="local-6989586621679070829"><span id="local-6989586621679070833"><span id="local-6989586621679070837"><span id="local-6989586621679070841"><span id="local-6989586621679070845"><span class="annot"><span class="annottext">Eq LayoutOptions
Eq LayoutOptions =&gt;
(LayoutOptions -&gt; LayoutOptions -&gt; Ordering)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; Bool)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; Bool)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; Bool)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; Bool)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions)
-&gt; (LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions)
-&gt; Ord LayoutOptions
LayoutOptions -&gt; LayoutOptions -&gt; Bool
LayoutOptions -&gt; LayoutOptions -&gt; Ordering
LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: LayoutOptions -&gt; LayoutOptions -&gt; Ordering
compare :: LayoutOptions -&gt; LayoutOptions -&gt; Ordering
$c&lt; :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
&lt; :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
$c&lt;= :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
&lt;= :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
$c&gt; :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
&gt; :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
$c&gt;= :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
&gt;= :: LayoutOptions -&gt; LayoutOptions -&gt; Bool
$cmax :: LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions
max :: LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions
$cmin :: LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions
min :: LayoutOptions -&gt; LayoutOptions -&gt; LayoutOptions
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679070850"><span id="local-6989586621679070854"><span id="local-6989586621679070858"><span class="annot"><span class="annottext">Int -&gt; LayoutOptions -&gt; ShowS
[LayoutOptions] -&gt; ShowS
LayoutOptions -&gt; String
(Int -&gt; LayoutOptions -&gt; ShowS)
-&gt; (LayoutOptions -&gt; String)
-&gt; ([LayoutOptions] -&gt; ShowS)
-&gt; Show LayoutOptions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LayoutOptions -&gt; ShowS
showsPrec :: Int -&gt; LayoutOptions -&gt; ShowS
$cshow :: LayoutOptions -&gt; String
show :: LayoutOptions -&gt; String
$cshowList :: [LayoutOptions] -&gt; ShowS
showList :: [LayoutOptions] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1798"></span><span>
</span><span id="line-1799"></span><span class="hs-comment">-- | The default layout options, suitable when you just want some output, and</span><span>
</span><span id="line-1800"></span><span class="hs-comment">-- don&#8217;t particularly care about the details. Used by the 'Show' instance, for</span><span>
</span><span id="line-1801"></span><span class="hs-comment">-- example.</span><span>
</span><span id="line-1802"></span><span class="hs-comment">--</span><span>
</span><span id="line-1803"></span><span class="hs-comment">-- &gt;&gt;&gt; defaultLayoutOptions</span><span>
</span><span id="line-1804"></span><span class="hs-comment">-- LayoutOptions {layoutPageWidth = AvailablePerLine 80 1.0}</span><span>
</span><span id="line-1805"></span><span class="annot"><a href="Prettyprinter.Internal.html#defaultLayoutOptions"><span class="hs-identifier hs-type">defaultLayoutOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span>
</span><span id="line-1806"></span><span id="defaultLayoutOptions"><span class="annot"><span class="annottext">defaultLayoutOptions :: LayoutOptions
</span><a href="Prettyprinter.Internal.html#defaultLayoutOptions"><span class="hs-identifier hs-var hs-var">defaultLayoutOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">layoutPageWidth :: PageWidth
</span><a href="Prettyprinter.Internal.html#layoutPageWidth"><span class="hs-identifier hs-var">layoutPageWidth</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PageWidth
</span><a href="Prettyprinter.Internal.html#defaultPageWidth"><span class="hs-identifier hs-var">defaultPageWidth</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1807"></span><span>
</span><span id="line-1808"></span><span class="hs-comment">-- | This is the default layout algorithm, and it is used by 'show', 'putDoc'</span><span>
</span><span id="line-1809"></span><span class="hs-comment">-- and 'hPutDoc'.</span><span>
</span><span id="line-1810"></span><span class="hs-comment">--</span><span>
</span><span id="line-1811"></span><span class="hs-comment">-- @'layoutPretty'@ commits to rendering something in a certain way if the next</span><span>
</span><span id="line-1812"></span><span class="hs-comment">-- element fits the layout constraints; in other words, it has one</span><span>
</span><span id="line-1813"></span><span class="hs-comment">-- 'SimpleDocStream' element lookahead when rendering. Consider using the</span><span>
</span><span id="line-1814"></span><span class="hs-comment">-- smarter, but a bit less performant, @'layoutSmart'@ algorithm if the results</span><span>
</span><span id="line-1815"></span><span class="hs-comment">-- seem to run off to the right before having lots of line breaks.</span><span>
</span><span id="line-1816"></span><span id="local-6989586621679069598"><span class="annot"><a href="Prettyprinter.Internal.html#layoutPretty"><span class="hs-identifier hs-type">layoutPretty</span></a></span><span>
</span><span id="line-1817"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span>
</span><span id="line-1818"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069598"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1819"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069598"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1820"></span><span id="layoutPretty"><span class="annot"><span class="annottext">layoutPretty :: forall ann. LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutPretty"><span class="hs-identifier hs-var hs-var">layoutPretty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span> </span><span id="local-6989586621679070860"><span class="annot"><span class="annottext">pageWidth_ :: PageWidth
</span><a href="#local-6989586621679070860"><span class="hs-identifier hs-var">pageWidth_</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#AvailablePerLine"><span class="hs-identifier hs-type">AvailablePerLine</span></a></span><span> </span><span id="local-6989586621679070861"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070861"><span class="hs-identifier hs-var">lineLength</span></a></span></span><span> </span><span id="local-6989586621679070862"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679070862"><span class="hs-identifier hs-var">ribbonFraction</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1821"></span><span>    </span><span class="annot"><span class="annottext">FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
forall ann.
FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutWadlerLeijen"><span class="hs-identifier hs-var">layoutWadlerLeijen</span></a></span><span>
</span><span id="line-1822"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; FittingPredicate ann
forall ann.
(Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; FittingPredicate ann
</span><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-var">FittingPredicate</span></a></span><span>
</span><span id="line-1823"></span><span>             </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070864"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070864"><span class="hs-identifier hs-var">lineIndent</span></a></span></span><span> </span><span id="local-6989586621679070865"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070865"><span class="hs-identifier hs-var">currentColumn</span></a></span></span><span> </span><span id="local-6989586621679070866"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679070866"><span class="hs-identifier hs-var">_initialIndentY</span></a></span></span><span> </span><span id="local-6989586621679070867"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070867"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1824"></span><span>                 </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span>
</span><span id="line-1825"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; Int -&gt; Int -&gt; Int
</span><a href="Prettyprinter.Internal.html#remainingWidth"><span class="hs-identifier hs-var">remainingWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070861"><span class="hs-identifier hs-var">lineLength</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679070862"><span class="hs-identifier hs-var">ribbonFraction</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070864"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070865"><span class="hs-identifier hs-var">currentColumn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1826"></span><span>                     </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070867"><span class="hs-identifier hs-var">sdoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1827"></span><span>        </span><span class="annot"><span class="annottext">PageWidth
</span><a href="#local-6989586621679070860"><span class="hs-identifier hs-var">pageWidth_</span></a></span><span>
</span><span id="line-1828"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1829"></span><span>    </span><span id="local-6989586621679069603"><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-type">fits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">-- ^ Width in which to fit the first line</span><span>
</span><span id="line-1830"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069603"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1831"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1832"></span><span>    </span><span id="local-6989586621679070868"><span class="annot"><span class="annottext">fits :: forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070868"><span class="hs-identifier hs-var hs-var">fits</span></a></span></span><span> </span><span id="local-6989586621679070874"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070874"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070874"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1833"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1834"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1835"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span id="local-6989586621679070876"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070876"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070877"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070877"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070876"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070877"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1836"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span id="local-6989586621679070878"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070878"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070879"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070879"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070880"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070880"><span class="hs-identifier hs-var">_t</span></a></span></span><span> </span><span id="local-6989586621679070881"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070881"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070878"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070879"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070881"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1837"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1838"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span id="local-6989586621679070882"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070882"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070883"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070883"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070882"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070883"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1839"></span><span>    </span><span class="annot"><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span id="local-6989586621679070884"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070884"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070885"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070885"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070868"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070884"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070885"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1840"></span><span>
</span><span id="line-1841"></span><span class="annot"><a href="Prettyprinter.Internal.html#layoutPretty"><span class="hs-identifier hs-var">layoutPretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span> </span><span class="annot"><span class="annottext">PageWidth
</span><a href="Prettyprinter.Internal.html#Unbounded"><span class="hs-identifier hs-var">Unbounded</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; SimpleDocStream ann
forall ann. Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutUnbounded"><span class="hs-identifier hs-var">layoutUnbounded</span></a></span><span>
</span><span id="line-1842"></span><span>
</span><span id="line-1843"></span><span class="hs-comment">-- | A layout algorithm with more lookahead than 'layoutPretty', that introduces</span><span>
</span><span id="line-1844"></span><span class="hs-comment">-- line breaks earlier if the content does not (or will not, rather) fit into</span><span>
</span><span id="line-1845"></span><span class="hs-comment">-- one line.</span><span>
</span><span id="line-1846"></span><span class="hs-comment">--</span><span>
</span><span id="line-1847"></span><span class="hs-comment">-- Consider the following python-ish document,</span><span>
</span><span id="line-1848"></span><span class="hs-comment">--</span><span>
</span><span id="line-1849"></span><span class="hs-comment">-- &gt;&gt;&gt; let fun x = hang 2 (&quot;fun(&quot; &lt;&gt; softline' &lt;&gt; x) &lt;&gt; &quot;)&quot;</span><span>
</span><span id="line-1850"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = (fun . fun . fun . fun . fun) (align (list [&quot;abcdef&quot;, &quot;ghijklm&quot;]))</span><span>
</span><span id="line-1851"></span><span class="hs-comment">--</span><span>
</span><span id="line-1852"></span><span class="hs-comment">-- which we&#8217;ll be rendering using the following pipeline (where the layout</span><span>
</span><span id="line-1853"></span><span class="hs-comment">-- algorithm has been left open):</span><span>
</span><span id="line-1854"></span><span class="hs-comment">--</span><span>
</span><span id="line-1855"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Text.IO as T</span><span>
</span><span id="line-1856"></span><span class="hs-comment">-- &gt;&gt;&gt; import Prettyprinter.Render.Text</span><span>
</span><span id="line-1857"></span><span class="hs-comment">-- &gt;&gt;&gt; let hr = pipe &lt;&gt; pretty (replicate (26-2) '-') &lt;&gt; pipe</span><span>
</span><span id="line-1858"></span><span class="hs-comment">-- &gt;&gt;&gt; let go layouter x = (T.putStrLn . renderStrict . layouter (LayoutOptions (AvailablePerLine 26 1))) (vsep [hr, x, hr])</span><span>
</span><span id="line-1859"></span><span class="hs-comment">--</span><span>
</span><span id="line-1860"></span><span class="hs-comment">-- If we render this using 'layoutPretty' with a page width of 26 characters</span><span>
</span><span id="line-1861"></span><span class="hs-comment">-- per line, all the @fun@ calls fit into the first line so they will be put</span><span>
</span><span id="line-1862"></span><span class="hs-comment">-- there:</span><span>
</span><span id="line-1863"></span><span class="hs-comment">--</span><span>
</span><span id="line-1864"></span><span class="hs-comment">-- &gt;&gt;&gt; go layoutPretty doc</span><span>
</span><span id="line-1865"></span><span class="hs-comment">-- |------------------------|</span><span>
</span><span id="line-1866"></span><span class="hs-comment">-- fun(fun(fun(fun(fun(</span><span>
</span><span id="line-1867"></span><span class="hs-comment">--                   [ abcdef</span><span>
</span><span id="line-1868"></span><span class="hs-comment">--                   , ghijklm ])))))</span><span>
</span><span id="line-1869"></span><span class="hs-comment">-- |------------------------|</span><span>
</span><span id="line-1870"></span><span class="hs-comment">--</span><span>
</span><span id="line-1871"></span><span class="hs-comment">-- Note that this exceeds the desired 26 character page width. The same</span><span>
</span><span id="line-1872"></span><span class="hs-comment">-- document, rendered with @'layoutSmart'@, fits the layout contstraints:</span><span>
</span><span id="line-1873"></span><span class="hs-comment">--</span><span>
</span><span id="line-1874"></span><span class="hs-comment">-- &gt;&gt;&gt; go layoutSmart doc</span><span>
</span><span id="line-1875"></span><span class="hs-comment">-- |------------------------|</span><span>
</span><span id="line-1876"></span><span class="hs-comment">-- fun(</span><span>
</span><span id="line-1877"></span><span class="hs-comment">--   fun(</span><span>
</span><span id="line-1878"></span><span class="hs-comment">--     fun(</span><span>
</span><span id="line-1879"></span><span class="hs-comment">--       fun(</span><span>
</span><span id="line-1880"></span><span class="hs-comment">--         fun(</span><span>
</span><span id="line-1881"></span><span class="hs-comment">--           [ abcdef</span><span>
</span><span id="line-1882"></span><span class="hs-comment">--           , ghijklm ])))))</span><span>
</span><span id="line-1883"></span><span class="hs-comment">-- |------------------------|</span><span>
</span><span id="line-1884"></span><span class="hs-comment">--</span><span>
</span><span id="line-1885"></span><span class="hs-comment">-- The key difference between 'layoutPretty' and 'layoutSmart' is that the</span><span>
</span><span id="line-1886"></span><span class="hs-comment">-- latter will check the potential document until it encounters a line with the</span><span>
</span><span id="line-1887"></span><span class="hs-comment">-- same indentation or less than the start of the document. Any line encountered</span><span>
</span><span id="line-1888"></span><span class="hs-comment">-- earlier is assumed to belong to the same syntactic structure.</span><span>
</span><span id="line-1889"></span><span class="hs-comment">-- 'layoutPretty' checks only the first line.</span><span>
</span><span id="line-1890"></span><span class="hs-comment">--</span><span>
</span><span id="line-1891"></span><span class="hs-comment">-- Consider for example the question of whether the @A@s fit into the document</span><span>
</span><span id="line-1892"></span><span class="hs-comment">-- below:</span><span>
</span><span id="line-1893"></span><span class="hs-comment">--</span><span>
</span><span id="line-1894"></span><span class="hs-comment">-- &gt; 1 A</span><span>
</span><span id="line-1895"></span><span class="hs-comment">-- &gt; 2   A</span><span>
</span><span id="line-1896"></span><span class="hs-comment">-- &gt; 3  A</span><span>
</span><span id="line-1897"></span><span class="hs-comment">-- &gt; 4 B</span><span>
</span><span id="line-1898"></span><span class="hs-comment">-- &gt; 5   B</span><span>
</span><span id="line-1899"></span><span class="hs-comment">--</span><span>
</span><span id="line-1900"></span><span class="hs-comment">-- 'layoutPretty' will check only line 1, ignoring whether e.g. line 2 might</span><span>
</span><span id="line-1901"></span><span class="hs-comment">-- already be too wide.</span><span>
</span><span id="line-1902"></span><span class="hs-comment">-- By contrast, 'layoutSmart' stops only once it reaches line 4, where the @B@</span><span>
</span><span id="line-1903"></span><span class="hs-comment">-- has the same indentation as the first @A@.</span><span>
</span><span id="line-1904"></span><span id="local-6989586621679070887"><span class="annot"><a href="Prettyprinter.Internal.html#layoutSmart"><span class="hs-identifier hs-type">layoutSmart</span></a></span><span>
</span><span id="line-1905"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span>
</span><span id="line-1906"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070887"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1907"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070887"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1908"></span><span id="layoutSmart"><span class="annot"><span class="annottext">layoutSmart :: forall ann. LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutSmart"><span class="hs-identifier hs-var hs-var">layoutSmart</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span> </span><span id="local-6989586621679070888"><span class="annot"><span class="annottext">pageWidth_ :: PageWidth
</span><a href="#local-6989586621679070888"><span class="hs-identifier hs-var">pageWidth_</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#AvailablePerLine"><span class="hs-identifier hs-type">AvailablePerLine</span></a></span><span> </span><span id="local-6989586621679070889"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070889"><span class="hs-identifier hs-var">lineLength</span></a></span></span><span> </span><span id="local-6989586621679070890"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679070890"><span class="hs-identifier hs-var">ribbonFraction</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1909"></span><span>    </span><span class="annot"><span class="annottext">FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
forall ann.
FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutWadlerLeijen"><span class="hs-identifier hs-var">layoutWadlerLeijen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; FittingPredicate ann
forall ann.
(Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; FittingPredicate ann
</span><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-var">FittingPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070891"><span class="hs-identifier hs-var">fits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PageWidth
</span><a href="#local-6989586621679070888"><span class="hs-identifier hs-var">pageWidth_</span></a></span><span>
</span><span id="line-1910"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1911"></span><span>    </span><span class="hs-comment">-- Why doesn't layoutSmart simply check the entire document?</span><span>
</span><span id="line-1912"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1913"></span><span>    </span><span class="hs-comment">-- 1. That would be very expensive.</span><span>
</span><span id="line-1914"></span><span>    </span><span class="hs-comment">-- 2. In that case the layout of a particular part of a document would</span><span>
</span><span id="line-1915"></span><span>    </span><span class="hs-comment">--    depend on the fit of completely unrelated parts of the same document.</span><span>
</span><span id="line-1916"></span><span>    </span><span class="hs-comment">--    See https://github.com/quchen/prettyprinter/issues/83 for a related</span><span>
</span><span id="line-1917"></span><span>    </span><span class="hs-comment">--    bug.</span><span>
</span><span id="line-1918"></span><span>
</span><span id="line-1919"></span><span>    </span><span id="local-6989586621679069607"><span class="annot"><a href="#local-6989586621679070891"><span class="hs-identifier hs-type">fits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069607"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1920"></span><span>    </span><span id="local-6989586621679070891"><span class="annot"><span class="annottext">fits :: forall ann. Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070891"><span class="hs-identifier hs-var hs-var">fits</span></a></span></span><span> </span><span id="local-6989586621679070892"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070892"><span class="hs-identifier hs-var">lineIndent</span></a></span></span><span> </span><span id="local-6989586621679070893"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070893"><span class="hs-identifier hs-var">currentColumn</span></a></span></span><span> </span><span id="local-6989586621679070894"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679070894"><span class="hs-identifier hs-var">initialIndentY</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
forall ann. Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070896"><span class="hs-identifier hs-var">availableWidth</span></a></span><span>
</span><span id="line-1921"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1922"></span><span>        </span><span id="local-6989586621679070895"><span class="annot"><span class="annottext">go :: Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679070904"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070904"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070904"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1923"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1924"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1925"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679070905"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070905"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070906"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070906"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070905"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070906"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1926"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679070907"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070907"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679070908"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070908"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070909"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070909"><span class="hs-identifier hs-var">_t</span></a></span></span><span> </span><span id="local-6989586621679070910"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070910"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070907"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070908"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070910"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1927"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070911"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070911"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070912"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070912"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1928"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070913"><span class="hs-identifier hs-var">minNestingLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070911"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070889"><span class="hs-identifier hs-var">lineLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070911"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070912"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-comment">-- TODO: Take ribbon width into account?! (#142)</span><span>
</span><span id="line-1929"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1930"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679070914"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070914"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070915"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070915"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070914"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070915"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1931"></span><span>        </span><span class="annot"><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679070916"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070916"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070917"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070917"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070895"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070916"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070917"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1932"></span><span>
</span><span id="line-1933"></span><span>        </span><span id="local-6989586621679070896"><span class="annot"><span class="annottext">availableWidth :: Int
</span><a href="#local-6989586621679070896"><span class="hs-identifier hs-var hs-var">availableWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; Int -&gt; Int -&gt; Int
</span><a href="Prettyprinter.Internal.html#remainingWidth"><span class="hs-identifier hs-var">remainingWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070889"><span class="hs-identifier hs-var">lineLength</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679070890"><span class="hs-identifier hs-var">ribbonFraction</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070892"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070893"><span class="hs-identifier hs-var">currentColumn</span></a></span><span>
</span><span id="line-1934"></span><span>
</span><span id="line-1935"></span><span>        </span><span id="local-6989586621679070913"><span class="annot"><span class="annottext">minNestingLevel :: Int
</span><a href="#local-6989586621679070913"><span class="hs-identifier hs-var hs-var">minNestingLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1936"></span><span>            </span><span class="hs-comment">-- See the Note</span><span>
</span><span id="line-1937"></span><span>            </span><span class="hs-comment">-- [Choosing the right minNestingLevel for consistent smart layouts]</span><span>
</span><span id="line-1938"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679070894"><span class="hs-identifier hs-var">initialIndentY</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1939"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679070919"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070919"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1940"></span><span>                    </span><span class="hs-comment">-- y could be a (less wide) hanging layout. If so, let's</span><span>
</span><span id="line-1941"></span><span>                    </span><span class="hs-comment">-- check x a bit more thoroughly so we don't miss a potentially</span><span>
</span><span id="line-1942"></span><span>                    </span><span class="hs-comment">-- better fitting y.</span><span>
</span><span id="line-1943"></span><span>                    </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070919"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070893"><span class="hs-identifier hs-var">currentColumn</span></a></span><span>
</span><span id="line-1944"></span><span>                </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1945"></span><span>                    </span><span class="hs-comment">-- y definitely isn't a hanging layout. Let's check x with the</span><span>
</span><span id="line-1946"></span><span>                    </span><span class="hs-comment">-- same minNestingLevel that any subsequent lines with the same</span><span>
</span><span id="line-1947"></span><span>                    </span><span class="hs-comment">-- indentation use.</span><span>
</span><span id="line-1948"></span><span>                    </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070893"><span class="hs-identifier hs-var">currentColumn</span></a></span><span>
</span><span id="line-1949"></span><span>
</span><span id="line-1950"></span><span class="annot"><a href="Prettyprinter.Internal.html#layoutSmart"><span class="hs-identifier hs-var">layoutSmart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier hs-type">LayoutOptions</span></a></span><span> </span><span class="annot"><span class="annottext">PageWidth
</span><a href="Prettyprinter.Internal.html#Unbounded"><span class="hs-identifier hs-var">Unbounded</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; SimpleDocStream ann
forall ann. Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutUnbounded"><span class="hs-identifier hs-var">layoutUnbounded</span></a></span><span>
</span><span id="line-1951"></span><span>
</span><span id="line-1952"></span><span class="annot"><span class="hs-comment">-- | Layout a document with @Unbounded@ page width.</span></span><span>
</span><span id="line-1953"></span><span id="local-6989586621679069605"><span class="annot"><a href="Prettyprinter.Internal.html#layoutUnbounded"><span class="hs-identifier hs-type">layoutUnbounded</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069605"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069605"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-1954"></span><span id="layoutUnbounded"><span class="annot"><span class="annottext">layoutUnbounded :: forall ann. Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutUnbounded"><span class="hs-identifier hs-var hs-var">layoutUnbounded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1955"></span><span>    </span><span class="annot"><span class="annottext">FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
forall ann.
FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutWadlerLeijen"><span class="hs-identifier hs-var">layoutWadlerLeijen</span></a></span><span>
</span><span id="line-1956"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; FittingPredicate ann
forall ann.
(Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool)
-&gt; FittingPredicate ann
</span><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-var">FittingPredicate</span></a></span><span>
</span><span id="line-1957"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679070920"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070920"><span class="hs-identifier hs-var">_lineIndent</span></a></span></span><span> </span><span id="local-6989586621679070921"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070921"><span class="hs-identifier hs-var">_currentColumn</span></a></span></span><span> </span><span id="local-6989586621679070922"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679070922"><span class="hs-identifier hs-var">_initialIndentY</span></a></span></span><span> </span><span id="local-6989586621679070923"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070923"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Bool
forall a. SimpleDocStream a -&gt; Bool
</span><a href="#local-6989586621679070925"><span class="hs-identifier hs-var">failsOnFirstLine</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070923"><span class="hs-identifier hs-var">sdoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1958"></span><span>        </span><span class="annot"><span class="annottext">PageWidth
</span><a href="Prettyprinter.Internal.html#Unbounded"><span class="hs-identifier hs-var">Unbounded</span></a></span><span>
</span><span id="line-1959"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1960"></span><span>    </span><span class="hs-comment">-- See the Note [Detecting failure with Unbounded page width].</span><span>
</span><span id="line-1961"></span><span>    </span><span id="local-6989586621679070926"><span class="annot"><a href="#local-6989586621679070925"><span class="hs-identifier hs-type">failsOnFirstLine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679070926"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1962"></span><span>    </span><span id="local-6989586621679070925"><span class="annot"><span class="annottext">failsOnFirstLine :: forall a. SimpleDocStream a -&gt; Bool
</span><a href="#local-6989586621679070925"><span class="hs-identifier hs-var hs-var">failsOnFirstLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Bool
forall a. SimpleDocStream a -&gt; Bool
</span><a href="#local-6989586621679070927"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1963"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1964"></span><span>        </span><span id="local-6989586621679070927"><span class="annot"><span class="annottext">go :: SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070927"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679070928"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070928"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070928"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1965"></span><span>            </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1966"></span><span>            </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1967"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070929"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070929"><span class="hs-identifier hs-var">s</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070927"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070929"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1968"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070930"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070930"><span class="hs-identifier hs-var">s</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070927"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070930"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1969"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1970"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070931"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070931"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070927"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070931"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1971"></span><span>            </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070932"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070932"><span class="hs-identifier hs-var">s</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070927"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070932"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span class="annot"><span class="hs-comment">-- | The Wadler/Leijen layout algorithm</span></span><span>
</span><span id="line-1974"></span><span class="annot"><a href="Prettyprinter.Internal.html#layoutWadlerLeijen"><span class="hs-identifier hs-type">layoutWadlerLeijen</span></a></span><span>
</span><span id="line-1975"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679069601"><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-type">FittingPredicate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1976"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier hs-type">PageWidth</span></a></span><span>
</span><span id="line-1977"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1978"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1979"></span><span id="layoutWadlerLeijen"><span class="annot"><span class="annottext">layoutWadlerLeijen :: forall ann.
FittingPredicate ann -&gt; PageWidth -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutWadlerLeijen"><span class="hs-identifier hs-var hs-var">layoutWadlerLeijen</span></a></span></span><span>
</span><span id="line-1980"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#FittingPredicate"><span class="hs-identifier hs-type">FittingPredicate</span></a></span><span> </span><span id="local-6989586621679070933"><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070933"><span class="hs-identifier hs-var">fits</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1981"></span><span>    </span><span id="local-6989586621679070934"><span class="annot"><span class="annottext">PageWidth
</span><a href="#local-6989586621679070934"><span class="hs-identifier hs-var">pageWidth_</span></a></span></span><span>
</span><span id="line-1982"></span><span>    </span><span id="local-6989586621679070935"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070935"><span class="hs-identifier hs-var">doc</span></a></span></span><span>
</span><span id="line-1983"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070935"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
forall ann. LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1984"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1985"></span><span>
</span><span id="line-1986"></span><span>    </span><span class="hs-comment">-- * current column &gt;= current nesting level</span><span>
</span><span id="line-1987"></span><span>    </span><span class="hs-comment">-- * current column - current indentaion = number of chars inserted in line</span><span>
</span><span id="line-1988"></span><span>    </span><span class="annot"><a href="#local-6989586621679070936"><span class="hs-identifier hs-type">best</span></a></span><span>
</span><span id="line-1989"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">-- Current nesting level</span><span>
</span><span id="line-1990"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">-- Current column, i.e. &quot;where the cursor is&quot;</span><span>
</span><span id="line-1991"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutPipeline"><span class="hs-identifier hs-type">LayoutPipeline</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- Documents remaining to be handled (in order)</span><span>
</span><span id="line-1992"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-1993"></span><span>    </span><span id="local-6989586621679070936"><span class="annot"><span class="annottext">best :: Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var hs-var">best</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-1994"></span><span>    </span><span class="annot"><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span id="local-6989586621679070937"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070937"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621679070938"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070938"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#UndoAnn"><span class="hs-identifier hs-type">UndoAnn</span></a></span><span> </span><span id="local-6989586621679070939"><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070939"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-var">SAnnPop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070937"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070938"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070939"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1995"></span><span>    </span><span class="annot"><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span id="local-6989586621679070940"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621679070941"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-type">Cons</span></a></span><span> </span><span id="local-6989586621679070942"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679070943"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070943"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679070944"><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070943"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1996"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-1997"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1998"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070945"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070945"><span class="hs-identifier hs-var">c</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070948"><span class="annot"><span class="annottext">cc' :: Int
</span><a href="#local-6989586621679070948"><span class="hs-identifier hs-var hs-var">cc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070945"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070948"><span class="hs-identifier hs-var">cc'</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1999"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070949"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070949"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070950"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070950"><span class="hs-identifier hs-var">t</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070952"><span class="annot"><span class="annottext">cc' :: Int
</span><a href="#local-6989586621679070952"><span class="hs-identifier hs-var hs-var">cc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070949"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070949"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070950"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070952"><span class="hs-identifier hs-var">cc'</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2000"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679070953"><span class="annot"><span class="annottext">x :: SimpleDocStream ann
</span><a href="#local-6989586621679070953"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2001"></span><span>                               </span><span class="hs-comment">-- Don't produce indentation if there's no</span><span>
</span><span id="line-2002"></span><span>                               </span><span class="hs-comment">-- following text on the same line.</span><span>
</span><span id="line-2003"></span><span>                               </span><span class="hs-comment">-- This prevents trailing whitespace.</span><span>
</span><span id="line-2004"></span><span>                               </span><span id="local-6989586621679070956"><span class="annot"><span class="annottext">i' :: Int
</span><a href="#local-6989586621679070956"><span class="hs-identifier hs-var hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070953"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2005"></span><span>                                   </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2006"></span><span>                                   </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2007"></span><span>                                   </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-2008"></span><span>                           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070956"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070953"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2009"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span id="local-6989586621679070957"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070957"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070957"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2010"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070958"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070958"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070959"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070959"><span class="hs-identifier hs-var">y</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070958"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070959"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2011"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span id="local-6989586621679070960"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070960"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621679070961"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070961"><span class="hs-identifier hs-var">x</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070963"><span class="annot"><span class="annottext">ij :: Int
</span><a href="#local-6989586621679070963"><span class="hs-identifier hs-var hs-var">ij</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070960"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070963"><span class="hs-identifier hs-var">ij</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070961"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2012"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span> </span><span id="local-6989586621679070964"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070964"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070965"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070965"><span class="hs-identifier hs-var">y</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679070966"><span class="annot"><span class="annottext">x' :: SimpleDocStream ann
</span><a href="#local-6989586621679070966"><span class="hs-identifier hs-var hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070964"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2013"></span><span>                               </span><span id="local-6989586621679070967"><span class="annot"><span class="annottext">y' :: SimpleDocStream ann
</span><a href="#local-6989586621679070967"><span class="hs-identifier hs-var hs-var">y'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070965"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2014"></span><span>                           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Int
-&gt; SimpleDocStream ann
-&gt; SimpleDocStream ann
-&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070968"><span class="hs-identifier hs-var">selectNicer</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070966"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070967"><span class="hs-identifier hs-var">y'</span></a></span><span>
</span><span id="line-2015"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span id="local-6989586621679070969"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070969"><span class="hs-identifier hs-var">f</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070969"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2016"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span> </span><span id="local-6989586621679070970"><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070970"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679070970"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PageWidth
</span><a href="#local-6989586621679070934"><span class="hs-identifier hs-var">pageWidth_</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2017"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span> </span><span id="local-6989586621679070971"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070971"><span class="hs-identifier hs-var">f</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679070971"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2018"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679070972"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070972"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679070973"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070973"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. ann -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-var">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679070972"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; LayoutPipeline ann -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070936"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070940"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070941"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann.
Int -&gt; Doc ann -&gt; LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070942"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070973"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LayoutPipeline ann -&gt; LayoutPipeline ann
forall ann. LayoutPipeline ann -&gt; LayoutPipeline ann
</span><a href="Prettyprinter.Internal.html#UndoAnn"><span class="hs-identifier hs-var">UndoAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutPipeline ann
</span><a href="#local-6989586621679070944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2019"></span><span>
</span><span id="line-2020"></span><span>    </span><span class="hs-comment">-- Select the better fitting of two documents:</span><span>
</span><span id="line-2021"></span><span>    </span><span class="hs-comment">-- Choice A if it fits, otherwise choice B.</span><span>
</span><span id="line-2022"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2023"></span><span>    </span><span class="hs-comment">-- The fit of choice B is /not/ checked! It is ultimately the user's</span><span>
</span><span id="line-2024"></span><span>    </span><span class="hs-comment">-- responsibility to provide an alternative that can fit the page even when</span><span>
</span><span id="line-2025"></span><span>    </span><span class="hs-comment">-- choice A doesn't.</span><span>
</span><span id="line-2026"></span><span>    </span><span class="annot"><a href="#local-6989586621679070968"><span class="hs-identifier hs-type">selectNicer</span></a></span><span>
</span><span id="line-2027"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>           </span><span class="hs-comment">-- ^ Current nesting level</span><span>
</span><span id="line-2028"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>           </span><span class="hs-comment">-- ^ Current column</span><span>
</span><span id="line-2029"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ Choice A.</span><span>
</span><span id="line-2030"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ Choice B. Should fit more easily</span><span>
</span><span id="line-2031"></span><span>                               </span><span class="hs-comment">--   (== be less wide) than choice A.</span><span>
</span><span id="line-2032"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ Choice A if it fits, otherwise B.</span><span>
</span><span id="line-2033"></span><span>    </span><span id="local-6989586621679070968"><span class="annot"><span class="annottext">selectNicer :: Int
-&gt; Int
-&gt; SimpleDocStream ann
-&gt; SimpleDocStream ann
-&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070968"><span class="hs-identifier hs-var hs-var">selectNicer</span></a></span></span><span> </span><span id="local-6989586621679070974"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070974"><span class="hs-identifier hs-var">lineIndent</span></a></span></span><span> </span><span id="local-6989586621679070975"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070975"><span class="hs-identifier hs-var">currentColumn</span></a></span></span><span> </span><span id="local-6989586621679070976"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070976"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070977"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070977"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-2034"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Maybe Int -&gt; SimpleDocStream ann -&gt; Bool
</span><a href="#local-6989586621679070933"><span class="hs-identifier hs-var">fits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070974"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070975"><span class="hs-identifier hs-var">currentColumn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Maybe Int
</span><a href="#local-6989586621679070978"><span class="hs-identifier hs-var">initialIndentation</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070977"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070976"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070976"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2035"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070977"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-2036"></span><span>
</span><span id="line-2037"></span><span>    </span><span class="annot"><a href="#local-6989586621679070978"><span class="hs-identifier hs-type">initialIndentation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069601"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-2038"></span><span>    </span><span id="local-6989586621679070978"><span class="annot"><span class="annottext">initialIndentation :: SimpleDocStream ann -&gt; Maybe Int
</span><a href="#local-6989586621679070978"><span class="hs-identifier hs-var hs-var">initialIndentation</span></a></span></span><span> </span><span id="local-6989586621679070979"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070979"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070979"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2039"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679070980"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070980"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070980"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-2040"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070981"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070981"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Maybe Int
</span><a href="#local-6989586621679070978"><span class="hs-identifier hs-var">initialIndentation</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070981"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-2041"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679070982"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070982"><span class="hs-identifier hs-var">s</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Maybe Int
</span><a href="#local-6989586621679070978"><span class="hs-identifier hs-var">initialIndentation</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679070982"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-2042"></span><span>        </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2043"></span><span>
</span><span id="line-2044"></span><span>
</span><span id="line-2045"></span><span class="hs-comment">{- Note [Choosing the right minNestingLevel for consistent smart layouts]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider this document:

    doc =
            &quot;Groceries: &quot;
        &lt;&gt;  align
                (cat
                    [ sep [&quot;pommes&quot;, &quot;de&quot;, &quot;terre&quot;]
                    , &quot;apples&quot;
                    , &quot;Donaudampfschifffahrtskapit&#228;nskaj&#252;tenm&#252;lleimer&quot;
                    ]
                )

... and assume we want to fit it into 40 columns as nicely as possible:

    opts = LayoutOptions (AvailablePerLine 40 1)

We already have bad luck with the last item &#8211; it's longer than 40 characters
on its own!

We'd still like the first item, pommes de terre, to be laid out nicely, that is,
on one line, since it's not too wide. This is what we'd like to see:

    Groceries: pommes de terre
               apples
               Donaudampfschifffahrtskapit&#228;nskaj&#252;tenm&#252;lleimer

Before #83 was fixed, that wasn't what we got! Instead we got this:

&gt; renderIO stdout $ layoutSmart opts doc
Groceries: pommes
           de
           terre
           apples
           Donaudampfschifffahrtskapit&#228;nskaj&#252;tenm&#252;lleimer

Why?

minNestingLevel was effectively defined as

    minNestingLevel = lineIndent

The lineIndent for &quot;pommes de terre&quot; is 0.

The FittingPredicate for layoutSmart will continue to check the rest of the
document until it finds a line where the indentation &lt;= minNestingLevel.
In this case this meant that layoutSmart would traverse all the items,
and note that the last item, Donaudampfschifffahrtskapit&#228;nskaj&#252;tenm&#252;lleimer,
doesn't fit into the available space! The &quot;flatter&quot; version of the document
has failed, so &quot;pommes de terre&quot; gets spread over several lines!

Obviously this would be an inconsistency with the layout of the other items.
Their lineIndent is 11 each, so for them, the FittingPredicate stops already
on the next line.

The obvious solution is to change the definition of minNestingLevel:

    minNestingLevel = currentColumn

This however breaks the &quot;python-ish&quot; document from the documentation for
layoutSmart:

    expected: |------------------------|
              fun(
                fun(
                  fun(
                    fun(
                      fun(
                        [ abcdef
                        , ghijklm ])))))
              |------------------------|

     but got: |------------------------|
              fun(
                fun(
                  fun(
                    fun(
                      fun([ abcdef
                          , ghijklm ])))))
              |------------------------|

We now accept the worse layout because the problematic last line has
the same indentation as the current column of &quot;[ abcdef&quot;, so we don't check it!

The solution we went with in the end is a bit of a hack:

We check whether the alternative, &quot;high&quot; layout is a (potentially less wide)
hanging layout, and in that case pick its indentation as the minNestingLevel.

This way we achieve the optimal layout in both scenarios.

See https://github.com/quchen/prettyprinter/issues/83 for the bug that lead
to the current solution.


Note [Detecting failure with Unbounded page width]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
To understand why it is sufficient to check the first line of the
SimpleDocStream, trace how an SFail ends up there:

1. We group a Doc containing a hard linebreak (hardline), producing a
   (Union x y) where x contains Fail.

2. In layoutWadlerLeijen.best, any Unions are handled recursively, rejecting any
   alternatives that would result in SFail.

So once a SimpleDocStream reaches selectNicer, any SFail in it must
appear before the first linebreak &#8211; any other SFail would have been
detected and rejected in a previous iteration.
-}</span><span>
</span><span id="line-2156"></span><span>
</span><span id="line-2157"></span><span>
</span><span id="line-2158"></span><span>
</span><span id="line-2159"></span><span class="hs-comment">-- | @(layoutCompact x)@ lays out the document @x@ without adding any</span><span>
</span><span id="line-2160"></span><span class="hs-comment">-- indentation and without preserving annotations.</span><span>
</span><span id="line-2161"></span><span class="hs-comment">-- Since no \'pretty\' printing is involved, this layouter is very</span><span>
</span><span id="line-2162"></span><span class="hs-comment">-- fast. The resulting output contains fewer characters than a prettyprinted</span><span>
</span><span id="line-2163"></span><span class="hs-comment">-- version and can be used for output that is read by other programs.</span><span>
</span><span id="line-2164"></span><span class="hs-comment">--</span><span>
</span><span id="line-2165"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = hang 4 (vsep [&quot;lorem&quot;, &quot;ipsum&quot;, hang 4 (vsep [&quot;dolor&quot;, &quot;sit&quot;])])</span><span>
</span><span id="line-2166"></span><span class="hs-comment">-- &gt;&gt;&gt; doc</span><span>
</span><span id="line-2167"></span><span class="hs-comment">-- lorem</span><span>
</span><span id="line-2168"></span><span class="hs-comment">--     ipsum</span><span>
</span><span id="line-2169"></span><span class="hs-comment">--     dolor</span><span>
</span><span id="line-2170"></span><span class="hs-comment">--         sit</span><span>
</span><span id="line-2171"></span><span class="hs-comment">--</span><span>
</span><span id="line-2172"></span><span class="hs-comment">-- &gt;&gt;&gt; let putDocCompact = renderIO System.IO.stdout . layoutCompact</span><span>
</span><span id="line-2173"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocCompact doc</span><span>
</span><span id="line-2174"></span><span class="hs-comment">-- lorem</span><span>
</span><span id="line-2175"></span><span class="hs-comment">-- ipsum</span><span>
</span><span id="line-2176"></span><span class="hs-comment">-- dolor</span><span>
</span><span id="line-2177"></span><span class="hs-comment">-- sit</span><span>
</span><span id="line-2178"></span><span id="local-6989586621679069616"><span id="local-6989586621679069617"><span class="annot"><a href="Prettyprinter.Internal.html#layoutCompact"><span class="hs-identifier hs-type">layoutCompact</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069616"><span class="hs-identifier hs-type">ann1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069617"><span class="hs-identifier hs-type">ann2</span></a></span></span></span><span>
</span><span id="line-2179"></span><span id="layoutCompact"><span class="annot"><span class="annottext">layoutCompact :: forall ann1 ann2. Doc ann1 -&gt; SimpleDocStream ann2
</span><a href="Prettyprinter.Internal.html#layoutCompact"><span class="hs-identifier hs-var hs-var">layoutCompact</span></a></span></span><span> </span><span id="local-6989586621679070983"><span class="annot"><span class="annottext">Doc ann1
</span><a href="#local-6989586621679070983"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann1] -&gt; SimpleDocStream ann2
forall {ann} {ann}. Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Doc ann1
</span><a href="#local-6989586621679070983"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2180"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2181"></span><span>    </span><span id="local-6989586621679070984"><span class="annot"><span class="annottext">scan :: Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var hs-var">scan</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>
</span><span id="line-2182"></span><span>    </span><span class="annot"><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070988"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679070989"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070989"><span class="hs-identifier hs-var">d</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679070990"><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070989"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2183"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
forall ann. SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>
</span><span id="line-2184"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2185"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621679070991"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070991"><span class="hs-identifier hs-var">c</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Char -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-var">SChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679070991"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2186"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679070992"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070992"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679070993"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070993"><span class="hs-identifier hs-var">t</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679070995"><span class="annot"><span class="annottext">col' :: Int
</span><a href="#local-6989586621679070995"><span class="hs-identifier hs-var hs-var">col'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070992"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann.
Int -&gt; Text -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-var">SText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070992"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679070993"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070995"><span class="hs-identifier hs-var">col'</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2187"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#FlatAlt"><span class="hs-identifier hs-type">FlatAlt</span></a></span><span> </span><span id="local-6989586621679070996"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070996"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070996"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2188"></span><span>        </span><span class="annot"><span class="annottext">Doc ann
</span><a href="Prettyprinter.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
forall ann. Int -&gt; SimpleDocStream ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-var">SLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2189"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Cat"><span class="hs-identifier hs-type">Cat</span></a></span><span> </span><span id="local-6989586621679070997"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070997"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679070998"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070998"><span class="hs-identifier hs-var">y</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070997"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070998"><span class="hs-identifier hs-var">y</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2190"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nest"><span class="hs-identifier hs-type">Nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679070999"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070999"><span class="hs-identifier hs-var">x</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679070999"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2191"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Union"><span class="hs-identifier hs-type">Union</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679071000"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679071000"><span class="hs-identifier hs-var">y</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679071000"><span class="hs-identifier hs-var">y</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2192"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span id="local-6989586621679071001"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679071001"><span class="hs-identifier hs-var">f</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679071001"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2193"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#WithPageWidth"><span class="hs-identifier hs-type">WithPageWidth</span></a></span><span> </span><span id="local-6989586621679071002"><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679071002"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PageWidth -&gt; Doc ann
</span><a href="#local-6989586621679071002"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PageWidth
</span><a href="Prettyprinter.Internal.html#Unbounded"><span class="hs-identifier hs-var">Unbounded</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2194"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Nesting"><span class="hs-identifier hs-type">Nesting</span></a></span><span> </span><span id="local-6989586621679071003"><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679071003"><span class="hs-identifier hs-var">f</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Doc ann
</span><a href="#local-6989586621679071003"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2195"></span><span>        </span><span class="annot"><a href="Prettyprinter.Internal.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679071004"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679071004"><span class="hs-identifier hs-var">x</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Doc ann] -&gt; SimpleDocStream ann
</span><a href="#local-6989586621679070984"><span class="hs-identifier hs-var">scan</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679070988"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679071004"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Doc ann -&gt; [Doc ann] -&gt; [Doc ann]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Doc ann]
</span><a href="#local-6989586621679070990"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2196"></span><span>
</span><span id="line-2197"></span><span class="hs-comment">-- | @('show' doc)@ prettyprints document @doc@ with 'defaultLayoutOptions',</span><span>
</span><span id="line-2198"></span><span class="hs-comment">-- ignoring all annotations.</span><span>
</span><span id="line-2199"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679069623"><span id="local-6989586621679071007"><span id="local-6989586621679071011"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069623"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2200"></span><span>    </span><span id="local-6989586621679071013"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; Doc ann -&gt; ShowS
</span><a href="#local-6989586621679071013"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679071015"><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679071015"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; ShowS
forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var">renderShowS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
forall ann. LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#layoutPretty"><span class="hs-identifier hs-var">layoutPretty</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutOptions
</span><a href="Prettyprinter.Internal.html#defaultLayoutOptions"><span class="hs-identifier hs-var">defaultLayoutOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><a href="#local-6989586621679071015"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2201"></span><span>
</span><span id="line-2202"></span><span class="hs-comment">-- | Render a 'SimpleDocStream' to a 'ShowS', useful to write 'Show' instances</span><span>
</span><span id="line-2203"></span><span class="hs-comment">-- based on the prettyprinter.</span><span>
</span><span id="line-2204"></span><span class="hs-comment">--</span><span>
</span><span id="line-2205"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-2206"></span><span class="hs-comment">-- instance 'Show' MyType where</span><span>
</span><span id="line-2207"></span><span class="hs-comment">--     'showsPrec' _ = 'renderShowS' . 'layoutPretty' 'defaultLayoutOptions' . 'pretty'</span><span>
</span><span id="line-2208"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-2209"></span><span id="local-6989586621679069624"><span class="annot"><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-type">renderShowS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier hs-type">SimpleDocStream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679069624"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowS</span></span></span><span>
</span><span id="line-2210"></span><span id="renderShowS"><span class="annot"><span class="annottext">renderShowS :: forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var hs-var">renderShowS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679071016"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071016"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071016"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2211"></span><span>    </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SFail"><span class="hs-identifier hs-var">SFail</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShowS
forall void. void
</span><a href="Prettyprinter.Render.Util.Panic.html#panicUncaughtFail"><span class="hs-identifier hs-var">panicUncaughtFail</span></a></span><span>
</span><span id="line-2212"></span><span>    </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="Prettyprinter.Internal.html#SEmpty"><span class="hs-identifier hs-var">SEmpty</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-2213"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SChar"><span class="hs-identifier hs-type">SChar</span></a></span><span> </span><span id="local-6989586621679071018"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679071018"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679071019"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071019"><span class="hs-identifier hs-var">x</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679071018"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; ShowS
forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var">renderShowS</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071019"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2214"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SText"><span class="hs-identifier hs-type">SText</span></a></span><span> </span><span id="local-6989586621679071021"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679071021"><span class="hs-identifier hs-var">_l</span></a></span></span><span> </span><span id="local-6989586621679071022"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679071022"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679071023"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071023"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679071022"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; ShowS
forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var">renderShowS</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071023"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2215"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SLine"><span class="hs-identifier hs-type">SLine</span></a></span><span> </span><span id="local-6989586621679071026"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679071026"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679071027"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071027"><span class="hs-identifier hs-var">x</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; String
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679071026"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; ShowS
forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var">renderShowS</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071027"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2216"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPush"><span class="hs-identifier hs-type">SAnnPush</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679071028"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071028"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; ShowS
forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var">renderShowS</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071028"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2217"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SAnnPop"><span class="hs-identifier hs-type">SAnnPop</span></a></span><span> </span><span id="local-6989586621679071029"><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071029"><span class="hs-identifier hs-var">x</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; ShowS
forall ann. SimpleDocStream ann -&gt; ShowS
</span><a href="Prettyprinter.Internal.html#renderShowS"><span class="hs-identifier hs-var">renderShowS</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann
</span><a href="#local-6989586621679071029"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2218"></span><span>
</span><span id="line-2219"></span><span>
</span><span id="line-2220"></span><span class="hs-comment">-- | A utility for producing indentation etc.</span><span>
</span><span id="line-2221"></span><span class="hs-comment">--</span><span>
</span><span id="line-2222"></span><span class="hs-comment">-- &gt;&gt;&gt; textSpaces 3</span><span>
</span><span id="line-2223"></span><span class="hs-comment">-- &quot;   &quot;</span><span>
</span><span id="line-2224"></span><span class="hs-comment">--</span><span>
</span><span id="line-2225"></span><span class="hs-comment">-- This produces much better Core than the equivalent</span><span>
</span><span id="line-2226"></span><span class="hs-comment">--</span><span>
</span><span id="line-2227"></span><span class="hs-comment">-- &gt; T.replicate n &quot; &quot;</span><span>
</span><span id="line-2228"></span><span class="hs-comment">--</span><span>
</span><span id="line-2229"></span><span class="hs-comment">-- (See &lt;https://github.com/quchen/prettyprinter/issues/131&gt;.)</span><span>
</span><span id="line-2230"></span><span class="annot"><a href="Prettyprinter.Internal.html#textSpaces"><span class="hs-identifier hs-type">textSpaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-2231"></span><span id="textSpaces"><span class="annot"><span class="annottext">textSpaces :: Int -&gt; Text
</span><a href="Prettyprinter.Internal.html#textSpaces"><span class="hs-identifier hs-var hs-var">textSpaces</span></a></span></span><span> </span><span id="local-6989586621679071030"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679071030"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679071030"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span>
</span><span id="line-2232"></span><span>
</span><span id="line-2233"></span><span>
</span><span id="line-2234"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-2235"></span><span class="hs-comment">--</span><span>
</span><span id="line-2236"></span><span class="hs-comment">-- (Definitions for the doctests)</span><span>
</span><span id="line-2237"></span><span class="hs-comment">--</span><span>
</span><span id="line-2238"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XOverloadedStrings</span><span>
</span><span id="line-2239"></span><span class="hs-comment">-- &gt;&gt;&gt; import Prettyprinter.Render.Text</span><span>
</span><span id="line-2240"></span><span class="hs-comment">-- &gt;&gt;&gt; import Prettyprinter.Symbols.Ascii</span><span>
</span><span id="line-2241"></span><span class="hs-comment">-- &gt;&gt;&gt; import Prettyprinter.Util as Util</span><span>
</span><span id="line-2242"></span><span class="hs-comment">-- &gt;&gt;&gt; import Test.QuickCheck.Modifiers</span><span>
</span><span id="line-2243"></span></pre></body></html>