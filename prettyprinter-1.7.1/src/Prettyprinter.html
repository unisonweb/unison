<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span class="hs-cpp">

#include &quot;version-compatibility-macros.h&quot;
</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Module      :  Prettyprinter</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Copyright   :  Daan Leijen (c) 2000, http://www.cs.uu.nl/~daan</span><span>
</span><span id="line-8"></span><span class="hs-comment">--                Max Bolingbroke (c) 2008, http://blog.omega-prime.co.uk</span><span>
</span><span id="line-9"></span><span class="hs-comment">--                David Luposchainsky (c) 2016, http://github.com/quchen</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE.md)</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Maintainer  :  David Luposchainsky &lt;dluposchainsky (&#955;) google&gt;</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Stability   :  experimental</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Portability :  portable</span><span>
</span><span id="line-14"></span><span class="hs-comment">--</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- = Overview</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- This module defines a prettyprinter to format text in a flexible and</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- convenient way. The idea is to combine a 'Doc'ument out of many small</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- components, then using a layouter to convert it to an easily renderable</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- 'SimpleDocStream', which can then be rendered to a variety of formats, for</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- example plain 'Text'.</span><span>
</span><span id="line-22"></span><span class="hs-comment">--</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- The documentation consists of several parts:</span><span>
</span><span id="line-24"></span><span class="hs-comment">--</span><span>
</span><span id="line-25"></span><span class="hs-comment">--   1. Just below is some general information about the library.</span><span>
</span><span id="line-26"></span><span class="hs-comment">--   2. The actual library with extensive documentation and examples</span><span>
</span><span id="line-27"></span><span class="hs-comment">--   3. Migration guide for users familiar with (ansi-)wl-pprint</span><span>
</span><span id="line-28"></span><span class="hs-comment">--</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- == Starting out</span><span>
</span><span id="line-30"></span><span class="hs-comment">--</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- As a reading list for starters, some of the most commonly used functions in</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- this module include '&lt;&gt;', 'hsep', '&lt;+&gt;', 'vsep', 'align', 'hang'. These cover</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- many use cases already, and many other functions are variations or</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- combinations of these.</span><span>
</span><span id="line-35"></span><span class="hs-comment">--</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- = Simple example</span><span>
</span><span id="line-37"></span><span class="hs-comment">--</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- Let&#8217;s prettyprint a simple Haskell type definition. First, intersperse @-&gt;@</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- and add a leading @::@,</span><span>
</span><span id="line-40"></span><span class="hs-comment">--</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyprintType :: [Doc x] -&gt; Doc x</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyprintType = align . sep . zipWith (&lt;+&gt;) (&quot;::&quot; : repeat &quot;-&gt;&quot;)</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- &gt;&gt;&gt; :}</span><span>
</span><span id="line-45"></span><span class="hs-comment">--</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- The 'sep' function is one way of concatenating documents, there are multiple</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- others, e.g. 'vsep', 'cat' and 'fillSep'. In our case, 'sep' space-separates</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- all entries if there is space, and newlines if the remaining line is too</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- short.</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- Second, prepend the name to the type,</span><span>
</span><span id="line-52"></span><span class="hs-comment">--</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- &gt;&gt;&gt; let prettyprintDeclaration n tys = pretty n &lt;+&gt; prettyprintType tys</span><span>
</span><span id="line-54"></span><span class="hs-comment">--</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- Now we can define a document that contains some type signature:</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- &gt;&gt;&gt; let doc = prettyprintDeclaration &quot;example&quot; [&quot;Int&quot;, &quot;Bool&quot;, &quot;Char&quot;, &quot;IO ()&quot;]</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- This document can now be printed, and it automatically adapts to available</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- space. If the page is wide enough (80 characters in this case), the</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- definitions are space-separated,</span><span>
</span><span id="line-62"></span><span class="hs-comment">--</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 80 doc</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- example :: Int -&gt; Bool -&gt; Char -&gt; IO ()</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- If we narrow the page width to only 20 characters, the /same document/</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- renders vertically aligned:</span><span>
</span><span id="line-68"></span><span class="hs-comment">--</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- &gt;&gt;&gt; putDocW 20 doc</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- example :: Int</span><span>
</span><span id="line-71"></span><span class="hs-comment">--         -&gt; Bool</span><span>
</span><span id="line-72"></span><span class="hs-comment">--         -&gt; Char</span><span>
</span><span id="line-73"></span><span class="hs-comment">--         -&gt; IO ()</span><span>
</span><span id="line-74"></span><span class="hs-comment">--</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- Speaking of alignment, had we not used 'align', the @-&gt;@ would be at the</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- beginning of each line, and not beneath the @::@.</span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- The 'Prettyprinter.Util.putDocW' renderer used here is from</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- &quot;Prettyprinter.Util&quot;.</span><span>
</span><span id="line-80"></span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- = General workflow</span><span>
</span><span id="line-82"></span><span class="hs-comment">--</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- &#9556;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9559;</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-86"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9474; 'vsep', 'pretty', '&lt;+&gt;', &#9474;</span><span>
</span><span id="line-87"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9474; 'nest', 'align', &#8230;     &#9474;</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- &#9553;  Create  &#9553;                                   &#9474;</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;</span><span>
</span><span id="line-92"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9661;</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9474;        'Doc'        &#9474;</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- &#9568;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9571;                         &#9474;  (rich document)  &#9474;</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474; Layout algorithms</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- &#9553;  Layout  &#9553;                                   &#9474; e.g. 'layoutPretty'</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9661;</span><span>
</span><span id="line-101"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9474;  'SimpleDocStream'  &#9474;</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- &#9568;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9571;                         &#9474; (simple document) &#9474;</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- &#9553;          &#9553;                         &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9500;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;                             &#9474; 'Prettyprinter.Render.Util.SimpleDocTree.treeForm'</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;                             &#9661;</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;                     &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;                     &#9474; 'Prettyprinter.Render.Util.SimpleDocTree.SimpleDocTree' &#9474;</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- &#9553;  Render  &#9553;                                   &#9474;                     &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- &#9553;          &#9553;                                   &#9474;                             &#9474;</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- &#9553;          &#9553;               &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;  &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- &#9553;          &#9553;               &#9474;                   &#9474;                 &#9474;  &#9474;                 &#9474;</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- &#9553;          &#9553;               &#9661;                   &#9661;                 &#9661;  &#9661;                 &#9661;</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- &#9553;          &#9553;       &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;   &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;   &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;   &#9581;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9582;</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- &#9553;          &#9553;       &#9474; ANSI terminal &#9474;   &#9474;  Plain 'Text'   &#9474;   &#9474; other/custom  &#9474;   &#9474;     HTML      &#9474;</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- &#9553;          &#9553;       &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;   &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;   &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;   &#9584;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9583;</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- &#9553;          &#9553;</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- &#9562;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9565;</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-122"></span><span class="hs-comment">--</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- = How the layout works</span><span>
</span><span id="line-124"></span><span class="hs-comment">--</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- There are two key concepts to laying a document out: the available width, and</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- 'group'ing.</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- == Available width</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- The page has a certain maximum width, which the layouter tries to not exceed,</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- by inserting line breaks where possible. The functions given in this module</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- make it fairly straightforward to specify where, and under what</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- circumstances, such a line break may be inserted by the layouter, for example</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- via the 'sep' function.</span><span>
</span><span id="line-135"></span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- There is also the concept of /ribbon width/. The ribbon is the part of a line</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- that is printed, i.e. the line length without the leading indentation. The</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- layouters take a ribbon fraction argument, which specifies how much of a line</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- should be filled before trying to break it up. A ribbon width of 0.5 in a</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- document of width 80 will result in the layouter to try to not exceed @0.5*80 =</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- 40@ (ignoring current indentation depth).</span><span>
</span><span id="line-142"></span><span class="hs-comment">--</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- == Grouping</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- A document can be 'group'ed, which tells the layouter that it should attempt</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- to collapse it to a single line. If the result does not fit within the</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- constraints (given by page and ribbon widths), the document is rendered</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- unaltered. This allows fallback definitions, so that we get nice results even</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- when the original document would exceed the layout constraints.</span><span>
</span><span id="line-150"></span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- = Things the prettyprinter /cannot/ do</span><span>
</span><span id="line-152"></span><span class="hs-comment">--</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- Due to how the Wadler/Leijen algorithm is designed, a couple of things are</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- unsupported right now, with a high possibility of having no sensible</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- implementation without significantly changing the layout algorithm. In</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- particular, this includes</span><span>
</span><span id="line-157"></span><span class="hs-comment">--</span><span>
</span><span id="line-158"></span><span class="hs-comment">--   * Leading symbols instead of just spaces for indentation, as used by the</span><span>
</span><span id="line-159"></span><span class="hs-comment">--     Linux @tree@ tool for example</span><span>
</span><span id="line-160"></span><span class="hs-comment">--   * Multi-column layouts, in particular tables with multiple cells of equal</span><span>
</span><span id="line-161"></span><span class="hs-comment">--     width adjacent to each other</span><span>
</span><span id="line-162"></span><span class="hs-comment">--</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- = Some helpful tips</span><span>
</span><span id="line-164"></span><span class="hs-comment">--</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- == Which kind of annotation should I use?</span><span>
</span><span id="line-166"></span><span class="hs-comment">--</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- __Summary:__ Use semantic annotations for @'Doc'@, and after layouting map to</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- backend-specific ones.</span><span>
</span><span id="line-169"></span><span class="hs-comment">--</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- For example, suppose you want to prettyprint some programming language code.</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- If you want keywords to be red, you should annotate the @'Doc'@ with a type</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- that has a 'Keyword' field (without any notion of color), and then after</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- layouting convert the annotations to map @'Keyword'@ to e.g. @'Red'@ (using</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- @'reAnnotateS'@). The alternative that I /do not/ recommend is directly</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- annotating the @'Doc'@ with 'Red'.</span><span>
</span><span id="line-176"></span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- While both versions would superficially work equally well and would create</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- identical output, the recommended way has two significant advantages:</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- modularity and extensibility.</span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- /Modularity:/ To change the color of keywords later, you have to touch one</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- point, namely the mapping in @'reAnnotateS'@, where @'Keyword'@ is mapped to</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- 'Red'. If you have @'annotate Red &#8230;'@ everywher, you&#8217;ll have to do a full</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- text replacement, producing a large diff and touching lots of places for a</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- very small change.</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- /Extensibility:/ Adding a different backend in the recommended version is</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- simply adding another @'reAnnotateS'@ to convert the @'Doc'@ annotation to</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- something else. On the other hand, if you have @'Red'@ as an annotation in</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- the @'Doc'@ already and the other backend does not support anything red</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- (think of plain text or a website where red doesn&#8217;t work well with the rest</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- of the style), you&#8217;ll have to worry about what to map &#187;redness&#171; to, which has</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- no canonical answer. Should it be omitted? What does &#187;red&#171; mean anyway &#8211;</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- maybe keywords and variables are red, and you want to change only the color</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- of variables?</span><span>
</span><span id="line-196"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Prettyprinter</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Documents</span></span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Doc"><span class="hs-identifier">Doc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Basic functionality</span></span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#Pretty"><span class="hs-identifier">Pretty</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#viaShow"><span class="hs-identifier">viaShow</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#unsafeViaShow"><span class="hs-identifier">unsafeViaShow</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#emptyDoc"><span class="hs-identifier">emptyDoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#nest"><span class="hs-identifier">nest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#line"><span class="hs-identifier">line</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#line%27"><span class="hs-identifier">line'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#softline"><span class="hs-identifier">softline</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#softline%27"><span class="hs-identifier">softline'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#hardline"><span class="hs-identifier">hardline</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Primitives for alternative layouts</span></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#group"><span class="hs-identifier">group</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#flatAlt"><span class="hs-identifier">flatAlt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Alignment functions</span></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">-- | The functions in this section cannot be described by Wadler's original</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-comment">-- functions. They align their output relative to the current output</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-comment">-- position - in contrast to @'nest'@ which always aligns to the current</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-comment">-- nesting level. This deprives these functions from being \'optimal\'. In</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- practice however they prove to be very useful. The functions in this</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-comment">-- section should be used with care, since they are more expensive than the</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-comment">-- other functions. For example, @'align'@ shouldn't be used to pretty print</span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-comment">-- all top-level declarations of a language, but using @'hang'@ for let</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-comment">-- expressions is fine.</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#align"><span class="hs-identifier">align</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#hang"><span class="hs-identifier">hang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#indent"><span class="hs-identifier">indent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#encloseSep"><span class="hs-identifier">encloseSep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#list"><span class="hs-identifier">list</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#tupled"><span class="hs-identifier">tupled</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Binary functions</span></span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><span class="hs-operator">(&lt;&gt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator">(&lt;+&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><span class="hs-comment">-- * List functions</span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-comment">-- | The 'sep' and 'cat' functions differ in one detail: when 'group'ed, the</span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-comment">-- 'sep's replace newlines wich 'space's, while the 'cat's simply remove</span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-comment">-- them. If you're not sure what you want, start with the 'sep's.</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#concatWith"><span class="hs-identifier">concatWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** 'sep' family</span></span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><span class="hs-comment">-- | When 'group'ed, these will replace newlines with spaces.</span></span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#hsep"><span class="hs-identifier">hsep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#vsep"><span class="hs-identifier">vsep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#fillSep"><span class="hs-identifier">fillSep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#sep"><span class="hs-identifier">sep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** 'cat' family</span></span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="hs-comment">-- | When 'group'ed, these will remove newlines.</span></span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#hcat"><span class="hs-identifier">hcat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#vcat"><span class="hs-identifier">vcat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#fillCat"><span class="hs-identifier">fillCat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#cat"><span class="hs-identifier">cat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Others</span></span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#punctuate"><span class="hs-identifier">punctuate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Reactive/conditional layouts</span></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-comment">-- | Lay documents out differently based on current position and the page</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-comment">-- layout.</span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#column"><span class="hs-identifier">column</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#nesting"><span class="hs-identifier">nesting</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#width"><span class="hs-identifier">width</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#pageWidth"><span class="hs-identifier">pageWidth</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Filler functions</span></span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Fill up available space</span></span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#fill"><span class="hs-identifier">fill</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#fillBreak"><span class="hs-identifier">fillBreak</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="hs-comment">-- * General convenience</span></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Useful helper functions.</span></span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#plural"><span class="hs-identifier">plural</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#enclose"><span class="hs-identifier">enclose</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#surround"><span class="hs-identifier">surround</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Bracketing functions</span></span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Enclose documents in common ways.</span></span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#squotes"><span class="hs-identifier">squotes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#dquotes"><span class="hs-identifier">dquotes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#parens"><span class="hs-identifier">parens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#angles"><span class="hs-identifier">angles</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#brackets"><span class="hs-identifier">brackets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#braces"><span class="hs-identifier">braces</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Named characters</span></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Convenience definitions for common characters</span></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#lparen"><span class="hs-identifier">lparen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#rparen"><span class="hs-identifier">rparen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#langle"><span class="hs-identifier">langle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#rangle"><span class="hs-identifier">rangle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#lbrace"><span class="hs-identifier">lbrace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#rbrace"><span class="hs-identifier">rbrace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#lbracket"><span class="hs-identifier">lbracket</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#rbracket"><span class="hs-identifier">rbracket</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#squote"><span class="hs-identifier">squote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#dquote"><span class="hs-identifier">dquote</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#semi"><span class="hs-identifier">semi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#colon"><span class="hs-identifier">colon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#comma"><span class="hs-identifier">comma</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#space"><span class="hs-identifier">space</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#dot"><span class="hs-identifier">dot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#slash"><span class="hs-identifier">slash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#backslash"><span class="hs-identifier">backslash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#equals"><span class="hs-identifier">equals</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html#pipe"><span class="hs-identifier">pipe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Annotations</span></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#annotate"><span class="hs-identifier">annotate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#unAnnotate"><span class="hs-identifier">unAnnotate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#reAnnotate"><span class="hs-identifier">reAnnotate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#alterAnnotations"><span class="hs-identifier">alterAnnotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#unAnnotateS"><span class="hs-identifier">unAnnotateS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#reAnnotateS"><span class="hs-identifier">reAnnotateS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#alterAnnotationsS"><span class="hs-identifier">alterAnnotationsS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Optimization</span></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">-- Render documents faster</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#fuse"><span class="hs-identifier">fuse</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#FusionDepth"><span class="hs-identifier">FusionDepth</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Layout</span></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-comment">-- | Laying a 'Doc'ument out produces a straightforward 'SimpleDocStream'</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-comment">-- based on parameters such as page width and ribbon size, by evaluating how</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-comment">-- a 'Doc' fits these constraints the best. There are various ways to render</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">-- a 'SimpleDocStream'. For the common case of rendering a 'SimpleDocStream'</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-comment">-- as plain 'Text' take a look at &quot;Prettyprinter.Render.Text&quot;.</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#SimpleDocStream"><span class="hs-identifier">SimpleDocStream</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#PageWidth"><span class="hs-identifier">PageWidth</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#LayoutOptions"><span class="hs-identifier">LayoutOptions</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#defaultLayoutOptions"><span class="hs-identifier">defaultLayoutOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#layoutPretty"><span class="hs-identifier">layoutPretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#layoutCompact"><span class="hs-identifier">layoutCompact</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html#layoutSmart"><span class="hs-identifier">layoutSmart</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><a href="Prettyprinter.Internal.html#removeTrailingWhitespace"><span class="hs-identifier">removeTrailingWhitespace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Migration guide</span></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><span class="hs-comment">-- $migration</span></span><span>
</span><span id="line-299"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">



#if !(SEMIGROUP_MONOID_SUPERCLASS)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Semigroup</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Prettyprinter.Internal.html"><span class="hs-identifier">Prettyprinter.Internal</span></a></span><span>
</span><span id="line-307"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Prettyprinter.Symbols.Ascii.html"><span class="hs-identifier">Prettyprinter.Symbols.Ascii</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- (Definitions for the doctests)</span><span>
</span><span id="line-312"></span><span class="hs-comment">--</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XOverloadedStrings</span><span>
</span><span id="line-314"></span><span class="hs-comment">-- &gt;&gt;&gt; import Prettyprinter.Render.Text</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- &gt;&gt;&gt; import Prettyprinter.Util</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-comment">-- $migration</span><span>
</span><span id="line-320"></span><span class="hs-comment">--</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- There are 3 main ways to migrate:</span><span>
</span><span id="line-322"></span><span class="hs-comment">--</span><span>
</span><span id="line-323"></span><span class="hs-comment">--   1. Direct: just replace the previous package and fix the errors</span><span>
</span><span id="line-324"></span><span class="hs-comment">--   2. Using a drop-in replacement mimicing the API of the former module, see</span><span>
</span><span id="line-325"></span><span class="hs-comment">--      the @prettyprinter-compat-&lt;former package&gt;@ packages</span><span>
</span><span id="line-326"></span><span class="hs-comment">--   3. Using a converter from the old @Doc@ type to the new one, see the</span><span>
</span><span id="line-327"></span><span class="hs-comment">--      @prettyprinter-convert-&lt;former package&gt;@ packages</span><span>
</span><span id="line-328"></span><span class="hs-comment">--</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- If you're already familiar with (ansi-)wl-pprint, you'll recognize many</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- functions in this module, and they work just the same way. However, a couple</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- of definitions are missing:</span><span>
</span><span id="line-332"></span><span class="hs-comment">--</span><span>
</span><span id="line-333"></span><span class="hs-comment">--   - @char@, @string@, @double@, &#8230; &#8211; these are all special cases of the</span><span>
</span><span id="line-334"></span><span class="hs-comment">--     overloaded @'pretty'@ function.</span><span>
</span><span id="line-335"></span><span class="hs-comment">--   - @\&lt;$&gt;@, @\&lt;$$&gt;@, @\&lt;/&gt;@, @\&lt;//&gt;@ are special cases of</span><span>
</span><span id="line-336"></span><span class="hs-comment">--     @'vsep'@, @'vcat'@, @'fillSep'@, @'fillCat'@ with only two documents.</span><span>
</span><span id="line-337"></span><span class="hs-comment">--   - If you need 'String' output, use the backends in the</span><span>
</span><span id="line-338"></span><span class="hs-comment">--     &quot;Prettyprinter.Render.String&quot; module.</span><span>
</span><span id="line-339"></span><span class="hs-comment">--   - The /display/ functions are moved to the rendering submodules, for</span><span>
</span><span id="line-340"></span><span class="hs-comment">--     example conversion to plain 'Text' is in the</span><span>
</span><span id="line-341"></span><span class="hs-comment">--     &quot;Prettyprinter.Render.Text&quot; module.</span><span>
</span><span id="line-342"></span><span class="hs-comment">--   - The /render/ functions are called /layout/ functions.</span><span>
</span><span id="line-343"></span><span class="hs-comment">--   - @SimpleDoc@ was renamed to @'SimpleDocStream'@, in order to make it</span><span>
</span><span id="line-344"></span><span class="hs-comment">--     clearer in the presence of @SimpleDocTree@.</span><span>
</span><span id="line-345"></span><span class="hs-comment">--   - Instead of providing an own colorization function for each</span><span>
</span><span id="line-346"></span><span class="hs-comment">--     color\/intensity\/layer combination, they have been combined in 'color',</span><span>
</span><span id="line-347"></span><span class="hs-comment">--     'colorDull', 'bgColor', and 'bgColorDull' functions, which can be found</span><span>
</span><span id="line-348"></span><span class="hs-comment">--     in the ANSI terminal specific @prettyprinter-ansi-terminal@ package.</span><span>
</span><span id="line-349"></span></pre></body></html>