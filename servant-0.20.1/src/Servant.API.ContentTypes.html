<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ConstraintKinds       #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric         #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds             #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables   #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TupleSections         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# OPTIONS_HADDOCK not-home       #-}</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">-- | A collection of basic Content-Types (also known as Internet Media</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Types, or MIME types). Additionally, this module provides classes that</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- encapsulate how to serialize or deserialize values to or from</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- a particular Content-Type.</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- Content-Types are used in `ReqBody` and the method combinators:</span><span>
</span><span id="line-23"></span><span class="hs-comment">--</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- &gt;&gt;&gt; type MyEndpoint = ReqBody '[JSON, PlainText] Book :&gt; Put '[JSON, PlainText] Book</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- Meaning the endpoint accepts requests of Content-Type @application/json@</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- or @text/plain;charset-utf8@, and returns data in either one of those</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- formats (depending on the @Accept@ header).</span><span>
</span><span id="line-29"></span><span class="hs-comment">--</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- If you would like to support Content-Types beyond those provided here,</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- then:</span><span>
</span><span id="line-32"></span><span class="hs-comment">--</span><span>
</span><span id="line-33"></span><span class="hs-comment">--      (1) Declare a new data type with no constructors (e.g. @data HTML@).</span><span>
</span><span id="line-34"></span><span class="hs-comment">--      (2) Make an instance of it for `Accept`.</span><span>
</span><span id="line-35"></span><span class="hs-comment">--      (3) If you want to be able to serialize data *into* that</span><span>
</span><span id="line-36"></span><span class="hs-comment">--      Content-Type, make an instance of it for `MimeRender`.</span><span>
</span><span id="line-37"></span><span class="hs-comment">--      (4) If you want to be able to deserialize data *from* that</span><span>
</span><span id="line-38"></span><span class="hs-comment">--      Content-Type, make an instance of it for `MimeUnrender`.</span><span>
</span><span id="line-39"></span><span class="hs-comment">--</span><span>
</span><span id="line-40"></span><span class="hs-comment">-- Note that roles are reversed in @servant-server@ and @servant-client@:</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- to be able to serve (or even typecheck) a @Get '[JSON, XML] MyData@,</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- you'll need to have the appropriate `MimeRender` instances in scope,</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- whereas to query that endpoint with @servant-client@, you'll need</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- a `MimeUnrender` instance in scope.</span><span>
</span><span id="line-45"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Servant.API.ContentTypes</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Provided Content-Types</span></span><span>
</span><span id="line-48"></span><span>      </span><span class="annot"><a href="Servant.API.ContentTypes.html#JSON"><span class="hs-identifier">JSON</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier">PlainText</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#FormUrlEncoded"><span class="hs-identifier">FormUrlEncoded</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier">OctetStream</span></a></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Building your own Content-Type</span></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier">Accept</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier">MimeRender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier">MimeUnrender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-comment">-- * NoContent</span></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier">NoContent</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier">AcceptHeader</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTRender"><span class="hs-identifier">AllCTRender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTUnrender"><span class="hs-identifier">AllCTUnrender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier">AllMime</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier">AllMimeRender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeUnrender"><span class="hs-identifier">AllMimeUnrender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#eitherDecodeLenient"><span class="hs-identifier">eitherDecodeLenient</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#canHandleAcceptH"><span class="hs-identifier">canHandleAcceptH</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span>
</span><span id="line-73"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">left</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Compat</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-76"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-78"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">eitherDecode</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>
</span><span id="line-80"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">bimap</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span>                  </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span>
</span><span id="line-83"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromStrict</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toStrict</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-86"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isJust</span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.String.Conversions</span></span><span>
</span><span id="line-88"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">cs</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                        </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TextS</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TextS</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span>                   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TextL</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.Encoding</span></span><span>          </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TextL</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>
</span><span id="line-95"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>                     </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TL</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Media</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Prelude.Compat</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Web.FormUrlEncoded</span></span><span>
</span><span id="line-101"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FromForm</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToForm</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">urlDecodeAsForm</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">urlEncodeAsForm</span></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="annot"><span class="hs-comment">-- * Provided content types</span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">data</span><span> </span><span id="JSON"><span class="annot"><a href="Servant.API.ContentTypes.html#JSON"><span class="hs-identifier hs-var">JSON</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-105"></span><span class="hs-keyword">data</span><span> </span><span id="PlainText"><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-var">PlainText</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">data</span><span> </span><span id="FormUrlEncoded"><span class="annot"><a href="Servant.API.ContentTypes.html#FormUrlEncoded"><span class="hs-identifier hs-var">FormUrlEncoded</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">data</span><span> </span><span id="OctetStream"><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier hs-var">OctetStream</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><span class="hs-comment">-- * Accept class</span></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Instances of 'Accept' represent mimetypes. They are used for matching</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- against the @Accept@ HTTP header of the request, and for setting the</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- @Content-Type@ header of the response</span><span>
</span><span id="line-114"></span><span class="hs-comment">--</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- Example:</span><span>
</span><span id="line-116"></span><span class="hs-comment">--</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- &gt;&gt;&gt; import Network.HTTP.Media ((//), (/:))</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- &gt;&gt;&gt; data HTML</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-120"></span><span class="hs-comment">--instance Accept HTML where</span><span>
</span><span id="line-121"></span><span class="hs-comment">--    contentType _ = &quot;text&quot; // &quot;html&quot; /: (&quot;charset&quot;, &quot;utf-8&quot;)</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-123"></span><span class="hs-comment">--</span><span>
</span><span id="line-124"></span><span class="hs-keyword">class</span><span> </span><span id="Accept"><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-var">Accept</span></a></span></span><span> </span><span id="local-6989586621679115101"><span class="annot"><a href="#local-6989586621679115101"><span class="hs-identifier hs-type">ctype</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>    </span><span id="contentType"><span class="annot"><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-type">contentType</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115101"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.MediaType</span></span><span>
</span><span id="line-126"></span><span>    </span><span id="local-6989586621679115279"><span class="annot"><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-var hs-var">contentType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty MediaType -&gt; MediaType
forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NE.head</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty MediaType -&gt; MediaType)
-&gt; (Proxy ctype -&gt; NonEmpty MediaType) -&gt; Proxy ctype -&gt; MediaType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctype -&gt; NonEmpty MediaType
forall {k} (ctype :: k).
Accept ctype =&gt;
Proxy ctype -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var">contentTypes</span></a></span></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span>    </span><span id="contentTypes"><span class="annot"><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-type">contentTypes</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115101"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.MediaType</span></span><span>
</span><span id="line-129"></span><span>    </span><span id="local-6989586621679115284"><span class="annot"><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var hs-var">contentTypes</span></a></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MediaType -&gt; [MediaType] -&gt; NonEmpty MediaType
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MediaType -&gt; NonEmpty MediaType)
-&gt; (Proxy ctype -&gt; MediaType) -&gt; Proxy ctype -&gt; NonEmpty MediaType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctype -&gt; MediaType
forall {k} (ctype :: k). Accept ctype =&gt; Proxy ctype -&gt; MediaType
</span><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-var">contentType</span></a></span></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-pragma">{-# MINIMAL</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-pragma hs-type">contentType</span></a></span><span> </span><span class="hs-pragma">|</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-pragma hs-type">contentTypes</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="annot"><span class="hs-comment">-- | @application/json@</span></span><span>
</span><span id="line-134"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115288"><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#JSON"><span class="hs-identifier hs-type">JSON</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621679115300"><span class="annot"><span class="annottext">contentTypes :: Proxy JSON -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var hs-var hs-var hs-var">contentTypes</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy JSON
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; MediaType
</span><span class="hs-operator hs-var">M.//</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;json&quot;</span></span><span> </span><span class="annot"><span class="annottext">MediaType -&gt; (ByteString, ByteString) -&gt; MediaType
</span><span class="hs-operator hs-var">M./:</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;charset&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;utf-8&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MediaType -&gt; [MediaType] -&gt; NonEmpty MediaType
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; MediaType
</span><span class="hs-operator hs-var">M.//</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;json&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">-- | @application/x-www-form-urlencoded@</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115305"><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#FormUrlEncoded"><span class="hs-identifier hs-type">FormUrlEncoded</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>    </span><span id="local-6989586621679115310"><span class="annot"><span class="annottext">contentType :: Proxy FormUrlEncoded -&gt; MediaType
</span><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-var hs-var hs-var hs-var">contentType</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy FormUrlEncoded
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; MediaType
</span><span class="hs-operator hs-var">M.//</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;x-www-form-urlencoded&quot;</span></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="annot"><span class="hs-comment">-- | @text/plain;charset=utf-8@</span></span><span>
</span><span id="line-144"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115313"><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>    </span><span id="local-6989586621679115320"><span class="annot"><span class="annottext">contentType :: Proxy PlainText -&gt; MediaType
</span><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-var hs-var hs-var hs-var">contentType</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; MediaType
</span><span class="hs-operator hs-var">M.//</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;plain&quot;</span></span><span> </span><span class="annot"><span class="annottext">MediaType -&gt; (ByteString, ByteString) -&gt; MediaType
</span><span class="hs-operator hs-var">M./:</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;charset&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;utf-8&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="annot"><span class="hs-comment">-- | @application/octet-stream@</span></span><span>
</span><span id="line-148"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115323"><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier hs-type">OctetStream</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679115328"><span class="annot"><span class="annottext">contentType :: Proxy OctetStream -&gt; MediaType
</span><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-var hs-var hs-var hs-var">contentType</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy OctetStream
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; MediaType
</span><span class="hs-operator hs-var">M.//</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;octet-stream&quot;</span></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">newtype</span><span> </span><span id="AcceptHeader"><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier hs-var">AcceptHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AcceptHeader"><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier hs-var">AcceptHeader</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115331"><span id="local-6989586621679115336"><span class="annot"><span class="annottext">AcceptHeader -&gt; AcceptHeader -&gt; Bool
(AcceptHeader -&gt; AcceptHeader -&gt; Bool)
-&gt; (AcceptHeader -&gt; AcceptHeader -&gt; Bool) -&gt; Eq AcceptHeader
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: AcceptHeader -&gt; AcceptHeader -&gt; Bool
== :: AcceptHeader -&gt; AcceptHeader -&gt; Bool
$c/= :: AcceptHeader -&gt; AcceptHeader -&gt; Bool
/= :: AcceptHeader -&gt; AcceptHeader -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115342"><span id="local-6989586621679115348"><span id="local-6989586621679115352"><span class="annot"><span class="annottext">Int -&gt; AcceptHeader -&gt; ShowS
[AcceptHeader] -&gt; ShowS
AcceptHeader -&gt; String
(Int -&gt; AcceptHeader -&gt; ShowS)
-&gt; (AcceptHeader -&gt; String)
-&gt; ([AcceptHeader] -&gt; ShowS)
-&gt; Show AcceptHeader
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; AcceptHeader -&gt; ShowS
showsPrec :: Int -&gt; AcceptHeader -&gt; ShowS
$cshow :: AcceptHeader -&gt; String
show :: AcceptHeader -&gt; String
$cshowList :: [AcceptHeader] -&gt; ShowS
showList :: [AcceptHeader] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115356"><span id="local-6989586621679115360"><span id="local-6989586621679115363"><span id="local-6989586621679115371"><span class="annot"><span class="annottext">ReadPrec [AcceptHeader]
ReadPrec AcceptHeader
Int -&gt; ReadS AcceptHeader
ReadS [AcceptHeader]
(Int -&gt; ReadS AcceptHeader)
-&gt; ReadS [AcceptHeader]
-&gt; ReadPrec AcceptHeader
-&gt; ReadPrec [AcceptHeader]
-&gt; Read AcceptHeader
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS AcceptHeader
readsPrec :: Int -&gt; ReadS AcceptHeader
$creadList :: ReadS [AcceptHeader]
readList :: ReadS [AcceptHeader]
$creadPrec :: ReadPrec AcceptHeader
readPrec :: ReadPrec AcceptHeader
$creadListPrec :: ReadPrec [AcceptHeader]
readListPrec :: ReadPrec [AcceptHeader]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115375"><span id="local-6989586621679115377"><span class="annot"><span class="annottext">(forall x. AcceptHeader -&gt; Rep AcceptHeader x)
-&gt; (forall x. Rep AcceptHeader x -&gt; AcceptHeader)
-&gt; Generic AcceptHeader
forall x. Rep AcceptHeader x -&gt; AcceptHeader
forall x. AcceptHeader -&gt; Rep AcceptHeader x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. AcceptHeader -&gt; Rep AcceptHeader x
from :: forall x. AcceptHeader -&gt; Rep AcceptHeader x
$cto :: forall x. Rep AcceptHeader x -&gt; AcceptHeader
to :: forall x. Rep AcceptHeader x -&gt; AcceptHeader
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="annot"><span class="hs-comment">-- * Render (serializing)</span></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | Instantiate this class to register a way of serializing a type based</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- on the @Accept@ header.</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- Example:</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- &gt; data MyContentType</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- &gt; instance Accept MyContentType where</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- &gt;    contentType _ = &quot;example&quot; // &quot;prs.me.mine&quot; /: (&quot;charset&quot;, &quot;utf-8&quot;)</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- &gt; instance Show a =&gt; MimeRender MyContentType a where</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- &gt;    mimeRender _ val = pack (&quot;This is MINE! &quot; ++ show val)</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- &gt; type MyAPI = &quot;path&quot; :&gt; Get '[MyContentType] Int</span><span>
</span><span id="line-170"></span><span class="hs-comment">--</span><span>
</span><span id="line-171"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115129"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MimeRender"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-var">MimeRender</span></a></span></span><span> </span><span id="local-6989586621679115129"><span class="annot"><a href="#local-6989586621679115129"><span class="hs-identifier hs-type">ctype</span></a></span></span><span> </span><span id="local-6989586621679115130"><span class="annot"><a href="#local-6989586621679115130"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>    </span><span id="mimeRender"><span class="annot"><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-type">mimeRender</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115129"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115130"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115132"><span class="hs-identifier hs-type">list</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="AllCTRender"><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTRender"><span class="hs-identifier hs-var">AllCTRender</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115132"><span class="annot"><a href="#local-6989586621679115132"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115133"><span class="annot"><a href="#local-6989586621679115133"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- If the Accept header can be matched, returns (Just) a tuple of the</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-comment">-- Content-Type and response (serialization of @a@ into the appropriate</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-comment">-- mimetype).</span><span>
</span><span id="line-178"></span><span>    </span><span id="handleAcceptH"><span class="annot"><a href="Servant.API.ContentTypes.html#handleAcceptH"><span class="hs-identifier hs-type">handleAcceptH</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115132"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier hs-type">AcceptHeader</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115133"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-181"></span><span>         </span><span id="local-6989586621679115143"><span id="local-6989586621679115144"><span id="local-6989586621679115145"><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115143"><span class="hs-identifier hs-type">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115144"><span class="hs-identifier hs-type">cts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-type">AllMimeRender</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115143"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115144"><span class="hs-identifier hs-type">cts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679115145"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTRender"><span class="hs-identifier hs-type">AllCTRender</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115143"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115144"><span class="hs-identifier hs-type">cts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679115145"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621679115398"><span class="annot"><span class="annottext">handleAcceptH :: Proxy (ct : cts)
-&gt; AcceptHeader -&gt; a -&gt; Maybe (ByteString, ByteString)
</span><a href="Servant.API.ContentTypes.html#handleAcceptH"><span class="hs-identifier hs-var hs-var hs-var hs-var">handleAcceptH</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (ct : cts)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier hs-type">AcceptHeader</span></a></span><span> </span><span id="local-6989586621679115399"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115399"><span class="hs-identifier hs-var">accept</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115400"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115400"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(MediaType, (ByteString, ByteString))]
-&gt; ByteString -&gt; Maybe (ByteString, ByteString)
forall b. [(MediaType, b)] -&gt; ByteString -&gt; Maybe b
</span><span class="hs-identifier hs-var">M.mapAcceptMedia</span></span><span> </span><span class="annot"><span class="annottext">[(MediaType, (ByteString, ByteString))]
</span><a href="#local-6989586621679115402"><span class="hs-identifier hs-var">lkup</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115399"><span class="hs-identifier hs-var">accept</span></a></span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679115403"><span class="annot"><span class="annottext">pctyps :: Proxy (ct : cts)
</span><a href="#local-6989586621679115403"><span class="hs-identifier hs-var hs-var">pctyps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (ct : cts)
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115143"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115144"><span class="hs-identifier hs-type">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>            </span><span id="local-6989586621679115405"><span class="annot"><span class="annottext">amrs :: [(MediaType, ByteString)]
</span><a href="#local-6989586621679115405"><span class="hs-identifier hs-var hs-var">amrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (ct : cts) -&gt; a -&gt; [(MediaType, ByteString)]
forall (list :: [*]) a.
AllMimeRender list a =&gt;
Proxy list -&gt; a -&gt; [(MediaType, ByteString)]
</span><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-var">allMimeRender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy (ct : cts)
</span><a href="#local-6989586621679115403"><span class="hs-identifier hs-var">pctyps</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115400"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-185"></span><span>            </span><span id="local-6989586621679115402"><span class="annot"><span class="annottext">lkup :: [(MediaType, (ByteString, ByteString))]
</span><a href="#local-6989586621679115402"><span class="hs-identifier hs-var hs-var">lkup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((MediaType, ByteString) -&gt; (MediaType, (ByteString, ByteString)))
-&gt; [(MediaType, ByteString)]
-&gt; [(MediaType, (ByteString, ByteString))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679115407"><span class="annot"><span class="annottext">MediaType
</span><a href="#local-6989586621679115407"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679115408"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115408"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MediaType
</span><a href="#local-6989586621679115407"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">fromStrict</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MediaType -&gt; ByteString
forall h. RenderHeader h =&gt; h -&gt; ByteString
</span><span class="hs-identifier hs-var">M.renderHeader</span></span><span> </span><span class="annot"><span class="annottext">MediaType
</span><a href="#local-6989586621679115407"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115408"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(MediaType, ByteString)]
</span><a href="#local-6989586621679115405"><span class="hs-identifier hs-var">amrs</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TL.TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TL.Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;No instance for (), use NoContent instead.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTRender"><span class="hs-identifier hs-type">AllCTRender</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>  </span><span id="local-6989586621679115418"><span class="annot"><span class="annottext">handleAcceptH :: Proxy '[] -&gt; AcceptHeader -&gt; () -&gt; Maybe (ByteString, ByteString)
</span><a href="Servant.API.ContentTypes.html#handleAcceptH"><span class="hs-identifier hs-var hs-var hs-var hs-var">handleAcceptH</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy '[]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AcceptHeader
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe (ByteString, ByteString)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unreachable&quot;</span></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-192"></span><span class="annot"><span class="hs-comment">-- * Unrender</span></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-comment">-- | Instantiate this class to register a way of deserializing a type based</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- on the request's @Content-Type@ header.</span><span>
</span><span id="line-196"></span><span class="hs-comment">--</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- &gt;&gt;&gt; import Network.HTTP.Media hiding (Accept)</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- &gt;&gt;&gt; import qualified Data.ByteString.Lazy.Char8 as BSC</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- &gt;&gt;&gt; data MyContentType = MyContentType String</span><span>
</span><span id="line-200"></span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-202"></span><span class="hs-comment">--instance Accept MyContentType where</span><span>
</span><span id="line-203"></span><span class="hs-comment">--    contentType _ = &quot;example&quot; // &quot;prs.me.mine&quot; /: (&quot;charset&quot;, &quot;utf-8&quot;)</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-205"></span><span class="hs-comment">--</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-207"></span><span class="hs-comment">--instance Read a =&gt; MimeUnrender MyContentType a where</span><span>
</span><span id="line-208"></span><span class="hs-comment">--    mimeUnrender _ bs = case BSC.take 12 bs of</span><span>
</span><span id="line-209"></span><span class="hs-comment">--      &quot;MyContentType&quot; -&gt; return . read . BSC.unpack $ BSC.drop 12 bs</span><span>
</span><span id="line-210"></span><span class="hs-comment">--      _ -&gt; Left &quot;didn't start with the magic incantation&quot;</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-212"></span><span class="hs-comment">--</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- &gt;&gt;&gt; type MyAPI = &quot;path&quot; :&gt; ReqBody '[MyContentType] Int :&gt; Get '[JSON] Int</span><span>
</span><span id="line-214"></span><span class="hs-comment">--</span><span>
</span><span id="line-215"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115163"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MimeUnrender"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-var">MimeUnrender</span></a></span></span><span> </span><span id="local-6989586621679115163"><span class="annot"><a href="#local-6989586621679115163"><span class="hs-identifier hs-type">ctype</span></a></span></span><span> </span><span id="local-6989586621679115164"><span class="annot"><a href="#local-6989586621679115164"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>    </span><span id="mimeUnrender"><span class="annot"><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-type">mimeUnrender</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115163"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679115164"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span id="local-6989586621679115423"><span class="annot"><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var">mimeUnrender</span></a></span><span> </span><span id="local-6989586621679115427"><span class="annot"><span class="annottext">Proxy ctype
</span><a href="#local-6989586621679115427"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctype -&gt; MediaType -&gt; ByteString -&gt; Either String a
forall {k} (ctype :: k) a.
MimeUnrender ctype a =&gt;
Proxy ctype -&gt; MediaType -&gt; ByteString -&gt; Either String a
</span><a href="Servant.API.ContentTypes.html#mimeUnrenderWithType"><span class="hs-identifier hs-var">mimeUnrenderWithType</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctype
</span><a href="#local-6989586621679115427"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ctype -&gt; MediaType
forall {k} (ctype :: k). Accept ctype =&gt; Proxy ctype -&gt; MediaType
</span><a href="Servant.API.ContentTypes.html#contentType"><span class="hs-identifier hs-var">contentType</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctype
</span><a href="#local-6989586621679115427"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">-- | Variant which is given the actual 'M.MediaType' provided by the other party.</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-comment">-- In the most cases you don't want to branch based on the 'M.MediaType'.</span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-comment">-- See &lt;https://github.com/haskell-servant/servant/pull/552 pr552&gt; for a motivating example.</span><span>
</span><span id="line-223"></span><span>    </span><span id="mimeUnrenderWithType"><span class="annot"><a href="Servant.API.ContentTypes.html#mimeUnrenderWithType"><span class="hs-identifier hs-type">mimeUnrenderWithType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115163"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.MediaType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679115164"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621679115429"><span class="annot"><a href="Servant.API.ContentTypes.html#mimeUnrenderWithType"><span class="hs-identifier hs-var hs-var">mimeUnrenderWithType</span></a></span><span> </span><span id="local-6989586621679115431"><span class="annot"><span class="annottext">Proxy ctype
</span><a href="#local-6989586621679115431"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">MediaType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctype -&gt; ByteString -&gt; Either String a
forall {k} (ctype :: k) a.
MimeUnrender ctype a =&gt;
Proxy ctype -&gt; ByteString -&gt; Either String a
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var">mimeUnrender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctype
</span><a href="#local-6989586621679115431"><span class="hs-identifier hs-var">p</span></a></span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-pragma">{-# MINIMAL</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-pragma hs-type">mimeUnrender</span></a></span><span> </span><span class="hs-pragma">|</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#mimeUnrenderWithType"><span class="hs-pragma hs-type">mimeUnrenderWithType</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">class</span><span> </span><span id="AllCTUnrender"><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTUnrender"><span class="hs-identifier hs-var">AllCTUnrender</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115166"><span class="annot"><a href="#local-6989586621679115166"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115167"><span class="annot"><a href="#local-6989586621679115167"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>    </span><span id="canHandleCTypeH"><span class="annot"><a href="Servant.API.ContentTypes.html#canHandleCTypeH"><span class="hs-identifier hs-type">canHandleCTypeH</span></a></span></span><span>
</span><span id="line-230"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115166"><span class="hs-identifier hs-type">list</span></a></span><span>
</span><span id="line-231"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>  </span><span class="hs-comment">-- Content-Type header</span><span>
</span><span id="line-232"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679115167"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span>    </span><span id="handleCTypeH"><span class="annot"><a href="Servant.API.ContentTypes.html#handleCTypeH"><span class="hs-identifier hs-type">handleCTypeH</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115166"><span class="hs-identifier hs-type">list</span></a></span><span>
</span><span id="line-235"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>     </span><span class="hs-comment">-- Content-Type header</span><span>
</span><span id="line-236"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>     </span><span class="hs-comment">-- Request body</span><span>
</span><span id="line-237"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679115167"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621679115435"><span class="annot"><a href="Servant.API.ContentTypes.html#handleCTypeH"><span class="hs-identifier hs-var hs-var">handleCTypeH</span></a></span><span> </span><span id="local-6989586621679115439"><span class="annot"><span class="annottext">Proxy list
</span><a href="#local-6989586621679115439"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679115440"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115440"><span class="hs-identifier hs-var">ctypeH</span></a></span></span><span> </span><span id="local-6989586621679115441"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115441"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; Either String a) -&gt; ByteString -&gt; Either String a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115441"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ByteString -&gt; Either String a) -&gt; Either String a)
-&gt; Maybe (ByteString -&gt; Either String a) -&gt; Maybe (Either String a)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">`fmap`</span></span><span> </span><span class="annot"><span class="annottext">Proxy list -&gt; ByteString -&gt; Maybe (ByteString -&gt; Either String a)
forall (list :: [*]) a.
AllCTUnrender list a =&gt;
Proxy list -&gt; ByteString -&gt; Maybe (ByteString -&gt; Either String a)
</span><a href="Servant.API.ContentTypes.html#canHandleCTypeH"><span class="hs-identifier hs-var">canHandleCTypeH</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy list
</span><a href="#local-6989586621679115439"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115440"><span class="hs-identifier hs-var">ctypeH</span></a></span></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115172"><span id="local-6989586621679115173"><span id="local-6989586621679115445"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeUnrender"><span class="hs-identifier hs-type">AllMimeUnrender</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115172"><span class="hs-identifier hs-type">ctyps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115173"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllCTUnrender"><span class="hs-identifier hs-type">AllCTUnrender</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115172"><span class="hs-identifier hs-type">ctyps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115173"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679115452"><span class="annot"><span class="annottext">canHandleCTypeH :: Proxy ctyps -&gt; ByteString -&gt; Maybe (ByteString -&gt; Either String a)
</span><a href="Servant.API.ContentTypes.html#canHandleCTypeH"><span class="hs-identifier hs-var hs-var hs-var hs-var">canHandleCTypeH</span></a></span></span><span> </span><span id="local-6989586621679115453"><span class="annot"><span class="annottext">Proxy ctyps
</span><a href="#local-6989586621679115453"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679115454"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115454"><span class="hs-identifier hs-var">ctypeH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-242"></span><span>        </span><span class="annot"><span class="annottext">[(MediaType, ByteString -&gt; Either String a)]
-&gt; ByteString -&gt; Maybe (ByteString -&gt; Either String a)
forall b. [(MediaType, b)] -&gt; ByteString -&gt; Maybe b
</span><span class="hs-identifier hs-var">M.mapContentMedia</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ctyps -&gt; [(MediaType, ByteString -&gt; Either String a)]
forall (list :: [*]) a.
AllMimeUnrender list a =&gt;
Proxy list -&gt; [(MediaType, ByteString -&gt; Either String a)]
</span><a href="Servant.API.ContentTypes.html#allMimeUnrender"><span class="hs-identifier hs-var">allMimeUnrender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyps
</span><a href="#local-6989586621679115453"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a b. ConvertibleStrings a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">cs</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115454"><span class="hs-identifier hs-var">ctypeH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-245"></span><span class="annot"><span class="hs-comment">-- * Utils (Internal)</span></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">class</span><span> </span><span id="AllMime"><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-var">AllMime</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115179"><span class="annot"><a href="#local-6989586621679115179"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>    </span><span id="allMime"><span class="annot"><a href="Servant.API.ContentTypes.html#allMime"><span class="hs-identifier hs-type">allMime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115179"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">M.MediaType</span></span><span class="hs-special">]</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621679115460"><span class="annot"><span class="annottext">allMime :: Proxy '[] -&gt; [MediaType]
</span><a href="Servant.API.ContentTypes.html#allMime"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMime</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy '[]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115141"><span id="local-6989586621679115142"><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115141"><span class="hs-identifier hs-type">ctyp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115142"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115141"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115142"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621679115466"><span class="annot"><span class="annottext">allMime :: Proxy (ctyp : ctyps) -&gt; [MediaType]
</span><a href="Servant.API.ContentTypes.html#allMime"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMime</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp : ctyps)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty MediaType -&gt; [MediaType]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ctyp -&gt; NonEmpty MediaType
forall {k} (ctype :: k).
Accept ctype =&gt;
Proxy ctype -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var">contentTypes</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115468"><span class="hs-identifier hs-var">pctyp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MediaType] -&gt; [MediaType] -&gt; [MediaType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctyps -&gt; [MediaType]
forall (list :: [*]). AllMime list =&gt; Proxy list -&gt; [MediaType]
</span><a href="Servant.API.ContentTypes.html#allMime"><span class="hs-identifier hs-var">allMime</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyps
</span><a href="#local-6989586621679115469"><span class="hs-identifier hs-var">pctyps</span></a></span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>        </span><span id="local-6989586621679115468"><span class="annot"><span class="annottext">pctyp :: Proxy ctyp
</span><a href="#local-6989586621679115468"><span class="hs-identifier hs-var hs-var">pctyp</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115141"><span class="hs-identifier hs-type">ctyp</span></a></span><span>
</span><span id="line-257"></span><span>        </span><span id="local-6989586621679115469"><span class="annot"><span class="annottext">pctyps :: Proxy ctyps
</span><a href="#local-6989586621679115469"><span class="hs-identifier hs-var hs-var">pctyps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyps
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115142"><span class="hs-identifier hs-type">ctyps</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span id="local-6989586621679115184"><span class="annot"><a href="Servant.API.ContentTypes.html#canHandleAcceptH"><span class="hs-identifier hs-type">canHandleAcceptH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115184"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115184"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier hs-type">AcceptHeader</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-260"></span><span id="canHandleAcceptH"><span class="annot"><span class="annottext">canHandleAcceptH :: forall (list :: [*]).
AllMime list =&gt;
Proxy list -&gt; AcceptHeader -&gt; Bool
</span><a href="Servant.API.ContentTypes.html#canHandleAcceptH"><span class="hs-identifier hs-var hs-var">canHandleAcceptH</span></a></span></span><span> </span><span id="local-6989586621679115474"><span class="annot"><span class="annottext">Proxy list
</span><a href="#local-6989586621679115474"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#AcceptHeader"><span class="hs-identifier hs-type">AcceptHeader</span></a></span><span> </span><span id="local-6989586621679115475"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115475"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MediaType -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe MediaType -&gt; Bool) -&gt; Maybe MediaType -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[MediaType] -&gt; ByteString -&gt; Maybe MediaType
forall a. Accept a =&gt; [a] -&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">M.matchAccept</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy list -&gt; [MediaType]
forall (list :: [*]). AllMime list =&gt; Proxy list -&gt; [MediaType]
</span><a href="Servant.API.ContentTypes.html#allMime"><span class="hs-identifier hs-var">allMime</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy list
</span><a href="#local-6989586621679115474"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115475"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- Check that all elements of list are instances of MimeRender</span><span>
</span><span id="line-264"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-265"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115150"><span class="hs-identifier hs-type">list</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="AllMimeRender"><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-var">AllMimeRender</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115150"><span class="annot"><a href="#local-6989586621679115150"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115151"><span class="annot"><a href="#local-6989586621679115151"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>    </span><span id="allMimeRender"><span class="annot"><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-type">allMimeRender</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115150"><span class="hs-identifier hs-type">list</span></a></span><span>
</span><span id="line-267"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115151"><span class="hs-identifier hs-type">a</span></a></span><span>                              </span><span class="hs-comment">-- value to serialize</span><span>
</span><span id="line-268"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.MediaType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- content-types/response pairs</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679115191"><span id="local-6989586621679115192"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115191"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115192"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-type">AllMimeRender</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679115191"><span class="hs-identifier hs-type">ctyp</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679115192"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621679115488"><span class="annot"><span class="annottext">allMimeRender :: Proxy '[ctyp] -&gt; a -&gt; [(MediaType, ByteString)]
</span><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy '[ctyp]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679115489"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115489"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MediaType -&gt; (MediaType, ByteString))
-&gt; [MediaType] -&gt; [(MediaType, ByteString)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115490"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MediaType] -&gt; [(MediaType, ByteString)])
-&gt; [MediaType] -&gt; [(MediaType, ByteString)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty MediaType -&gt; [MediaType]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty MediaType -&gt; [MediaType])
-&gt; NonEmpty MediaType -&gt; [MediaType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; NonEmpty MediaType
forall {k} (ctype :: k).
Accept ctype =&gt;
Proxy ctype -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var">contentTypes</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115491"><span class="hs-identifier hs-var">pctyp</span></a></span><span>
</span><span id="line-272"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-273"></span><span>        </span><span id="local-6989586621679115490"><span class="annot"><span class="annottext">bs :: ByteString
</span><a href="#local-6989586621679115490"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; a -&gt; ByteString
forall {k} (ctype :: k) a.
MimeRender ctype a =&gt;
Proxy ctype -&gt; a -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var">mimeRender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115491"><span class="hs-identifier hs-var">pctyp</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115489"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-274"></span><span>        </span><span id="local-6989586621679115491"><span class="annot"><span class="annottext">pctyp :: Proxy ctyp
</span><a href="#local-6989586621679115491"><span class="hs-identifier hs-var hs-var">pctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115191"><span class="hs-identifier hs-type">ctyp</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-277"></span><span>         </span><span id="local-6989586621679115197"><span id="local-6989586621679115198"><span id="local-6989586621679115199"><span id="local-6989586621679115200"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115197"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115198"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-278"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-type">AllMimeRender</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115199"><span class="hs-identifier hs-type">ctyp'</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115200"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679115198"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-279"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-type">AllMimeRender</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115197"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115199"><span class="hs-identifier hs-type">ctyp'</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115200"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679115198"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>    </span><span id="local-6989586621679115503"><span class="annot"><span class="annottext">allMimeRender :: Proxy (ctyp : ctyp' : ctyps) -&gt; a -&gt; [(MediaType, ByteString)]
</span><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp : ctyp' : ctyps)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679115504"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115504"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>        </span><span class="annot"><span class="annottext">(MediaType -&gt; (MediaType, ByteString))
-&gt; [MediaType] -&gt; [(MediaType, ByteString)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115505"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty MediaType -&gt; [MediaType]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty MediaType -&gt; [MediaType])
-&gt; NonEmpty MediaType -&gt; [MediaType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; NonEmpty MediaType
forall {k} (ctype :: k).
Accept ctype =&gt;
Proxy ctype -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var">contentTypes</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115506"><span class="hs-identifier hs-var">pctyp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="annottext">[(MediaType, ByteString)]
-&gt; [(MediaType, ByteString)] -&gt; [(MediaType, ByteString)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp' : ctyps) -&gt; a -&gt; [(MediaType, ByteString)]
forall (list :: [*]) a.
AllMimeRender list a =&gt;
Proxy list -&gt; a -&gt; [(MediaType, ByteString)]
</span><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-var">allMimeRender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp' : ctyps)
</span><a href="#local-6989586621679115507"><span class="hs-identifier hs-var">pctyps</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115504"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-283"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-284"></span><span>        </span><span id="local-6989586621679115505"><span class="annot"><span class="annottext">bs :: ByteString
</span><a href="#local-6989586621679115505"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; a -&gt; ByteString
forall {k} (ctype :: k) a.
MimeRender ctype a =&gt;
Proxy ctype -&gt; a -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var">mimeRender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115506"><span class="hs-identifier hs-var">pctyp</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679115504"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-285"></span><span>        </span><span id="local-6989586621679115506"><span class="annot"><span class="annottext">pctyp :: Proxy ctyp
</span><a href="#local-6989586621679115506"><span class="hs-identifier hs-var hs-var">pctyp</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115197"><span class="hs-identifier hs-type">ctyp</span></a></span><span>
</span><span id="line-286"></span><span>        </span><span id="local-6989586621679115507"><span class="annot"><span class="annottext">pctyps :: Proxy (ctyp' : ctyps)
</span><a href="#local-6989586621679115507"><span class="hs-identifier hs-var hs-var">pctyps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp' : ctyps)
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115199"><span class="hs-identifier hs-type">ctyp'</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115200"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-comment">-- Ideally we would like to declare a 'MimeRender a NoContent' instance, and</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- then this would be taken care of. However there is no more specific instance</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- between that and 'MimeRender JSON a', so we do this instead</span><span>
</span><span id="line-292"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679115203"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#Accept"><span class="hs-identifier hs-type">Accept</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115203"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-type">AllMimeRender</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679115203"><span class="hs-identifier hs-type">ctyp</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier hs-type">NoContent</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621679115517"><span class="annot"><span class="annottext">allMimeRender :: Proxy '[ctyp] -&gt; NoContent -&gt; [(MediaType, ByteString)]
</span><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy '[ctyp]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">NoContent
</span><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier hs-var">NoContent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MediaType -&gt; (MediaType, ByteString))
-&gt; [MediaType] -&gt; [(MediaType, ByteString)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MediaType] -&gt; [(MediaType, ByteString)])
-&gt; [MediaType] -&gt; [(MediaType, ByteString)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty MediaType -&gt; [MediaType]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty MediaType -&gt; [MediaType])
-&gt; NonEmpty MediaType -&gt; [MediaType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; NonEmpty MediaType
forall {k} (ctype :: k).
Accept ctype =&gt;
Proxy ctype -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var">contentTypes</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115519"><span class="hs-identifier hs-var">pctyp</span></a></span><span>
</span><span id="line-294"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-295"></span><span>        </span><span id="local-6989586621679115519"><span class="annot"><span class="annottext">pctyp :: Proxy ctyp
</span><a href="#local-6989586621679115519"><span class="hs-identifier hs-var hs-var">pctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115203"><span class="hs-identifier hs-type">ctyp</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-298"></span><span>         </span><span id="local-6989586621679115207"><span id="local-6989586621679115208"><span id="local-6989586621679115209"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115207"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115208"><span class="hs-identifier hs-type">ctyp'</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115209"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeRender"><span class="hs-identifier hs-type">AllMimeRender</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115207"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115208"><span class="hs-identifier hs-type">ctyp'</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115209"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier hs-type">NoContent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621679115527"><span class="annot"><span class="annottext">allMimeRender :: Proxy (ctyp : ctyp' : ctyps)
-&gt; NoContent -&gt; [(MediaType, ByteString)]
</span><a href="Servant.API.ContentTypes.html#allMimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMimeRender</span></a></span></span><span> </span><span id="local-6989586621679115528"><span class="annot"><span class="annottext">Proxy (ctyp : ctyp' : ctyps)
</span><a href="#local-6989586621679115528"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">NoContent
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MediaType] -&gt; [ByteString] -&gt; [(MediaType, ByteString)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (ctyp : ctyp' : ctyps) -&gt; [MediaType]
forall (list :: [*]). AllMime list =&gt; Proxy list -&gt; [MediaType]
</span><a href="Servant.API.ContentTypes.html#allMime"><span class="hs-identifier hs-var">allMime</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp : ctyp' : ctyps)
</span><a href="#local-6989586621679115528"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; [ByteString]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-303"></span><span class="hs-comment">-- Check that all elements of list are instances of MimeUnrender</span><span>
</span><span id="line-304"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-305"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMime"><span class="hs-identifier hs-type">AllMime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115175"><span class="hs-identifier hs-type">list</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="AllMimeUnrender"><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeUnrender"><span class="hs-identifier hs-var">AllMimeUnrender</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115175"><span class="annot"><a href="#local-6989586621679115175"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115176"><span class="annot"><a href="#local-6989586621679115176"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-306"></span><span>    </span><span id="allMimeUnrender"><span class="annot"><a href="Servant.API.ContentTypes.html#allMimeUnrender"><span class="hs-identifier hs-type">allMimeUnrender</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115175"><span class="hs-identifier hs-type">list</span></a></span><span>
</span><span id="line-307"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.MediaType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679115176"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115214"><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeUnrender"><span class="hs-identifier hs-type">AllMimeUnrender</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679115214"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>    </span><span id="local-6989586621679115536"><span class="annot"><span class="annottext">allMimeUnrender :: Proxy '[] -&gt; [(MediaType, ByteString -&gt; Either String a)]
</span><a href="Servant.API.ContentTypes.html#allMimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy '[]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115218"><span id="local-6989586621679115219"><span id="local-6989586621679115220"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115218"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115219"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-313"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeUnrender"><span class="hs-identifier hs-type">AllMimeUnrender</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115220"><span class="hs-identifier hs-type">ctyps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115219"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-314"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#AllMimeUnrender"><span class="hs-identifier hs-type">AllMimeUnrender</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679115218"><span class="hs-identifier hs-type">ctyp</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679115220"><span class="hs-identifier hs-type">ctyps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679115219"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621679115548"><span class="annot"><span class="annottext">allMimeUnrender :: Proxy (ctyp : ctyps)
-&gt; [(MediaType, ByteString -&gt; Either String a)]
</span><a href="Servant.API.ContentTypes.html#allMimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">allMimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (ctyp : ctyps)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>        </span><span class="annot"><span class="annottext">(MediaType -&gt; (MediaType, ByteString -&gt; Either String a))
-&gt; [MediaType] -&gt; [(MediaType, ByteString -&gt; Either String a)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">MediaType -&gt; (MediaType, ByteString -&gt; Either String a)
</span><a href="#local-6989586621679115549"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty MediaType -&gt; [MediaType]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty MediaType -&gt; [MediaType])
-&gt; NonEmpty MediaType -&gt; [MediaType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; NonEmpty MediaType
forall {k} (ctype :: k).
Accept ctype =&gt;
Proxy ctype -&gt; NonEmpty MediaType
</span><a href="Servant.API.ContentTypes.html#contentTypes"><span class="hs-identifier hs-var">contentTypes</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115550"><span class="hs-identifier hs-var">pctyp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>        </span><span class="annot"><span class="annottext">[(MediaType, ByteString -&gt; Either String a)]
-&gt; [(MediaType, ByteString -&gt; Either String a)]
-&gt; [(MediaType, ByteString -&gt; Either String a)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Proxy ctyps -&gt; [(MediaType, ByteString -&gt; Either String a)]
forall (list :: [*]) a.
AllMimeUnrender list a =&gt;
Proxy list -&gt; [(MediaType, ByteString -&gt; Either String a)]
</span><a href="Servant.API.ContentTypes.html#allMimeUnrender"><span class="hs-identifier hs-var">allMimeUnrender</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyps
</span><a href="#local-6989586621679115551"><span class="hs-identifier hs-var">pctyps</span></a></span><span>
</span><span id="line-318"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-319"></span><span>        </span><span id="local-6989586621679115549"><span class="annot"><span class="annottext">mk :: MediaType -&gt; (MediaType, ByteString -&gt; Either String a)
</span><a href="#local-6989586621679115549"><span class="hs-identifier hs-var hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621679115552"><span class="annot"><span class="annottext">MediaType
</span><a href="#local-6989586621679115552"><span class="hs-identifier hs-var">ct</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MediaType
</span><a href="#local-6989586621679115552"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp -&gt; MediaType -&gt; ByteString -&gt; Either String a
forall {k} (ctype :: k) a.
MimeUnrender ctype a =&gt;
Proxy ctype -&gt; MediaType -&gt; ByteString -&gt; Either String a
</span><a href="Servant.API.ContentTypes.html#mimeUnrenderWithType"><span class="hs-identifier hs-var">mimeUnrenderWithType</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
</span><a href="#local-6989586621679115550"><span class="hs-identifier hs-var">pctyp</span></a></span><span> </span><span class="annot"><span class="annottext">MediaType
</span><a href="#local-6989586621679115552"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>        </span><span id="local-6989586621679115550"><span class="annot"><span class="annottext">pctyp :: Proxy ctyp
</span><a href="#local-6989586621679115550"><span class="hs-identifier hs-var hs-var">pctyp</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyp
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115218"><span class="hs-identifier hs-type">ctyp</span></a></span><span>
</span><span id="line-321"></span><span>        </span><span id="local-6989586621679115551"><span class="annot"><span class="annottext">pctyps :: Proxy ctyps
</span><a href="#local-6989586621679115551"><span class="hs-identifier hs-var hs-var">pctyps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ctyps
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679115220"><span class="hs-identifier hs-type">ctyps</span></a></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-324"></span><span class="annot"><span class="hs-comment">-- * MimeRender Instances</span></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="annot"><span class="hs-comment">-- | `encode`</span></span><span>
</span><span id="line-327"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-328"></span><span>         </span><span id="local-6989586621679115223"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679115223"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#JSON"><span class="hs-identifier hs-type">JSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115223"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>    </span><span id="local-6989586621679115560"><span class="annot"><span class="annottext">mimeRender :: Proxy JSON -&gt; a -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy JSON
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">encode</span></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">-- | @urlEncodeAsForm@</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- Note that the @mimeUnrender p (mimeRender p x) == Right x@ law only</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- holds if every element of x is non-null (i.e., not @(&quot;&quot;, &quot;&quot;)@)</span><span>
</span><span id="line-334"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-335"></span><span>         </span><span id="local-6989586621679115227"><span class="annot"><span class="hs-identifier hs-type">ToForm</span></span><span> </span><span class="annot"><a href="#local-6989586621679115227"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#FormUrlEncoded"><span class="hs-identifier hs-type">FormUrlEncoded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115227"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621679115567"><span class="annot"><span class="annottext">mimeRender :: Proxy FormUrlEncoded -&gt; a -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy FormUrlEncoded
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; ByteString
forall a. ToForm a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">urlEncodeAsForm</span></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="annot"><span class="hs-comment">-- | `TextL.encodeUtf8`</span></span><span>
</span><span id="line-339"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TextL.Text</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621679115573"><span class="annot"><span class="annottext">mimeRender :: Proxy PlainText -&gt; Text -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TextL.encodeUtf8</span></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="annot"><span class="hs-comment">-- | @fromStrict . TextS.encodeUtf8@</span></span><span>
</span><span id="line-343"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TextS.Text</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621679115578"><span class="annot"><span class="annottext">mimeRender :: Proxy PlainText -&gt; Text -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">fromStrict</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; (Text -&gt; ByteString) -&gt; Text -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TextS.encodeUtf8</span></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="annot"><span class="hs-comment">-- | @BC.pack@</span></span><span>
</span><span id="line-347"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-348"></span><span>    </span><span id="local-6989586621679115584"><span class="annot"><span class="annottext">mimeRender :: Proxy PlainText -&gt; String -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TextL.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; (String -&gt; Text) -&gt; String -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">TextL.pack</span></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="annot"><span class="hs-comment">-- | @id@</span></span><span>
</span><span id="line-351"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier hs-type">OctetStream</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-352"></span><span>    </span><span id="local-6989586621679115590"><span class="annot"><span class="annottext">mimeRender :: Proxy OctetStream -&gt; ByteString -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy OctetStream
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="annot"><span class="hs-comment">-- | `fromStrict`</span></span><span>
</span><span id="line-355"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeRender"><span class="hs-identifier hs-type">MimeRender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier hs-type">OctetStream</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621679115596"><span class="annot"><span class="annottext">mimeRender :: Proxy OctetStream -&gt; ByteString -&gt; ByteString
</span><a href="Servant.API.ContentTypes.html#mimeRender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeRender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy OctetStream
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">fromStrict</span></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="annot"><span class="hs-comment">-- | A type for responses without content-body.</span></span><span>
</span><span id="line-359"></span><span class="hs-keyword">data</span><span> </span><span id="NoContent"><span class="annot"><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier hs-var">NoContent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoContent"><span class="annot"><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier hs-var">NoContent</span></a></span></span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115598"><span id="local-6989586621679115600"><span id="local-6989586621679115604"><span class="annot"><span class="annottext">Int -&gt; NoContent -&gt; ShowS
[NoContent] -&gt; ShowS
NoContent -&gt; String
(Int -&gt; NoContent -&gt; ShowS)
-&gt; (NoContent -&gt; String)
-&gt; ([NoContent] -&gt; ShowS)
-&gt; Show NoContent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NoContent -&gt; ShowS
showsPrec :: Int -&gt; NoContent -&gt; ShowS
$cshow :: NoContent -&gt; String
show :: NoContent -&gt; String
$cshowList :: [NoContent] -&gt; ShowS
showList :: [NoContent] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115607"><span id="local-6989586621679115609"><span class="annot"><span class="annottext">NoContent -&gt; NoContent -&gt; Bool
(NoContent -&gt; NoContent -&gt; Bool)
-&gt; (NoContent -&gt; NoContent -&gt; Bool) -&gt; Eq NoContent
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: NoContent -&gt; NoContent -&gt; Bool
== :: NoContent -&gt; NoContent -&gt; Bool
$c/= :: NoContent -&gt; NoContent -&gt; Bool
/= :: NoContent -&gt; NoContent -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115613"><span id="local-6989586621679115617"><span id="local-6989586621679115620"><span id="local-6989586621679115624"><span class="annot"><span class="annottext">ReadPrec [NoContent]
ReadPrec NoContent
Int -&gt; ReadS NoContent
ReadS [NoContent]
(Int -&gt; ReadS NoContent)
-&gt; ReadS [NoContent]
-&gt; ReadPrec NoContent
-&gt; ReadPrec [NoContent]
-&gt; Read NoContent
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS NoContent
readsPrec :: Int -&gt; ReadS NoContent
$creadList :: ReadS [NoContent]
readList :: ReadS [NoContent]
$creadPrec :: ReadPrec NoContent
readPrec :: ReadPrec NoContent
$creadListPrec :: ReadPrec [NoContent]
readListPrec :: ReadPrec [NoContent]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115627"><span id="local-6989586621679115629"><span class="annot"><span class="annottext">(forall x. NoContent -&gt; Rep NoContent x)
-&gt; (forall x. Rep NoContent x -&gt; NoContent) -&gt; Generic NoContent
forall x. Rep NoContent x -&gt; NoContent
forall x. NoContent -&gt; Rep NoContent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. NoContent -&gt; Rep NoContent x
from :: forall x. NoContent -&gt; Rep NoContent x
$cto :: forall x. Rep NoContent x -&gt; NoContent
to :: forall x. Rep NoContent x -&gt; NoContent
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115632"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#NoContent"><span class="hs-identifier hs-type">NoContent</span></a></span></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-comment">--------------------------------------------------------------------------</span><span>
</span><span id="line-366"></span><span class="annot"><span class="hs-comment">-- * MimeUnrender Instances</span></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-comment">-- | Deprecated: since aeson version 0.9 `eitherDecode` has lenient behavior.</span><span>
</span><span id="line-369"></span><span class="hs-comment">--</span><span>
</span><span id="line-370"></span><span id="local-6989586621679115242"><span class="annot"><a href="Servant.API.ContentTypes.html#eitherDecodeLenient"><span class="hs-identifier hs-type">eitherDecodeLenient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679115242"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679115242"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-371"></span><span id="eitherDecodeLenient"><span class="annot"><span class="annottext">eitherDecodeLenient :: forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><a href="Servant.API.ContentTypes.html#eitherDecodeLenient"><span class="hs-identifier hs-var hs-var">eitherDecodeLenient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String a
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">eitherDecode</span></span><span>
</span><span id="line-372"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">eitherDecodeLenient</span><span> </span><span class="hs-pragma">&quot;use eitherDecode instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="annot"><span class="hs-comment">-- | `eitherDecode`</span></span><span>
</span><span id="line-375"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115246"><span id="local-6989586621679115650"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679115246"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#JSON"><span class="hs-identifier hs-type">JSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115246"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>    </span><span id="local-6989586621679115655"><span class="annot"><span class="annottext">mimeUnrender :: Proxy JSON -&gt; ByteString -&gt; Either String a
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy JSON
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String a
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">eitherDecode</span></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-comment">-- | @urlDecodeAsForm@</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- Note that the @mimeUnrender p (mimeRender p x) == Right x@ law only</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- holds if every element of x is non-null (i.e., not @(&quot;&quot;, &quot;&quot;)@)</span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115249"><span id="local-6989586621679115661"><span class="annot"><span class="hs-identifier hs-type">FromForm</span></span><span> </span><span class="annot"><a href="#local-6989586621679115249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#FormUrlEncoded"><span class="hs-identifier hs-type">FormUrlEncoded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115249"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621679115667"><span class="annot"><span class="annottext">mimeUnrender :: Proxy FormUrlEncoded -&gt; ByteString -&gt; Either String a
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy FormUrlEncoded
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String) -&gt; Either Text a -&gt; Either String a
forall b c d. (b -&gt; c) -&gt; Either b d -&gt; Either c d
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><span class="hs-identifier hs-var">left</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">TextS.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Either Text a -&gt; Either String a)
-&gt; (ByteString -&gt; Either Text a) -&gt; ByteString -&gt; Either String a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either Text a
forall a. FromForm a =&gt; ByteString -&gt; Either Text a
</span><span class="hs-identifier hs-var">urlDecodeAsForm</span></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="annot"><span class="hs-comment">-- | @left show . TextL.decodeUtf8'@</span></span><span>
</span><span id="line-385"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115673"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TextL.Text</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621679115679"><span class="annot"><span class="annottext">mimeUnrender :: Proxy PlainText -&gt; ByteString -&gt; Either String Text
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UnicodeException -&gt; String)
-&gt; Either UnicodeException Text -&gt; Either String Text
forall b c d. (b -&gt; c) -&gt; Either b d -&gt; Either c d
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><span class="hs-identifier hs-var">left</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Either UnicodeException Text -&gt; Either String Text)
-&gt; (ByteString -&gt; Either UnicodeException Text)
-&gt; ByteString
-&gt; Either String Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">TextL.decodeUtf8'</span></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="annot"><span class="hs-comment">-- | @left show . TextS.decodeUtf8' . toStrict@</span></span><span>
</span><span id="line-389"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115686"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TextS.Text</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-390"></span><span>    </span><span id="local-6989586621679115691"><span class="annot"><span class="annottext">mimeUnrender :: Proxy PlainText -&gt; ByteString -&gt; Either String Text
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UnicodeException -&gt; String)
-&gt; Either UnicodeException Text -&gt; Either String Text
forall b c d. (b -&gt; c) -&gt; Either b d -&gt; Either c d
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><span class="hs-identifier hs-var">left</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Either UnicodeException Text -&gt; Either String Text)
-&gt; (ByteString -&gt; Either UnicodeException Text)
-&gt; ByteString
-&gt; Either String Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">TextS.decodeUtf8'</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either UnicodeException Text)
-&gt; (ByteString -&gt; ByteString)
-&gt; ByteString
-&gt; Either UnicodeException Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">toStrict</span></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><span class="hs-comment">-- | @Right . BC.unpack@</span></span><span>
</span><span id="line-393"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115697"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#PlainText"><span class="hs-identifier hs-type">PlainText</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-394"></span><span>    </span><span id="local-6989586621679115703"><span class="annot"><span class="annottext">mimeUnrender :: Proxy PlainText -&gt; ByteString -&gt; Either String String
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy PlainText
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UnicodeException -&gt; String)
-&gt; (Text -&gt; String)
-&gt; Either UnicodeException Text
-&gt; Either String String
forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; Either a c -&gt; Either b d
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">TextL.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Either UnicodeException Text -&gt; Either String String)
-&gt; (ByteString -&gt; Either UnicodeException Text)
-&gt; ByteString
-&gt; Either String String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">TextL.decodeUtf8'</span></span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span class="annot"><span class="hs-comment">-- | @Right . id@</span></span><span>
</span><span id="line-397"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115709"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier hs-type">OctetStream</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-398"></span><span>    </span><span id="local-6989586621679115712"><span class="annot"><span class="annottext">mimeUnrender :: Proxy OctetStream -&gt; ByteString -&gt; Either String ByteString
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy OctetStream
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String ByteString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String ByteString)
-&gt; (ByteString -&gt; ByteString)
-&gt; ByteString
-&gt; Either String ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="annot"><span class="hs-comment">-- | @Right . toStrict@</span></span><span>
</span><span id="line-401"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115717"><span class="annot"><a href="Servant.API.ContentTypes.html#MimeUnrender"><span class="hs-identifier hs-type">MimeUnrender</span></a></span><span> </span><span class="annot"><a href="Servant.API.ContentTypes.html#OctetStream"><span class="hs-identifier hs-type">OctetStream</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-402"></span><span>    </span><span id="local-6989586621679115720"><span class="annot"><span class="annottext">mimeUnrender :: Proxy OctetStream -&gt; ByteString -&gt; Either String ByteString
</span><a href="Servant.API.ContentTypes.html#mimeUnrender"><span class="hs-identifier hs-var hs-var hs-var hs-var">mimeUnrender</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy OctetStream
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String ByteString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String ByteString)
-&gt; (ByteString -&gt; ByteString)
-&gt; ByteString
-&gt; Either String ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">toStrict</span></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XFlexibleInstances</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XMultiParamTypeClasses</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XOverloadedStrings</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- &gt;&gt;&gt; import Servant.API</span><span>
</span><span id="line-410"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Aeson</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Text</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- &gt;&gt;&gt; data Book</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- &gt;&gt;&gt; instance ToJSON Book where { toJSON = undefined }</span><span>
</span><span id="line-414"></span></pre></body></html>