<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Servant.API.TypeLevel</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">servant-0.20.1: A family of combinators for defining webservices APIs</span><ul class="links" id="page-menu"><li><a href="src/Servant.API.TypeLevel.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Servant.API.TypeLevel</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Lax inclusion</a></li><li><a href="#g:2">Strict inclusion</a></li><li><a href="#g:3">Helpers</a><ul><li><a href="#g:4">Lists</a></li><li><a href="#g:5">Logic</a></li><li><a href="#g:6">Fragment</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module collects utilities for manipulating <code>servant</code> API types. The
functionality in this module is for advanced usage.</p><p>The code samples in this module use the following type synonym:</p><pre>type SampleAPI = &quot;hello&quot; :&gt; Get '[JSON] Int
            :&lt;|&gt; &quot;bye&quot; :&gt; Capture &quot;name&quot; String :&gt; Post '[JSON, PlainText] Bool</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type family</span> <a href="#t:Endpoints">Endpoints</a> api <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsElem-39-">IsElem'</a> a s :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsElem">IsElem</a> endpoint api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsSubAPI">IsSubAPI</a> sub api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:AllIsElem">AllIsElem</a> xs api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsIn">IsIn</a> (endpoint :: *) (api :: *) :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsStrictSubAPI">IsStrictSubAPI</a> sub api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:AllIsIn">AllIsIn</a> xs api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:MapSub">MapSub</a> e xs <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:AppendList">AppendList</a> xs ys <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsSubList">IsSubList</a> a b :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type</span> <a href="#t:Elem">Elem</a> e es = <a href="Servant-API-TypeLevel.html#t:ElemGo" title="Servant.API.TypeLevel">ElemGo</a> e es es</li><li class="src short"><span class="keyword">type family</span> <a href="#t:ElemGo">ElemGo</a> e es orig :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:Or">Or</a> (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) (b :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:And">And</a> (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) (b :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:FragmentUnique">FragmentUnique</a> api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> api =&gt; <a href="#t:AtLeastOneFragment">AtLeastOneFragment</a> api</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="doc"><p>The doctests in this module are run with following preamble:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XPolyKinds
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XGADTs
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XTypeSynonymInstances -XFlexibleInstances
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Proxy
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Type.Equality
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Servant.API
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data OK ctx where OK :: ctx =&gt; OK ctx
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance Show (OK ctx) where show _ = &quot;OK&quot;
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let ok :: ctx =&gt; Proxy ctx -&gt; OK ctx; ok _ = OK
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type SampleAPI = &quot;hello&quot; :&gt; Get '[JSON] Int :&lt;|&gt; &quot;bye&quot; :&gt; Capture &quot;name&quot; String :&gt; Post '[JSON, PlainText] Bool
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type FailAPI = Fragment Bool :&gt; Fragment Int :&gt; Get '[JSON] NoContent
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let sampleAPI = Proxy :: Proxy SampleAPI
</code></strong></pre></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Endpoints" class="def">Endpoints</a> api <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#Endpoints" class="link">Source</a> <a href="#t:Endpoints" class="selflink">#</a></p><div class="doc"><p>Flatten API into a list of endpoints.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Refl :: Endpoints SampleAPI :~: '[&quot;hello&quot; :&gt; Verb 'GET 200 '[JSON] Int, &quot;bye&quot; :&gt; (Capture &quot;name&quot; String :&gt; Verb 'POST 200 '[JSON, PlainText] Bool)]
</code></strong>Refl
</pre></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> (a <a href="Servant-API.html#t::-60--124--62-" title="Servant.API">:&lt;|&gt;</a> b) = <a href="Servant-API-TypeLevel.html#t:AppendList" title="Servant.API.TypeLevel">AppendList</a> (<a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> a) (<a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> b)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> (e <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> a) = <a href="Servant-API-TypeLevel.html#t:MapSub" title="Servant.API.TypeLevel">MapSub</a> e (<a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> a = '[a]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:1" id="g:1"><h2>Lax inclusion</h2></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsElem-39-" class="def">IsElem'</a> a s :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <a href="src/Servant.API.TypeLevel.html#IsElem%27" class="link">Source</a> <a href="#t:IsElem-39-" class="selflink">#</a></p><div class="doc"><p>You may use this type family to tell the type checker that your custom
 type may be skipped as part of a link. This is useful for things like
 <code><code><a href="Servant-API.html#t:QueryParam" title="Servant.API">QueryParam</a></code></code> that are optional in a URI and do not affect them if they are
 omitted.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data CustomThing
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type instance IsElem' e (CustomThing :&gt; s) = IsElem e s
</code></strong></pre><p>Note that <code><code><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a></code></code> is called, which will mutually recurse back to <code><code><a href="Servant-API-TypeLevel.html#t:IsElem-39-" title="Servant.API.TypeLevel">IsElem'</a></code></code>
 if it exhausts all other options again.</p><p>Once you have written a <code>HasLink</code> instance for <code>CustomThing</code> you are ready to go.</p></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsElem" class="def">IsElem</a> endpoint api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#IsElem" class="link">Source</a> <a href="#t:IsElem" class="selflink">#</a></p><div class="doc"><p>Closed type family, check if <code>endpoint</code> is within <code>api</code>.
 Uses <code><code><a href="Servant-API-TypeLevel.html#t:IsElem-39-" title="Servant.API.TypeLevel">IsElem'</a></code></code> if it exhausts all other options.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (&quot;hello&quot; :&gt; Get '[JSON] Int) SampleAPI))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (&quot;bye&quot; :&gt; Get '[JSON] Int) SampleAPI))
</code></strong>...
... Could not ...
...
</pre><p>An endpoint is considered within an api even if it is missing combinators
 that don't affect the URL:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (Get '[JSON] Int) (Header &quot;h&quot; Bool :&gt; Get '[JSON] Int)))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (Get '[JSON] Int) (ReqBody '[JSON] Bool :&gt; Get '[JSON] Int)))
</code></strong>OK
</pre><ul><li>N.B.:* <code>IsElem a b</code> can be seen as capturing the notion of whether the URL
 represented by <code>a</code> would match the URL represented by <code>b</code>, *not* whether a
 request represented by <code>a</code> matches the endpoints serving <code>b</code> (for the
 latter, use <code><a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a></code>).</li></ul></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> e (sa <a href="Servant-API.html#t::-60--124--62-" title="Servant.API">:&lt;|&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:Or" title="Servant.API.TypeLevel">Or</a> (<a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> e sa) (<a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> e sb)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> (e <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa) (e <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa (<a href="Servant-API.html#t:Header" title="Servant.API">Header</a> sym x <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa (<a href="Servant-API.html#t:ReqBody" title="Servant.API">ReqBody</a> y x <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> (<a href="Servant-API.html#t:CaptureAll" title="Servant.API">CaptureAll</a> z y <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa) (<a href="Servant-API.html#t:CaptureAll" title="Servant.API">CaptureAll</a> x y <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> (<a href="Servant-API.html#t:Capture" title="Servant.API">Capture</a> z y <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa) (<a href="Servant-API.html#t:Capture" title="Servant.API">Capture</a> x y <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa (<a href="Servant-API.html#t:QueryParam" title="Servant.API">QueryParam</a> x y <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa (<a href="Servant-API.html#t:QueryParams" title="Servant.API">QueryParams</a> x y <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa (<a href="Servant-API.html#t:QueryFlag" title="Servant.API">QueryFlag</a> x <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa (<a href="Servant-API.html#t:Fragment" title="Servant.API">Fragment</a> x <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> (<a href="Servant-API-Verbs.html#t:Verb" title="Servant.API.Verbs">Verb</a> m s ct typ) (<a href="Servant-API-Verbs.html#t:Verb" title="Servant.API.Verbs">Verb</a> m s ct' typ) = <a href="Servant-API-TypeLevel.html#t:IsSubList" title="Servant.API.TypeLevel">IsSubList</a> ct ct'</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> e e = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> e a = <a href="Servant-API-TypeLevel.html#t:IsElem-39-" title="Servant.API.TypeLevel">IsElem'</a> e a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsSubAPI" class="def">IsSubAPI</a> sub api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#IsSubAPI" class="link">Source</a> <a href="#t:IsSubAPI" class="selflink">#</a></p><div class="doc"><p>Check whether <code>sub</code> is a sub-API of <code>api</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsSubAPI SampleAPI (SampleAPI :&lt;|&gt; Get '[JSON] Int)))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsSubAPI (SampleAPI :&lt;|&gt; Get '[JSON] Int) SampleAPI))
</code></strong>...
... Could not ...
...
</pre><p>This uses <code>IsElem</code> for checking; thus the note there applies here.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsSubAPI" title="Servant.API.TypeLevel">IsSubAPI</a> sub api = <a href="Servant-API-TypeLevel.html#t:AllIsElem" title="Servant.API.TypeLevel">AllIsElem</a> (<a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> sub) api</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:AllIsElem" class="def">AllIsElem</a> xs api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#AllIsElem" class="link">Source</a> <a href="#t:AllIsElem" class="selflink">#</a></p><div class="doc"><p>Check that every element of <code>xs</code> is an endpoint of <code>api</code> (using <code><code><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a></code></code>).</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsElem" title="Servant.API.TypeLevel">AllIsElem</a> '[] api = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsElem" title="Servant.API.TypeLevel">AllIsElem</a> (x ': xs) api = (<a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a> x api, <a href="Servant-API-TypeLevel.html#t:AllIsElem" title="Servant.API.TypeLevel">AllIsElem</a> xs api)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:2" id="g:2"><h2>Strict inclusion</h2></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsIn" class="def">IsIn</a> (endpoint :: *) (api :: *) :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#IsIn" class="link">Source</a> <a href="#t:IsIn" class="selflink">#</a></p><div class="doc"><p>Closed type family, check if <code>endpoint</code> is exactly within <code>api</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsIn (&quot;hello&quot; :&gt; Get '[JSON] Int) SampleAPI))
</code></strong>OK
</pre><p>Unlike <code><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a></code>, this requires an *exact* match.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsIn (Get '[JSON] Int) (Header &quot;h&quot; Bool :&gt; Get '[JSON] Int)))
</code></strong>...
... Could not ...
...
</pre></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> e (sa <a href="Servant-API.html#t::-60--124--62-" title="Servant.API">:&lt;|&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:Or" title="Servant.API.TypeLevel">Or</a> (<a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> e sa) (<a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> e sb)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> (e <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa) (e <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> e e = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsStrictSubAPI" class="def">IsStrictSubAPI</a> sub api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#IsStrictSubAPI" class="link">Source</a> <a href="#t:IsStrictSubAPI" class="selflink">#</a></p><div class="doc"><p>Check whether <code>sub</code> is a sub API of <code>api</code>.</p><p>Like <code><a href="Servant-API-TypeLevel.html#t:IsSubAPI" title="Servant.API.TypeLevel">IsSubAPI</a></code>, but uses <code><a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a></code> rather than <code><a href="Servant-API-TypeLevel.html#t:IsElem" title="Servant.API.TypeLevel">IsElem</a></code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsStrictSubAPI" title="Servant.API.TypeLevel">IsStrictSubAPI</a> sub api = <a href="Servant-API-TypeLevel.html#t:AllIsIn" title="Servant.API.TypeLevel">AllIsIn</a> (<a href="Servant-API-TypeLevel.html#t:Endpoints" title="Servant.API.TypeLevel">Endpoints</a> sub) api</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:AllIsIn" class="def">AllIsIn</a> xs api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#AllIsIn" class="link">Source</a> <a href="#t:AllIsIn" class="selflink">#</a></p><div class="doc"><p>Check that every element of <code>xs</code> is an endpoint of <code>api</code> (using <code><code><a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a></code></code>).</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (AllIsIn (Endpoints SampleAPI) SampleAPI))
</code></strong>OK
</pre></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsIn" title="Servant.API.TypeLevel">AllIsIn</a> '[] api = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsIn" title="Servant.API.TypeLevel">AllIsIn</a> (x ': xs) api = (<a href="Servant-API-TypeLevel.html#t:IsIn" title="Servant.API.TypeLevel">IsIn</a> x api, <a href="Servant-API-TypeLevel.html#t:AllIsIn" title="Servant.API.TypeLevel">AllIsIn</a> xs api)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:3" id="g:3"><h1>Helpers</h1></a><a href="#g:4" id="g:4"><h2>Lists</h2></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:MapSub" class="def">MapSub</a> e xs <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#MapSub" class="link">Source</a> <a href="#t:MapSub" class="selflink">#</a></p><div class="doc"><p>Apply <code>(e :&gt;)</code> to every API in <code>xs</code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:MapSub" title="Servant.API.TypeLevel">MapSub</a> e '[] = '[]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:MapSub" title="Servant.API.TypeLevel">MapSub</a> e (x ': xs) = (e <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> x) ': <a href="Servant-API-TypeLevel.html#t:MapSub" title="Servant.API.TypeLevel">MapSub</a> e xs</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:AppendList" class="def">AppendList</a> xs ys <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#AppendList" class="link">Source</a> <a href="#t:AppendList" class="selflink">#</a></p><div class="doc"><p>Append two type-level lists.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AppendList" title="Servant.API.TypeLevel">AppendList</a> '[] ys = ys</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AppendList" title="Servant.API.TypeLevel">AppendList</a> (x ': xs) ys = x ': <a href="Servant-API-TypeLevel.html#t:AppendList" title="Servant.API.TypeLevel">AppendList</a> xs ys</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsSubList" class="def">IsSubList</a> a b :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#IsSubList" class="link">Source</a> <a href="#t:IsSubList" class="selflink">#</a></p><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsSubList" title="Servant.API.TypeLevel">IsSubList</a> '[] b = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsSubList" title="Servant.API.TypeLevel">IsSubList</a> (x ': xs) y = <a href="Servant-API-TypeLevel.html#t:Elem" title="Servant.API.TypeLevel">Elem</a> x y <a href="Servant-API-TypeLevel.html#t:And" title="Servant.API.TypeLevel">`And`</a> <a href="Servant-API-TypeLevel.html#t:IsSubList" title="Servant.API.TypeLevel">IsSubList</a> xs y</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Elem" class="def">Elem</a> e es = <a href="Servant-API-TypeLevel.html#t:ElemGo" title="Servant.API.TypeLevel">ElemGo</a> e es es <a href="src/Servant.API.TypeLevel.html#Elem" class="link">Source</a> <a href="#t:Elem" class="selflink">#</a></p><div class="doc"><p>Check that a value is an element of a list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (Elem Bool '[Int, Bool]))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (Elem String '[Int, Bool]))
</code></strong>...
... [Char]...'[Int, Bool...
...
</pre></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:ElemGo" class="def">ElemGo</a> e es orig :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#ElemGo" class="link">Source</a> <a href="#t:ElemGo" class="selflink">#</a></p><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:ElemGo" title="Servant.API.TypeLevel">ElemGo</a> x (x ': xs) orig = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:ElemGo" title="Servant.API.TypeLevel">ElemGo</a> y (x ': xs) orig = <a href="Servant-API-TypeLevel.html#t:ElemGo" title="Servant.API.TypeLevel">ElemGo</a> y xs orig</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:ElemGo" title="Servant.API.TypeLevel">ElemGo</a> x '[] orig = <a href="../base-4.18.2.1/GHC-TypeLits.html#t:TypeError" title="GHC.TypeLits">TypeError</a> (('<a href="../base-4.18.2.1/GHC-TypeLits.html#v:ShowType" title="GHC.TypeLits">ShowType</a> x '<a href="../base-4.18.2.1/GHC-TypeLits.html#v::-60--62-:" title="GHC.TypeLits">:&lt;&gt;:</a> '<a href="../base-4.18.2.1/GHC-TypeLits.html#v:Text" title="GHC.TypeLits">Text</a> &quot; expected in list &quot;) '<a href="../base-4.18.2.1/GHC-TypeLits.html#v::-60--62-:" title="GHC.TypeLits">:&lt;&gt;:</a> '<a href="../base-4.18.2.1/GHC-TypeLits.html#v:ShowType" title="GHC.TypeLits">ShowType</a> orig)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:5" id="g:5"><h2>Logic</h2></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Or" class="def">Or</a> (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) (b :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#Or" class="link">Source</a> <a href="#t:Or" class="selflink">#</a></p><div class="doc"><p>If either a or b produce an empty constraint, produce an empty constraint.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Or" title="Servant.API.TypeLevel">Or</a> () b = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Or" title="Servant.API.TypeLevel">Or</a> a () = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:And" class="def">And</a> (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) (b :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a>) :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#And" class="link">Source</a> <a href="#t:And" class="selflink">#</a></p><div class="doc"><p>If both a or b produce an empty constraint, produce an empty constraint.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:And" title="Servant.API.TypeLevel">And</a> () () = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:6" id="g:6"><h2>Fragment</h2></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:FragmentUnique" class="def">FragmentUnique</a> api :: <a href="../base-4.18.2.1/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Servant.API.TypeLevel.html#FragmentUnique" class="link">Source</a> <a href="#t:FragmentUnique" class="selflink">#</a></p><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> (sa <a href="Servant-API.html#t::-60--124--62-" title="Servant.API">:&lt;|&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:And" title="Servant.API.TypeLevel">And</a> (<a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> sa) (<a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> sb)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> (<a href="Servant-API.html#t:Fragment" title="Servant.API">Fragment</a> a <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa) = FragmentNotIn sa (<a href="Servant-API.html#t:Fragment" title="Servant.API">Fragment</a> a <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> (x <a href="Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sa) = <a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> sa</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> (<a href="Servant-API.html#t:Fragment" title="Servant.API">Fragment</a> a) = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> x = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-TypeLevel.html#t:FragmentUnique" title="Servant.API.TypeLevel">FragmentUnique</a> api =&gt; <a id="t:AtLeastOneFragment" class="def">AtLeastOneFragment</a> api <a href="src/Servant.API.TypeLevel.html#AtLeastOneFragment" class="link">Source</a> <a href="#t:AtLeastOneFragment" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:AtLeastOneFragment">Instances</h4><details id="i:AtLeastOneFragment" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:AtLeastOneFragment:AtLeastOneFragment:1"></span> <a href="Servant-API-TypeLevel.html#t:AtLeastOneFragment" title="Servant.API.TypeLevel">AtLeastOneFragment</a> (<a href="Servant-API.html#t:Fragment" title="Servant.API">Fragment</a> a)</span> <a href="src/Servant.API.TypeLevel.html#line-271" class="link">Source</a> <a href="#t:AtLeastOneFragment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:AtLeastOneFragment:AtLeastOneFragment:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-API-TypeLevel.html">Servant.API.TypeLevel</a></p></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:AtLeastOneFragment:AtLeastOneFragment:2"></span> <a href="Servant-API-TypeLevel.html#t:AtLeastOneFragment" title="Servant.API.TypeLevel">AtLeastOneFragment</a> (<a href="Servant-API-UVerb.html#t:UVerb" title="Servant.API.UVerb">UVerb</a> m cts as)</span> <a href="src/Servant.API.TypeLevel.html#line-269" class="link">Source</a> <a href="#t:AtLeastOneFragment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:AtLeastOneFragment:AtLeastOneFragment:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-API-TypeLevel.html">Servant.API.TypeLevel</a></p></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:AtLeastOneFragment:AtLeastOneFragment:3"></span> <a href="Servant-API-TypeLevel.html#t:AtLeastOneFragment" title="Servant.API.TypeLevel">AtLeastOneFragment</a> (<a href="Servant-API-Verbs.html#t:Verb" title="Servant.API.Verbs">Verb</a> m s ct typ)</span> <a href="src/Servant.API.TypeLevel.html#line-267" class="link">Source</a> <a href="#t:AtLeastOneFragment" class="selflink">#</a></td><td class="doc"><p>If fragment appeared in API endpoint twice, compile-time error would be raised.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>-- type FailAPI = Fragment Bool :&gt; Fragment Int :&gt; Get '[JSON] NoContent
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance AtLeastOneFragment FailAPI
</code></strong>...
...Only one Fragment allowed per endpoint in api...
...
...In the instance declaration for...
</pre></td></tr><tr><td colspan="2"><details id="i:ic:AtLeastOneFragment:AtLeastOneFragment:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-API-TypeLevel.html">Servant.API.TypeLevel</a></p></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>