<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.LSP.Protocol.Types.Uri</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-5"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier">Uri</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier">uriToFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier">filePathToUri</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedUri"><span class="hs-identifier">toNormalizedUri</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier">fromNormalizedUri</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier">NormalizedFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier">toNormalizedFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedFilePath"><span class="hs-identifier">fromNormalizedFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#normalizedFilePathToUri"><span class="hs-identifier">normalizedFilePathToUri</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToNormalizedFilePath"><span class="hs-identifier">uriToNormalizedFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedFilePath"><span class="hs-identifier">emptyNormalizedFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-comment">-- Private functions</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier">platformAwareUriToFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier">platformAwareFilePathToUri</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Binary</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Get</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">get</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">put</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">stripPrefix</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromString</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.URI</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">authority</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prettyprinter</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Safe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">tailMay</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FP</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath.Posix</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FPP</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath.Windows</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FPW</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Info</span></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="annot"><span class="hs-comment">-- | The @Uri@ type in the LSP specification.</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">newtype</span><span> </span><span id="Uri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Uri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AgetUri%3AUri"><span class="annot"><span class="annottext">Uri -&gt; Text
</span><a href="Language.LSP.Protocol.Types.Uri.html#%24sel%3AgetUri%3AUri"><span class="hs-identifier hs-var hs-var">getUri</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682154620"><span id="local-6989586621682154624"><span class="annot"><span class="annottext">Uri -&gt; Uri -&gt; Bool
(Uri -&gt; Uri -&gt; Bool) -&gt; (Uri -&gt; Uri -&gt; Bool) -&gt; Eq Uri
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Uri -&gt; Uri -&gt; Bool
== :: Uri -&gt; Uri -&gt; Bool
$c/= :: Uri -&gt; Uri -&gt; Bool
/= :: Uri -&gt; Uri -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154631"><span id="local-6989586621682154635"><span id="local-6989586621682154638"><span id="local-6989586621682154642"><span id="local-6989586621682154645"><span id="local-6989586621682154648"><span id="local-6989586621682154651"><span class="annot"><span class="annottext">Eq Uri
Eq Uri =&gt;
(Uri -&gt; Uri -&gt; Ordering)
-&gt; (Uri -&gt; Uri -&gt; Bool)
-&gt; (Uri -&gt; Uri -&gt; Bool)
-&gt; (Uri -&gt; Uri -&gt; Bool)
-&gt; (Uri -&gt; Uri -&gt; Bool)
-&gt; (Uri -&gt; Uri -&gt; Uri)
-&gt; (Uri -&gt; Uri -&gt; Uri)
-&gt; Ord Uri
Uri -&gt; Uri -&gt; Bool
Uri -&gt; Uri -&gt; Ordering
Uri -&gt; Uri -&gt; Uri
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Uri -&gt; Uri -&gt; Ordering
compare :: Uri -&gt; Uri -&gt; Ordering
$c&lt; :: Uri -&gt; Uri -&gt; Bool
&lt; :: Uri -&gt; Uri -&gt; Bool
$c&lt;= :: Uri -&gt; Uri -&gt; Bool
&lt;= :: Uri -&gt; Uri -&gt; Bool
$c&gt; :: Uri -&gt; Uri -&gt; Bool
&gt; :: Uri -&gt; Uri -&gt; Bool
$c&gt;= :: Uri -&gt; Uri -&gt; Bool
&gt;= :: Uri -&gt; Uri -&gt; Bool
$cmax :: Uri -&gt; Uri -&gt; Uri
max :: Uri -&gt; Uri -&gt; Uri
$cmin :: Uri -&gt; Uri -&gt; Uri
min :: Uri -&gt; Uri -&gt; Uri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154655"><span id="local-6989586621682154659"><span id="local-6989586621682154662"><span id="local-6989586621682154672"><span class="annot"><span class="annottext">ReadPrec [Uri]
ReadPrec Uri
Int -&gt; ReadS Uri
ReadS [Uri]
(Int -&gt; ReadS Uri)
-&gt; ReadS [Uri] -&gt; ReadPrec Uri -&gt; ReadPrec [Uri] -&gt; Read Uri
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS Uri
readsPrec :: Int -&gt; ReadS Uri
$creadList :: ReadS [Uri]
readList :: ReadS [Uri]
$creadPrec :: ReadPrec Uri
readPrec :: ReadPrec Uri
$creadListPrec :: ReadPrec [Uri]
readListPrec :: ReadPrec [Uri]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154676"><span id="local-6989586621682154682"><span id="local-6989586621682154686"><span class="annot"><span class="annottext">Int -&gt; Uri -&gt; ShowS
[Uri] -&gt; ShowS
Uri -&gt; SystemOS
(Int -&gt; Uri -&gt; ShowS)
-&gt; (Uri -&gt; SystemOS) -&gt; ([Uri] -&gt; ShowS) -&gt; Show Uri
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; SystemOS) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Uri -&gt; ShowS
showsPrec :: Int -&gt; Uri -&gt; ShowS
$cshow :: Uri -&gt; SystemOS
show :: Uri -&gt; SystemOS
$cshowList :: [Uri] -&gt; ShowS
showList :: [Uri] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154690"><span id="local-6989586621682154692"><span class="annot"><span class="annottext">(forall x. Uri -&gt; Rep Uri x)
-&gt; (forall x. Rep Uri x -&gt; Uri) -&gt; Generic Uri
forall x. Rep Uri x -&gt; Uri
forall x. Uri -&gt; Rep Uri x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. Uri -&gt; Rep Uri x
from :: forall x. Uri -&gt; Rep Uri x
$cto :: forall x. Rep Uri x -&gt; Uri
to :: forall x. Rep Uri x -&gt; Uri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682154696"><span id="local-6989586621682154701"><span class="annot"><span class="annottext">Value -&gt; Parser [Uri]
Value -&gt; Parser Uri
(Value -&gt; Parser Uri) -&gt; (Value -&gt; Parser [Uri]) -&gt; FromJSON Uri
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
$cparseJSON :: Value -&gt; Parser Uri
parseJSON :: Value -&gt; Parser Uri
$cparseJSONList :: Value -&gt; Parser [Uri]
parseJSONList :: Value -&gt; Parser [Uri]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">A.FromJSON</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154707"><span id="local-6989586621682154712"><span id="local-6989586621682154716"><span id="local-6989586621682154720"><span class="annot"><span class="annottext">[Uri] -&gt; Value
[Uri] -&gt; Encoding
Uri -&gt; Value
Uri -&gt; Encoding
(Uri -&gt; Value)
-&gt; (Uri -&gt; Encoding)
-&gt; ([Uri] -&gt; Value)
-&gt; ([Uri] -&gt; Encoding)
-&gt; ToJSON Uri
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
$ctoJSON :: Uri -&gt; Value
toJSON :: Uri -&gt; Value
$ctoEncoding :: Uri -&gt; Encoding
toEncoding :: Uri -&gt; Encoding
$ctoJSONList :: [Uri] -&gt; Value
toJSONList :: [Uri] -&gt; Value
$ctoEncodingList :: [Uri] -&gt; Encoding
toEncodingList :: [Uri] -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">A.ToJSON</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154728"><span id="local-6989586621682154732"><span class="annot"><span class="annottext">Eq Uri
Eq Uri =&gt; (Int -&gt; Uri -&gt; Int) -&gt; (Uri -&gt; Int) -&gt; Hashable Uri
Int -&gt; Uri -&gt; Int
Uri -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
$chashWithSalt :: Int -&gt; Uri -&gt; Int
hashWithSalt :: Int -&gt; Uri -&gt; Int
$chash :: Uri -&gt; Int
hash :: Uri -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154738"><span id="local-6989586621682154743"><span class="annot"><span class="annottext">ToJSONKeyFunction [Uri]
ToJSONKeyFunction Uri
ToJSONKeyFunction Uri -&gt; ToJSONKeyFunction [Uri] -&gt; ToJSONKey Uri
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
$ctoJSONKey :: ToJSONKeyFunction Uri
toJSONKey :: ToJSONKeyFunction Uri
$ctoJSONKeyList :: ToJSONKeyFunction [Uri]
toJSONKeyList :: ToJSONKeyFunction [Uri]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">A.ToJSONKey</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154749"><span id="local-6989586621682154754"><span class="annot"><span class="annottext">FromJSONKeyFunction [Uri]
FromJSONKeyFunction Uri
FromJSONKeyFunction Uri
-&gt; FromJSONKeyFunction [Uri] -&gt; FromJSONKey Uri
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
$cfromJSONKey :: FromJSONKeyFunction Uri
fromJSONKey :: FromJSONKeyFunction Uri
$cfromJSONKeyList :: FromJSONKeyFunction [Uri]
fromJSONKeyList :: FromJSONKeyFunction [Uri]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">A.FromJSONKey</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154760"><span id="local-6989586621682154765"><span class="annot"><span class="annottext">(forall ann. Uri -&gt; Doc ann)
-&gt; (forall ann. [Uri] -&gt; Doc ann) -&gt; Pretty Uri
forall ann. [Uri] -&gt; Doc ann
forall ann. Uri -&gt; Doc ann
forall a.
(forall ann. a -&gt; Doc ann)
-&gt; (forall ann. [a] -&gt; Doc ann) -&gt; Pretty a
$cpretty :: forall ann. Uri -&gt; Doc ann
pretty :: forall ann. Uri -&gt; Doc ann
$cprettyList :: forall ann. [Uri] -&gt; Doc ann
prettyList :: forall ann. [Uri] -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Pretty</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682154771"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">{- | A normalized 'Uri'.

If you want to use a URI as a map key, use this type. It is important to normalize
the percent encoding in the URI since URIs that only differ
when it comes to the percent-encoding should be treated as equivalent.

'NormalizedUri' has a cached hash in order to make it especially fast in a hash map.
-}</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">data</span><span> </span><span id="NormalizedUri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NormalizedUri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682154787"><span id="local-6989586621682154791"><span id="local-6989586621682154794"><span id="local-6989586621682154803"><span class="annot"><span class="annottext">ReadPrec [NormalizedUri]
ReadPrec NormalizedUri
Int -&gt; ReadS NormalizedUri
ReadS [NormalizedUri]
(Int -&gt; ReadS NormalizedUri)
-&gt; ReadS [NormalizedUri]
-&gt; ReadPrec NormalizedUri
-&gt; ReadPrec [NormalizedUri]
-&gt; Read NormalizedUri
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS NormalizedUri
readsPrec :: Int -&gt; ReadS NormalizedUri
$creadList :: ReadS [NormalizedUri]
readList :: ReadS [NormalizedUri]
$creadPrec :: ReadPrec NormalizedUri
readPrec :: ReadPrec NormalizedUri
$creadListPrec :: ReadPrec [NormalizedUri]
readListPrec :: ReadPrec [NormalizedUri]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154806"><span id="local-6989586621682154812"><span id="local-6989586621682154816"><span class="annot"><span class="annottext">Int -&gt; NormalizedUri -&gt; ShowS
[NormalizedUri] -&gt; ShowS
NormalizedUri -&gt; SystemOS
(Int -&gt; NormalizedUri -&gt; ShowS)
-&gt; (NormalizedUri -&gt; SystemOS)
-&gt; ([NormalizedUri] -&gt; ShowS)
-&gt; Show NormalizedUri
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; SystemOS) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NormalizedUri -&gt; ShowS
showsPrec :: Int -&gt; NormalizedUri -&gt; ShowS
$cshow :: NormalizedUri -&gt; SystemOS
show :: NormalizedUri -&gt; SystemOS
$cshowList :: [NormalizedUri] -&gt; ShowS
showList :: [NormalizedUri] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154819"><span id="local-6989586621682154821"><span class="annot"><span class="annottext">(forall x. NormalizedUri -&gt; Rep NormalizedUri x)
-&gt; (forall x. Rep NormalizedUri x -&gt; NormalizedUri)
-&gt; Generic NormalizedUri
forall x. Rep NormalizedUri x -&gt; NormalizedUri
forall x. NormalizedUri -&gt; Rep NormalizedUri x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. NormalizedUri -&gt; Rep NormalizedUri x
from :: forall x. NormalizedUri -&gt; Rep NormalizedUri x
$cto :: forall x. Rep NormalizedUri x -&gt; NormalizedUri
to :: forall x. Rep NormalizedUri x -&gt; NormalizedUri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154824"><span id="local-6989586621682154829"><span class="annot"><span class="annottext">NormalizedUri -&gt; NormalizedUri -&gt; Bool
(NormalizedUri -&gt; NormalizedUri -&gt; Bool)
-&gt; (NormalizedUri -&gt; NormalizedUri -&gt; Bool) -&gt; Eq NormalizedUri
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
== :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
$c/= :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
/= :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">-- Slow but compares paths alphabetically as you would expect.</span><span>
</span><span id="line-59"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682154836"><span id="local-6989586621682154840"><span id="local-6989586621682154843"><span id="local-6989586621682154846"><span id="local-6989586621682154849"><span id="local-6989586621682154852"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-60"></span><span>  </span><span id="local-6989586621682154855"><span class="annot"><span class="annottext">compare :: NormalizedUri -&gt; NormalizedUri -&gt; Ordering
</span><a href="#local-6989586621682154855"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682154857"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154857"><span class="hs-identifier hs-var">u1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682154858"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154858"><span class="hs-identifier hs-var">u2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154857"><span class="hs-identifier hs-var">u1</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154858"><span class="hs-identifier hs-var">u2</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621682154864"><span class="annot"><span class="annottext">hash :: NormalizedUri -&gt; Int
</span><a href="#local-6989586621682154864"><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span id="local-6989586621682154866"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682154866"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682154866"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span id="local-6989586621682154869"><span class="annot"><span class="annottext">hashWithSalt :: Int -&gt; NormalizedUri -&gt; Int
</span><a href="#local-6989586621682154869"><span class="hs-identifier hs-var hs-var hs-var hs-var">hashWithSalt</span></a></span></span><span> </span><span id="local-6989586621682154871"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682154871"><span class="hs-identifier hs-var">salt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span id="local-6989586621682154872"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682154872"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Hashable a =&gt; Int -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hashWithSalt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682154871"><span class="hs-identifier hs-var">salt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682154872"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682154875"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621682154879"><span class="annot"><span class="annottext">pretty :: forall ann. NormalizedUri -&gt; Doc ann
</span><a href="#local-6989586621682154879"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682154881"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154881"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154881"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682154883"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-type">isUnescapedInUriPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-72"></span><span id="isUnescapedInUriPath"><span class="annot"><span class="annottext">isUnescapedInUriPath :: SystemOS -&gt; Char -&gt; Bool
</span><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-var hs-var">isUnescapedInUriPath</span></a></span></span><span> </span><span id="local-6989586621682154900"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154900"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682154901"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682154901"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154900"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUnreserved</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682154901"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682154901"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span class="hs-special">]</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUnreserved</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682154901"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682154901"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#normalizeUriEscaping"><span class="hs-identifier hs-type">normalizeUriEscaping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-77"></span><span id="normalizeUriEscaping"><span class="annot"><span class="annottext">normalizeUriEscaping :: ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#normalizeUriEscaping"><span class="hs-identifier hs-var hs-var">normalizeUriEscaping</span></a></span></span><span> </span><span id="local-6989586621682154907"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154907"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Maybe SystemOS
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Maybe [a]
</span><span class="hs-identifier hs-var">stripPrefix</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;//&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154907"><span class="hs-identifier hs-var">uri</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682154909"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154909"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;//&quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621682154910"><span class="hs-identifier hs-var">escapeURIPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">unEscapeString</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154909"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="annottext">Maybe SystemOS
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
</span><span class="hs-identifier hs-var">escapeURIString</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUnescapedInURI</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">unEscapeString</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154907"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-81"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>  </span><span id="local-6989586621682154910"><span class="annot"><span class="annottext">escapeURIPath :: ShowS
</span><a href="#local-6989586621682154910"><span class="hs-identifier hs-var hs-var">escapeURIPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
</span><span class="hs-identifier hs-var">escapeURIString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; Char -&gt; Bool
</span><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-var">isUnescapedInUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedUri"><span class="hs-identifier hs-type">toNormalizedUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-85"></span><span id="toNormalizedUri"><span class="annot"><span class="annottext">toNormalizedUri :: Uri -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedUri"><span class="hs-identifier hs-var hs-var">toNormalizedUri</span></a></span></span><span> </span><span id="local-6989586621682154915"><span class="annot"><span class="annottext">Uri
</span><a href="#local-6989586621682154915"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154916"><span class="hs-identifier hs-var">norm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154916"><span class="hs-identifier hs-var">norm</span></a></span><span>
</span><span id="line-86"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span id="local-6989586621682154917"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154917"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Uri -&gt; (SystemOS -&gt; Uri) -&gt; Maybe SystemOS -&gt; Uri
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Uri
</span><a href="#local-6989586621682154915"><span class="hs-identifier hs-var">uri</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier hs-var">filePathToUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier hs-var">uriToFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">Uri
</span><a href="#local-6989586621682154915"><span class="hs-identifier hs-var">uri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-comment">-- To ensure all `Uri`s have the file path normalized</span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621682154916"><span class="annot"><span class="annottext">norm :: Text
</span><a href="#local-6989586621682154916"><span class="hs-identifier hs-var hs-var">norm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#normalizeUriEscaping"><span class="hs-identifier hs-var">normalizeUriEscaping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154917"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier hs-type">fromNormalizedUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span>
</span><span id="line-92"></span><span id="fromNormalizedUri"><span class="annot"><span class="annottext">fromNormalizedUri :: NormalizedUri -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier hs-var hs-var">fromNormalizedUri</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682154921"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154921"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154921"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-type">fileScheme</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-95"></span><span id="fileScheme"><span class="annot"><span class="annottext">fileScheme :: SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var hs-var">fileScheme</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;file:&quot;</span></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-type">windowsOS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-98"></span><span id="windowsOS"><span class="annot"><span class="annottext">windowsOS :: SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var hs-var">windowsOS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;mingw32&quot;</span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">type</span><span> </span><span id="SystemOS"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-var">SystemOS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier hs-type">uriToFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-103"></span><span id="uriToFilePath"><span class="annot"><span class="annottext">uriToFilePath :: Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier hs-var hs-var">uriToFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-var">platformAwareUriToFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-pragma">{-# WARNING</span><span> </span><span class="hs-pragma">platformAwareUriToFilePath</span><span> </span><span class="hs-pragma">&quot;This function is considered private. Use normalizedFilePathToUri instead.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-106"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-type">platformAwareUriToFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-107"></span><span id="platformAwareUriToFilePath"><span class="annot"><span class="annottext">platformAwareUriToFilePath :: SystemOS -&gt; Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-var hs-var">platformAwareUriToFilePath</span></a></span></span><span> </span><span id="local-6989586621682154923"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154923"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span id="local-6989586621682154924"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154924"><span class="hs-identifier hs-var">uri</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">URI</span></span><span class="hs-special">{</span><span id="local-6989586621682154926"><span id="local-6989586621682154927"><span id="local-6989586621682154928"><span id="local-6989586621682154929"><span id="local-6989586621682154930"><span class="annot"><span class="annottext">SystemOS
Maybe URIAuth
uriScheme :: SystemOS
uriAuthority :: Maybe URIAuth
uriPath :: SystemOS
uriQuery :: SystemOS
uriFragment :: SystemOS
uriScheme :: URI -&gt; SystemOS
uriAuthority :: URI -&gt; Maybe URIAuth
uriPath :: URI -&gt; SystemOS
uriQuery :: URI -&gt; SystemOS
uriFragment :: URI -&gt; SystemOS
</span><a href="#local-6989586621682154926"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Maybe URI
</span><span class="hs-identifier hs-var">parseURI</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; Maybe URI) -&gt; SystemOS -&gt; Maybe URI
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682154924"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154926"><span class="hs-identifier hs-var">uriScheme</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-keyword">then</span><span>
</span><span id="line-111"></span><span>      </span><span class="annot"><span class="annottext">SystemOS -&gt; Maybe SystemOS
forall a. a -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; Maybe SystemOS) -&gt; SystemOS -&gt; Maybe SystemOS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-112"></span><span>        </span><span class="annot"><span class="annottext">SystemOS -&gt; Maybe SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustFromUriPath"><span class="hs-identifier hs-var">platformAdjustFromUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154923"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">URIAuth -&gt; SystemOS
</span><span class="hs-identifier hs-var">uriRegName</span></span><span> </span><span class="annot"><span class="annottext">(URIAuth -&gt; SystemOS) -&gt; Maybe URIAuth -&gt; Maybe SystemOS
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe URIAuth
</span><a href="#local-6989586621682154927"><span class="hs-identifier hs-var">uriAuthority</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-113"></span><span>          </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">unEscapeString</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154928"><span class="hs-identifier hs-var">uriPath</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe SystemOS
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="annot"><span class="hs-comment">{- | We pull in the authority because in relative file paths the Uri likes to put everything before the slash
   into the authority field
-}</span></span><span>
</span><span id="line-119"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustFromUriPath"><span class="hs-identifier hs-type">platformAdjustFromUriPath</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><span class="hs-comment">-- | authority</span></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><span class="hs-comment">-- | path</span></span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-126"></span><span id="platformAdjustFromUriPath"><span class="annot"><span class="annottext">platformAdjustFromUriPath :: SystemOS -&gt; Maybe SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustFromUriPath"><span class="hs-identifier hs-var hs-var">platformAdjustFromUriPath</span></a></span></span><span> </span><span id="local-6989586621682154940"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154940"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682154941"><span class="annot"><span class="annottext">Maybe SystemOS
</span><a href="#local-6989586621682154941"><span class="hs-identifier hs-var">authority</span></a></span></span><span> </span><span id="local-6989586621682154942"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154942"><span class="hs-identifier hs-var">srcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">ShowS -&gt; (SystemOS -&gt; ShowS) -&gt; Maybe SystemOS -&gt; ShowS
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="annot"><span class="annottext">Maybe SystemOS
</span><a href="#local-6989586621682154941"><span class="hs-identifier hs-var">authority</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154940"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154942"><span class="hs-identifier hs-var">srcPath</span></a></span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><span class="hs-identifier hs-var">FPP.splitDirectories</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; [SystemOS]) -&gt; Maybe SystemOS -&gt; Maybe [SystemOS]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Maybe SystemOS
forall a. [a] -&gt; Maybe [a]
</span><span class="hs-identifier hs-var">tailMay</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154942"><span class="hs-identifier hs-var">srcPath</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682154946"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154946"><span class="hs-identifier hs-var">firstSegment</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682154947"><span class="annot"><span class="annottext">[SystemOS]
</span><a href="#local-6989586621682154947"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>          </span><span class="hs-comment">-- Drop leading '/' for absolute Windows paths</span><span>
</span><span id="line-133"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682154948"><span class="annot"><span class="annottext">drive :: SystemOS
</span><a href="#local-6989586621682154948"><span class="hs-identifier hs-var hs-var">drive</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Bool
</span><span class="hs-identifier hs-var">FPW.isDrive</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154946"><span class="hs-identifier hs-var">firstSegment</span></a></span><span>
</span><span id="line-135"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FPW.addTrailingPathSeparator</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154946"><span class="hs-identifier hs-var">firstSegment</span></a></span><span>
</span><span id="line-136"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154946"><span class="hs-identifier hs-var">firstSegment</span></a></span><span>
</span><span id="line-137"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><span class="hs-identifier hs-var">FPW.joinDrive</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154948"><span class="hs-identifier hs-var">drive</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SystemOS] -&gt; SystemOS
</span><span class="hs-identifier hs-var">FPW.joinPath</span></span><span> </span><span class="annot"><span class="annottext">[SystemOS]
</span><a href="#local-6989586621682154947"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-138"></span><span>        </span><span class="annot"><span class="annottext">Maybe [SystemOS]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154942"><span class="hs-identifier hs-var">srcPath</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier hs-type">filePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span>
</span><span id="line-141"></span><span id="filePathToUri"><span class="annot"><span class="annottext">filePathToUri :: SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier hs-var hs-var">filePathToUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier hs-var">platformAwareFilePathToUri</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; Uri) -&gt; ShowS -&gt; SystemOS -&gt; Uri
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FP.normalise</span></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-pragma">{-# WARNING</span><span> </span><span class="hs-pragma">platformAwareFilePathToUri</span><span> </span><span class="hs-pragma">&quot;This function is considered private. Use normalizedUriToFilePath instead.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-144"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier hs-type">platformAwareFilePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span>
</span><span id="line-145"></span><span id="platformAwareFilePathToUri"><span class="annot"><span class="annottext">platformAwareFilePathToUri :: SystemOS -&gt; SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier hs-var hs-var">platformAwareFilePathToUri</span></a></span></span><span> </span><span id="local-6989586621682154955"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154955"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682154956"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154956"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><span class="annottext">Text -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Uri) -&gt; (URI -&gt; Text) -&gt; URI -&gt; Uri
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; Text) -&gt; (URI -&gt; SystemOS) -&gt; URI -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">URI -&gt; SystemOS
forall a. Show a =&gt; a -&gt; SystemOS
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(URI -&gt; Uri) -&gt; URI -&gt; Uri
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">URI</span></span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uriScheme :: SystemOS
</span><span class="hs-identifier hs-var">uriScheme</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span>
</span><span id="line-149"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriAuthority :: Maybe URIAuth
</span><span class="hs-identifier hs-var">uriAuthority</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">URIAuth -&gt; Maybe URIAuth
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(URIAuth -&gt; Maybe URIAuth) -&gt; URIAuth -&gt; Maybe URIAuth
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; SystemOS -&gt; URIAuth
</span><span class="hs-identifier hs-var">URIAuth</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-150"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriPath :: SystemOS
</span><span class="hs-identifier hs-var">uriPath</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-var">platformAdjustToUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154955"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154956"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-151"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriQuery :: SystemOS
</span><span class="hs-identifier hs-var">uriQuery</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-152"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriFragment :: SystemOS
</span><span class="hs-identifier hs-var">uriFragment</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-153"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-type">platformAdjustToUriPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-156"></span><span id="platformAdjustToUriPath"><span class="annot"><span class="annottext">platformAdjustToUriPath :: SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-var hs-var">platformAdjustToUriPath</span></a></span></span><span> </span><span id="local-6989586621682154960"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154960"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682154961"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154961"><span class="hs-identifier hs-var">srcPath</span></a></span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154960"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154962"><span class="hs-identifier hs-var">escapedPath</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154962"><span class="hs-identifier hs-var">escapedPath</span></a></span><span>
</span><span id="line-159"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682154963"><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><a href="#local-6989586621682154963"><span class="hs-identifier hs-var">splitDirectories</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154964"><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><a href="#local-6989586621682154964"><span class="hs-identifier hs-var">splitDrive</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154960"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-162"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><span class="hs-identifier hs-var">FPW.splitDirectories</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><span class="hs-identifier hs-var">FPW.splitDrive</span></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-164"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><span class="hs-identifier hs-var">FPP.splitDirectories</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><span class="hs-identifier hs-var">FPP.splitDrive</span></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>  </span><span id="local-6989586621682154962"><span class="annot"><span class="annottext">escapedPath :: SystemOS
</span><a href="#local-6989586621682154962"><span class="hs-identifier hs-var hs-var">escapedPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><a href="#local-6989586621682154964"><span class="hs-identifier hs-var">splitDrive</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154961"><span class="hs-identifier hs-var">srcPath</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-167"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682154968"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154968"><span class="hs-identifier hs-var">drv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154969"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154969"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-168"></span><span>        </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621682154970"><span class="hs-identifier hs-var">convertDrive</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154968"><span class="hs-identifier hs-var">drv</span></a></span><span>
</span><span id="line-169"></span><span>          </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><span class="hs-operator hs-var">`FPP.joinDrive`</span></span><span> </span><span class="annot"><span class="annottext">[SystemOS] -&gt; SystemOS
</span><span class="hs-identifier hs-var">FPP.joinPath</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS -&gt; [SystemOS] -&gt; [SystemOS]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
</span><span class="hs-identifier hs-var">escapeURIString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; Char -&gt; Bool
</span><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-var">isUnescapedInUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154960"><span class="hs-identifier hs-var">systemOS</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([SystemOS] -&gt; [SystemOS]) -&gt; [SystemOS] -&gt; [SystemOS]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><a href="#local-6989586621682154963"><span class="hs-identifier hs-var">splitDirectories</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154969"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-comment">-- splitDirectories does not remove the path separator after the drive so</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-comment">-- we do a final replacement of \ to /</span><span>
</span><span id="line-172"></span><span>  </span><span id="local-6989586621682154970"><span class="annot"><span class="annottext">convertDrive :: ShowS
</span><a href="#local-6989586621682154970"><span class="hs-identifier hs-var hs-var">convertDrive</span></a></span></span><span> </span><span id="local-6989586621682154973"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154973"><span class="hs-identifier hs-var">drv</span></a></span></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154960"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Bool
</span><span class="hs-identifier hs-var">FPW.hasTrailingPathSeparator</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154973"><span class="hs-identifier hs-var">drv</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-174"></span><span>        </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FPP.addTrailingPathSeparator</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
forall a. HasCallStack =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">init</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154973"><span class="hs-identifier hs-var">drv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682154973"><span class="hs-identifier hs-var">drv</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">{- Note [Adoption Plan of OsPath]
Currently we store 'Text' in 'NormalizedFilePath'. We may change it to OsPath in the future if
the following steps are executed.

1. In the client codebase, use 'osPathToNormalizedFilePath' and 'normalizedFilePathToOsPath' instead of 'fromNormalizedFilePath'
  and 'toNormalizedFilePath'. For HLS, we could wait until GHC 9.6 becomes the oldest
  GHC we support, then change 'FilePath' to OsPath everywhere in the codebase.
2. Deprecate and remove 'fromNormalizedFilePath' and 'toNormalizedFilePath'.
3. Change 'Text' to OsPath and benchmark it to make sure performance doesn't go down. Don't forget to check Windows,
  as OsPath on Windows uses UTF-16, which may consume more memory.

See [#453](https://github.com/haskell/lsp/pull/453) and [#446](https://github.com/haskell/lsp/pull/446)
for more discussions on this topic.
-}</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="annot"><span class="hs-comment">{- | A file path that is already normalized.

The 'NormalizedUri' is cached to avoided
repeated normalisation when we need to compute them (which is a lot).

This is one of the most performance critical parts of HLS, do not
modify it without profiling.
-}</span></span><span>
</span><span id="line-200"></span><span class="hs-keyword">data</span><span> </span><span id="NormalizedFilePath"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NormalizedFilePath"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682154980"><span id="local-6989586621682154982"><span class="annot"><span class="annottext">(forall x. NormalizedFilePath -&gt; Rep NormalizedFilePath x)
-&gt; (forall x. Rep NormalizedFilePath x -&gt; NormalizedFilePath)
-&gt; Generic NormalizedFilePath
forall x. Rep NormalizedFilePath x -&gt; NormalizedFilePath
forall x. NormalizedFilePath -&gt; Rep NormalizedFilePath x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. NormalizedFilePath -&gt; Rep NormalizedFilePath x
from :: forall x. NormalizedFilePath -&gt; Rep NormalizedFilePath x
$cto :: forall x. Rep NormalizedFilePath x -&gt; NormalizedFilePath
to :: forall x. Rep NormalizedFilePath x -&gt; NormalizedFilePath
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154985"><span id="local-6989586621682154989"><span class="annot"><span class="annottext">NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
(NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool)
-&gt; Eq NormalizedFilePath
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
== :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c/= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
/= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682154995"><span id="local-6989586621682154999"><span id="local-6989586621682155003"><span id="local-6989586621682155007"><span id="local-6989586621682155010"><span id="local-6989586621682155013"><span id="local-6989586621682155016"><span class="annot"><span class="annottext">Eq NormalizedFilePath
Eq NormalizedFilePath =&gt;
(NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath)
-&gt; (NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath)
-&gt; Ord NormalizedFilePath
NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering
NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering
compare :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering
$c&lt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&lt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&lt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&lt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&gt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&gt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&gt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&gt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$cmax :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
max :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
$cmin :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
min :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682155019"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682155036"><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621682155042"><span class="annot"><span class="annottext">put :: NormalizedFilePath -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682155043"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155043"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155043"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span id="local-6989586621682155048"><span class="annot"><span class="annottext">get :: Get NormalizedFilePath
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621682155049"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155049"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Text
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">Data.Binary.get</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><span class="annottext">NormalizedFilePath -&gt; Get NormalizedFilePath
forall a. a -&gt; Get a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-var">internalNormalizedFilePathToUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155049"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155049"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="annot"><span class="hs-comment">{- | Internal helper that takes a file path that is assumed to
 already be normalized to a URI. It is up to the caller
 to ensure normalization.
-}</span></span><span>
</span><span id="line-215"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-type">internalNormalizedFilePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-216"></span><span id="internalNormalizedFilePathToUri"><span class="annot"><span class="annottext">internalNormalizedFilePathToUri :: SystemOS -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-var hs-var">internalNormalizedFilePathToUri</span></a></span></span><span> </span><span id="local-6989586621682155051"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155051"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155052"><span class="hs-identifier hs-var">nuri</span></a></span><span>
</span><span id="line-217"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621682155053"><span class="annot"><span class="annottext">uriPath :: SystemOS
</span><a href="#local-6989586621682155053"><span class="hs-identifier hs-var hs-var">uriPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-var">platformAdjustToUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155051"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-219"></span><span>  </span><span id="local-6989586621682155054"><span class="annot"><span class="annottext">nuriStr :: Text
</span><a href="#local-6989586621682155054"><span class="hs-identifier hs-var hs-var">nuriStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; Text) -&gt; SystemOS -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;//&quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155053"><span class="hs-identifier hs-var">uriPath</span></a></span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621682155052"><span class="annot"><span class="annottext">nuri :: NormalizedUri
</span><a href="#local-6989586621682155052"><span class="hs-identifier hs-var hs-var">nuri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155054"><span class="hs-identifier hs-var">nuriStr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155054"><span class="hs-identifier hs-var">nuriStr</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682155056"><span id="local-6989586621682155061"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>  </span><span id="local-6989586621682155065"><span class="annot"><span class="annottext">show :: NormalizedFilePath -&gt; SystemOS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682155066"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155066"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;NormalizedFilePath &quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; SystemOS
forall a. Show a =&gt; a -&gt; SystemOS
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155066"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621682155073"><span class="annot"><span class="annottext">hash :: NormalizedFilePath -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span id="local-6989586621682155074"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155074"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155074"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span id="local-6989586621682155076"><span class="annot"><span class="annottext">hashWithSalt :: Int -&gt; NormalizedFilePath -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">hashWithSalt</span></span></span><span> </span><span id="local-6989586621682155077"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682155077"><span class="hs-identifier hs-var">salt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span id="local-6989586621682155078"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155078"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; NormalizedUri -&gt; Int
forall a. Hashable a =&gt; Int -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hashWithSalt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682155077"><span class="hs-identifier hs-var">salt</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155078"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">fromString</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span id="local-6989586621682155082"><span class="annot"><span class="annottext">fromString :: SystemOS -&gt; NormalizedFilePath
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier hs-var">toNormalizedFilePath</span></a></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier hs-type">toNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-234"></span><span id="toNormalizedFilePath"><span class="annot"><span class="annottext">toNormalizedFilePath :: SystemOS -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier hs-var hs-var">toNormalizedFilePath</span></a></span></span><span> </span><span id="local-6989586621682155083"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155083"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155084"><span class="hs-identifier hs-var">nuri</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; NormalizedFilePath)
-&gt; (SystemOS -&gt; Text) -&gt; SystemOS -&gt; NormalizedFilePath
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; NormalizedFilePath) -&gt; SystemOS -&gt; NormalizedFilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155085"><span class="hs-identifier hs-var">nfp</span></a></span><span>
</span><span id="line-235"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621682155085"><span class="annot"><span class="annottext">nfp :: SystemOS
</span><a href="#local-6989586621682155085"><span class="hs-identifier hs-var hs-var">nfp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FP.normalise</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155083"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-237"></span><span>  </span><span id="local-6989586621682155084"><span class="annot"><span class="annottext">nuri :: NormalizedUri
</span><a href="#local-6989586621682155084"><span class="hs-identifier hs-var hs-var">nuri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-var">internalNormalizedFilePathToUri</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682155085"><span class="hs-identifier hs-var">nfp</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="annot"><span class="hs-comment">-- | Extracts 'FilePath' from 'NormalizedFilePath'.</span></span><span>
</span><span id="line-240"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedFilePath"><span class="hs-identifier hs-type">fromNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-241"></span><span id="fromNormalizedFilePath"><span class="annot"><span class="annottext">fromNormalizedFilePath :: NormalizedFilePath -&gt; SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedFilePath"><span class="hs-identifier hs-var hs-var">fromNormalizedFilePath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682155086"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155086"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155086"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#normalizedFilePathToUri"><span class="hs-identifier hs-type">normalizedFilePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-244"></span><span id="normalizedFilePathToUri"><span class="annot"><span class="annottext">normalizedFilePathToUri :: NormalizedFilePath -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#normalizedFilePathToUri"><span class="hs-identifier hs-var hs-var">normalizedFilePathToUri</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span id="local-6989586621682155087"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155087"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155087"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToNormalizedFilePath"><span class="hs-identifier hs-type">uriToNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-247"></span><span id="uriToNormalizedFilePath"><span class="annot"><span class="annottext">uriToNormalizedFilePath :: NormalizedUri -&gt; Maybe NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#uriToNormalizedFilePath"><span class="hs-identifier hs-var hs-var">uriToNormalizedFilePath</span></a></span></span><span> </span><span id="local-6989586621682155088"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155088"><span class="hs-identifier hs-var">nuri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SystemOS -&gt; NormalizedFilePath)
-&gt; Maybe SystemOS -&gt; Maybe NormalizedFilePath
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155088"><span class="hs-identifier hs-var">nuri</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; NormalizedFilePath)
-&gt; (SystemOS -&gt; Text) -&gt; SystemOS -&gt; NormalizedFilePath
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe SystemOS
</span><a href="#local-6989586621682155089"><span class="hs-identifier hs-var">mbFilePath</span></a></span><span>
</span><span id="line-248"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-249"></span><span>  </span><span id="local-6989586621682155089"><span class="annot"><span class="annottext">mbFilePath :: Maybe SystemOS
</span><a href="#local-6989586621682155089"><span class="hs-identifier hs-var hs-var">mbFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-var">platformAwareUriToFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NormalizedUri -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier hs-var">fromNormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682155088"><span class="hs-identifier hs-var">nuri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedUri"><span class="hs-identifier hs-type">emptyNormalizedUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-252"></span><span id="emptyNormalizedUri"><span class="annot"><span class="annottext">emptyNormalizedUri :: NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedUri"><span class="hs-identifier hs-var hs-var">emptyNormalizedUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682155092"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621682155092"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;file://&quot;</span></span><span>
</span><span id="line-254"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155092"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682155092"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="annot"><span class="hs-comment">-- | 'NormalizedFilePath' that contains an empty file path</span></span><span>
</span><span id="line-257"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedFilePath"><span class="hs-identifier hs-type">emptyNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-258"></span><span id="emptyNormalizedFilePath"><span class="annot"><span class="annottext">emptyNormalizedFilePath :: NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedFilePath"><span class="hs-identifier hs-var hs-var">emptyNormalizedFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedUri"><span class="hs-identifier hs-var">emptyNormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-259"></span></pre></body></html>