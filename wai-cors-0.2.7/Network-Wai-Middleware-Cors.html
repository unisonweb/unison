<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Network.Wai.Middleware.Cors</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">wai-cors-0.2.7: CORS for WAI</span><ul class="links" id="page-menu"><li><a href="src/Network.Wai.Middleware.Cors.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2015-2019 Lars Kuhtz &lt;lakuhtz@gmail.com<br />&#169; 2014 AlephCloud Systems Inc.</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>Lars Kuhtz &lt;lakuhtz@gmail.com&gt;</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.Wai.Middleware.Cors</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Utils</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>An implemenation of Cross-Origin resource sharing (CORS) for WAI that
 aims to be compliant with <a href="http://www.w3.org/TR/cors">http://www.w3.org/TR/cors</a>.</p><p>The function <code><a href="Network-Wai-Middleware-Cors.html#v:simpleCors" title="Network.Wai.Middleware.Cors">simpleCors</a></code> enables support of simple cross-origin requests. More
 advanced CORS policies can be enabled by passing a <code><a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></code> to the
 <code><a href="Network-Wai-Middleware-Cors.html#v:cors" title="Network.Wai.Middleware.Cors">cors</a></code> middleware.</p><h1>Note On Security</h1><p>This implementation doens't include any server side enforcement. By
 complying with the CORS standard it enables the client (i.e. the web
 browser) to enforce the CORS policy. For application authors it is strongly
 recommended to take into account the security considerations in section 6.3
 of <a href="http://www.w3.org/TR/cors">http://www.w3.org/TR/cors</a>. In particular the application should check
 that the value of the <code>Origin</code> header matches it's expectations.</p><h1>Websockets</h1><p>Websocket connections don't support CORS and are ignored by this CORS
 implementation. However Websocket requests usually (at least for some
 browsers) include the <code>Origin</code> header. Applications are expected to check
 the value of this header and respond with an error in case that its content
 doesn't match the expectations.</p><h1>Example</h1><p>The following is an example how to enable support for simple cross-origin requests
 for a <a href="http://hackage.haskell.org/package/scotty">scotty</a> application.</p><pre>{-# LANGUAGE UnicodeSyntax #-}
{-# LANGUAGE OverloadedStrings #-}

module Main
( main
) where

import Network.Wai.Middleware.Cors
import Web.Scotty

main &#8759; IO ()
main = scotty 8080 $ do
    middleware simpleCors
    matchAny  &quot;/&quot; $ text &quot;Success&quot;</pre><p>The result of following curl command will include the HTTP response header
 <code>Access-Control-Allow-Origin: *</code>.</p><pre>curl -i http://127.0.0.1:8888 -H 'Origin: 127.0.0.1' -v</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Origin">Origin</a> = <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:CorsResourcePolicy">CorsResourcePolicy</a> = <a href="#v:CorsResourcePolicy">CorsResourcePolicy</a> {<ul class="subs"><li><a href="#v:corsOrigins">corsOrigins</a> :: !(<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ([<a href="Network-Wai-Middleware-Cors.html#t:Origin" title="Network.Wai.Middleware.Cors">Origin</a>], <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>))</li><li><a href="#v:corsMethods">corsMethods</a> :: ![<a href="../http-types-0.12.4/Network-HTTP-Types-Method.html#t:Method" title="Network.HTTP.Types.Method">Method</a>]</li><li><a href="#v:corsRequestHeaders">corsRequestHeaders</a> :: ![<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>]</li><li><a href="#v:corsExposedHeaders">corsExposedHeaders</a> :: !(<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>])</li><li><a href="#v:corsMaxAge">corsMaxAge</a> :: !(<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li><a href="#v:corsVaryOrigin">corsVaryOrigin</a> :: !<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li><a href="#v:corsRequireOrigin">corsRequireOrigin</a> :: !<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li><a href="#v:corsIgnoreFailures">corsIgnoreFailures</a> :: !<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:simpleCorsResourcePolicy">simpleCorsResourcePolicy</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></li><li class="src short"><a href="#v:cors">cors</a> :: (<a href="../wai-3.2.4/Network-Wai.html#t:Request" title="Network.Wai">Request</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a>) -&gt; <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a></li><li class="src short"><a href="#v:simpleCors">simpleCors</a> :: <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a></li><li class="src short"><a href="#v:isSimple">isSimple</a> :: <a href="../http-types-0.12.4/Network-HTTP-Types-Method.html#t:Method" title="Network.HTTP.Types.Method">Method</a> -&gt; <a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:RequestHeaders" title="Network.HTTP.Types.Header">RequestHeaders</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:simpleResponseHeaders">simpleResponseHeaders</a> :: [<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>]</li><li class="src short"><a href="#v:simpleHeaders">simpleHeaders</a> :: [<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>]</li><li class="src short"><a href="#v:simpleContentTypes">simpleContentTypes</a> :: [<a href="../case-insensitive-1.2.1.0/Data-CaseInsensitive.html#t:CI" title="Data.CaseInsensitive">CI</a> <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>]</li><li class="src short"><a href="#v:simpleMethods">simpleMethods</a> :: [<a href="../http-types-0.12.4/Network-HTTP-Types-Method.html#t:Method" title="Network.HTTP.Types.Method">Method</a>]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Origin" class="def">Origin</a> = <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Network.Wai.Middleware.Cors.html#Origin" class="link">Source</a> <a href="#t:Origin" class="selflink">#</a></p><div class="doc"><p>Origins are expected to be formated as described in
 <a href="https://www.ietf.org/rfc/rfc6454.txt">RFC6454</a> (section 6.2).
 In particular the string <code>*</code> is not a valid origin (but the string
 <code>null</code> is).</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CorsResourcePolicy" class="def">CorsResourcePolicy</a> <a href="src/Network.Wai.Middleware.Cors.html#CorsResourcePolicy" class="link">Source</a> <a href="#t:CorsResourcePolicy" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CorsResourcePolicy" class="def">CorsResourcePolicy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:corsOrigins" class="def">corsOrigins</a> :: !(<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ([<a href="Network-Wai-Middleware-Cors.html#t:Origin" title="Network.Wai.Middleware.Cors">Origin</a>], <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>))</dfn><div class="doc"><p>HTTP origins that are allowed in CORS requests.</p><p>A value of <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> indicates unrestricted cross-origin sharing and
 results in <code>*</code> as value for the <code>Access-Control-Allow-Origin</code> HTTP
 response header. Note if you send <code>*</code>, credentials cannot be sent with the request.</p><p>A value other than <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> is a tuple that consists of a list of
 origins and a Boolean flag that indicates if credentials are used
 to access the resource via CORS.</p><p>Origins must be formated as described in
 <a href="https://www.ietf.org/rfc/rfc6454.txt">RFC6454</a> (section 6.2). In
 particular the string <code>*</code> is not a valid origin (but the string <code>null</code>
 is).</p><p>Credentials include cookies, authorization headers and TLS client certificates.
 For credentials to be sent with requests, the <code>withCredentials</code> setting of
 <code>XmlHttpRequest</code> in the browser must be set to <code>true</code>.</p></div></li><li><dfn class="src"><a id="v:corsMethods" class="def">corsMethods</a> :: ![<a href="../http-types-0.12.4/Network-HTTP-Types-Method.html#t:Method" title="Network.HTTP.Types.Method">Method</a>]</dfn><div class="doc"><p>HTTP methods that are allowed in CORS requests.</p></div></li><li><dfn class="src"><a id="v:corsRequestHeaders" class="def">corsRequestHeaders</a> :: ![<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>]</dfn><div class="doc"><p>Field names of HTTP request headers that are allowed in CORS requests.
 Header names that are included in <code><a href="Network-Wai-Middleware-Cors.html#v:simpleHeaders" title="Network.Wai.Middleware.Cors">simpleHeaders</a></code>, except for
 <code>content-type</code>, are implicitly included and thus optional in this list.</p></div></li><li><dfn class="src"><a id="v:corsExposedHeaders" class="def">corsExposedHeaders</a> :: !(<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>])</dfn><div class="doc"><p>Field names of HTTP headers that are exposed to the client in the response.</p></div></li><li><dfn class="src"><a id="v:corsMaxAge" class="def">corsMaxAge</a> :: !(<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>)</dfn><div class="doc"><p>Number of seconds that the OPTIONS preflight response may be cached by the client.</p><p>Tip: Set this to <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> while testing your CORS implementation, then increase
 it once you deploy to production.</p></div></li><li><dfn class="src"><a id="v:corsVaryOrigin" class="def">corsVaryOrigin</a> :: !<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p>If the resource is shared by multiple origins but
 <code>Access-Control-Allow-Origin</code> is not set to <code>*</code> this may be set to
 <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code> to cause the server to include a <code>Vary: Origin</code> header in the
 response, thus indicating that the value of the
 <code>Access-Control-Allow-Origin</code> header may vary between different requests
 for the same resource. This prevents caching of the responses which may
 not apply accross different origins.</p></div></li><li><dfn class="src"><a id="v:corsRequireOrigin" class="def">corsRequireOrigin</a> :: !<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p>If this is <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code> and the request does not include an <code>Origin</code> header
 the response has HTTP status 400 (bad request) and the body contains
 a short error message.</p><p>If this is <code><a href="../base-4.18.2.1/Data-Bool.html#v:False" title="Data.Bool">False</a></code> and the request does not include an <code>Origin</code> header
 the request is passed on unchanged to the application.</p><p><em>Since: 0.2</em></p></div></li><li><dfn class="src"><a id="v:corsIgnoreFailures" class="def">corsIgnoreFailures</a> :: !<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p>In the case that</p><ul><li>the request contains an <code>Origin</code> header and</li><li>the client does not conform with the CORS protocol
   (<em>request is out of scope</em>)</li></ul><p>then</p><ul><li>the request is passed on unchanged to the application if this field is
   <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code> or</li><li>an response with HTTP status 400 (bad request) and short
   error message is returned if this field is <code><a href="../base-4.18.2.1/Data-Bool.html#v:False" title="Data.Bool">False</a></code>.</li></ul><p>Note: Your application needs to will receive preflight OPTIONS requests if set to <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code>.</p><p><em>Since: 0.2</em></p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:CorsResourcePolicy">Instances</h4><details id="i:CorsResourcePolicy" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CorsResourcePolicy:Read:1"></span> <a href="../base-4.18.2.1/Text-Read.html#t:Read" title="Text.Read">Read</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></span> <a href="src/Network.Wai.Middleware.Cors.html#line-192" class="link">Source</a> <a href="#t:CorsResourcePolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CorsResourcePolicy:Read:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-Wai-Middleware-Cors.html">Network.Wai.Middleware.Cors</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Text-ParserCombinators-ReadP.html#t:ReadS" title="Text.ParserCombinators.ReadP">ReadS</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> <a href="#v:readsPrec" class="selflink">#</a></p><p class="src"><a href="#v:readList">readList</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadP.html#t:ReadS" title="Text.ParserCombinators.ReadP">ReadS</a> [<a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a>] <a href="#v:readList" class="selflink">#</a></p><p class="src"><a href="#v:readPrec">readPrec</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadPrec.html#t:ReadPrec" title="Text.ParserCombinators.ReadPrec">ReadPrec</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> <a href="#v:readPrec" class="selflink">#</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadPrec.html#t:ReadPrec" title="Text.ParserCombinators.ReadPrec">ReadPrec</a> [<a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a>] <a href="#v:readListPrec" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CorsResourcePolicy:Show:2"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></span> <a href="src/Network.Wai.Middleware.Cors.html#line-192" class="link">Source</a> <a href="#t:CorsResourcePolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CorsResourcePolicy:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-Wai-Middleware-Cors.html">Network.Wai.Middleware.Cors</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CorsResourcePolicy:Eq:3"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></span> <a href="src/Network.Wai.Middleware.Cors.html#line-192" class="link">Source</a> <a href="#t:CorsResourcePolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CorsResourcePolicy:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-Wai-Middleware-Cors.html">Network.Wai.Middleware.Cors</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CorsResourcePolicy:Ord:4"></span> <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></span> <a href="src/Network.Wai.Middleware.Cors.html#line-192" class="link">Source</a> <a href="#t:CorsResourcePolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CorsResourcePolicy:Ord:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-Wai-Middleware-Cors.html">Network.Wai.Middleware.Cors</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> -&gt; <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:simpleCorsResourcePolicy" class="def">simpleCorsResourcePolicy</a> :: <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a> <a href="src/Network.Wai.Middleware.Cors.html#simpleCorsResourcePolicy" class="link">Source</a> <a href="#v:simpleCorsResourcePolicy" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></code> that supports <em>simple cross-origin requests</em> as defined
 in <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a>.</p><ul><li>The HTTP header <code>Access-Control-Allow-Origin</code> is set to <code>*</code>.</li><li>Request methods are constraint to <em>simple methods</em> (<code>GET</code>, <code>HEAD</code>, <code>POST</code>).</li><li>Request headers are constraint to <em>simple request headers</em>
   (<code>Accept</code>, <code>Accept-Language</code>, <code>Content-Language</code>, <code>Content-Type</code>).</li><li>If the request is a <code>POST</code> request the content type is constraint to
    <em>simple content types</em>
    (<code>application/x-www-form-urlencoded</code>, <code>multipart/form-data</code>, <code>text/plain</code>),</li><li>Only <em>simple response headers</em> may be exposed on the client
   (<code>Cache-Control</code>, <code>Content-Language</code>, <code>Content-Type</code>, <code>Expires</code>, <code>Last-Modified</code>,  <code>Pragma</code>)</li><li>The <code>Vary-Origin</code> header is left unchanged (possibly unset).</li><li>If the request doesn't include an <code>Origin</code> header the request is passed unchanged to
   the application.</li><li>If the request includes an <code>Origin</code> header but does not conform to the CORS
   protocol (<em>request is out of scope</em>) an response with HTTP status 400 (bad request)
   and a short error message is returned.</li></ul><p>For <em>simple cross-origin requests</em> a preflight request is not required. However, if
 the client chooses to make a preflight request it is answered in accordance with
 the policy for <em>simple cross-origin requests</em>.</p></div></div><div class="top"><p class="src"><a id="v:cors" class="def">cors</a> <a href="src/Network.Wai.Middleware.Cors.html#cors" class="link">Source</a> <a href="#v:cors" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="../wai-3.2.4/Network-Wai.html#t:Request" title="Network.Wai">Request</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a>)</td><td class="doc"><p>A value of <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> indicates that the resource is not available for CORS</p></td></tr><tr><td class="src">-&gt; <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>A Cross-Origin resource sharing (CORS) middleware.</p><p>The middleware is given a function that serves as a pattern to decide
 whether a requested resource is available for CORS. If the match fails with
 <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> the request is passed unmodified to the inner application.</p><p>The current version of this module does only aim at compliance with the CORS
 protocol as specified in <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a>. In accordance with
 that standard the role of the server side is to support the client to
 enforce CORS restrictions. This module does not implement any enforcement of
 authorization policies that are possibly implied by the
 <code><a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></code>. It is up to the inner WAI application to enforce such
 policy and make sure that it is in accordance with the configuration of the
 <code><a href="Network-Wai-Middleware-Cors.html#v:cors" title="Network.Wai.Middleware.Cors">cors</a></code> middleware.</p><p>Matches are done as follows: <code>*</code> matches every origin. For all other cases a
 match succeeds if and only if the ASCII serializations (as described in
 RCF6454 section 6.2) are equal.</p><p>The OPTIONS method may return options for resources that are not actually
 available. In particular for preflight requests the implementation returns
 for the HTTP response headers <code>Access-Control-Allow-Headers</code> and
 <code>Access-Control-Allow-Methods</code> all values specified in the
 <code><a href="Network-Wai-Middleware-Cors.html#t:CorsResourcePolicy" title="Network.Wai.Middleware.Cors">CorsResourcePolicy</a></code> together with the respective values for simple requests
 (except <code>content-type</code>). This does not imply that the application actually
 supports the respective values are for the requested resource. Thus,
 depending on the application, an actual request may still fail with 404 even
 if the preflight request <em>supported</em> the usage of the HTTP method with CORS.</p><p>The implementation does not distinguish between simple requests and requests
 that require preflight. The client is free to omit a preflight request or do
 a preflight request in cases when it wouldn't be required.</p><p>For application authors it is strongly recommended to take into account the
 security considerations in section 6.3 of <a href="http://www.w3.org/TR/cors">http://www.w3.org/TR/cors</a>.</p><p><em>TODO</em></p><ul><li>We may consider adding optional enforcment aspects to this module: we may
   check if a request respects our origin restrictions and we may check that a
   CORS request respects the restrictions that we publish in the preflight
   responses.</li><li>Even though slightly out of scope we may (optionally) check if
   host header matches the actual host of the resource, since clients
   using CORS may expect this, since this check is recommended in
   <a href="http://www.w3.org/TR/cors">http://www.w3.org/TR/cors</a>.</li><li>We may consider integrating CORS policy handling more closely with the
   handling of the source, for instance by integrating with <code>ActionM</code> from
   scotty.</li></ul></div></div><div class="top"><p class="src"><a id="v:simpleCors" class="def">simpleCors</a> :: <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a> <a href="src/Network.Wai.Middleware.Cors.html#simpleCors" class="link">Source</a> <a href="#v:simpleCors" class="selflink">#</a></p><div class="doc"><p>A CORS middleware that supports simple cross-origin requests for all
 resources.</p><p>This middleware does not check if the resource corresponds to the
 restrictions for simple requests. This is in accordance with
 <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a>. It is the responsibility of the
 client (user-agent) to enforce CORS policy. The role of the server
 is to provide the client with the respective policy constraints.</p><p>It is out of the scope of the this module if the server chooses to
 enforce rules on its resources in relation to CORS policy itself.</p></div></div><a href="#g:1" id="g:1"><h1>Utils</h1></a><div class="top"><p class="src"><a id="v:isSimple" class="def">isSimple</a> :: <a href="../http-types-0.12.4/Network-HTTP-Types-Method.html#t:Method" title="Network.HTTP.Types.Method">Method</a> -&gt; <a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:RequestHeaders" title="Network.HTTP.Types.Header">RequestHeaders</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Network.Wai.Middleware.Cors.html#isSimple" class="link">Source</a> <a href="#v:isSimple" class="selflink">#</a></p><div class="doc"><p>Whether the given method and headers constitute a simple request,
 i.e. the method is simple, all headers are simple, and, if a POST request,
 the content-type is simple.</p></div></div><div class="top"><p class="src"><a id="v:simpleResponseHeaders" class="def">simpleResponseHeaders</a> :: [<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>] <a href="src/Network.Wai.Middleware.Cors.html#simpleResponseHeaders" class="link">Source</a> <a href="#v:simpleResponseHeaders" class="selflink">#</a></p><div class="doc"><p>Simple HTTP response headers as defined in <a href="https://www.w3.org/TR/cors/#simple-response-header">https://www.w3.org/TR/cors/#simple-response-header</a></p></div></div><div class="top"><p class="src"><a id="v:simpleHeaders" class="def">simpleHeaders</a> :: [<a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a>] <a href="src/Network.Wai.Middleware.Cors.html#simpleHeaders" class="link">Source</a> <a href="#v:simpleHeaders" class="selflink">#</a></p><div class="doc"><p>Simple HTTP headers are defined in <a href="https://www.w3.org/TR/cors/#simple-header">https://www.w3.org/TR/cors/#simple-header</a></p></div></div><div class="top"><p class="src"><a id="v:simpleContentTypes" class="def">simpleContentTypes</a> :: [<a href="../case-insensitive-1.2.1.0/Data-CaseInsensitive.html#t:CI" title="Data.CaseInsensitive">CI</a> <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>] <a href="src/Network.Wai.Middleware.Cors.html#simpleContentTypes" class="link">Source</a> <a href="#v:simpleContentTypes" class="selflink">#</a></p><div class="doc"><p>Simple content types are defined in <a href="https://www.w3.org/TR/cors/#simple-header">https://www.w3.org/TR/cors/#simple-header</a></p></div></div><div class="top"><p class="src"><a id="v:simpleMethods" class="def">simpleMethods</a> :: [<a href="../http-types-0.12.4/Network-HTTP-Types-Method.html#t:Method" title="Network.HTTP.Types.Method">Method</a>] <a href="src/Network.Wai.Middleware.Cors.html#simpleMethods" class="link">Source</a> <a href="#v:simpleMethods" class="selflink">#</a></p><div class="doc"><p>Simple HTTP methods as defined in <a href="https://www.w3.org/TR/cors/#simple-method">https://www.w3.org/TR/cors/#simple-method</a></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>