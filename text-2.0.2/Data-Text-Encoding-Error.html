<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Text.Encoding.Error</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">text-2.0.2: An efficient packed Unicode text type.</span><ul class="links" id="page-menu"><li><a href="src/Data.Text.Encoding.Error.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Bryan O'Sullivan 2009</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>bos@serpentine.com</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Text.Encoding.Error</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Error handling types</a></li><li><a href="#g:2">Useful error handling functions</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Types and functions for dealing with encoding and decoding errors
 in Unicode text.</p><p>The standard functions for encoding and decoding text are strict,
 which is to say that they throw exceptions on invalid input.  This
 is often unhelpful on real world input, so alternative functions
 exist that accept custom handlers for dealing with invalid inputs.
 These <code><a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a></code> handlers are normal Haskell functions.  You can use
 one of the presupplied functions in this module, or you can write a
 custom handler of your own.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:UnicodeException">UnicodeException</a><ul class="subs"><li>= <a href="#v:DecodeError">DecodeError</a> <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li>| <a href="#v:EncodeError">EncodeError</a> <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a>)</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:OnError">OnError</a> a b = <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b</li><li class="src short"><span class="keyword">type</span> <a href="#t:OnDecodeError">OnDecodeError</a> = <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:OnEncodeError">OnEncodeError</a> = <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:lenientDecode">lenientDecode</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a></li><li class="src short"><a href="#v:strictDecode">strictDecode</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a></li><li class="src short"><a href="#v:strictEncode">strictEncode</a> :: <a href="Data-Text-Encoding-Error.html#t:OnEncodeError" title="Data.Text.Encoding.Error">OnEncodeError</a></li><li class="src short"><a href="#v:ignore">ignore</a> :: <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> a b</li><li class="src short"><a href="#v:replace">replace</a> :: b -&gt; <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> a b</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Error handling types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnicodeException" class="def">UnicodeException</a> <a href="src/Data.Text.Encoding.Error.html#UnicodeException" class="link">Source</a> <a href="#t:UnicodeException" class="selflink">#</a></p><div class="doc"><p>An exception type for representing Unicode encoding errors.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DecodeError" class="def">DecodeError</a> <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</td><td class="doc"><p>Could not decode a byte sequence because it was invalid under
 the given encoding, or ran out of input in mid-decode.</p></td></tr><tr><td class="src"><a id="v:EncodeError" class="def">EncodeError</a> <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a>)</td><td class="doc"><div class="warning"><p>Deprecated: This constructor is never used, and will be removed.</p></div><p>Tried to encode a character that could not be represented
 under the given encoding, or ran out of input in mid-encode.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:UnicodeException">Instances</h4><details id="i:UnicodeException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnicodeException:Exception:1"></span> <a href="../base-4.18.2.1/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></span> <a href="src/Data.Text.Encoding.Error.html#line-94" class="link">Source</a> <a href="#t:UnicodeException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnicodeException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Encoding-Error.html">Data.Text.Encoding.Error</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="../base-4.18.2.1/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="../base-4.18.2.1/src/GHC.Exception.Type.html#toException" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.18.2.1/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> <a href="../base-4.18.2.1/src/GHC.Exception.Type.html#fromException" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.18.2.1/src/GHC.Exception.Type.html#displayException" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnicodeException:Show:2"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></span> <a href="src/Data.Text.Encoding.Error.html#line-91" class="link">Source</a> <a href="#t:UnicodeException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnicodeException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Encoding-Error.html">Data.Text.Encoding.Error</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.18.2.1/src/GHC.Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnicodeException:NFData:3"></span> <a href="../deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></span> <a href="src/Data.Text.Encoding.Error.html#line-96" class="link">Source</a> <a href="#t:UnicodeException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnicodeException:NFData:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Encoding-Error.html">Data.Text.Encoding.Error</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; () <a href="../deepseq-1.4.8.1/src/Control.DeepSeq.html#rnf" class="link">Source</a> <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnicodeException:Eq:4"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></span> <a href="src/Data.Text.Encoding.Error.html#line-77" class="link">Source</a> <a href="#t:UnicodeException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnicodeException:Eq:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Encoding-Error.html">Data.Text.Encoding.Error</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:OnError" class="def">OnError</a> a b = <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b <a href="src/Data.Text.Encoding.Error.html#OnError" class="link">Source</a> <a href="#t:OnError" class="selflink">#</a></p><div class="doc"><p>Function type for handling a coding error.  It is supplied with
 two inputs:</p><ul><li>A <code><a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></code> that describes the error.</li><li>The input value that caused the error.  If the error arose
   because the end of input was reached or could not be identified
   precisely, this value will be <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>.</li></ul><p>If the handler returns a value wrapped with <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>, that value will
 be used in the output as the replacement for the invalid input.  If
 it returns <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>, no value will be used in the output.</p><p>Should the handler need to abort processing, it should use <code><a href="../base-4.18.2.1/Prelude.html#v:error" title="Prelude">error</a></code>
 or <code><a href="../base-4.18.2.1/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code> an exception (preferably a <code><a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></code>).  It may
 use the description provided to construct a more helpful error
 report.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:OnDecodeError" class="def">OnDecodeError</a> = <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> <a href="src/Data.Text.Encoding.Error.html#OnDecodeError" class="link">Source</a> <a href="#t:OnDecodeError" class="selflink">#</a></p><div class="doc"><p>A handler for a decoding error.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:OnEncodeError" class="def">OnEncodeError</a> = <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Data.Text.Encoding.Error.html#OnEncodeError" class="link">Source</a> <a href="#t:OnEncodeError" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: This exception is never used in practice, and will be removed.</p></div><p>A handler for an encoding error.</p></div></div><a href="#g:2" id="g:2"><h1>Useful error handling functions</h1></a><div class="top"><p class="src"><a id="v:lenientDecode" class="def">lenientDecode</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> <a href="src/Data.Text.Encoding.Error.html#lenientDecode" class="link">Source</a> <a href="#v:lenientDecode" class="selflink">#</a></p><div class="doc"><p>Replace an invalid input byte with the Unicode replacement
 character U+FFFD.</p></div></div><div class="top"><p class="src"><a id="v:strictDecode" class="def">strictDecode</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> <a href="src/Data.Text.Encoding.Error.html#strictDecode" class="link">Source</a> <a href="#v:strictDecode" class="selflink">#</a></p><div class="doc"><p>Throw a <code><a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></code> if decoding fails.</p></div></div><div class="top"><p class="src"><a id="v:strictEncode" class="def">strictEncode</a> :: <a href="Data-Text-Encoding-Error.html#t:OnEncodeError" title="Data.Text.Encoding.Error">OnEncodeError</a> <a href="src/Data.Text.Encoding.Error.html#strictEncode" class="link">Source</a> <a href="#v:strictEncode" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: This function always throws an exception, and will be removed.</p></div><p>Throw a <code><a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a></code> if encoding fails.</p></div></div><div class="top"><p class="src"><a id="v:ignore" class="def">ignore</a> :: <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> a b <a href="src/Data.Text.Encoding.Error.html#ignore" class="link">Source</a> <a href="#v:ignore" class="selflink">#</a></p><div class="doc"><p>Ignore an invalid input, substituting nothing in the output.</p></div></div><div class="top"><p class="src"><a id="v:replace" class="def">replace</a> :: b -&gt; <a href="Data-Text-Encoding-Error.html#t:OnError" title="Data.Text.Encoding.Error">OnError</a> a b <a href="src/Data.Text.Encoding.Error.html#replace" class="link">Source</a> <a href="#v:replace" class="selflink">#</a></p><div class="doc"><p>Replace an invalid input with a valid output.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>