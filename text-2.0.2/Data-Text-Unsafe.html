<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Text.Unsafe</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">text-2.0.2: An efficient packed Unicode text type.</span><ul class="links" id="page-menu"><li><a href="src/Data.Text.Unsafe.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2009 2010 2011 Bryan O'Sullivan</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>bos@serpentine.com</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Text.Unsafe</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A module containing unsafe <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> operations, for very very careful
 use in heavily tested code.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:inlineInterleaveST">inlineInterleaveST</a> :: <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s a -&gt; <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s a</li><li class="src short"><a href="#v:inlinePerformIO">inlinePerformIO</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; a</li><li class="src short"><a href="#v:unsafeDupablePerformIO">unsafeDupablePerformIO</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Iter">Iter</a> = <a href="#v:Iter">Iter</a> !<a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> !<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:iter">iter</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a></li><li class="src short"><a href="#v:iterArray">iterArray</a> :: <a href="Data-Text-Array.html#t:Array" title="Data.Text.Array">Array</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a></li><li class="src short"><a href="#v:iter_">iter_</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:reverseIter">reverseIter</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a></li><li class="src short"><a href="#v:reverseIterArray">reverseIterArray</a> :: <a href="Data-Text-Array.html#t:Array" title="Data.Text.Array">Array</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a></li><li class="src short"><a href="#v:reverseIter_">reverseIter_</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:unsafeHead">unsafeHead</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></li><li class="src short"><a href="#v:unsafeTail">unsafeTail</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:lengthWord8">lengthWord8</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:takeWord8">takeWord8</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:dropWord8">dropWord8</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:inlineInterleaveST" class="def">inlineInterleaveST</a> :: <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s a -&gt; <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s a <a href="src/Data.Text.Internal.Unsafe.html#inlineInterleaveST" class="link">Source</a> <a href="#v:inlineInterleaveST" class="selflink">#</a></p><div class="doc"><p>Allow an <code><a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a></code> computation to be deferred lazily. When passed an
 action of type <code><a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a></code> <code>s</code> <code>a</code>, the action will only be performed when
 the value of <code>a</code> is demanded.</p><p>This function is identical to the normal unsafeInterleaveST, but is
 inlined and hence faster.</p><p><em>Note</em>: This operation is highly unsafe, as it can introduce
 externally visible non-determinism into an <code><a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a></code> action.</p></div></div><div class="top"><p class="src"><a id="v:inlinePerformIO" class="def">inlinePerformIO</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; a <a href="src/Data.Text.Internal.Unsafe.html#inlinePerformIO" class="link">Source</a> <a href="#v:inlinePerformIO" class="selflink">#</a></p><div class="doc"><p>Just like unsafePerformIO, but we inline it. Big performance gains as
 it exposes lots of things to further inlining. <em>Very unsafe</em>. In
 particular, you should do no memory allocation inside an
 <code><a href="Data-Text-Unsafe.html#v:inlinePerformIO" title="Data.Text.Unsafe">inlinePerformIO</a></code> block.</p></div></div><div class="top"><p class="src"><a id="v:unsafeDupablePerformIO" class="def">unsafeDupablePerformIO</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; a <a href="../base-4.18.2.1/src/GHC.IO.Unsafe.html#unsafeDupablePerformIO" class="link">Source</a> <a href="#v:unsafeDupablePerformIO" class="selflink">#</a></p><div class="doc"><p>This version of <code><a href="../base-4.18.2.1/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> is more efficient
because it omits the check that the IO is only being performed by a
single thread.  Hence, when you use <code><a href="Data-Text-Unsafe.html#v:unsafeDupablePerformIO" title="Data.Text.Unsafe">unsafeDupablePerformIO</a></code>,
there is a possibility that the IO action may be performed multiple
times (on a multiprocessor), and you should therefore ensure that
it gives the same results each time. It may even happen that one
of the duplicated IO actions is only run partially, and then interrupted
in the middle without an exception being raised. Therefore, functions
like <code><a href="../base-4.18.2.1/Control-Exception.html#v:bracket" title="Control.Exception">bracket</a></code> cannot be used safely within
<code><a href="Data-Text-Unsafe.html#v:unsafeDupablePerformIO" title="Data.Text.Unsafe">unsafeDupablePerformIO</a></code>.</p><p><em>Since: base-4.4.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Iter" class="def">Iter</a> <a href="src/Data.Text.Unsafe.html#Iter" class="link">Source</a> <a href="#t:Iter" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Iter" class="def">Iter</a> !<a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> !<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Iter">Instances</h4><details id="i:Iter" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Iter:Show:1"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a></span> <a href="src/Data.Text.Unsafe.html#line-69" class="link">Source</a> <a href="#t:Iter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Iter:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Unsafe.html">Data.Text.Unsafe</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.18.2.1/src/GHC.Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:iter" class="def">iter</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="src/Data.Text.Unsafe.html#iter" class="link">Source</a> <a href="#v:iter" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Iterate (unsafely) one step forwards through a UTF-8
 array, returning the current character and the delta to add to give
 the next offset to iterate at.</p></div></div><div class="top"><p class="src"><a id="v:iterArray" class="def">iterArray</a> :: <a href="Data-Text-Array.html#t:Array" title="Data.Text.Array">Array</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="src/Data.Text.Unsafe.html#iterArray" class="link">Source</a> <a href="#v:iterArray" class="selflink">#</a></p><div class="doc"><p><em>Since: text-2.0</em></p></div></div><div class="top"><p class="src"><a id="v:iter_" class="def">iter_</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Data.Text.Unsafe.html#iter_" class="link">Source</a> <a href="#v:iter_" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Iterate one step through a UTF-8 array, returning the
 delta to add to give the next offset to iterate at.</p></div></div><div class="top"><p class="src"><a id="v:reverseIter" class="def">reverseIter</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="src/Data.Text.Unsafe.html#reverseIter" class="link">Source</a> <a href="#v:reverseIter" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Iterate one step backwards through a UTF-8 array,
 returning the current character and the delta to add (i.e. a
 negative number) to give the next offset to iterate at.</p></div></div><div class="top"><p class="src"><a id="v:reverseIterArray" class="def">reverseIterArray</a> :: <a href="Data-Text-Array.html#t:Array" title="Data.Text.Array">Array</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="src/Data.Text.Unsafe.html#reverseIterArray" class="link">Source</a> <a href="#v:reverseIterArray" class="selflink">#</a></p><div class="doc"><p><em>Since: text-2.0</em></p></div></div><div class="top"><p class="src"><a id="v:reverseIter_" class="def">reverseIter_</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Data.Text.Unsafe.html#reverseIter_" class="link">Source</a> <a href="#v:reverseIter_" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Iterate one step backwards through a UTF-8 array,
 returning the delta to add (i.e. a negative number) to give the
 next offset to iterate at.</p><p><em>Since: text-1.1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:unsafeHead" class="def">unsafeHead</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> <a href="src/Data.Text.Unsafe.html#unsafeHead" class="link">Source</a> <a href="#v:unsafeHead" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> A variant of <code><a href="../base-4.18.2.1/GHC-List.html#v:head" title="GHC.List">head</a></code> for non-empty <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>. <code><a href="Data-Text-Unsafe.html#v:unsafeHead" title="Data.Text.Unsafe">unsafeHead</a></code>
 omits the check for the empty case, so there is an obligation on
 the programmer to provide a proof that the <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> is non-empty.</p></div></div><div class="top"><p class="src"><a id="v:unsafeTail" class="def">unsafeTail</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Unsafe.html#unsafeTail" class="link">Source</a> <a href="#v:unsafeTail" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> A variant of <code><a href="../base-4.18.2.1/GHC-List.html#v:tail" title="GHC.List">tail</a></code> for non-empty <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>. <code><a href="Data-Text-Unsafe.html#v:unsafeTail" title="Data.Text.Unsafe">unsafeTail</a></code>
 omits the check for the empty case, so there is an obligation on
 the programmer to provide a proof that the <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> is non-empty.</p></div></div><div class="top"><p class="src"><a id="v:lengthWord8" class="def">lengthWord8</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Data.Text.Unsafe.html#lengthWord8" class="link">Source</a> <a href="#v:lengthWord8" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Return the length of a <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> in units of <code>Word8</code>.  This
 is useful for sizing a target array appropriately before using
 <code>unsafeCopyToPtr</code>.</p><p><em>Since: text-2.0</em></p></div></div><div class="top"><p class="src"><a id="v:takeWord8" class="def">takeWord8</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Unsafe.html#takeWord8" class="link">Source</a> <a href="#v:takeWord8" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Unchecked take of <code>k</code> <code>Word8</code>s from the front of a <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>.</p><p><em>Since: text-2.0</em></p></div></div><div class="top"><p class="src"><a id="v:dropWord8" class="def">dropWord8</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Unsafe.html#dropWord8" class="link">Source</a> <a href="#v:dropWord8" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Unchecked drop of <code>k</code> <code>Word8</code>s from the front of a <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>.</p><p><em>Since: text-2.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>