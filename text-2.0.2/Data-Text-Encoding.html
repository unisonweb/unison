<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Text.Encoding</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">text-2.0.2: An efficient packed Unicode text type.</span><ul class="links" id="page-menu"><li><a href="src/Data.Text.Encoding.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2009 2010 2011 Bryan O'Sullivan<br />(c) 2009 Duncan Coutts<br />(c) 2008 2009 Tom Harper<br />(c) 2021 Andrew Lelechenko</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>bos@serpentine.com</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Text.Encoding</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Decoding ByteStrings to Text</a><ul><li><a href="#g:total">Total Functions </a><ul><li><a href="#g:3">Controllable error handling</a></li><li><a href="#g:4">Stream oriented decoding</a></li><li><a href="#g:5">Incremental UTF-8 decoding</a></li></ul></li><li><a href="#g:6">Partial Functions</a><ul><li><a href="#g:7">Stream oriented decoding</a></li></ul></li></ul></li><li><a href="#g:8">Encoding Text to ByteStrings</a></li><li><a href="#g:9">Encoding Text using ByteString Builders</a></li><li><a href="#g:10">ByteString validation</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Functions for converting <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> values to and from <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>,
 using several standard encodings.</p><p>To gain access to a much larger family of encodings, use the
 <a href="http://hackage.haskell.org/package/text-icu">text-icu package</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:decodeLatin1">decodeLatin1</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeASCIIPrefix">decodeASCIIPrefix</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="Data-Text.html#t:Text" title="Data.Text">Text</a>, <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>)</li><li class="src short"><a href="#v:decodeUtf8Lenient">decodeUtf8Lenient</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf8-39-">decodeUtf8'</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeASCII-39-">decodeASCII'</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf8With">decodeUtf8With</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf16LEWith">decodeUtf16LEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf16BEWith">decodeUtf16BEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf32LEWith">decodeUtf32LEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf32BEWith">decodeUtf32BEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:streamDecodeUtf8With">streamDecodeUtf8With</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Decoding">Decoding</a> = <a href="#v:Some">Some</a> !<a href="Data-Text.html#t:Text" title="Data.Text">Text</a> !<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> (<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a>)</li><li class="src short"><a href="#v:decodeUtf8Chunk">decodeUtf8Chunk</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a>, <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>)</li><li class="src short"><a href="#v:decodeUtf8More">decodeUtf8More</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a>, <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Utf8State">Utf8State</a></li><li class="src short"><a href="#v:startUtf8State">startUtf8State</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:StrictBuilder">StrictBuilder</a></li><li class="src short"><a href="#v:strictBuilderToText">strictBuilderToText</a> :: <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:textToStrictBuilder">textToStrictBuilder</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></li><li class="src short"><a href="#v:decodeASCII">decodeASCII</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf8">decodeUtf8</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf16LE">decodeUtf16LE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf16BE">decodeUtf16BE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf32LE">decodeUtf32LE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:decodeUtf32BE">decodeUtf32BE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:streamDecodeUtf8">streamDecodeUtf8</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a></li><li class="src short"><a href="#v:encodeUtf8">encodeUtf8</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:encodeUtf16LE">encodeUtf16LE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:encodeUtf16BE">encodeUtf16BE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:encodeUtf32LE">encodeUtf32LE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:encodeUtf32BE">encodeUtf32BE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:encodeUtf8Builder">encodeUtf8Builder</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../binary-0.8.9.1/Data-Binary-Builder.html#t:Builder" title="Data.Binary.Builder">Builder</a></li><li class="src short"><a href="#v:encodeUtf8BuilderEscaped">encodeUtf8BuilderEscaped</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString-Builder-Prim.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim">BoundedPrim</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../binary-0.8.9.1/Data-Binary-Builder.html#t:Builder" title="Data.Binary.Builder">Builder</a></li><li class="src short"><a href="#v:validateUtf8Chunk">validateUtf8Chunk</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>)</li><li class="src short"><a href="#v:validateUtf8More">validateUtf8More</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Decoding ByteStrings to Text</h1></a><div class="doc"><p>All of the single-parameter functions for decoding bytestrings
 encoded in one of the Unicode Transformation Formats (UTF) operate
 in a <em>strict</em> mode: each will throw an exception if given invalid
 input.</p><p>Each function has a variant, whose name is suffixed with -<code>With</code>,
 that gives greater control over the handling of decoding errors.
 For instance, <code><a href="Data-Text-Encoding.html#v:decodeUtf8" title="Data.Text.Encoding">decodeUtf8</a></code> will throw an exception, but
 <code><a href="Data-Text-Encoding.html#v:decodeUtf8With" title="Data.Text.Encoding">decodeUtf8With</a></code> allows the programmer to determine what to do on a
 decoding error.</p></div><a href="#g:total" id="g:total"><h2>Total Functions </h2></a><div class="doc"><p>These functions facilitate total decoding and should be preferred
 over their partial counterparts.</p></div><div class="top"><p class="src"><a id="v:decodeLatin1" class="def">decodeLatin1</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeLatin1" class="link">Source</a> <a href="#v:decodeLatin1" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing Latin-1 (aka ISO-8859-1) encoded text.</p><p><code><a href="Data-Text-Encoding.html#v:decodeLatin1" title="Data.Text.Encoding">decodeLatin1</a></code> is semantically equivalent to
  <code>Data.Text.pack . Data.ByteString.Char8.unpack</code></p><p>This is a total function. However, bear in mind that decoding Latin-1 (non-ASCII)
 characters to UTf-8 requires actual work and is not just buffer copying.</p></div></div><div class="top"><p class="src"><a id="v:decodeASCIIPrefix" class="def">decodeASCIIPrefix</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="Data-Text.html#t:Text" title="Data.Text">Text</a>, <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>) <a href="src/Data.Text.Encoding.html#decodeASCIIPrefix" class="link">Source</a> <a href="#v:decodeASCIIPrefix" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing ASCII text.</p><p>This is a total function which returns a pair of the longest ASCII prefix
 as <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>, and the remaining suffix as <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>.</p><p>Important note: the pair is lazy. This lets you check for errors by testing
 whether the second component is empty, without forcing the first component
 (which does a copy).
 To drop references to the input bytestring, force the prefix
 (using <code><a href="../base-4.18.2.1/Prelude.html#v:seq" title="Prelude">seq</a></code> or <code>BangPatterns</code>) and drop references to the suffix.</p><h3>Properties</h3><ul><li>If <code>(prefix, suffix) = decodeAsciiPrefix s</code>, then <code><code><a href="Data-Text-Encoding.html#v:encodeUtf8" title="Data.Text.Encoding">encodeUtf8</a></code> prefix &lt;&gt; suffix = s</code>.</li><li>Either <code>suffix</code> is empty, or <code><code><a href="../bytestring-0.11.5.3/Data-ByteString.html#v:head" title="Data.ByteString">head</a></code> suffix &gt; 127</code>.</li></ul><p><em>Since: text-2.0.2</em></p></div></div><div class="top"><p class="src"><a id="v:decodeUtf8Lenient" class="def">decodeUtf8Lenient</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf8Lenient" class="link">Source</a> <a href="#v:decodeUtf8Lenient" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing UTF-8 encoded text.</p><p>Any invalid input bytes will be replaced with the Unicode replacement
 character U+FFFD.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf8-39-" class="def">decodeUtf8'</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Data-Text-Encoding-Error.html#t:UnicodeException" title="Data.Text.Encoding.Error">UnicodeException</a> <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf8%27" class="link">Source</a> <a href="#v:decodeUtf8-39-" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing UTF-8 encoded text.</p><p>If the input contains any invalid UTF-8 data, the relevant
 exception will be returned, otherwise the decoded text.</p></div></div><div class="top"><p class="src"><a id="v:decodeASCII-39-" class="def">decodeASCII'</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeASCII%27" class="link">Source</a> <a href="#v:decodeASCII-39-" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing 7-bit ASCII encoded text.</p><p>This is a total function which returns either the <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> converted to a
 <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> containing ASCII text, or <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>.</p><p>Use <code><a href="Data-Text-Encoding.html#v:decodeASCIIPrefix" title="Data.Text.Encoding">decodeASCIIPrefix</a></code> to retain the longest ASCII prefix for an invalid
 input instead of discarding it.</p><p><em>Since: text-2.0.2</em></p></div></div><a href="#g:3" id="g:3"><h3>Controllable error handling</h3></a><div class="top"><p class="src"><a id="v:decodeUtf8With" class="def">decodeUtf8With</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf8With" class="link">Source</a> <a href="#v:decodeUtf8With" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing UTF-8 encoded text.</p><p>Surrogate code points in replacement character returned by <code><a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a></code>
 will be automatically remapped to the replacement char <code>U+FFFD</code>.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf16LEWith" class="def">decodeUtf16LEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf16LEWith" class="link">Source</a> <a href="#v:decodeUtf16LEWith" class="selflink">#</a></p><div class="doc"><p>Decode text from little endian UTF-16 encoding.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf16BEWith" class="def">decodeUtf16BEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf16BEWith" class="link">Source</a> <a href="#v:decodeUtf16BEWith" class="selflink">#</a></p><div class="doc"><p>Decode text from big endian UTF-16 encoding.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf32LEWith" class="def">decodeUtf32LEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf32LEWith" class="link">Source</a> <a href="#v:decodeUtf32LEWith" class="selflink">#</a></p><div class="doc"><p>Decode text from little endian UTF-32 encoding.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf32BEWith" class="def">decodeUtf32BEWith</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf32BEWith" class="link">Source</a> <a href="#v:decodeUtf32BEWith" class="selflink">#</a></p><div class="doc"><p>Decode text from big endian UTF-32 encoding.</p></div></div><a href="#g:4" id="g:4"><h3>Stream oriented decoding</h3></a><div class="doc"><p>The <code><a href="Data-Text-Encoding.html#v:streamDecodeUtf8" title="Data.Text.Encoding">streamDecodeUtf8</a></code> and <code><a href="Data-Text-Encoding.html#v:streamDecodeUtf8With" title="Data.Text.Encoding">streamDecodeUtf8With</a></code> functions accept
 a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> that represents a possibly incomplete input (e.g. a
 packet from a network stream) that may not end on a UTF-8 boundary.</p><ol><li value="1">The maximal prefix of <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> that could be decoded from the
    given input.</li><li value="2">The suffix of the <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> that could not be decoded due to
    insufficient input.</li><li value="3">A function that accepts another <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>.  That string will
    be assumed to directly follow the string that was passed as
    input to the original function, and it will in turn be decoded.</li></ol><p>To help understand the use of these functions, consider the Unicode
 string <code>&quot;hi &#9731;&quot;</code>. If encoded as UTF-8, this becomes <code>&quot;hi
 \xe2\x98\x83&quot;</code>; the final <code>'&#9731;'</code> is encoded as 3 bytes.</p><p>Now suppose that we receive this encoded string as 3 packets that
 are split up on untidy boundaries: <code>[&quot;hi \xe2&quot;, &quot;\x98&quot;,
 &quot;\x83&quot;]</code>. We cannot decode the entire Unicode string until we
 have received all three packets, but we would like to make progress
 as we receive each one.</p><pre>ghci&gt; let s0@(<code><a href="Data-Text-Encoding.html#v:Some" title="Data.Text.Encoding">Some</a></code> _ _ f0) = <code><a href="Data-Text-Encoding.html#v:streamDecodeUtf8" title="Data.Text.Encoding">streamDecodeUtf8</a></code> &quot;hi \xe2&quot;
ghci&gt; s0
<code><a href="Data-Text-Encoding.html#v:Some" title="Data.Text.Encoding">Some</a></code> &quot;hi &quot; &quot;\xe2&quot; _
</pre><p>We use the continuation <code>f0</code> to decode our second packet.</p><pre>ghci&gt; let s1@(<code><a href="Data-Text-Encoding.html#v:Some" title="Data.Text.Encoding">Some</a></code> _ _ f1) = f0 &quot;\x98&quot;
ghci&gt; s1
<code><a href="Data-Text-Encoding.html#v:Some" title="Data.Text.Encoding">Some</a></code> &quot;&quot; &quot;\xe2\x98&quot;
</pre><p>We could not give <code>f0</code> enough input to decode anything, so it
 returned an empty string. Once we feed our second continuation <code>f1</code>
 the last byte of input, it will make progress.</p><pre>ghci&gt; let s2@(<code><a href="Data-Text-Encoding.html#v:Some" title="Data.Text.Encoding">Some</a></code> _ _ f2) = f1 &quot;\x83&quot;
ghci&gt; s2
<code><a href="Data-Text-Encoding.html#v:Some" title="Data.Text.Encoding">Some</a></code> &quot;\x2603&quot; &quot;&quot; _
</pre><p>If given invalid input, an exception will be thrown by the function
 or continuation where it is encountered.</p></div><div class="top"><p class="src"><a id="v:streamDecodeUtf8With" class="def">streamDecodeUtf8With</a> :: <a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a> <a href="src/Data.Text.Encoding.html#streamDecodeUtf8With" class="link">Source</a> <a href="#v:streamDecodeUtf8With" class="selflink">#</a></p><div class="doc"><p>Decode, in a stream oriented way, a lazy <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing UTF-8
 encoded text.</p><p><em>Since: text-1.0.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Decoding" class="def">Decoding</a> <a href="src/Data.Text.Encoding.html#Decoding" class="link">Source</a> <a href="#t:Decoding" class="selflink">#</a></p><div class="doc"><p>A stream oriented decoding result.</p><p><em>Since: text-1.0.0.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Some" class="def">Some</a> !<a href="Data-Text.html#t:Text" title="Data.Text">Text</a> !<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> (<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Decoding">Instances</h4><details id="i:Decoding" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Decoding:Show:1"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a></span> <a href="src/Data.Text.Encoding.html#line-303" class="link">Source</a> <a href="#t:Decoding" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Decoding:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Encoding.html">Data.Text.Encoding</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.18.2.1/src/GHC.Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:5" id="g:5"><h3>Incremental UTF-8 decoding</h3></a><div class="doc"><p>The functions <code><a href="Data-Text-Encoding.html#v:decodeUtf8Chunk" title="Data.Text.Encoding">decodeUtf8Chunk</a></code> and <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> provide more
 control for error-handling and streaming.</p><ul><li>Those functions return an UTF-8 prefix of the given <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> up to the next error.
   For example this lets you insert or delete arbitrary text, or do some
   stateful operations before resuming, such as keeping track of error locations.
   In contrast, the older stream-oriented interface only lets you substitute
   a single fixed <code><a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></code> for each invalid byte in <code><a href="Data-Text-Encoding-Error.html#t:OnDecodeError" title="Data.Text.Encoding.Error">OnDecodeError</a></code>.</li><li>That prefix is encoded as a <code><a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></code>, so you can accumulate chunks
   before doing the copying work to construct a <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>, or you can
   output decoded fragments immediately as a lazy <code><a href="Data-Text-Lazy.html#v:Text" title="Data.Text.Lazy">Text</a></code>.</li></ul><p>For even lower-level primitives, see <code><a href="Data-Text-Encoding.html#v:validateUtf8Chunk" title="Data.Text.Encoding">validateUtf8Chunk</a></code> and <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code>.</p></div><div class="top"><p class="src"><a id="v:decodeUtf8Chunk" class="def">decodeUtf8Chunk</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a>, <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>) <a href="src/Data.Text.Internal.Encoding.html#decodeUtf8Chunk" class="link">Source</a> <a href="#v:decodeUtf8Chunk" class="selflink">#</a></p><div class="doc"><p>Decode a chunk of UTF-8 text. To be continued with <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code>.</p><p>See <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> for details on the result.</p><h3>Properties</h3><pre><code><a href="Data-Text-Encoding.html#v:decodeUtf8Chunk" title="Data.Text.Encoding">decodeUtf8Chunk</a></code> = <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> <code><a href="Data-Text-Encoding.html#v:startUtf8State" title="Data.Text.Encoding">startUtf8State</a></code>
</pre><p>Given:</p><pre><code><a href="Data-Text-Encoding.html#v:decodeUtf8Chunk" title="Data.Text.Encoding">decodeUtf8Chunk</a></code> chunk = (builder, rest, ms)
</pre><p><code>builder</code> is a prefix and <code>rest</code> is a suffix of <code>chunk</code>.</p><pre><code><a href="Data-Text-Encoding.html#v:encodeUtf8" title="Data.Text.Encoding">encodeUtf8</a></code> (<code><a href="Data-Text-Encoding.html#v:strictBuilderToText" title="Data.Text.Encoding">strictBuilderToText</a></code> builder) <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> rest = chunk
</pre><p><em>Since: text-2.0.2</em></p></div></div><div class="top"><p class="src"><a id="v:decodeUtf8More" class="def">decodeUtf8More</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a>, <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>) <a href="src/Data.Text.Internal.Encoding.html#decodeUtf8More" class="link">Source</a> <a href="#v:decodeUtf8More" class="selflink">#</a></p><div class="doc"><p>Decode another chunk in an ongoing UTF-8 stream.</p><p>Returns a triple:</p><ol><li value="1">A <code><a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></code> for the decoded chunk of text. You can accumulate
    chunks with <code>(<code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>)</code> or output them with <code><a href="Data-Text-Internal-StrictBuilder.html#v:toText" title="Data.Text.Internal.StrictBuilder">toText</a></code>.</li><li value="2">The undecoded remainder of the given chunk, for diagnosing errors
    and resuming (presumably after skipping some bytes).</li><li value="3"><code><a href="../base-4.18.2.1/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> the new state, or <code><a href="../base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if an invalid byte was encountered
    (it will be within the first 4 bytes of the undecoded remainder).</li></ol><h3>Properties</h3><p>Given:</p><pre>(pre, suf, ms) = <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> s chunk
</pre><ol><li value="1"><p>If the output <code>pre</code> is nonempty (alternatively, if <code>length chunk &gt; length suf</code>)</p><pre>s2b pre `<code><a href="../bytestring-0.11.5.3/Data-ByteString.html#v:append" title="Data.ByteString">append</a></code>` suf = p2b s `<code><a href="../bytestring-0.11.5.3/Data-ByteString.html#v:append" title="Data.ByteString">append</a></code>` chunk
</pre><p>where</p><pre>s2b = <code><a href="Data-Text-Encoding.html#v:encodeUtf8" title="Data.Text.Encoding">encodeUtf8</a></code> . <code><a href="Data-Text-Encoding.html#v:toText" title="Data.Text.Encoding">toText</a></code>
p2b = <code>partUtf8ToByteString</code>
</pre></li><li value="2"><p>If the output <code>pre</code> is empty (alternatively, if <code>length chunk = length suf</code>)</p><pre>suf = chunk</pre></li><li value="3"><p>Decoding chunks separately is equivalent to decoding their concatenation.</p><p>Given:</p><pre>(pre1, suf1, Just s1) = <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> s chunk1
(pre2, suf2,     ms2) = <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> s1 chunk2
(pre3, suf3,     ms3) = <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code> s (chunk1 `B.append` chunk2)
</pre><p>we have:</p><pre>s2b (pre1 <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> pre2) = s2b pre3
ms2 = ms3
</pre></li></ol></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Utf8State" class="def">Utf8State</a> <a href="src/Data.Text.Internal.Encoding.html#Utf8State" class="link">Source</a> <a href="#t:Utf8State" class="selflink">#</a></p><div class="doc"><p>State of decoding a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> in UTF-8.
 Enables incremental decoding (<code><a href="Data-Text-Encoding.html#v:validateUtf8Chunk" title="Data.Text.Encoding">validateUtf8Chunk</a></code>, <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code>,
 <code><a href="Data-Text-Encoding.html#v:decodeUtf8Chunk" title="Data.Text.Encoding">decodeUtf8Chunk</a></code>, <code><a href="Data-Text-Encoding.html#v:decodeUtf8More" title="Data.Text.Encoding">decodeUtf8More</a></code>).</p><p><em>Since: text-2.0.2</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Utf8State">Instances</h4><details id="i:Utf8State" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Utf8State:Show:1"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a></span> <a href="src/Data.Text.Internal.Encoding.html#line-105" class="link">Source</a> <a href="#t:Utf8State" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Utf8State:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Internal-Encoding.html">Data.Text.Internal.Encoding</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.18.2.1/src/GHC.Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../base-4.18.2.1/src/GHC.Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Utf8State:Eq:2"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a></span> <a href="src/Data.Text.Internal.Encoding.html#line-105" class="link">Source</a> <a href="#t:Utf8State" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Utf8State:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Internal-Encoding.html">Data.Text.Internal.Encoding</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:startUtf8State" class="def">startUtf8State</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> <a href="src/Data.Text.Internal.Encoding.html#startUtf8State" class="link">Source</a> <a href="#v:startUtf8State" class="selflink">#</a></p><div class="doc"><p>Initial <code><a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a></code>.</p><p><em>Since: text-2.0.2</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StrictBuilder" class="def">StrictBuilder</a> <a href="src/Data.Text.Internal.StrictBuilder.html#StrictBuilder" class="link">Source</a> <a href="#t:StrictBuilder" class="selflink">#</a></p><div class="doc"><p>A delayed representation of strict <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>.</p><p><em>Since: text-2.0.2</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:StrictBuilder">Instances</h4><details id="i:StrictBuilder" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StrictBuilder:Monoid:1"></span> <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></span> <a href="src/Data.Text.Internal.StrictBuilder.html#line-69" class="link">Source</a> <a href="#t:StrictBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StrictBuilder:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Internal-StrictBuilder.html">Data.Text.Internal.StrictBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="../base-4.18.2.1/src/GHC.Base.html#mempty" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="../base-4.18.2.1/src/GHC.Base.html#mappend" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a>] -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="../base-4.18.2.1/src/GHC.Base.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StrictBuilder:Semigroup:2"></span> <a href="../base-4.18.2.1/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></span> <a href="src/Data.Text.Internal.StrictBuilder.html#line-66" class="link">Source</a> <a href="#t:StrictBuilder" class="selflink">#</a></td><td class="doc"><p>Concatenation of <code><a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></code> is right-biased:
 the right builder will be run first. This allows a builder to
 run tail-recursively when it was accumulated left-to-right.</p></td></tr><tr><td colspan="2"><details id="i:id:StrictBuilder:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Text-Internal-StrictBuilder.html">Data.Text.Internal.StrictBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%3E" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="../base-4.18.2.1/src/GHC.Base.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="../base-4.18.2.1/src/GHC.Base.html#stimes" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:strictBuilderToText" class="def">strictBuilderToText</a> :: <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Internal.Encoding.html#strictBuilderToText" class="link">Source</a> <a href="#v:strictBuilderToText" class="selflink">#</a></p><div class="doc"><p>Use <code><a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></code> to build <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code>.</p><p><em>Since: text-2.0.2</em></p></div></div><div class="top"><p class="src"><a id="v:textToStrictBuilder" class="def">textToStrictBuilder</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a> <a href="src/Data.Text.Internal.Encoding.html#textToStrictBuilder" class="link">Source</a> <a href="#v:textToStrictBuilder" class="selflink">#</a></p><div class="doc"><p>Copy <code><a href="Data-Text.html#t:Text" title="Data.Text">Text</a></code> in a <code><a href="Data-Text-Encoding.html#t:StrictBuilder" title="Data.Text.Encoding">StrictBuilder</a></code></p><p><em>Since: text-2.0.2</em></p></div></div><a href="#g:6" id="g:6"><h2>Partial Functions</h2></a><div class="doc"><p>These functions are partial and should only be used with great caution
 (preferably not at all). See <a href="Data-Text-Encoding.html#g:total">Data.Text.Encoding</a> for better
 solutions.</p></div><div class="top"><p class="src"><a id="v:decodeASCII" class="def">decodeASCII</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeASCII" class="link">Source</a> <a href="#v:decodeASCII" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing 7-bit ASCII encoded text.</p><p>This is a partial function: it checks that input does not contain
 anything except ASCII and copies buffer or throws an error otherwise.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf8" class="def">decodeUtf8</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf8" class="link">Source</a> <a href="#v:decodeUtf8" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing UTF-8 encoded text that is known
 to be valid.</p><p>If the input contains any invalid UTF-8 data, an exception will be
 thrown that cannot be caught in pure code.  For more control over
 the handling of invalid data, use <code><a href="Data-Text-Encoding.html#v:decodeUtf8-39-" title="Data.Text.Encoding">decodeUtf8'</a></code> or
 <code><a href="Data-Text-Encoding.html#v:decodeUtf8With" title="Data.Text.Encoding">decodeUtf8With</a></code>.</p><p>This is a partial function: it checks that input is a well-formed
 UTF-8 sequence and copies buffer or throws an error otherwise.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf16LE" class="def">decodeUtf16LE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf16LE" class="link">Source</a> <a href="#v:decodeUtf16LE" class="selflink">#</a></p><div class="doc"><p>Decode text from little endian UTF-16 encoding.</p><p>If the input contains any invalid little endian UTF-16 data, an
 exception will be thrown.  For more control over the handling of
 invalid data, use <code><a href="Data-Text-Encoding.html#v:decodeUtf16LEWith" title="Data.Text.Encoding">decodeUtf16LEWith</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf16BE" class="def">decodeUtf16BE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf16BE" class="link">Source</a> <a href="#v:decodeUtf16BE" class="selflink">#</a></p><div class="doc"><p>Decode text from big endian UTF-16 encoding.</p><p>If the input contains any invalid big endian UTF-16 data, an
 exception will be thrown.  For more control over the handling of
 invalid data, use <code><a href="Data-Text-Encoding.html#v:decodeUtf16BEWith" title="Data.Text.Encoding">decodeUtf16BEWith</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf32LE" class="def">decodeUtf32LE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf32LE" class="link">Source</a> <a href="#v:decodeUtf32LE" class="selflink">#</a></p><div class="doc"><p>Decode text from little endian UTF-32 encoding.</p><p>If the input contains any invalid little endian UTF-32 data, an
 exception will be thrown.  For more control over the handling of
 invalid data, use <code><a href="Data-Text-Encoding.html#v:decodeUtf32LEWith" title="Data.Text.Encoding">decodeUtf32LEWith</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:decodeUtf32BE" class="def">decodeUtf32BE</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Encoding.html#decodeUtf32BE" class="link">Source</a> <a href="#v:decodeUtf32BE" class="selflink">#</a></p><div class="doc"><p>Decode text from big endian UTF-32 encoding.</p><p>If the input contains any invalid big endian UTF-32 data, an
 exception will be thrown.  For more control over the handling of
 invalid data, use <code><a href="Data-Text-Encoding.html#v:decodeUtf32BEWith" title="Data.Text.Encoding">decodeUtf32BEWith</a></code>.</p></div></div><a href="#g:7" id="g:7"><h3>Stream oriented decoding</h3></a><div class="top"><p class="src"><a id="v:streamDecodeUtf8" class="def">streamDecodeUtf8</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Data-Text-Encoding.html#t:Decoding" title="Data.Text.Encoding">Decoding</a> <a href="src/Data.Text.Encoding.html#streamDecodeUtf8" class="link">Source</a> <a href="#v:streamDecodeUtf8" class="selflink">#</a></p><div class="doc"><p>Decode, in a stream oriented way, a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> containing UTF-8
 encoded text that is known to be valid.</p><p>If the input contains any invalid UTF-8 data, an exception will be
 thrown (either by this function or a continuation) that cannot be
 caught in pure code.  For more control over the handling of invalid
 data, use <code><a href="Data-Text-Encoding.html#v:streamDecodeUtf8With" title="Data.Text.Encoding">streamDecodeUtf8With</a></code>.</p><p><em>Since: text-1.0.0.0</em></p></div></div><a href="#g:8" id="g:8"><h1>Encoding Text to ByteStrings</h1></a><div class="top"><p class="src"><a id="v:encodeUtf8" class="def">encodeUtf8</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Data.Text.Encoding.html#encodeUtf8" class="link">Source</a> <a href="#v:encodeUtf8" class="selflink">#</a></p><div class="doc"><p>Encode text using UTF-8 encoding.</p></div></div><div class="top"><p class="src"><a id="v:encodeUtf16LE" class="def">encodeUtf16LE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Data.Text.Encoding.html#encodeUtf16LE" class="link">Source</a> <a href="#v:encodeUtf16LE" class="selflink">#</a></p><div class="doc"><p>Encode text using little endian UTF-16 encoding.</p></div></div><div class="top"><p class="src"><a id="v:encodeUtf16BE" class="def">encodeUtf16BE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Data.Text.Encoding.html#encodeUtf16BE" class="link">Source</a> <a href="#v:encodeUtf16BE" class="selflink">#</a></p><div class="doc"><p>Encode text using big endian UTF-16 encoding.</p></div></div><div class="top"><p class="src"><a id="v:encodeUtf32LE" class="def">encodeUtf32LE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Data.Text.Encoding.html#encodeUtf32LE" class="link">Source</a> <a href="#v:encodeUtf32LE" class="selflink">#</a></p><div class="doc"><p>Encode text using little endian UTF-32 encoding.</p></div></div><div class="top"><p class="src"><a id="v:encodeUtf32BE" class="def">encodeUtf32BE</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Data.Text.Encoding.html#encodeUtf32BE" class="link">Source</a> <a href="#v:encodeUtf32BE" class="selflink">#</a></p><div class="doc"><p>Encode text using big endian UTF-32 encoding.</p></div></div><a href="#g:9" id="g:9"><h1>Encoding Text using ByteString Builders</h1></a><div class="top"><p class="src"><a id="v:encodeUtf8Builder" class="def">encodeUtf8Builder</a> :: <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../binary-0.8.9.1/Data-Binary-Builder.html#t:Builder" title="Data.Binary.Builder">Builder</a> <a href="src/Data.Text.Encoding.html#encodeUtf8Builder" class="link">Source</a> <a href="#v:encodeUtf8Builder" class="selflink">#</a></p><div class="doc"><p>Encode text to a ByteString <code><a href="../binary-0.8.9.1/Data-Binary-Builder.html#t:Builder" title="Data.Binary.Builder">Builder</a></code> using UTF-8 encoding.</p><p><em>Since: text-1.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:encodeUtf8BuilderEscaped" class="def">encodeUtf8BuilderEscaped</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString-Builder-Prim.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim">BoundedPrim</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../binary-0.8.9.1/Data-Binary-Builder.html#t:Builder" title="Data.Binary.Builder">Builder</a> <a href="src/Data.Text.Encoding.html#encodeUtf8BuilderEscaped" class="link">Source</a> <a href="#v:encodeUtf8BuilderEscaped" class="selflink">#</a></p><div class="doc"><p>Encode text using UTF-8 encoding and escape the ASCII characters using
 a <code><a href="../bytestring-0.11.5.3/Data-ByteString-Builder-Prim.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim">BoundedPrim</a></code>.</p><p>Use this function is to implement efficient encoders for text-based formats
 like JSON or HTML.</p><p><em>Since: text-1.1.0.0</em></p></div></div><a href="#g:10" id="g:10"><h1>ByteString validation</h1></a><div class="doc"><p>These functions are for validating <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>s as encoded text.</p></div><div class="top"><p class="src"><a id="v:validateUtf8Chunk" class="def">validateUtf8Chunk</a> :: <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>) <a href="src/Data.Text.Internal.Encoding.html#validateUtf8Chunk" class="link">Source</a> <a href="#v:validateUtf8Chunk" class="selflink">#</a></p><div class="doc"><p>Validate a <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> as UTF-8-encoded text. To be continued using <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code>.</p><p>See also <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> for details on the result of this function.</p><pre><code><a href="Data-Text-Encoding.html#v:validateUtf8Chunk" title="Data.Text.Encoding">validateUtf8Chunk</a></code> = <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> <code><a href="Data-Text-Encoding.html#v:startUtf8State" title="Data.Text.Encoding">startUtf8State</a></code>
</pre><h3>Properties</h3><p>Given:</p><pre><code><a href="Data-Text-Encoding.html#v:validateUtf8Chunk" title="Data.Text.Encoding">validateUtf8Chunk</a></code> chunk = (n, ms)
</pre><ul><li><p>The prefix is valid UTF-8. In particular, it should be accepted
   by this validation:</p><pre><code><a href="Data-Text-Encoding.html#v:validateUtf8Chunk" title="Data.Text.Encoding">validateUtf8Chunk</a></code> (<code><a href="../bytestring-0.11.5.3/Data-ByteString.html#v:take" title="Data.ByteString">take</a></code> n chunk) = (n, Just <code><a href="Data-Text-Encoding.html#v:startUtf8State" title="Data.Text.Encoding">startUtf8State</a></code>)
</pre></li></ul></div></div><div class="top"><p class="src"><a id="v:validateUtf8More" class="def">validateUtf8More</a> :: <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a> -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Data-Text-Encoding.html#t:Utf8State" title="Data.Text.Encoding">Utf8State</a>) <a href="src/Data.Text.Internal.Encoding.html#validateUtf8More" class="link">Source</a> <a href="#v:validateUtf8More" class="selflink">#</a></p><div class="doc"><p>Validate another <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> chunk in an ongoing stream of UTF-8-encoded text.</p><p>Returns a pair:</p><ol><li value="1">The first component <code>n</code> is the end position, relative to the current
    chunk, of the longest prefix of the accumulated bytestring which is valid UTF-8.
    <code>n</code> may be negative: that happens when an incomplete code point started in
    a previous chunk and is not completed by the current chunk (either
    that code point is still incomplete, or it is broken by an invalid byte).</li><li value="2"><p>The second component <code>ms</code> indicates the following:</p><ul><li>if <code>ms = Nothing</code>, the remainder of the chunk contains an invalid byte,
  within four bytes from position <code>n</code>;</li><li>if <code>ms = Just s'</code>, you can carry on validating another chunk
  by calling <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> with the new state <code>s'</code>.</li></ul></li></ol><h3>Properties</h3><p>Given:</p><pre><code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> s chunk = (n, ms)
</pre><ul><li><p>If the chunk is invalid, it cannot be extended to be valid.</p><pre>ms = Nothing
==&gt; <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> s (chunk <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> more) = (n, Nothing)
</pre></li><li><p>Validating two chunks sequentially is the same as validating them
   together at once:</p><pre>ms = Just s'
==&gt; <code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> s (chunk <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> more) = <code><a href="../base-4.18.2.1/Data-Bifunctor.html#v:first" title="Data.Bifunctor">first</a></code> (<code><a href="../bytestring-0.11.5.3/Data-ByteString.html#v:length" title="Data.ByteString">length</a></code> chunk <code><a href="../base-4.18.2.1/Prelude.html#v:-43-" title="Prelude">+</a></code>) (<code><a href="Data-Text-Encoding.html#v:validateUtf8More" title="Data.Text.Encoding">validateUtf8More</a></code> s' more)
</pre></li></ul></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>