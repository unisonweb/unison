<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                  #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds            #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types           #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies         #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators        #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="annot"><span class="hs-comment">{- |
Module                  : Colog.Core.Action
Copyright               : (c) 2018-2020 Kowainik, 2021-2024 Co-Log
SPDX-License-Identifier : MPL-2.0
Maintainer              : Co-Log &lt;xrom.xkov@gmail.com&gt;
Stability               : Stable
Portability             : Portable

Implements core data types and combinators for logging actions.
-}</span></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Colog.Core.Action</span><span>
</span><span id="line-20"></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Core type and instances</span></span><span>
</span><span id="line-21"></span><span>         </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3C%26"><span class="hs-operator">(&lt;&amp;)</span></a></span><span>
</span><span id="line-23"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%26%3E"><span class="hs-operator">(&amp;&gt;)</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>         </span><span class="annot"><span class="hs-comment">-- * 'Semigroup' combinators</span></span><span>
</span><span id="line-26"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#foldActions"><span class="hs-identifier">foldActions</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>         </span><span class="annot"><span class="hs-comment">-- * Contravariant combinators</span></span><span>
</span><span id="line-29"></span><span>         </span><span class="annot"><span class="hs-comment">-- $contravariant</span></span><span>
</span><span id="line-30"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cfilter"><span class="hs-identifier">cfilter</span></a></span><span>
</span><span id="line-31"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cfilterM"><span class="hs-identifier">cfilterM</span></a></span><span>
</span><span id="line-32"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmap"><span class="hs-identifier">cmap</span></a></span><span>
</span><span id="line-33"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%24%3C"><span class="hs-operator">(&gt;$&lt;)</span></a></span><span>
</span><span id="line-34"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmapMaybe"><span class="hs-identifier">cmapMaybe</span></a></span><span>
</span><span id="line-35"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmapMaybeM"><span class="hs-identifier">cmapMaybeM</span></a></span><span>
</span><span id="line-36"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%24"><span class="hs-operator">(Colog.Core.Action.&gt;$)</span></a></span><span>
</span><span id="line-37"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmapM"><span class="hs-identifier">cmapM</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span>         </span><span class="annot"><span class="hs-comment">-- * Divisible combinators</span></span><span>
</span><span id="line-40"></span><span>         </span><span class="annot"><span class="hs-comment">-- $divisible</span></span><span>
</span><span id="line-41"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#divide"><span class="hs-identifier">divide</span></a></span><span>
</span><span id="line-42"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#divideM"><span class="hs-identifier">divideM</span></a></span><span>
</span><span id="line-43"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#conquer"><span class="hs-identifier">conquer</span></a></span><span>
</span><span id="line-44"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%2A%3C"><span class="hs-operator">(&gt;*&lt;)</span></a></span><span>
</span><span id="line-45"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%2A"><span class="hs-operator">(&gt;*)</span></a></span><span>
</span><span id="line-46"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%2A%3C"><span class="hs-operator">(*&lt;)</span></a></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>         </span><span class="annot"><span class="hs-comment">-- * Decidable combinators</span></span><span>
</span><span id="line-49"></span><span>         </span><span class="annot"><span class="hs-comment">-- $decidable</span></span><span>
</span><span id="line-50"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#lose"><span class="hs-identifier">lose</span></a></span><span>
</span><span id="line-51"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#choose"><span class="hs-identifier">choose</span></a></span><span>
</span><span id="line-52"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#chooseM"><span class="hs-identifier">chooseM</span></a></span><span>
</span><span id="line-53"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%7C%3C"><span class="hs-operator">(&gt;|&lt;)</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>         </span><span class="annot"><span class="hs-comment">-- * Comonadic combinators</span></span><span>
</span><span id="line-56"></span><span>         </span><span class="annot"><span class="hs-comment">-- $comonad</span></span><span>
</span><span id="line-57"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#extract"><span class="hs-identifier">extract</span></a></span><span>
</span><span id="line-58"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#extend"><span class="hs-identifier">extend</span></a></span><span>
</span><span id="line-59"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3D%3E%3E"><span class="hs-operator">(=&gt;&gt;)</span></a></span><span>
</span><span id="line-60"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3C%3C%3D"><span class="hs-operator">(&lt;&lt;=)</span></a></span><span>
</span><span id="line-61"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#duplicate"><span class="hs-identifier">duplicate</span></a></span><span>
</span><span id="line-62"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#multiplicate"><span class="hs-identifier">multiplicate</span></a></span><span>
</span><span id="line-63"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-identifier">separate</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>         </span><span class="annot"><span class="hs-comment">-- * Higher-order combinators</span></span><span>
</span><span id="line-66"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#hoistLogAction"><span class="hs-identifier">hoistLogAction</span></a></span><span>
</span><span id="line-67"></span><span>       </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;=&lt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&gt;=&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fold</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">for_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traverse_</span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Constraint</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Semigroup</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">stimesMonoid</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Void</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">absurd</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ErrorMessage</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TypeError</span></span><span class="hs-special">)</span><span class="hs-cpp">

#if MIN_VERSION_base(4,12,0)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Contravariant</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Contravariant</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-83"></span><span class="annot"><span class="hs-comment">{- $setup
&gt;&gt;&gt; import Colog.Core.IO
-}</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- Core data type with instances</span><span>
</span><span id="line-89"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><span class="hs-comment">{- | Polymorphic and very general logging action type.

* @__msg__@ type variables is an input for logger. It can be 'Text' or custom
logging messsage with different fields that you want to format in future.

* @__m__@ type variable is for monadic action inside which logging is happening. It
can be either 'IO' or some custom pure monad.

Key design point here is that 'LogAction' is:

* 'Semigroup'
* 'Monoid'
* 'Data.Functor.Contravariant.Contravariant'
* 'Data.Functor.Contravariant.Divisible.Divisible'
* 'Data.Functor.Contravariant.Divisible.Decidable'
* 'Control.Comonad.Comonad'
-}</span></span><span>
</span><span id="line-108"></span><span class="hs-keyword">newtype</span><span> </span><span id="LogAction"><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span></span><span> </span><span id="local-6989586621679038719"><span class="annot"><a href="#local-6989586621679038719"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679038720"><span class="annot"><a href="#local-6989586621679038720"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LogAction"><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unLogAction"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) msg. LogAction m msg -&gt; msg -&gt; m ()
</span><a href="Colog.Core.Action.html#unLogAction"><span class="hs-identifier hs-var hs-var">unLogAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679038720"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038719"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="annot"><span class="hs-comment">{- | This instance allows you to join multiple logging actions into single one.

For example, if you have two actions like these:

@
logToStdout :: 'LogAction' IO String  -- outputs String to terminal
logToFile   :: 'LogAction' IO String  -- appends String to some file
@

You can create new 'LogAction' that perform both actions one after another using 'Semigroup':

@
logToBoth :: 'LogAction' IO String  -- outputs String to both terminal and some file
logToBoth = logToStdout &lt;&gt; logToFile
@
-}</span></span><span>
</span><span id="line-128"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679038728"><span id="local-6989586621679038729"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">(&lt;&gt;)</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039006"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039006"><span class="hs-identifier hs-var">action1</span></a></span></span><span> </span><span id="local-6989586621679039007"><span class="annot"><span class="annottext">&lt;&gt; :: LogAction m a -&gt; LogAction m a -&gt; LogAction m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039008"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039008"><span class="hs-identifier hs-var">action2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039009"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039009"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039006"><span class="hs-identifier hs-var">action1</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039009"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall a b. m a -&gt; m b -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039008"><span class="hs-identifier hs-var">action2</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039009"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">sconcat</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span id="local-6989586621679039014"><span class="annot"><span class="annottext">sconcat :: NonEmpty (LogAction m a) -&gt; LogAction m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">sconcat</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (LogAction m a) -&gt; LogAction m a
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Applicative m) =&gt;
t (LogAction m a) -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#foldActions"><span class="hs-identifier hs-var">foldActions</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sconcat</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">stimes</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679039016"><span class="annot"><span class="hs-identifier hs-type">Integral</span></span><span> </span><span class="annot"><a href="#local-6989586621679039016"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039016"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038729"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679039023"><span class="annot"><span class="annottext">stimes :: forall b. Integral b =&gt; b -&gt; LogAction m a -&gt; LogAction m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">stimes</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; LogAction m a -&gt; LogAction m a
forall b a. (Integral b, Monoid a) =&gt; b -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">stimesMonoid</span></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">stimes</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679038741"><span id="local-6989586621679038742"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">mappend</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621679039032"><span class="annot"><span class="annottext">mappend :: LogAction m a -&gt; LogAction m a -&gt; LogAction m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogAction m a -&gt; LogAction m a -&gt; LogAction m a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mappend</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">mempty</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span id="local-6989586621679039034"><span class="annot"><span class="annottext">mempty :: LogAction m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mempty</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">mconcat</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038742"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span id="local-6989586621679039038"><span class="annot"><span class="annottext">mconcat :: [LogAction m a] -&gt; LogAction m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mconcat</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LogAction m a] -&gt; LogAction m a
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Applicative m) =&gt;
t (LogAction m a) -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#foldActions"><span class="hs-identifier hs-var">foldActions</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mconcat</span></span><span> </span><span class="hs-pragma">#-}</span><span class="hs-cpp">

#if MIN_VERSION_base(4,12,0)
</span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679038756"><span class="annot"><span class="hs-identifier hs-type">Contravariant.Contravariant</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038756"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">contramap</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679039044"><span id="local-6989586621679039045"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039044"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039045"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038756"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039045"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038756"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039044"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621679039046"><span class="annot"><span class="annottext">contramap :: forall a' a. (a' -&gt; a) -&gt; LogAction m a -&gt; LogAction m a'
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">contramap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
forall a b (m :: * -&gt; *).
(a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#cmap"><span class="hs-identifier hs-var">cmap</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">contramap</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">(&gt;$)</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679039048"><span id="local-6989586621679039049"><span class="annot"><a href="#local-6989586621679039048"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038756"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039048"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038756"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039049"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621679039050"><span class="annot"><span class="annottext">&gt;$ :: forall b a. b -&gt; LogAction m b -&gt; LogAction m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&gt;$)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; LogAction m b -&gt; LogAction m a
forall b (m :: * -&gt; *) a. b -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#%3E%24"><span class="hs-operator hs-var">(Colog.Core.Action.&gt;$)</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;$</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-165"></span><span class="annot"><span class="hs-comment">-- | For tracking usage of unrepresentable class instances of 'LogAction'.</span></span><span>
</span><span id="line-166"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="UnrepresentableClass"><span class="annot"><a href="Colog.Core.Action.html#UnrepresentableClass"><span class="hs-identifier hs-var">UnrepresentableClass</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>    </span><span id="UnrepresentableClass"><span class="annot"><a href="Colog.Core.Action.html#UnrepresentableClass"><span class="hs-identifier hs-var">UnrepresentableClass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span>
</span><span id="line-169"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;'LogAction' cannot have a 'Functor' instance by design.&quot;</span></span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-special">'</span><span> </span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;However, you've attempted to use this instance.&quot;</span></span><span class="hs-cpp">
#if MIN_VERSION_base(4,12,0)
</span><span>        </span><span class="hs-special">'</span><span> </span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-special">'</span><span> </span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Probably you meant 'Contravariant' class instance with the following methods:&quot;</span></span><span>
</span><span id="line-174"></span><span>        </span><span class="hs-special">'</span><span> </span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;  * contramap :: (a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a&quot;</span></span><span>
</span><span id="line-175"></span><span>        </span><span class="hs-special">'</span><span> </span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;  * (&gt;$) :: b -&gt; LogAction m b -&gt; LogAction m a&quot;</span></span><span class="hs-cpp">
#endif
</span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><span class="hs-comment">{- | &#9888;&#65039;__CAUTION__&#9888;&#65039; This instance is for custom error display only.

'LogAction' is not supposed to have 'Functor' instance by design.

In case it is used by mistake, the user  will see the following:

#if MIN_VERSION_base(4,12,0)

&gt;&gt;&gt; fmap show logStringStdout
...
... 'LogAction' cannot have a 'Functor' instance by design.
      However, you've attempted to use this instance.
...
      Probably you meant 'Contravariant' class instance with the following methods:
        * contramap :: (a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
        * (&gt;$) :: b -&gt; LogAction m b -&gt; LogAction m a
...


#else

&gt;&gt;&gt; fmap show logStringStdout
...
... 'LogAction' cannot have a 'Functor' instance by design.
      However, you've attempted to use this instance.
...

#endif

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-210"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679038774"><span class="annot"><a href="Colog.Core.Action.html#UnrepresentableClass"><span class="hs-identifier hs-type">UnrepresentableClass</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038774"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679039056"><span id="local-6989586621679039057"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039056"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039057"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038774"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039056"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038774"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039057"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621679039060"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; LogAction m a -&gt; LogAction m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LogAction m a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; LogAction m b
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unreachable Functor instance of LogAction&quot;</span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">(&lt;$)</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679039063"><span id="local-6989586621679039064"><span class="annot"><a href="#local-6989586621679039063"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038774"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039064"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038774"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039063"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679039067"><span class="annot"><span class="annottext">&lt;$ :: forall a b. a -&gt; LogAction m b -&gt; LogAction m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;$</span></span></span><span>  </span><span class="annot"><span class="annottext">LogAction m b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; LogAction m a
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unreachable Functor instance of LogAction&quot;</span></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><span class="hs-comment">{- | Operator version of 'unLogAction'. Note that because of the types, something like:

@
action &lt;&amp; msg1 &lt;&amp; msg2
@

doesn't make sense. Instead you want:

@
action &lt;&amp; msg1 \&gt;\&gt; action &lt;&amp; msg2
@

In addition, because '&lt;&amp;' has higher precedence than the other operators in this
module, the following:

@
f &gt;$&lt; action &lt;&amp; msg
@

is equivalent to:

@
(f &gt;$&lt; action) &lt;&amp; msg
@
-}</span></span><span>
</span><span id="line-243"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3C%26"><span class="hs-operator hs-type">&lt;&amp;</span></a></span><span>
</span><span id="line-244"></span><span id="local-6989586621679039068"><span id="local-6989586621679039069"><span class="annot"><a href="Colog.Core.Action.html#%3C%26"><span class="hs-operator hs-type">(&lt;&amp;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039068"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039069"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039069"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039068"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-245"></span><span id="%3C%26"><span class="annot"><span class="annottext">&lt;&amp; :: forall (m :: * -&gt; *) msg. LogAction m msg -&gt; msg -&gt; m ()
</span><a href="Colog.Core.Action.html#%3C%26"><span class="hs-operator hs-var hs-var">(&lt;&amp;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogAction m msg -&gt; msg -&gt; m ()
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-246"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&amp;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><span class="hs-comment">{- | A flipped version of '&lt;&amp;'.

It shares the same precedence as '&lt;&amp;', so make sure to surround lower precedence
operators in parentheses:

@
msg &amp;&gt; (f &gt;$&lt; action)
@
-}</span></span><span>
</span><span id="line-257"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%26%3E"><span class="hs-operator hs-type">&amp;&gt;</span></a></span><span>
</span><span id="line-258"></span><span id="local-6989586621679038787"><span id="local-6989586621679038788"><span class="annot"><a href="Colog.Core.Action.html#%26%3E"><span class="hs-operator hs-type">(&amp;&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679038787"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038788"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038787"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038788"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-259"></span><span id="%26%3E"><span class="annot"><span class="annottext">&amp;&gt; :: forall msg (m :: * -&gt; *). msg -&gt; LogAction m msg -&gt; m ()
</span><a href="Colog.Core.Action.html#%26%3E"><span class="hs-operator hs-var hs-var">(&amp;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LogAction m msg -&gt; msg -&gt; m ()) -&gt; msg -&gt; LogAction m msg -&gt; m ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LogAction m msg -&gt; msg -&gt; m ()
forall (m :: * -&gt; *) msg. LogAction m msg -&gt; msg -&gt; m ()
</span><a href="Colog.Core.Action.html#%3C%26"><span class="hs-operator hs-var">(&lt;&amp;)</span></a></span><span>
</span><span id="line-260"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&amp;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="annot"><span class="hs-comment">{- | Joins some 'Foldable' of 'LogAction's into single 'LogAction' using
'Semigroup' instance for 'LogAction'. This is basically specialized version of
'Data.Foldable.fold' function.
-}</span></span><span>
</span><span id="line-266"></span><span id="local-6989586621679038736"><span id="local-6989586621679038737"><span id="local-6989586621679038738"><span class="annot"><a href="Colog.Core.Action.html#foldActions"><span class="hs-identifier hs-type">foldActions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679038736"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038737"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038736"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038737"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038738"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038737"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038738"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-267"></span><span id="foldActions"><span class="annot"><span class="annottext">foldActions :: forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Applicative m) =&gt;
t (LogAction m a) -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#foldActions"><span class="hs-identifier hs-var hs-var">foldActions</span></a></span></span><span> </span><span id="local-6989586621679039076"><span class="annot"><span class="annottext">t (LogAction m a)
</span><a href="#local-6989586621679039076"><span class="hs-identifier hs-var">actions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039077"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039077"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t (LogAction m a) -&gt; (LogAction m a -&gt; m ()) -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="annot"><span class="annottext">t (LogAction m a)
</span><a href="#local-6989586621679039076"><span class="hs-identifier hs-var">actions</span></a></span><span> </span><span class="annot"><span class="annottext">((LogAction m a -&gt; m ()) -&gt; m ())
-&gt; (LogAction m a -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039078"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039078"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039078"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039077"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-268"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#foldActions"><span class="hs-pragma hs-type">foldActions</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-269"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#foldActions"><span class="hs-pragma hs-type">foldActions</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039079"><span id="local-6989586621679039080"><span class="annot"><span class="hs-pragma hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679039079"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039079"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039080"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">]</span><span>          </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039079"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039080"><span class="hs-pragma hs-type">a</span></a></span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-270"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#foldActions"><span class="hs-pragma hs-type">foldActions</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039081"><span id="local-6989586621679039082"><span class="annot"><span class="hs-pragma hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679039081"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><span class="hs-pragma hs-type">NonEmpty</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039081"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039082"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039081"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039082"><span class="hs-pragma hs-type">a</span></a></span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- Contravariant combinators</span><span>
</span><span id="line-274"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><span class="hs-comment">{- $contravariant

Combinators that implement interface in the spirit of the following typeclass:

@
__class__ Contravariant f __where__
    contramap :: (a -&gt; b) -&gt; f b -&gt; f a
@
-}</span></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="annot"><span class="hs-comment">{- | Takes predicate and performs given logging action only if predicate returns
'True' on input logging message.
-}</span></span><span>
</span><span id="line-289"></span><span id="local-6989586621679038801"><span id="local-6989586621679038802"><span class="annot"><a href="Colog.Core.Action.html#cfilter"><span class="hs-identifier hs-type">cfilter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038801"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038802"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038801"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038802"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038801"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038802"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-290"></span><span id="cfilter"><span class="annot"><span class="annottext">cfilter :: forall (m :: * -&gt; *) msg.
Applicative m =&gt;
(msg -&gt; Bool) -&gt; LogAction m msg -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#cfilter"><span class="hs-identifier hs-var hs-var">cfilter</span></a></span></span><span> </span><span id="local-6989586621679039085"><span class="annot"><span class="annottext">msg -&gt; Bool
</span><a href="#local-6989586621679039085"><span class="hs-identifier hs-var">predicate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039086"><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039086"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(msg -&gt; m ()) -&gt; LogAction m msg
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((msg -&gt; m ()) -&gt; LogAction m msg)
-&gt; (msg -&gt; m ()) -&gt; LogAction m msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039087"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039087"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg -&gt; Bool
</span><a href="#local-6989586621679039085"><span class="hs-identifier hs-var">predicate</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039087"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039086"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039087"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cfilter"><span class="hs-pragma hs-type">cfilter</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><span class="hs-comment">{- | Performs the given logging action only if satisfies the monadic
predicate. Let's say you want to only to see logs that happened on
weekends.

@
isWeekendM :: MessageWithTimestamp -&gt; IO Bool
@

And use it with 'cfilterM' like this

@
logMessageAction :: 'LogAction' m MessageWithTimestamp

logWeekendAction :: 'LogAction' m MessageWithTimestamp
logWeekendAction = cfilterM isWeekendM logMessageAction
@

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-312"></span><span id="local-6989586621679038806"><span id="local-6989586621679038807"><span class="annot"><a href="Colog.Core.Action.html#cfilterM"><span class="hs-identifier hs-type">cfilterM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679038806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038807"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038807"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038807"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-313"></span><span id="cfilterM"><span class="annot"><span class="annottext">cfilterM :: forall (m :: * -&gt; *) msg.
Monad m =&gt;
(msg -&gt; m Bool) -&gt; LogAction m msg -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#cfilterM"><span class="hs-identifier hs-var hs-var">cfilterM</span></a></span></span><span> </span><span id="local-6989586621679039093"><span class="annot"><span class="annottext">msg -&gt; m Bool
</span><a href="#local-6989586621679039093"><span class="hs-identifier hs-var">predicateM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039094"><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039094"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="annottext">(msg -&gt; m ()) -&gt; LogAction m msg
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((msg -&gt; m ()) -&gt; LogAction m msg)
-&gt; (msg -&gt; m ()) -&gt; LogAction m msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039095"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039095"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">msg -&gt; m Bool
</span><a href="#local-6989586621679039093"><span class="hs-identifier hs-var">predicateM</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039095"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m Bool -&gt; (Bool -&gt; m ()) -&gt; m ()
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039096"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679039096"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679039096"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039094"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039095"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cfilterM"><span class="hs-pragma hs-type">cfilterM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="annot"><span class="hs-comment">{- | This combinator is @contramap@ from contravariant functor. It is useful
when you have something like

@
__data__ LogRecord = LR
    { lrName    :: LoggerName
    , lrMessage :: Text
    }
@

and you need to provide 'LogAction' which consumes @LogRecord@

@
logRecordAction :: 'LogAction' m LogRecord
@

when you only have action that consumes 'Text'

@
logTextAction :: 'LogAction' m Text
@

With 'cmap' you can do the following:

@
logRecordAction :: 'LogAction' m LogRecord
logRecordAction = 'cmap' lrMesssage logTextAction
@

This action will print only @lrMessage@ from @LogRecord@. But if you have
formatting function like this:

@
formatLogRecord :: LogRecord -&gt; Text
@

you can apply it instead of @lrMessage@ to log formatted @LogRecord@ as 'Text'.
-}</span></span><span>
</span><span id="line-355"></span><span id="local-6989586621679038759"><span id="local-6989586621679038760"><span id="local-6989586621679038761"><span class="annot"><a href="Colog.Core.Action.html#cmap"><span class="hs-identifier hs-type">cmap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038759"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038760"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038760"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038759"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-356"></span><span id="cmap"><span class="annot"><span class="annottext">cmap :: forall a b (m :: * -&gt; *).
(a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#cmap"><span class="hs-identifier hs-var hs-var">cmap</span></a></span></span><span> </span><span id="local-6989586621679039097"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679039097"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039098"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039098"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039098"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">(b -&gt; m ()) -&gt; (a -&gt; b) -&gt; a -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679039097"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmap"><span class="hs-pragma hs-type">cmap</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="annot"><span class="hs-comment">{- | Operator version of 'cmap'.

&gt;&gt;&gt; 1 &amp;&gt; (show &gt;$&lt; logStringStdout)
1
-}</span></span><span>
</span><span id="line-364"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">3</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%24%3C"><span class="hs-operator hs-type">&gt;$&lt;</span></a></span><span>
</span><span id="line-365"></span><span id="local-6989586621679039100"><span id="local-6989586621679039101"><span id="local-6989586621679039102"><span class="annot"><a href="Colog.Core.Action.html#%3E%24%3C"><span class="hs-operator hs-type">(&gt;$&lt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039101"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039102"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039101"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039102"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039100"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-366"></span><span id="%3E%24%3C"><span class="annot"><span class="annottext">&gt;$&lt; :: forall a b (m :: * -&gt; *).
(a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#%3E%24%3C"><span class="hs-operator hs-var hs-var">(&gt;$&lt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
forall a b (m :: * -&gt; *).
(a -&gt; b) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#cmap"><span class="hs-identifier hs-var">cmap</span></a></span><span>
</span><span id="line-367"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;$&lt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="annot"><span class="hs-comment">-- | 'cmap' for convertions that may fail</span></span><span>
</span><span id="line-370"></span><span id="local-6989586621679038822"><span id="local-6989586621679038823"><span id="local-6989586621679038824"><span class="annot"><a href="Colog.Core.Action.html#cmapMaybe"><span class="hs-identifier hs-type">cmapMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038823"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679038824"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038824"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038823"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-371"></span><span id="cmapMaybe"><span class="annot"><span class="annottext">cmapMaybe :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
(a -&gt; Maybe b) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#cmapMaybe"><span class="hs-identifier hs-var hs-var">cmapMaybe</span></a></span></span><span> </span><span id="local-6989586621679039105"><span class="annot"><span class="annottext">a -&gt; Maybe b
</span><a href="#local-6989586621679039105"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039106"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039106"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m () -&gt; (b -&gt; m ()) -&gt; Maybe b -&gt; m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; m ()
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039106"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; m ()) -&gt; (a -&gt; Maybe b) -&gt; a -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe b
</span><a href="#local-6989586621679039105"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmapMaybe"><span class="hs-pragma hs-type">cmapMaybe</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="annot"><span class="hs-comment">{- | Similar to `cmapMaybe` but for convertions that may fail inside a
monadic context.

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-379"></span><span id="local-6989586621679038830"><span id="local-6989586621679038831"><span id="local-6989586621679038832"><span class="annot"><a href="Colog.Core.Action.html#cmapMaybeM"><span class="hs-identifier hs-type">cmapMaybeM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679038830"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038831"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038830"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679038832"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038830"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038832"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038830"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038831"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-380"></span><span id="cmapMaybeM"><span class="annot"><span class="annottext">cmapMaybeM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m (Maybe b)) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#cmapMaybeM"><span class="hs-identifier hs-var hs-var">cmapMaybeM</span></a></span></span><span> </span><span id="local-6989586621679039112"><span class="annot"><span class="annottext">a -&gt; m (Maybe b)
</span><a href="#local-6989586621679039112"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039113"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039113"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m () -&gt; (b -&gt; m ()) -&gt; Maybe b -&gt; m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; m ()
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039113"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; m ()) -&gt; (a -&gt; m (Maybe b)) -&gt; a -&gt; m ()
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m (Maybe b)
</span><a href="#local-6989586621679039112"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmapMaybeM"><span class="hs-pragma hs-type">cmapMaybeM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="annot"><span class="hs-comment">{- | This combinator is @&gt;$@ from contravariant functor. Replaces all locations
in the output with the same value. The default definition is
@contramap . const@, so this is a more efficient version.

&gt;&gt;&gt; &quot;Hello?&quot; &amp;&gt; (&quot;OUT OF SERVICE&quot; &gt;$ logStringStdout)
OUT OF SERVICE
&gt;&gt;&gt; (&quot;OUT OF SERVICE&quot; &gt;$ logStringStdout) &lt;&amp; 42
OUT OF SERVICE
-}</span></span><span>
</span><span id="line-392"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%24"><span class="hs-operator hs-type">&gt;$</span></a></span><span>
</span><span id="line-393"></span><span id="local-6989586621679038764"><span id="local-6989586621679038765"><span id="local-6989586621679038766"><span class="annot"><a href="Colog.Core.Action.html#%3E%24"><span class="hs-operator hs-type">(&gt;$)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679038764"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038765"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038764"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038765"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038766"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-394"></span><span id="%3E%24"><span class="annot"><span class="annottext">&gt;$ :: forall b (m :: * -&gt; *) a. b -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#%3E%24"><span class="hs-operator hs-var hs-var">(&gt;$)</span></a></span></span><span> </span><span id="local-6989586621679039114"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039114"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039115"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039115"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039115"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039114"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span class="annot"><span class="hs-comment">{- | 'cmapM' combinator is similar to 'cmap' but allows to call monadic
functions (functions that require extra context) to extend consumed value.
Consider the following example.

You have this logging record:

@
__data__ LogRecord = LR
    { lrTime    :: UTCTime
    , lrMessage :: Text
    }
@

and you also have logging consumer inside 'IO' for such record:

@
logRecordAction :: 'LogAction' IO LogRecord
@

But you need to return consumer only for 'Text' messages:

@
logTextAction :: 'LogAction' IO Text
@

If you have function that can extend 'Text' to @LogRecord@ like the function
below:

@
withTime :: 'Text' -&gt; 'IO' LogRecord
withTime msg = __do__
    time &lt;- getCurrentTime
    pure (LR time msg)
@

you can achieve desired behavior with 'cmapM' in the following way:

@
logTextAction :: 'LogAction' IO Text
logTextAction = 'cmapM' withTime myAction
@
-}</span></span><span>
</span><span id="line-438"></span><span id="local-6989586621679038843"><span id="local-6989586621679038844"><span id="local-6989586621679038845"><span class="annot"><a href="Colog.Core.Action.html#cmapM"><span class="hs-identifier hs-type">cmapM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679038843"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038844"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038843"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038845"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038843"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038845"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038843"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038844"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-439"></span><span id="cmapM"><span class="annot"><span class="annottext">cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; LogAction m b -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#cmapM"><span class="hs-identifier hs-var hs-var">cmapM</span></a></span></span><span> </span><span id="local-6989586621679039118"><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679039118"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039119"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039119"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679039118"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; m b) -&gt; (b -&gt; m ()) -&gt; a -&gt; m ()
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&gt;=&gt;</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039119"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#cmapM"><span class="hs-pragma hs-type">cmapM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- Divisible combinators</span><span>
</span><span id="line-444"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="annot"><span class="hs-comment">{- $divisible

Combinators that implement interface in the spirit of the following typeclass:

@
__class__ Contravariant f =&gt; Divisible f __where__
    conquer :: f a
    divide  :: (a -&gt; (b, c)) -&gt; f b -&gt; f c -&gt; f a
@
-}</span></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="annot"><span class="hs-comment">{- | @divide@ combinator from @Divisible@ type class.

&gt;&gt;&gt; logInt = LogAction print
&gt;&gt;&gt; &quot;ABC&quot; &amp;&gt; divide (\s -&gt; (s, length s)) logStringStdout logInt
ABC
3
-}</span></span><span>
</span><span id="line-464"></span><span id="local-6989586621679038853"><span id="local-6989586621679038854"><span id="local-6989586621679038855"><span id="local-6989586621679038856"><span class="annot"><a href="Colog.Core.Action.html#divide"><span class="hs-identifier hs-type">divide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038853"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038854"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038855"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679038856"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038853"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038855"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038853"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038856"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038853"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038854"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-465"></span><span id="divide"><span class="annot"><span class="annottext">divide :: forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; (b, c)) -&gt; LogAction m b -&gt; LogAction m c -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#divide"><span class="hs-identifier hs-var hs-var">divide</span></a></span></span><span> </span><span id="local-6989586621679039122"><span class="annot"><span class="annottext">a -&gt; (b, c)
</span><a href="#local-6989586621679039122"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039123"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039123"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039124"><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039124"><span class="hs-identifier hs-var">actionC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; (b, c)
</span><a href="#local-6989586621679039122"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679039125"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039125"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679039126"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679039126"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-466"></span><span>    </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039123"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039125"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall a b. m a -&gt; m b -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039124"><span class="hs-identifier hs-var">actionC</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679039126"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-467"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#divide"><span class="hs-pragma hs-type">divide</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span class="annot"><span class="hs-comment">{- | Monadic version of 'divide'.

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-473"></span><span id="local-6989586621679038861"><span id="local-6989586621679038862"><span id="local-6989586621679038863"><span id="local-6989586621679038864"><span class="annot"><a href="Colog.Core.Action.html#divideM"><span class="hs-identifier hs-type">divideM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679038861"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038862"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038863"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679038864"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038863"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038864"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038862"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-474"></span><span id="divideM"><span class="annot"><span class="annottext">divideM :: forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m (b, c)) -&gt; LogAction m b -&gt; LogAction m c -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#divideM"><span class="hs-identifier hs-var hs-var">divideM</span></a></span></span><span> </span><span id="local-6989586621679039131"><span class="annot"><span class="annottext">a -&gt; m (b, c)
</span><a href="#local-6989586621679039131"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039132"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039132"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039133"><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039133"><span class="hs-identifier hs-var">actionC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-475"></span><span>    </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; m (b, c)
</span><a href="#local-6989586621679039131"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679039134"><span class="annot"><span class="annottext">m (b, c)
</span><a href="#local-6989586621679039134"><span class="hs-identifier hs-var">mbc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (b, c)
</span><a href="#local-6989586621679039134"><span class="hs-identifier hs-var">mbc</span></a></span><span> </span><span class="annot"><span class="annottext">m (b, c) -&gt; ((b, c) -&gt; m ()) -&gt; m ()
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679039135"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039135"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679039136"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679039136"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039132"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039135"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall a b. m a -&gt; m b -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039133"><span class="hs-identifier hs-var">actionC</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679039136"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#divideM"><span class="hs-pragma hs-type">divideM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="annot"><span class="hs-comment">{- | @conquer@ combinator from @Divisible@ type class.

Concretely, this is a 'LogAction' that does nothing:

&gt;&gt;&gt; conquer &lt;&amp; &quot;hello?&quot;
&gt;&gt;&gt; &quot;hello?&quot; &amp;&gt; conquer
-}</span></span><span>
</span><span id="line-485"></span><span id="local-6989586621679039137"><span id="local-6989586621679039138"><span class="annot"><a href="Colog.Core.Action.html#conquer"><span class="hs-identifier hs-type">conquer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679039137"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039137"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039138"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-486"></span><span id="conquer"><span class="annot"><span class="annottext">conquer :: forall (m :: * -&gt; *) a. Applicative m =&gt; LogAction m a
</span><a href="Colog.Core.Action.html#conquer"><span class="hs-identifier hs-var hs-var">conquer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogAction m a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-487"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#conquer"><span class="hs-pragma hs-type">conquer</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span class="annot"><span class="hs-comment">{- | Operator version of @'divide' 'id'@.

&gt;&gt;&gt; logInt = LogAction print
&gt;&gt;&gt; (logStringStdout &gt;*&lt; logInt) &lt;&amp; (&quot;foo&quot;, 1)
foo
1
&gt;&gt;&gt; (logInt &gt;*&lt; logStringStdout) &lt;&amp; (1, &quot;foo&quot;)
1
foo
-}</span></span><span>
</span><span id="line-499"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%2A%3C"><span class="hs-operator hs-type">&gt;*&lt;</span></a></span><span>
</span><span id="line-500"></span><span id="local-6989586621679038871"><span id="local-6989586621679038872"><span id="local-6989586621679038873"><span class="annot"><a href="Colog.Core.Action.html#%3E%2A%3C"><span class="hs-operator hs-type">(&gt;*&lt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038871"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038871"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038872"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038871"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038873"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038871"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038872"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679038873"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-501"></span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039144"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039144"><span class="hs-identifier hs-var">actionA</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3E%2A%3C"><span class="annot"><span class="annottext">&gt;*&lt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
LogAction m a -&gt; LogAction m b -&gt; LogAction m (a, b)
</span><a href="Colog.Core.Action.html#%3E%2A%3C"><span class="hs-operator hs-var hs-var">&gt;*&lt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039145"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039145"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; m ()) -&gt; LogAction m (a, b)
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">(((a, b) -&gt; m ()) -&gt; LogAction m (a, b))
-&gt; ((a, b) -&gt; m ()) -&gt; LogAction m (a, b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679039146"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039146"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679039147"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039147"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039144"><span class="hs-identifier hs-var">actionA</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039146"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall a b. m a -&gt; m b -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039145"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679039147"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-503"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;*&lt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="annot"><span class="hs-comment">{-| Perform a constant log action after another.

&gt;&gt;&gt; logHello = LogAction (const (putStrLn &quot;Hello!&quot;))
&gt;&gt;&gt; &quot;Greetings!&quot; &amp;&gt; (logStringStdout &gt;* logHello)
Greetings!
Hello!
-}</span></span><span>
</span><span id="line-512"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%2A"><span class="hs-operator hs-type">&gt;*</span></a></span><span>
</span><span id="line-513"></span><span id="local-6989586621679038877"><span id="local-6989586621679038878"><span class="annot"><a href="Colog.Core.Action.html#%3E%2A"><span class="hs-operator hs-type">(&gt;*)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038877"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038877"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038878"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038877"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038877"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038878"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-514"></span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039150"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039150"><span class="hs-identifier hs-var">actionA</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3E%2A"><span class="annot"><span class="annottext">&gt;* :: forall (m :: * -&gt; *) a.
Applicative m =&gt;
LogAction m a -&gt; LogAction m () -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#%3E%2A"><span class="hs-operator hs-var hs-var">&gt;*</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039151"><span class="annot"><span class="annottext">() -&gt; m ()
</span><a href="#local-6989586621679039151"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039152"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039152"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-515"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039150"><span class="hs-identifier hs-var">actionA</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039152"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall a b. m a -&gt; m b -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
</span><a href="#local-6989586621679039151"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;*</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="annot"><span class="hs-comment">-- | A flipped version of '&gt;*'</span></span><span>
</span><span id="line-519"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%2A%3C"><span class="hs-operator hs-type">*&lt;</span></a></span><span>
</span><span id="line-520"></span><span id="local-6989586621679038881"><span id="local-6989586621679038882"><span class="annot"><a href="Colog.Core.Action.html#%2A%3C"><span class="hs-operator hs-type">(*&lt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038881"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038881"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038881"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038882"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038881"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038882"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-521"></span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039155"><span class="annot"><span class="annottext">() -&gt; m ()
</span><a href="#local-6989586621679039155"><span class="hs-identifier hs-var">actionA</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%2A%3C"><span class="annot"><span class="annottext">*&lt; :: forall (m :: * -&gt; *) a.
Applicative m =&gt;
LogAction m () -&gt; LogAction m a -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#%2A%3C"><span class="hs-operator hs-var hs-var">*&lt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039156"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039156"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m ()) -&gt; LogAction m a) -&gt; (a -&gt; m ()) -&gt; LogAction m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039157"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039157"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-522"></span><span>    </span><span class="annot"><span class="annottext">() -&gt; m ()
</span><a href="#local-6989586621679039155"><span class="hs-identifier hs-var">actionA</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall a b. m a -&gt; m b -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039156"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039157"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-523"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*&lt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- Decidable combinators</span><span>
</span><span id="line-527"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="annot"><span class="hs-comment">{- $decidable

Combinators that implement interface in the spirit of the following typeclass:

@
__class__ Divisible f =&gt; Decidable f __where__
    lose   :: (a -&gt; Void) -&gt; f a
    choose :: (a -&gt; Either b c) -&gt; f b -&gt; f c -&gt; f a
@
-}</span></span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span class="annot"><span class="hs-comment">-- | @lose@ combinator from @Decidable@ type class.</span></span><span>
</span><span id="line-541"></span><span id="local-6989586621679038885"><span id="local-6989586621679038886"><span class="annot"><a href="Colog.Core.Action.html#lose"><span class="hs-identifier hs-type">lose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038885"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038886"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038885"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-542"></span><span id="lose"><span class="annot"><span class="annottext">lose :: forall a (m :: * -&gt; *). (a -&gt; Void) -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#lose"><span class="hs-identifier hs-var hs-var">lose</span></a></span></span><span> </span><span id="local-6989586621679039158"><span class="annot"><span class="annottext">a -&gt; Void
</span><a href="#local-6989586621679039158"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Void -&gt; m ()
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">(Void -&gt; m ()) -&gt; (a -&gt; Void) -&gt; a -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Void
</span><a href="#local-6989586621679039158"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#lose"><span class="hs-pragma hs-type">lose</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="annot"><span class="hs-comment">{- | @choose@ combinator from @Decidable@ type class.

&gt;&gt;&gt; logInt = LogAction print
&gt;&gt;&gt; f = choose (\a -&gt; if a &lt; 0 then Left &quot;Negative&quot; else Right a)
&gt;&gt;&gt; f logStringStdout logInt &lt;&amp; 1
1
&gt;&gt;&gt; f logStringStdout logInt &lt;&amp; (-1)
Negative
-}</span></span><span>
</span><span id="line-554"></span><span id="local-6989586621679038890"><span id="local-6989586621679038891"><span id="local-6989586621679038892"><span id="local-6989586621679038893"><span class="annot"><a href="Colog.Core.Action.html#choose"><span class="hs-identifier hs-type">choose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038890"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679038891"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038892"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038891"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038892"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038890"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-555"></span><span id="choose"><span class="annot"><span class="annottext">choose :: forall a b c (m :: * -&gt; *).
(a -&gt; Either b c)
-&gt; LogAction m b -&gt; LogAction m c -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#choose"><span class="hs-identifier hs-var hs-var">choose</span></a></span></span><span> </span><span id="local-6989586621679039159"><span class="annot"><span class="annottext">a -&gt; Either b c
</span><a href="#local-6989586621679039159"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039160"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039160"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039161"><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039161"><span class="hs-identifier hs-var">actionC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; m ()) -&gt; (c -&gt; m ()) -&gt; Either b c -&gt; m ()
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039160"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039161"><span class="hs-identifier hs-var">actionC</span></a></span><span> </span><span class="annot"><span class="annottext">(Either b c -&gt; m ()) -&gt; (a -&gt; Either b c) -&gt; a -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either b c
</span><a href="#local-6989586621679039159"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#choose"><span class="hs-pragma hs-type">choose</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="annot"><span class="hs-comment">{- | Monadic version of 'choose'.

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-562"></span><span id="local-6989586621679038901"><span id="local-6989586621679038902"><span id="local-6989586621679038903"><span id="local-6989586621679038904"><span class="annot"><a href="Colog.Core.Action.html#chooseM"><span class="hs-identifier hs-type">chooseM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679038901"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038902"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038901"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679038903"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038904"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038901"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038903"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038901"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038904"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038901"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038902"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-563"></span><span id="chooseM"><span class="annot"><span class="annottext">chooseM :: forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m (Either b c))
-&gt; LogAction m b -&gt; LogAction m c -&gt; LogAction m a
</span><a href="Colog.Core.Action.html#chooseM"><span class="hs-identifier hs-var hs-var">chooseM</span></a></span></span><span> </span><span id="local-6989586621679039165"><span class="annot"><span class="annottext">a -&gt; m (Either b c)
</span><a href="#local-6989586621679039165"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039166"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039166"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039167"><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039167"><span class="hs-identifier hs-var">actionC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; LogAction m a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; m ()) -&gt; (c -&gt; m ()) -&gt; Either b c -&gt; m ()
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039166"><span class="hs-identifier hs-var">actionB</span></a></span><span> </span><span class="annot"><span class="annottext">c -&gt; m ()
</span><a href="#local-6989586621679039167"><span class="hs-identifier hs-var">actionC</span></a></span><span> </span><span class="annot"><span class="annottext">(Either b c -&gt; m ()) -&gt; (a -&gt; m (Either b c)) -&gt; a -&gt; m ()
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m (Either b c)
</span><a href="#local-6989586621679039165"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#chooseM"><span class="hs-pragma hs-type">chooseM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span class="annot"><span class="hs-comment">{- | Operator version of @'choose' 'id'@.

&gt;&gt;&gt; dontPrintInt = LogAction (const (putStrLn &quot;Not printing Int&quot;))
&gt;&gt;&gt; Left 1 &amp;&gt; (dontPrintInt &gt;|&lt; logStringStdout)
Not printing Int
&gt;&gt;&gt; (dontPrintInt &gt;|&lt; logStringStdout) &lt;&amp; Right &quot;:)&quot;
:)
-}</span></span><span>
</span><span id="line-574"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">3</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3E%7C%3C"><span class="hs-operator hs-type">&gt;|&lt;</span></a></span><span>
</span><span id="line-575"></span><span id="local-6989586621679038909"><span id="local-6989586621679038910"><span id="local-6989586621679038911"><span class="annot"><a href="Colog.Core.Action.html#%3E%7C%3C"><span class="hs-operator hs-type">(&gt;|&lt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038909"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038910"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038909"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038911"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038909"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679038910"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038911"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-576"></span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039168"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039168"><span class="hs-identifier hs-var">actionA</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3E%7C%3C"><span class="annot"><span class="annottext">&gt;|&lt; :: forall (m :: * -&gt; *) a b.
LogAction m a -&gt; LogAction m b -&gt; LogAction m (Either a b)
</span><a href="Colog.Core.Action.html#%3E%7C%3C"><span class="hs-operator hs-var hs-var">&gt;|&lt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039169"><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039169"><span class="hs-identifier hs-var">actionB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either a b -&gt; m ()) -&gt; LogAction m (Either a b)
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; m ()) -&gt; (b -&gt; m ()) -&gt; Either a b -&gt; m ()
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039168"><span class="hs-identifier hs-var">actionA</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; m ()
</span><a href="#local-6989586621679039169"><span class="hs-identifier hs-var">actionB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;|&lt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- Comonadic combinators</span><span>
</span><span id="line-581"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span class="annot"><span class="hs-comment">{- $comonad

Combinators that implement interface in the spirit of the following typeclass:

@
__class__ Functor w =&gt; Comonad w __where__
    extract   :: w a -&gt; a
    duplicate :: w a -&gt; w (w a)
    extend    :: (w a -&gt; b) -&gt; w a -&gt; w b
@
-}</span></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="annot"><span class="hs-comment">{- | If @msg@ is 'Monoid' then 'extract' performs given log action by passing
'mempty' to it.

&gt;&gt;&gt; logPrint :: LogAction IO [Int]; logPrint = LogAction print
&gt;&gt;&gt; extract logPrint
[]
-}</span></span><span>
</span><span id="line-602"></span><span id="local-6989586621679038915"><span id="local-6989586621679038916"><span class="annot"><a href="Colog.Core.Action.html#extract"><span class="hs-identifier hs-type">extract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679038915"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038916"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038915"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038916"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-603"></span><span id="extract"><span class="annot"><span class="annottext">extract :: forall msg (m :: * -&gt; *). Monoid msg =&gt; LogAction m msg -&gt; m ()
</span><a href="Colog.Core.Action.html#extract"><span class="hs-identifier hs-var hs-var">extract</span></a></span></span><span> </span><span id="local-6989586621679039172"><span class="annot"><span class="annottext">LogAction m msg
</span><a href="#local-6989586621679039172"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogAction m msg -&gt; msg -&gt; m ()
forall (m :: * -&gt; *) msg. LogAction m msg -&gt; msg -&gt; m ()
</span><a href="Colog.Core.Action.html#unLogAction"><span class="hs-identifier hs-var">unLogAction</span></a></span><span> </span><span class="annot"><span class="annottext">LogAction m msg
</span><a href="#local-6989586621679039172"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">msg
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-604"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#extract"><span class="hs-pragma hs-type">extract</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span class="hs-comment">-- TODO: write better motivation for comonads</span><span>
</span><span id="line-607"></span><span class="annot"><span class="hs-comment">{- | This is a /comonadic extend/. It allows you to chain different transformations on messages.

&gt;&gt;&gt; f (LogAction l) = l &quot;.f1&quot; *&gt; l &quot;.f2&quot;
&gt;&gt;&gt; g (LogAction l) = l &quot;.g&quot;
&gt;&gt;&gt; logStringStdout &lt;&amp; &quot;foo&quot;
foo
&gt;&gt;&gt; extend f logStringStdout &lt;&amp; &quot;foo&quot;
foo.f1
foo.f2
&gt;&gt;&gt; (extend g $ extend f logStringStdout) &lt;&amp; &quot;foo&quot;
foo.g.f1
foo.g.f2
&gt;&gt;&gt; (logStringStdout =&gt;&gt; f =&gt;&gt; g) &lt;&amp; &quot;foo&quot;
foo.g.f1
foo.g.f2
-}</span></span><span>
</span><span id="line-623"></span><span id="local-6989586621679038919"><span id="local-6989586621679038920"><span class="annot"><a href="Colog.Core.Action.html#extend"><span class="hs-identifier hs-type">extend</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679038919"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038919"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038919"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038919"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-624"></span><span id="extend"><span class="annot"><span class="annottext">extend :: forall msg (m :: * -&gt; *).
Semigroup msg =&gt;
(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#extend"><span class="hs-identifier hs-var hs-var">extend</span></a></span></span><span> </span><span id="local-6989586621679039175"><span class="annot"><span class="annottext">LogAction m msg -&gt; m ()
</span><a href="#local-6989586621679039175"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039176"><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039176"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(msg -&gt; m ()) -&gt; LogAction m msg
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((msg -&gt; m ()) -&gt; LogAction m msg)
-&gt; (msg -&gt; m ()) -&gt; LogAction m msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039177"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039177"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LogAction m msg -&gt; m ()
</span><a href="#local-6989586621679039175"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(msg -&gt; m ()) -&gt; LogAction m msg
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((msg -&gt; m ()) -&gt; LogAction m msg)
-&gt; (msg -&gt; m ()) -&gt; LogAction m msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039178"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039178"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039176"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039177"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">msg -&gt; msg -&gt; msg
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039178"><span class="hs-identifier hs-var">m'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#extend"><span class="hs-pragma hs-type">extend</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="annot"><span class="hs-comment">-- | 'extend' with the arguments swapped. Dual to '&gt;&gt;=' for a 'Monad'.</span></span><span>
</span><span id="line-628"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">1</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3D%3E%3E"><span class="hs-operator hs-type">=&gt;&gt;</span></a></span><span>
</span><span id="line-629"></span><span id="local-6989586621679038923"><span id="local-6989586621679038924"><span class="annot"><a href="Colog.Core.Action.html#%3D%3E%3E"><span class="hs-operator hs-type">(=&gt;&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679038923"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038923"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038923"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038923"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-630"></span><span id="%3D%3E%3E"><span class="annot"><span class="annottext">=&gt;&gt; :: forall msg (m :: * -&gt; *).
Semigroup msg =&gt;
LogAction m msg -&gt; (LogAction m msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#%3D%3E%3E"><span class="hs-operator hs-var hs-var">(=&gt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg)
-&gt; LogAction m msg -&gt; (LogAction m msg -&gt; m ()) -&gt; LogAction m msg
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg
forall msg (m :: * -&gt; *).
Semigroup msg =&gt;
(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#extend"><span class="hs-identifier hs-var">extend</span></a></span><span>
</span><span id="line-631"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">=&gt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-632"></span><span>
</span><span id="line-633"></span><span class="annot"><span class="hs-comment">-- | 'extend' in operator form.</span></span><span>
</span><span id="line-634"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">1</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#%3C%3C%3D"><span class="hs-operator hs-type">&lt;&lt;=</span></a></span><span>
</span><span id="line-635"></span><span id="local-6989586621679039181"><span id="local-6989586621679039182"><span class="annot"><a href="Colog.Core.Action.html#%3C%3C%3D"><span class="hs-operator hs-type">(&lt;&lt;=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679039181"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039181"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039181"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039181"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-636"></span><span id="%3C%3C%3D"><span class="annot"><span class="annottext">&lt;&lt;= :: forall msg (m :: * -&gt; *).
Semigroup msg =&gt;
(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#%3C%3C%3D"><span class="hs-operator hs-var hs-var">(&lt;&lt;=)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg
forall msg (m :: * -&gt; *).
Semigroup msg =&gt;
(LogAction m msg -&gt; m ()) -&gt; LogAction m msg -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#extend"><span class="hs-identifier hs-var">extend</span></a></span><span>
</span><span id="line-637"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&lt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-638"></span><span>
</span><span id="line-639"></span><span class="annot"><span class="hs-comment">{- | Converts any 'LogAction' that can log single message to the 'LogAction'
that can log two messages. The new 'LogAction' behaves in the following way:

1. Joins two messages of type @msg@ using '&lt;&gt;' operator from 'Semigroup'.
2. Passes resulted message to the given 'LogAction'.

&gt;&gt;&gt; :{
let logger :: LogAction IO [Int]
    logger = logPrint
in duplicate logger &lt;&amp; ([3, 4], [42, 10])
:}
[3,4,42,10]

__Implementation note:__

True and fair translation of the @duplicate@ function from the 'Control.Comonad.Comonad'
interface should result in the 'LogAction' of the following form:

@
msg -&gt; msg -&gt; m ()
@

In order to capture this behavior, 'duplicate' should have the following type:

@
duplicate :: Semigroup msg =&gt; LogAction m msg -&gt; LogAction (Compose ((-&gt;) msg) m) msg
@

However, it's quite awkward to work with such type. It's a known fact that the
following two types are isomorphic (see functions 'curry' and 'uncurry'):

@
a -&gt; b -&gt; c
(a, b) -&gt; c
@

So using this fact we can come up with the simpler interface.
-}</span></span><span>
</span><span id="line-677"></span><span class="annot"><a href="Colog.Core.Action.html#duplicate"><span class="hs-identifier hs-type">duplicate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679038929"><span class="annot"><a href="#local-6989586621679038929"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span id="local-6989586621679038930"><span class="annot"><a href="#local-6989586621679038930"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679038929"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038929"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038929"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679038929"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span id="duplicate"><span class="annot"><span class="annottext">duplicate :: forall msg (m :: * -&gt; *).
Semigroup msg =&gt;
LogAction m msg -&gt; LogAction m (msg, msg)
</span><a href="Colog.Core.Action.html#duplicate"><span class="hs-identifier hs-var hs-var">duplicate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039189"><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039189"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((msg, msg) -&gt; m ()) -&gt; LogAction m (msg, msg)
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">(((msg, msg) -&gt; m ()) -&gt; LogAction m (msg, msg))
-&gt; ((msg, msg) -&gt; m ()) -&gt; LogAction m (msg, msg)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679039190"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039190"><span class="hs-identifier hs-var">msg1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679039191"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039191"><span class="hs-identifier hs-var">msg2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039189"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039190"><span class="hs-identifier hs-var">msg1</span></a></span><span> </span><span class="annot"><span class="annottext">msg -&gt; msg -&gt; msg
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679039191"><span class="hs-identifier hs-var">msg2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#duplicate"><span class="hs-pragma hs-type">duplicate</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span class="annot"><span class="hs-comment">{- | Like 'duplicate' but why stop on a pair of two messages if you can log any
'Foldable' of messages?

&gt;&gt;&gt; :{
let logger :: LogAction IO [Int]
    logger = logPrint
in multiplicate logger &lt;&amp; replicate 5 [1..3]
:}
[1,2,3,1,2,3,1,2,3,1,2,3,1,2,3]
-}</span></span><span>
</span><span id="line-692"></span><span class="annot"><a href="Colog.Core.Action.html#multiplicate"><span class="hs-identifier hs-type">multiplicate</span></a></span><span>
</span><span id="line-693"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679038933"><span class="annot"><a href="#local-6989586621679038933"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679038934"><span class="annot"><a href="#local-6989586621679038934"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span id="local-6989586621679038935"><span class="annot"><a href="#local-6989586621679038935"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-operator">.</span><span>
</span><span id="line-694"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679038933"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679038934"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038935"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038934"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-696"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038935"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038933"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038934"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span id="multiplicate"><span class="annot"><span class="annottext">multiplicate :: forall (f :: * -&gt; *) msg (m :: * -&gt; *).
(Foldable f, Monoid msg) =&gt;
LogAction m msg -&gt; LogAction m (f msg)
</span><a href="Colog.Core.Action.html#multiplicate"><span class="hs-identifier hs-var hs-var">multiplicate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039196"><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039196"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f msg -&gt; m ()) -&gt; LogAction m (f msg)
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="annot"><span class="annottext">((f msg -&gt; m ()) -&gt; LogAction m (f msg))
-&gt; (f msg -&gt; m ()) -&gt; LogAction m (f msg)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679039197"><span class="annot"><span class="annottext">f msg
</span><a href="#local-6989586621679039197"><span class="hs-identifier hs-var">msgs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039196"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f msg -&gt; msg
forall m. Monoid m =&gt; f m -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">f msg
</span><a href="#local-6989586621679039197"><span class="hs-identifier hs-var">msgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#multiplicate"><span class="hs-pragma hs-type">multiplicate</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-699"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#multiplicate"><span class="hs-pragma hs-type">multiplicate</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039198"><span id="local-6989586621679039199"><span class="annot"><span class="hs-pragma hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679039198"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039199"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039198"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039199"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679039198"><span class="hs-pragma hs-type">msg</span></a></span><span class="hs-pragma">]</span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-700"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#multiplicate"><span class="hs-pragma hs-type">multiplicate</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039200"><span id="local-6989586621679039201"><span class="annot"><span class="hs-pragma hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679039200"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039201"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039200"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039201"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621679039200"><span class="hs-pragma hs-type">msg</span></a></span><span class="hs-pragma">)</span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span class="annot"><span class="hs-comment">{- | Like 'multiplicate' but instead of logging a batch of messages it logs each
of them separately.

&gt;&gt;&gt; :{
let logger :: LogAction IO Int
    logger = logPrint
in separate logger &lt;&amp; [1..5]
:}
1
2
3
4
5

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-718"></span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-identifier hs-type">separate</span></a></span><span>
</span><span id="line-719"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679038941"><span class="annot"><a href="#local-6989586621679038941"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679038943"><span class="annot"><a href="#local-6989586621679038943"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span id="local-6989586621679038942"><span class="annot"><a href="#local-6989586621679038942"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-operator">.</span><span>
</span><span id="line-720"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621679038941"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679038942"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038942"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038943"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-722"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038942"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679038941"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038943"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span id="separate"><span class="annot"><span class="annottext">separate :: forall (f :: * -&gt; *) msg (m :: * -&gt; *).
(Traversable f, Applicative m) =&gt;
LogAction m msg -&gt; LogAction m (f msg)
</span><a href="Colog.Core.Action.html#separate"><span class="hs-identifier hs-var hs-var">separate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039208"><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039208"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f msg -&gt; m ()) -&gt; LogAction m (f msg)
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(msg -&gt; m ()) -&gt; f msg -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span> </span><span class="annot"><span class="annottext">msg -&gt; m ()
</span><a href="#local-6989586621679039208"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-pragma hs-type">separate</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-725"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-pragma hs-type">separate</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039209"><span id="local-6989586621679039210"><span class="annot"><span class="hs-pragma hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679039209"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039209"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039210"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039209"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679039210"><span class="hs-pragma hs-type">msg</span></a></span><span class="hs-pragma">]</span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-726"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-pragma hs-type">separate</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039211"><span id="local-6989586621679039212"><span class="annot"><span class="hs-pragma hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679039211"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039211"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039212"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039211"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621679039212"><span class="hs-pragma hs-type">msg</span></a></span><span class="hs-pragma">)</span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-727"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-pragma hs-type">separate</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039213"><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679039213"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IO</span></span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621679039213"><span class="hs-pragma hs-type">msg</span></a></span><span class="hs-pragma">]</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-728"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#separate"><span class="hs-pragma hs-type">separate</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621679039214"><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679039214"><span class="hs-pragma hs-type">msg</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-pragma hs-type">LogAction</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">IO</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621679039214"><span class="hs-pragma hs-type">msg</span></a></span><span class="hs-pragma">)</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span class="annot"><span class="hs-comment">{- | Allows changing the internal monadic action.

Let's say we have a pure logger action using 'PureLogger'
and we want to log all messages into 'IO' instead.

If we provide the following function:

@
performPureLogsInIO :: PureLogger a -&gt; IO a
@

then we can convert a logger action that uses a pure monad
to a one that performs the logging in the 'IO' monad using:

@
hoistLogAction performPureLogsInIO :: LogAction (PureLogger a) a -&gt; LogAction IO a
@

@since 0.2.1.0
-}</span></span><span>
</span><span id="line-750"></span><span id="local-6989586621679038952"><span id="local-6989586621679038954"><span id="local-6989586621679038955"><span class="annot"><a href="Colog.Core.Action.html#hoistLogAction"><span class="hs-identifier hs-type">hoistLogAction</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679038953"><span class="annot"><a href="#local-6989586621679038953"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679038952"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038953"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679038954"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038953"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-752"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038952"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038955"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-753"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038954"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038955"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-754"></span><span id="hoistLogAction"><span class="annot"><span class="annottext">hoistLogAction :: forall (m :: * -&gt; *) (n :: * -&gt; *) a.
(forall x. m x -&gt; n x) -&gt; LogAction m a -&gt; LogAction n a
</span><a href="Colog.Core.Action.html#hoistLogAction"><span class="hs-identifier hs-var hs-var">hoistLogAction</span></a></span></span><span> </span><span id="local-6989586621679039215"><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679039215"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-type">LogAction</span></a></span><span> </span><span id="local-6989586621679039216"><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039216"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; n ()) -&gt; LogAction n a
forall (m :: * -&gt; *) msg. (msg -&gt; m ()) -&gt; LogAction m msg
</span><a href="Colog.Core.Action.html#LogAction"><span class="hs-identifier hs-var">LogAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m () -&gt; n ()
forall x. m x -&gt; n x
</span><a href="#local-6989586621679039215"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; n ()) -&gt; (a -&gt; m ()) -&gt; a -&gt; n ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m ()
</span><a href="#local-6989586621679039216"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Colog.Core.Action.html#hoistLogAction"><span class="hs-pragma hs-type">hoistLogAction</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-756"></span></pre></body></html>