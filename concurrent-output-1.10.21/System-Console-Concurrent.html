<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>System.Console.Concurrent</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">concurrent-output-1.10.21: Ungarble output from several threads or commands</span><ul class="links" id="page-menu"><li><a href="src/System.Console.Concurrent.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>2015 Joey Hess &lt;id@joeyh.name&gt;</td></tr><tr><th>License</th><td>BSD-2-clause</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">System.Console.Concurrent</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Concurrent output</a></li><li><a href="#g:2">Low level access to the output buffer</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Concurrent output handling.</p><pre> import Control.Concurrent.Async
 import System.Console.Concurrent

 main = withConcurrentOutput $ do
 	outputConcurrent &quot;washed the car\n&quot;
 		`concurrently`
	outputConcurrent &quot;walked the dog\n&quot;
		`concurrently`
 	createProcessConcurrent (proc &quot;ls&quot; [])</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:withConcurrentOutput">withConcurrentOutput</a> :: (<a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../exceptions-0.10.7/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m) =&gt; m a -&gt; m a</li><li class="src short"><span class="keyword">class</span> <a href="#t:Outputable">Outputable</a> v <span class="keyword">where</span><ul class="subs"><li><a href="#v:toOutput">toOutput</a> :: v -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul></li><li class="src short"><a href="#v:outputConcurrent">outputConcurrent</a> :: <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> v =&gt; v -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:errorConcurrent">errorConcurrent</a> :: <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> v =&gt; v -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:createProcessConcurrent">createProcessConcurrent</a> :: <a href="../process-1.6.19.0/System-Process.html#t:CreateProcess" title="System.Process">CreateProcess</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a>)</li><li class="src short"><a href="#v:createProcessForeground">createProcessForeground</a> :: <a href="../process-1.6.19.0/System-Process.html#t:CreateProcess" title="System.Process">CreateProcess</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a>)</li><li class="src short"><a href="#v:flushConcurrentOutput">flushConcurrentOutput</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:lockOutput">lockOutput</a> :: (<a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../exceptions-0.10.7/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m) =&gt; m a -&gt; m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:ConcurrentProcessHandle">ConcurrentProcessHandle</a> = <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a></li><li class="src short"><a href="#v:waitForProcessConcurrent">waitForProcessConcurrent</a> :: <a href="System-Console-Concurrent.html#t:ConcurrentProcessHandle" title="System.Console.Concurrent">ConcurrentProcessHandle</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.18.2.1/System-Exit.html#t:ExitCode" title="System.Exit">ExitCode</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:OutputBuffer">OutputBuffer</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:StdHandle">StdHandle</a><ul class="subs"><li>= <a href="#v:StdOut">StdOut</a></li><li>| <a href="#v:StdErr">StdErr</a></li></ul></li><li class="src short"><a href="#v:bufferOutputSTM">bufferOutputSTM</a> :: <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> v =&gt; <a href="System-Console-Concurrent.html#t:StdHandle" title="System.Console.Concurrent">StdHandle</a> -&gt; v -&gt; <a href="../base-4.18.2.1/GHC-Conc.html#t:STM" title="GHC.Conc">STM</a> ()</li><li class="src short"><a href="#v:outputBufferWaiterSTM">outputBufferWaiterSTM</a> :: (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>)) -&gt; <a href="../base-4.18.2.1/GHC-Conc.html#t:STM" title="GHC.Conc">STM</a> (<a href="System-Console-Concurrent.html#t:StdHandle" title="System.Console.Concurrent">StdHandle</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>)</li><li class="src short"><a href="#v:waitAnyBuffer">waitAnyBuffer</a> :: <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>)</li><li class="src short"><a href="#v:waitCompleteLines">waitCompleteLines</a> :: <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>)</li><li class="src short"><a href="#v:emitOutputBuffer">emitOutputBuffer</a> :: <a href="System-Console-Concurrent.html#t:StdHandle" title="System.Console.Concurrent">StdHandle</a> -&gt; <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Concurrent output</h1></a><div class="top"><p class="src"><a id="v:withConcurrentOutput" class="def">withConcurrentOutput</a> :: (<a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../exceptions-0.10.7/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m) =&gt; m a -&gt; m a <a href="src/System.Console.Concurrent.Internal.html#withConcurrentOutput" class="link">Source</a> <a href="#v:withConcurrentOutput" class="selflink">#</a></p><div class="doc"><p>Use this around any actions that use <code><a href="System-Console-Concurrent.html#v:outputConcurrent" title="System.Console.Concurrent">outputConcurrent</a></code>
 or <code><a href="System-Console-Concurrent.html#v:createProcessConcurrent" title="System.Console.Concurrent">createProcessConcurrent</a></code>, unless 
 <code><a href="System-Console-Regions.html#v:displayConsoleRegions" title="System.Console.Regions">displayConsoleRegions</a></code> is being used.</p><p>This is necessary to ensure that buffered concurrent output actually
 gets displayed before the program exits.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Outputable" class="def">Outputable</a> v <span class="keyword">where</span> <a href="src/System.Console.Concurrent.Internal.html#Outputable" class="link">Source</a> <a href="#t:Outputable" class="selflink">#</a></p><div class="doc"><p>Values that can be output.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:toOutput" class="def">toOutput</a> :: v -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/System.Console.Concurrent.Internal.html#toOutput" class="link">Source</a> <a href="#v:toOutput" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Outputable">Instances</h4><details id="i:Outputable" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Outputable:Outputable:1"></span> <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></span> <a href="src/System.Console.Concurrent.Internal.html#line-134" class="link">Source</a> <a href="#t:Outputable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Outputable:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Console-Concurrent-Internal.html">System.Console.Concurrent.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toOutput">toOutput</a> :: <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/System.Console.Concurrent.Internal.html#toOutput" class="link">Source</a> <a href="#v:toOutput" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Outputable:Outputable:2"></span> <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> <a href="../text-2.0.2/Data-Text-Lazy.html#t:Text" title="Data.Text.Lazy">Text</a></span> <a href="src/System.Console.Concurrent.Internal.html#line-139" class="link">Source</a> <a href="#t:Outputable" class="selflink">#</a></td><td class="doc"><p>Note that using a lazy Text as an Outputable value 
 will buffer it all in memory.</p></td></tr><tr><td colspan="2"><details id="i:ic:Outputable:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Console-Concurrent-Internal.html">System.Console.Concurrent.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toOutput">toOutput</a> :: <a href="../text-2.0.2/Data-Text-Lazy.html#t:Text" title="Data.Text.Lazy">Text</a> -&gt; <a href="../text-2.0.2/Data-Text.html#v:Text0" title="Data.Text">Text0</a> <a href="src/System.Console.Concurrent.Internal.html#toOutput" class="link">Source</a> <a href="#v:toOutput" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Outputable:Outputable:3"></span> <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></span> <a href="src/System.Console.Concurrent.Internal.html#line-142" class="link">Source</a> <a href="#t:Outputable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Outputable:Outputable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Console-Concurrent-Internal.html">System.Console.Concurrent.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toOutput">toOutput</a> :: <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/System.Console.Concurrent.Internal.html#toOutput" class="link">Source</a> <a href="#v:toOutput" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:outputConcurrent" class="def">outputConcurrent</a> :: <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> v =&gt; v -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/System.Console.Concurrent.Internal.html#outputConcurrent" class="link">Source</a> <a href="#v:outputConcurrent" class="selflink">#</a></p><div class="doc"><p>Displays a value to stdout.</p><p>Uses locking to ensure that the whole output occurs atomically
 even when other threads are concurrently generating output.</p><p>No newline is appended to the value, so if you want a newline, be sure
 to include it yourself.</p><p>When something else is writing to the console at the same time, this does
 not block. It buffers the value, so it will be displayed once the other
 writer is done.</p><p>When outputConcurrent is used within a call to
 <code><a href="System-Console-Regions.html#v:displayConsoleRegions" title="System.Console.Regions">displayConsoleRegions</a></code>, the output is displayed
 above the currently open console regions. Only lines ending in a newline
 are displayed in this case (it uses <code><a href="System-Console-Concurrent.html#v:waitCompleteLines" title="System.Console.Concurrent">waitCompleteLines</a></code>).</p></div></div><div class="top"><p class="src"><a id="v:errorConcurrent" class="def">errorConcurrent</a> :: <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> v =&gt; v -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/System.Console.Concurrent.Internal.html#errorConcurrent" class="link">Source</a> <a href="#v:errorConcurrent" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="System-Console-Concurrent.html#v:outputConcurrent" title="System.Console.Concurrent">outputConcurrent</a></code>, but displays to stderr.</p><p>(Does not throw an exception.)</p></div></div><div class="top"><p class="src"><a id="v:createProcessConcurrent" class="def">createProcessConcurrent</a> :: <a href="../process-1.6.19.0/System-Process.html#t:CreateProcess" title="System.Process">CreateProcess</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a>) <a href="src/System.Console.Concurrent.Internal.html#createProcessConcurrent" class="link">Source</a> <a href="#v:createProcessConcurrent" class="selflink">#</a></p><div class="doc"><p>Wrapper around <code><a href="../process-1.6.19.0/System-Process.html#v:createProcess" title="System.Process">createProcess</a></code> that prevents 
 multiple processes that are running concurrently from writing
 to stdout/stderr at the same time.</p><p>If the process does not output to stdout or stderr, it's run
 by createProcess entirely as usual. Only processes that can generate
 output are handled specially:</p><p>A process is allowed to write to stdout and stderr in the usual
 way, assuming it can successfully take the output lock.</p><p>When the output lock is held (ie, by another concurrent process,
 or because <code><a href="System-Console-Concurrent.html#v:outputConcurrent" title="System.Console.Concurrent">outputConcurrent</a></code> is being called at the same time),
 the process is instead run with its stdout and stderr
 redirected to a buffer. The buffered output will be displayed as soon
 as the output lock becomes free.</p><p>Note that the the process is waited for by a background thread,
 so unlike createProcess, neglecting to call waitForProcess will not
 result in zombie processess.</p></div></div><div class="top"><p class="src"><a id="v:createProcessForeground" class="def">createProcessForeground</a> :: <a href="../process-1.6.19.0/System-Process.html#t:CreateProcess" title="System.Process">CreateProcess</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.18.2.1/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a>, <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a>) <a href="src/System.Console.Concurrent.Internal.html#createProcessForeground" class="link">Source</a> <a href="#v:createProcessForeground" class="selflink">#</a></p><div class="doc"><p>Wrapper around <code><a href="../process-1.6.19.0/System-Process.html#v:createProcess" title="System.Process">createProcess</a></code> that makes sure a process
 is run in the foreground, with direct access to stdout and stderr.
 Useful when eg, running an interactive process.</p><p>Note that the the process is waited for by a background thread,
 so unlike createProcess, neglecting to call waitForProcess will not
 result in zombie processess.</p></div></div><div class="top"><p class="src"><a id="v:flushConcurrentOutput" class="def">flushConcurrentOutput</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/System.Console.Concurrent.Internal.html#flushConcurrentOutput" class="link">Source</a> <a href="#v:flushConcurrentOutput" class="selflink">#</a></p><div class="doc"><p>Blocks until any processes started by <code><a href="System-Console-Concurrent.html#v:createProcessConcurrent" title="System.Console.Concurrent">createProcessConcurrent</a></code> have
 finished, and any buffered output is displayed. Also blocks while
 <code><a href="System-Console-Concurrent.html#v:lockOutput" title="System.Console.Concurrent">lockOutput</a></code> is is use.</p><p><code><a href="System-Console-Concurrent.html#v:withConcurrentOutput" title="System.Console.Concurrent">withConcurrentOutput</a></code> calls this at the end, so you do not normally
 need to use this.</p></div></div><div class="top"><p class="src"><a id="v:lockOutput" class="def">lockOutput</a> :: (<a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../exceptions-0.10.7/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m) =&gt; m a -&gt; m a <a href="src/System.Console.Concurrent.Internal.html#lockOutput" class="link">Source</a> <a href="#v:lockOutput" class="selflink">#</a></p><div class="doc"><p>Holds a lock while performing an action. This allows the action to
 perform its own output to the console, without using functions from this
 module.</p><p>While this is running, other threads that try to lockOutput will block.
 Any calls to <code><a href="System-Console-Concurrent.html#v:outputConcurrent" title="System.Console.Concurrent">outputConcurrent</a></code> and <code><a href="System-Console-Concurrent.html#v:createProcessConcurrent" title="System.Console.Concurrent">createProcessConcurrent</a></code> will not
 block, but the output will be buffered and displayed only once the
 action is done.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ConcurrentProcessHandle" class="def">ConcurrentProcessHandle</a> = <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a> <a href="src/System.Console.Concurrent.Internal.html#ConcurrentProcessHandle" class="link">Source</a> <a href="#t:ConcurrentProcessHandle" class="selflink">#</a></p><div class="doc"><p>This alias is provided to avoid breaking backwards compatibility.</p></div></div><div class="top"><p class="src"><a id="v:waitForProcessConcurrent" class="def">waitForProcessConcurrent</a> :: <a href="System-Console-Concurrent.html#t:ConcurrentProcessHandle" title="System.Console.Concurrent">ConcurrentProcessHandle</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.18.2.1/System-Exit.html#t:ExitCode" title="System.Exit">ExitCode</a> <a href="src/System.Console.Concurrent.Internal.html#waitForProcessConcurrent" class="link">Source</a> <a href="#v:waitForProcessConcurrent" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="../process-1.6.19.0/System-Process.html#v:waitForProcess" title="System.Process">waitForProcess</a></code>; provided to avoid breaking backwards
 compatibility.</p></div></div><a href="#g:2" id="g:2"><h1>Low level access to the output buffer</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OutputBuffer" class="def">OutputBuffer</a> <a href="src/System.Console.Concurrent.Internal.html#OutputBuffer" class="link">Source</a> <a href="#t:OutputBuffer" class="selflink">#</a></p><div class="doc"><p>Buffered output.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:OutputBuffer">Instances</h4><details id="i:OutputBuffer" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:OutputBuffer:Eq:1"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a></span> <a href="src/System.Console.Concurrent.Internal.html#line-294" class="link">Source</a> <a href="#t:OutputBuffer" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:OutputBuffer:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Console-Concurrent-Internal.html">System.Console.Concurrent.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StdHandle" class="def">StdHandle</a> <a href="src/System.Console.Concurrent.Internal.html#StdHandle" class="link">Source</a> <a href="#t:StdHandle" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:StdOut" class="def">StdOut</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:StdErr" class="def">StdErr</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:bufferOutputSTM" class="def">bufferOutputSTM</a> :: <a href="System-Console-Concurrent.html#t:Outputable" title="System.Console.Concurrent">Outputable</a> v =&gt; <a href="System-Console-Concurrent.html#t:StdHandle" title="System.Console.Concurrent">StdHandle</a> -&gt; v -&gt; <a href="../base-4.18.2.1/GHC-Conc.html#t:STM" title="GHC.Conc">STM</a> () <a href="src/System.Console.Concurrent.Internal.html#bufferOutputSTM" class="link">Source</a> <a href="#v:bufferOutputSTM" class="selflink">#</a></p><div class="doc"><p>Adds a value to the output buffer for later display.</p><p>Note that buffering large quantities of data this way will keep it
 resident in memory until it can be displayed. While <code><a href="System-Console-Concurrent.html#v:outputConcurrent" title="System.Console.Concurrent">outputConcurrent</a></code>
 uses temp files if the buffer gets too big, this STM function cannot do
 so.</p></div></div><div class="top"><p class="src"><a id="v:outputBufferWaiterSTM" class="def">outputBufferWaiterSTM</a> :: (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>)) -&gt; <a href="../base-4.18.2.1/GHC-Conc.html#t:STM" title="GHC.Conc">STM</a> (<a href="System-Console-Concurrent.html#t:StdHandle" title="System.Console.Concurrent">StdHandle</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>) <a href="src/System.Console.Concurrent.Internal.html#outputBufferWaiterSTM" class="link">Source</a> <a href="#v:outputBufferWaiterSTM" class="selflink">#</a></p><div class="doc"><p>A STM action that waits for some buffered output to become
 available, and returns it.</p><p>The function can select a subset of output when only some is desired;
 the fst part is returned and the snd is left in the buffer.</p><p>This will prevent it from being displayed in the usual way, so you'll
 need to use <code><a href="System-Console-Concurrent.html#v:emitOutputBuffer" title="System.Console.Concurrent">emitOutputBuffer</a></code> to display it yourself.</p></div></div><div class="top"><p class="src"><a id="v:waitAnyBuffer" class="def">waitAnyBuffer</a> :: <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>) <a href="src/System.Console.Concurrent.Internal.html#waitAnyBuffer" class="link">Source</a> <a href="#v:waitAnyBuffer" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:waitCompleteLines" class="def">waitCompleteLines</a> :: <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; (<a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>, <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a>) <a href="src/System.Console.Concurrent.Internal.html#waitCompleteLines" class="link">Source</a> <a href="#v:waitCompleteLines" class="selflink">#</a></p><div class="doc"><p>Use with <code><a href="System-Console-Concurrent.html#v:outputBufferWaiterSTM" title="System.Console.Concurrent">outputBufferWaiterSTM</a></code> to make it only return buffered
 output that ends with a newline. Anything buffered without a newline
 is left in the buffer.</p></div></div><div class="top"><p class="src"><a id="v:emitOutputBuffer" class="def">emitOutputBuffer</a> :: <a href="System-Console-Concurrent.html#t:StdHandle" title="System.Console.Concurrent">StdHandle</a> -&gt; <a href="System-Console-Concurrent.html#t:OutputBuffer" title="System.Console.Concurrent">OutputBuffer</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/System.Console.Concurrent.Internal.html#emitOutputBuffer" class="link">Source</a> <a href="#v:emitOutputBuffer" class="selflink">#</a></p><div class="doc"><p>Emits the content of the OutputBuffer to the Handle</p><p>If you use this, you should use <code><a href="System-Console-Concurrent.html#v:lockOutput" title="System.Console.Concurrent">lockOutput</a></code> to ensure you're the only
 thread writing to the console.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>