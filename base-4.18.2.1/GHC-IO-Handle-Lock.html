<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.IO.Handle.Lock</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">base-4.18.2.1: Core data structures and operations</span><ul class="links" id="page-menu"><li><a href="src/GHC.IO.Handle.Lock.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.IO.Handle.Lock</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:FileLockingNotSupported">FileLockingNotSupported</a> = <a href="#v:FileLockingNotSupported">FileLockingNotSupported</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LockMode">LockMode</a><ul class="subs"><li>= <a href="#v:SharedLock">SharedLock</a></li><li>| <a href="#v:ExclusiveLock">ExclusiveLock</a></li></ul></li><li class="src short"><a href="#v:hLock">hLock</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="GHC-IO-Handle-Lock.html#t:LockMode" title="GHC.IO.Handle.Lock">LockMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:hTryLock">hTryLock</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="GHC-IO-Handle-Lock.html#t:LockMode" title="GHC.IO.Handle.Lock">LockMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:hUnlock">hUnlock</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FileLockingNotSupported" class="def">FileLockingNotSupported</a> <a href="src/GHC.IO.Handle.Lock.Common.html#FileLockingNotSupported" class="link">Source</a> <a href="#t:FileLockingNotSupported" class="selflink">#</a></p><div class="doc"><p>Exception thrown by <code>hLock</code> on non-Windows platforms that don't support
 <code>flock</code>.</p><p><em>Since: base-4.10.0.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FileLockingNotSupported" class="def">FileLockingNotSupported</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FileLockingNotSupported">Instances</h4><details id="i:FileLockingNotSupported" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileLockingNotSupported:Exception:1"></span> <a href="Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a></span> <a href="src/GHC.IO.Handle.Lock.Common.html#line-18" class="link">Source</a> <a href="#t:FileLockingNotSupported" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FileLockingNotSupported:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-IO-Handle-Lock-Common.html">GHC.IO.Handle.Lock.Common</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a> -&gt; <a href="Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="src/GHC.Exception.Type.html#toException" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a> <a href="src/GHC.Exception.Type.html#fromException" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a> -&gt; <a href="Data-String.html#t:String" title="Data.String">String</a> <a href="src/GHC.Exception.Type.html#displayException" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileLockingNotSupported:Show:2"></span> <a href="Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a></span> <a href="src/GHC.IO.Handle.Lock.Common.html#line-15" class="link">Source</a> <a href="#t:FileLockingNotSupported" class="selflink">#</a></td><td class="doc"><p><em>Since: base-4.10.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:FileLockingNotSupported:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-IO-Handle-Lock-Common.html">GHC.IO.Handle.Lock.Common</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a> -&gt; <a href="Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="src/GHC.Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a> -&gt; <a href="Data-String.html#t:String" title="Data.String">String</a> <a href="src/GHC.Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="GHC-IO-Handle-Lock.html#t:FileLockingNotSupported" title="GHC.IO.Handle.Lock">FileLockingNotSupported</a>] -&gt; <a href="Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="src/GHC.Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LockMode" class="def">LockMode</a> <a href="src/GHC.IO.Handle.Lock.Common.html#LockMode" class="link">Source</a> <a href="#t:LockMode" class="selflink">#</a></p><div class="doc"><p>Indicates a mode in which a file should be locked.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SharedLock" class="def">SharedLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ExclusiveLock" class="def">ExclusiveLock</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:hLock" class="def">hLock</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="GHC-IO-Handle-Lock.html#t:LockMode" title="GHC.IO.Handle.Lock">LockMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/GHC.IO.Handle.Lock.html#hLock" class="link">Source</a> <a href="#v:hLock" class="selflink">#</a></p><div class="doc"><p>If a <code><a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></code> references a file descriptor, attempt to lock contents of the
 underlying file in appropriate mode. If the file is already locked in
 incompatible mode, this function blocks until the lock is established. The
 lock is automatically released upon closing a <code><a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></code>.</p><p>Things to be aware of:</p><p>1) This function may block inside a C call. If it does, in order to be able
 to interrupt it with asynchronous exceptions and/or for other threads to
 continue working, you MUST use threaded version of the runtime system.</p><p>2) The implementation uses <code>LockFileEx</code> on Windows and <code>flock</code> otherwise,
 hence all of their caveats also apply here.</p><p>3) On non-Windows platforms that don't support <code>flock</code> (e.g. Solaris) this
 function throws <code>FileLockingNotImplemented</code>. We deliberately choose to not
 provide fcntl based locking instead because of its broken semantics.</p><p><em>Since: base-4.10.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:hTryLock" class="def">hTryLock</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="GHC-IO-Handle-Lock.html#t:LockMode" title="GHC.IO.Handle.Lock">LockMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/GHC.IO.Handle.Lock.html#hTryLock" class="link">Source</a> <a href="#v:hTryLock" class="selflink">#</a></p><div class="doc"><p>Non-blocking version of <code><a href="GHC-IO-Handle-Lock.html#v:hLock" title="GHC.IO.Handle.Lock">hLock</a></code>.</p><p>Returns <code><a href="Data-Bool.html#v:True" title="Data.Bool">True</a></code> if taking the lock was successful and <code><a href="Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise.</p><p><em>Since: base-4.10.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:hUnlock" class="def">hUnlock</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/GHC.IO.Handle.Lock.html#hUnlock" class="link">Source</a> <a href="#v:hUnlock" class="selflink">#</a></p><div class="doc"><p>Release a lock taken with <code><a href="GHC-IO-Handle-Lock.html#v:hLock" title="GHC.IO.Handle.Lock">hLock</a></code> or <code><a href="GHC-IO-Handle-Lock.html#v:hTryLock" title="GHC.IO.Handle.Lock">hTryLock</a></code>.</p><p><em>Since: base-4.11.0.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>