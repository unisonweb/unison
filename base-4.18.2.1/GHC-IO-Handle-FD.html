<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.IO.Handle.FD</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">base-4.18.2.1: Core data structures and operations</span><ul class="links" id="page-menu"><li><a href="src/GHC.IO.Handle.FD.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) The University of Glasgow 1994-2008</td></tr><tr><th>License</th><td>see libraries/base/LICENSE</td></tr><tr><th>Maintainer</th><td>libraries@haskell.org</td></tr><tr><th>Stability</th><td>internal</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.IO.Handle.FD</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Handle operations implemented by file descriptors (FDs)</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:stdin">stdin</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:stdout">stdout</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:stderr">stderr</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:openFile">openFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:withFile">withFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; (<a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r) -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r</li><li class="src short"><a href="#v:openBinaryFile">openBinaryFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:withBinaryFile">withBinaryFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; (<a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r) -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r</li><li class="src short"><a href="#v:openFileBlocking">openFileBlocking</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:withFileBlocking">withFileBlocking</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; (<a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r) -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r</li><li class="src short"><a href="#v:mkHandleFromFD">mkHandleFromFD</a> :: <a href="GHC-IO-FD.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="GHC-IO-Device.html#t:IODeviceType" title="GHC.IO.Device">IODeviceType</a> -&gt; <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="GHC-IO-Encoding-Types.html#t:TextEncoding" title="GHC.IO.Encoding.Types">TextEncoding</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:fdToHandle">fdToHandle</a> :: <a href="System-Posix-Internals.html#t:FD" title="System.Posix.Internals">FD</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:fdToHandle-39-">fdToHandle'</a> :: <a href="Foreign-C-Types.html#t:CInt" title="Foreign.C.Types">CInt</a> -&gt; <a href="Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="GHC-IO-Device.html#t:IODeviceType" title="GHC.IO.Device">IODeviceType</a> -&gt; <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li class="src short"><a href="#v:handleToFd">handleToFd</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-FD.html#t:FD" title="GHC.IO.FD">FD</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:stdin" class="def">stdin</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#stdin" class="link">Source</a> <a href="#v:stdin" class="selflink">#</a></p><div class="doc"><p>A handle managing input from the Haskell program's standard input channel.</p></div></div><div class="top"><p class="src"><a id="v:stdout" class="def">stdout</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#stdout" class="link">Source</a> <a href="#v:stdout" class="selflink">#</a></p><div class="doc"><p>A handle managing output to the Haskell program's standard output channel.</p></div></div><div class="top"><p class="src"><a id="v:stderr" class="def">stderr</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#stderr" class="link">Source</a> <a href="#v:stderr" class="selflink">#</a></p><div class="doc"><p>A handle managing output to the Haskell program's standard error channel.</p></div></div><div class="top"><p class="src"><a id="v:openFile" class="def">openFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#openFile" class="link">Source</a> <a href="#v:openFile" class="selflink">#</a></p><div class="doc"><p>Computation <code><a href="GHC-IO-Handle-FD.html#v:openFile" title="GHC.IO.Handle.FD">openFile</a></code> <code>file mode</code> allocates and returns a new, open
 handle to manage the file <code>file</code>.  It manages input if <code>mode</code>
 is <code><a href="System-IO.html#v:ReadMode" title="System.IO">ReadMode</a></code>, output if <code>mode</code> is <code><a href="System-IO.html#v:WriteMode" title="System.IO">WriteMode</a></code> or <code><a href="System-IO.html#v:AppendMode" title="System.IO">AppendMode</a></code>,
 and both input and output if mode is <code><a href="System-IO.html#v:ReadWriteMode" title="System.IO">ReadWriteMode</a></code>.</p><p>If the file does not exist and it is opened for output, it should be
 created as a new file.  If <code>mode</code> is <code><a href="System-IO.html#v:WriteMode" title="System.IO">WriteMode</a></code> and the file
 already exists, then it should be truncated to zero length.
 Some operating systems delete empty files, so there is no guarantee
 that the file will exist following an <code><a href="GHC-IO-Handle-FD.html#v:openFile" title="GHC.IO.Handle.FD">openFile</a></code> with <code>mode</code>
 <code><a href="System-IO.html#v:WriteMode" title="System.IO">WriteMode</a></code> unless it is subsequently written to successfully.
 The handle is positioned at the end of the file if <code>mode</code> is
 <code><a href="System-IO.html#v:AppendMode" title="System.IO">AppendMode</a></code>, and otherwise at the beginning (in which case its
 internal position is 0).
 The initial buffer mode is implementation-dependent.</p><p>This operation may fail with:</p><ul><li><code><a href="System-IO-Error.html#v:isAlreadyInUseError" title="System.IO.Error">isAlreadyInUseError</a></code> if the file is already open and
    cannot be reopened;</li><li><code><a href="System-IO-Error.html#v:isDoesNotExistError" title="System.IO.Error">isDoesNotExistError</a></code> if the file does not exist or
    (on POSIX systems) is a FIFO without a reader and <code><a href="System-IO.html#v:WriteMode" title="System.IO">WriteMode</a></code> was
    requested; or</li><li><code><a href="System-IO-Error.html#v:isPermissionError" title="System.IO.Error">isPermissionError</a></code> if the user does not have permission
     to open the file.</li></ul><p>On POSIX systems, <code><a href="GHC-IO-Handle-FD.html#v:openFile" title="GHC.IO.Handle.FD">openFile</a></code> is an <em>interruptible operation</em> as
 described in <a href="Control-Exception.html">Control.Exception</a>.</p><p>Note: if you will be working with files containing binary data, you'll want to
 be using <code><a href="GHC-IO-Handle-FD.html#v:openBinaryFile" title="GHC.IO.Handle.FD">openBinaryFile</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:withFile" class="def">withFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; (<a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r) -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r <a href="src/GHC.IO.Handle.FD.html#withFile" class="link">Source</a> <a href="#v:withFile" class="selflink">#</a></p><div class="doc"><p><code><code><a href="GHC-IO-Handle-FD.html#v:withFile" title="GHC.IO.Handle.FD">withFile</a></code> name mode act</code> opens a file like <code><a href="GHC-IO-Handle-FD.html#v:openFile" title="GHC.IO.Handle.FD">openFile</a></code> and passes
 the resulting handle to the computation <code>act</code>.  The handle will be
 closed on exit from <code><a href="GHC-IO-Handle-FD.html#v:withFile" title="GHC.IO.Handle.FD">withFile</a></code>, whether by normal termination or by
 raising an exception.  If closing the handle raises an exception, then
 this exception will be raised by <code><a href="GHC-IO-Handle-FD.html#v:withFile" title="GHC.IO.Handle.FD">withFile</a></code> rather than any exception
 raised by <code>act</code>.</p></div></div><div class="top"><p class="src"><a id="v:openBinaryFile" class="def">openBinaryFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#openBinaryFile" class="link">Source</a> <a href="#v:openBinaryFile" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="GHC-IO-Handle-FD.html#v:openFile" title="GHC.IO.Handle.FD">openFile</a></code>, but open the file in binary mode.
 On Windows, reading a file in text mode (which is the default)
 will translate CRLF to LF, and writing will translate LF to CRLF.
 This is usually what you want with text files.  With binary files
 this is undesirable; also, as usual under Microsoft operating systems,
 text mode treats control-Z as EOF.  Binary mode turns off all special
 treatment of end-of-line and end-of-file characters.
 (See also <code><a href="System-IO.html#v:hSetBinaryMode" title="System.IO">hSetBinaryMode</a></code>.)</p></div></div><div class="top"><p class="src"><a id="v:withBinaryFile" class="def">withBinaryFile</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; (<a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r) -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r <a href="src/GHC.IO.Handle.FD.html#withBinaryFile" class="link">Source</a> <a href="#v:withBinaryFile" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="GHC-IO-Handle-FD.html#v:openBinaryFile" title="GHC.IO.Handle.FD">openBinaryFile</a></code> that takes an action to perform
 with the handle. If an exception occurs in the action, then
 the file will be closed automatically. The action <em>should</em>
 close the file when finished with it so the file does not remain
 open until the garbage collector collects the handle.</p></div></div><div class="top"><p class="src"><a id="v:openFileBlocking" class="def">openFileBlocking</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#openFileBlocking" class="link">Source</a> <a href="#v:openFileBlocking" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="GHC-IO-Handle-FD.html#v:openFile" title="GHC.IO.Handle.FD">openFile</a></code>, but opens the file in ordinary blocking mode.
 This can be useful for opening a FIFO for writing: if we open in
 non-blocking mode then the open will fail if there are no readers,
 whereas a blocking open will block until a reader appear.</p><p>Note: when blocking happens, an OS thread becomes tied up with the
 processing, so the program must have at least another OS thread if
 it wants to unblock itself. By corollary, a non-threaded runtime
 will need a process-external trigger in order to become unblocked.</p><p>On POSIX systems, <code><a href="GHC-IO-Handle-FD.html#v:openFileBlocking" title="GHC.IO.Handle.FD">openFileBlocking</a></code> is an <em>interruptible operation</em> as
 described in <a href="Control-Exception.html">Control.Exception</a>.</p><p><em>Since: base-4.4.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:withFileBlocking" class="def">withFileBlocking</a> :: <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; (<a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r) -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> r <a href="src/GHC.IO.Handle.FD.html#withFileBlocking" class="link">Source</a> <a href="#v:withFileBlocking" class="selflink">#</a></p><div class="doc"><p><code><code><a href="GHC-IO-Handle-FD.html#v:withFileBlocking" title="GHC.IO.Handle.FD">withFileBlocking</a></code> name mode act</code> opens a file like <code><a href="GHC-IO-Handle-FD.html#v:openFileBlocking" title="GHC.IO.Handle.FD">openFileBlocking</a></code>
 and passes the resulting handle to the computation <code>act</code>.  The handle will
 be closed on exit from <code><a href="GHC-IO-Handle-FD.html#v:withFileBlocking" title="GHC.IO.Handle.FD">withFileBlocking</a></code>, whether by normal termination or
 by raising an exception.  If closing the handle raises an exception, then
 this exception will be raised by <code><a href="GHC-IO-Handle-FD.html#v:withFile" title="GHC.IO.Handle.FD">withFile</a></code> rather than any exception raised
 by <code>act</code>.</p></div></div><div class="top"><p class="src"><a id="v:mkHandleFromFD" class="def">mkHandleFromFD</a> :: <a href="GHC-IO-FD.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="GHC-IO-Device.html#t:IODeviceType" title="GHC.IO.Device">IODeviceType</a> -&gt; <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="GHC-IO-Encoding-Types.html#t:TextEncoding" title="GHC.IO.Encoding.Types">TextEncoding</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#mkHandleFromFD" class="link">Source</a> <a href="#v:mkHandleFromFD" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fdToHandle" class="def">fdToHandle</a> :: <a href="System-Posix-Internals.html#t:FD" title="System.Posix.Internals">FD</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#fdToHandle" class="link">Source</a> <a href="#v:fdToHandle" class="selflink">#</a></p><div class="doc"><p>Turn an existing file descriptor into a Handle.  This is used by
 various external libraries to make Handles.</p><p>Makes a binary Handle.  This is for historical reasons; it should
 probably be a text Handle with the default encoding and newline
 translation instead.</p></div></div><div class="top"><p class="src"><a id="v:fdToHandle-39-" class="def">fdToHandle'</a> :: <a href="Foreign-C-Types.html#t:CInt" title="Foreign.C.Types">CInt</a> -&gt; <a href="Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="GHC-IO-Device.html#t:IODeviceType" title="GHC.IO.Device">IODeviceType</a> -&gt; <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="System-IO.html#t:IOMode" title="System.IO">IOMode</a> -&gt; <a href="Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> <a href="src/GHC.IO.Handle.FD.html#fdToHandle%27" class="link">Source</a> <a href="#v:fdToHandle-39-" class="selflink">#</a></p><div class="doc"><p>Old API kept to avoid breaking clients</p></div></div><div class="top"><p class="src"><a id="v:handleToFd" class="def">handleToFd</a> :: <a href="GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="System-IO.html#t:IO" title="System.IO">IO</a> <a href="GHC-IO-FD.html#t:FD" title="GHC.IO.FD">FD</a> <a href="src/GHC.IO.Handle.FD.html#handleToFd" class="link">Source</a> <a href="#v:handleToFd" class="selflink">#</a></p><div class="doc"><p>Turn an existing Handle into a file descriptor. This function throws an
 IOError if the Handle does not reference a file descriptor.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>