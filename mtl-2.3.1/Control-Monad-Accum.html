<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Monad.Accum</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">mtl-2.3.1: Monad classes for transformers, using functional dependencies</span><ul class="links" id="page-menu"><li><a href="src/Control.Monad.Accum.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(C) Koz Ross 2022 Manuel B&#228;renz 2021</td></tr><tr><th>License</th><td>BSD-3-Clause (see the LICENSE file)</td></tr><tr><th>Maintainer</th><td>koz.ross@retro-freedom.nz</td></tr><tr><th>Stability</th><td>Experimental</td></tr><tr><th>Portability</th><td>GHC only</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.Accum</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Type class</a></li><li><a href="#g:2">Lifting helper type</a></li><li><a href="#g:3">Other functions</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><dl><dt>Computation type:</dt><dd>Accumulation (either append-only state, or writer with
 the ability to read all previous input).</dd><dt>Binding strategy:</dt><dd>Binding a function to a monadic value monoidally
 accumulates the subcomputations (that is, using <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>).</dd><dt>Useful for:</dt><dd>Logging, patch-style tracking.</dd><dt>Zero and plus:</dt><dd>None.</dd><dt>Example type:</dt><dd><code><code><a href="../transformers-0.6.1.0/Control-Monad-Trans-Accum.html#v:Accum" title="Control.Monad.Trans.Accum">Accum</a></code> w a</code></dd></dl><h1>A note on commutativity</h1><p>Some effects are <em>commutative</em>: it doesn't matter which you resolve first, as
 all possible orderings of commutative effects are isomorphic. Consider, for
 example, the reader and state effects, as exemplified by <code><a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a></code> and
 <code><a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> respectively. If we have
 <code><code><a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a></code> r (<code><a href="Control-Monad-State-Strict.html#t:State" title="Control.Monad.State.Strict">State</a></code> s) a</code>, this is
 effectively <code>r -&gt; <code><a href="Control-Monad-State-Strict.html#t:State" title="Control.Monad.State.Strict">State</a></code> s a ~ r -&gt; s -&gt; (a, s)</code>; if we instead have
 <code><code><a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> s (<code><a href="../transformers-0.6.1.0/Control-Monad-Trans-Reader.html#v:Reader" title="Control.Monad.Trans.Reader">Reader</a></code> r) a</code>, this is effectively
 <code>s -&gt; <code><a href="Control-Monad-Trans.html#v:Reader" title="Control.Monad.Trans">Reader</a></code> r (a, s) ~ s -&gt; r -&gt; (a, s)</code>. Since we
 can always reorder function arguments (for example, using <code><a href="../base-4.18.2.1/Data-Function.html#v:flip" title="Data.Function">flip</a></code>, as in
 this case) without changing the result, these are
 isomorphic, showing that reader and state are <em>commutative</em>, or, more
 precisely, <em>commute with each other</em>.</p><p>However, this isn't generally the case. Consider instead the error and state
 effects, as exemplified by <code><a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a></code> and <code><a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> respectively.
 If we have <code><code><a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a></code> (<code><a href="../transformers-0.6.1.0/Control-Monad-Trans-State-Strict.html#v:State" title="Control.Monad.Trans.State.Strict">State</a></code> s) a</code>, this
 is effectively <code><code>State</code> s (<code><a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> a) ~ s -&gt; (<code><a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> a, s)</code>: put simply,
 the error can occur only in the <em>result</em>, but
 not the state, which always 'survives'. On the other hand, if we have
 <code><code><a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> s <code><a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> a</code>, this is instead <code>s -&gt; <code><a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> (a, s)</code>: here,
 if we error, we lose <em>both</em> the state and the result! Thus, error and state effects
 do <em>not</em> commute with each other.</p><p>As the MTL is capability-based, we support any ordering of non-commutative
 effects on an equal footing. Indeed, if you wish to use
 <code><a href="Control-Monad-State-Class.html#v:MonadState" title="Control.Monad.State.Class">MonadState</a></code>, for
 example, whether your final monadic stack ends up being <code><code><a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a></code>
 (<code><a href="../transformers-0.6.1.0/Control-Monad-Trans-State-Strict.html#v:State" title="Control.Monad.Trans.State.Strict">State</a></code> s)
 a</code>, <code><code><a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> s <code><a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> a</code>, or anything else, you will be able to write your
 desired code without having to consider such differences. However, the way we
 <em>implement</em> these capabilities for any given transformer (or rather, any
 given transformed stack) <em>is</em> affected by this ordering unless the effects in
 question are commutative.</p><p>We note in this module which effects the accumulation effect does and doesn't
 commute with; we also note on implementations with non-commutative
 transformers what the outcome will be. Note that, depending on how the
 'inner monad' is structured, this may be more complex than we note: we
 describe only what impact the 'outer effect' has, not what else might be in
 the stack.</p><h1>Commutativity of accumulation</h1><p>The accumulation effect commutes with the identity effect (<code><a href="../transformers-0.6.1.0/Control-Monad-Trans-Identity.html#t:IdentityT" title="Control.Monad.Trans.Identity">IdentityT</a></code>),
 reader, writer or state effects (<code><a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a></code>, <code><a href="Control-Monad-Writer-Strict.html#t:WriterT" title="Control.Monad.Writer.Strict">WriterT</a></code>, <code><a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> and any
 combination, including <code><a href="Control-Monad-RWS-Strict.html#t:RWST" title="Control.Monad.RWS.Strict">RWST</a></code> for example) and with itself. It does <em>not</em>
 commute with anything else.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> (<a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w, <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="#t:MonadAccum">MonadAccum</a> w m | m -&gt; w <span class="keyword">where</span><ul class="subs"><li><a href="#v:look">look</a> :: m w</li><li><a href="#v:add">add</a> :: w -&gt; m ()</li><li><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; m a</li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:LiftingAccum">LiftingAccum</a> (t :: (<a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (m :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) = <a href="#v:LiftingAccum">LiftingAccum</a> (t m a)</li><li class="src short"><a href="#v:looks">looks</a> :: <span class="keyword">forall</span> (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (m :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (w :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; (w -&gt; a) -&gt; m a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Type class</h1></a><div class="top"><p class="src"><span class="keyword">class</span> (<a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w, <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a id="t:MonadAccum" class="def">MonadAccum</a> w m | m -&gt; w <span class="keyword">where</span> <a href="src/Control.Monad.Accum.html#MonadAccum" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></p><div class="doc"><p>The capability to accumulate. This can be seen in one of two ways:</p><ul><li>A <code><a href="Control-Monad-State-Class.html#v:MonadState" title="Control.Monad.State.Class">MonadState</a></code> which can only append (using <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>); or</li><li>A <code><a href="Control-Monad-Writer-Class.html#v:MonadWriter" title="Control.Monad.Writer.Class">MonadWriter</a></code> (limited to
 <code><a href="Control-Monad-Writer-Class.html#v:tell" title="Control.Monad.Writer.Class">tell</a></code>) with the ability to view the result of all previous
 <code><a href="Control-Monad-Writer-Class.html#v:tell" title="Control.Monad.Writer.Class">tell</a></code>s.</li></ul><h1>Laws</h1><p><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> should obey the following:</p><ol><li value="1"><code><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> (<code><a href="../base-4.18.2.1/Data-Function.html#v:const" title="Data.Function">const</a></code> (x, <code><a href="../base-4.18.2.1/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>))</code> <code>=</code> <code><code><a href="../base-4.18.2.1/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> x</code></li><li value="2"><code><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> f <code><a href="../base-4.18.2.1/Control-Applicative.html#v:-42--62-" title="Control.Applicative">*&gt;</a></code> <code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> g</code> <code>=</code>
 <code><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> <code><a href="../base-4.18.2.1/Data-Function.html#v:-36-" title="Data.Function">$</a></code> acc -&gt; let (_, v) = f acc
                          (res, w) = g (acc <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> v) in (res, v <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> w)</code></li></ol><p>If you choose to define <code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code> and <code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> instead, their definitions must obey
 the following:</p><ol><li value="1"><code><code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code> <code><a href="../base-4.18.2.1/Control-Applicative.html#v:-42--62-" title="Control.Applicative">*&gt;</a></code> <code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code></code> <code>=</code> <code><code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code></code></li><li value="2"><code><code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> <code><a href="../base-4.18.2.1/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code></code> <code>=</code> <code><code><a href="../base-4.18.2.1/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> ()</code></li><li value="3"><code><code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> x <code><a href="../base-4.18.2.1/Control-Applicative.html#v:-42--62-" title="Control.Applicative">*&gt;</a></code> <code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> y</code> <code>=</code> <code><code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> (x <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> y)</code></li><li value="4"><code><code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> x <code><a href="../base-4.18.2.1/Control-Applicative.html#v:-42--62-" title="Control.Applicative">*&gt;</a></code> <code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code></code> <code>=</code> <code><code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code> <code><a href="../base-4.18.2.1/Control-Monad.html#v:-62--62--61-" title="Control.Monad">&gt;&gt;=</a></code> w -&gt; <code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> x <code><a href="../base-4.18.2.1/Data-Functor.html#v:-36--62-" title="Data.Functor">$&gt;</a></code> w <code><a href="../base-4.18.2.1/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> x</code></li></ol><p>If you want to define both, the relationship between them is as follows.
 These are also the default definitions.</p><ol><li value="1"><code><code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code></code> <code>=</code> <code><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> <code><a href="../base-4.18.2.1/Data-Function.html#v:-36-" title="Data.Function">$</a></code> acc -&gt; (acc, mempty)</code></li><li value="2"><code><code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> x</code> <code>=</code> <code><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> <code><a href="../base-4.18.2.1/Data-Function.html#v:-36-" title="Data.Function">$</a></code> acc -&gt; (<code>()</code>, x)</code></li><li value="3"><code><code><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a></code> f</code> <code>=</code> <code><code><a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a></code> &gt;&gt;= acc -&gt; let (res, v) = f acc in <code><a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></code> v <code><a href="../base-4.18.2.1/Data-Functor.html#v:-36--62-" title="Data.Functor">$&gt;</a></code> res</code></li></ol><p><em>Since: mtl-2.3</em></p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Control-Monad-Accum.html#v:accum" title="Control.Monad.Accum">accum</a> | <a href="Control-Monad-Accum.html#v:look" title="Control.Monad.Accum">look</a>, <a href="Control-Monad-Accum.html#v:add" title="Control.Monad.Accum">add</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:look" class="def">look</a> :: m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><div class="doc"><p>Retrieve the accumulated result so far.</p></div><p class="src"><a id="v:add" class="def">add</a> :: w -&gt; m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><div class="doc"><p>Append a value to the result.</p></div><p class="src"><a id="v:accum" class="def">accum</a> :: (w -&gt; (a, w)) -&gt; m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p><div class="doc"><p>Embed a simple accumulation action into the monad.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MonadAccum">Instances</h4><details id="i:MonadAccum" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:1"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> m)</span> <a href="src/Control.Monad.Accum.html#line-172" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p>The accumulated value 'survives' an error: even if the
 computation fails to deliver a result, we still have an accumulated value.</p><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:2"></span> (<a href="../transformers-0.6.1.0/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t, <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m) =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m)</span> <a href="src/Control.Monad.Accum.html#line-300" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:3"></span> <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="../transformers-0.6.1.0/Control-Monad-Trans-Accum.html#t:AccumT" title="Control.Monad.Trans.Accum">AccumT</a> w <a href="../base-4.18.2.1/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a>)</span> <a href="src/Control.Monad.Accum.html#line-163" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="../transformers-0.6.1.0/Control-Monad-Trans-Accum.html#t:AccumT" title="Control.Monad.Trans.Accum">AccumT</a> w <a href="../base-4.18.2.1/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Accum.html#t:AccumT" title="Control.Monad.Trans.Accum">AccumT</a> w <a href="../base-4.18.2.1/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Accum.html#t:AccumT" title="Control.Monad.Trans.Accum">AccumT</a> w <a href="../base-4.18.2.1/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:4"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m)</span> <a href="src/Control.Monad.Accum.html#line-191" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p>The accumulated value 'survives' an exception: even if the computation
 fails to deliver a result, we still have an accumulated value.</p><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:5"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="../transformers-0.6.1.0/Control-Monad-Trans-Identity.html#t:IdentityT" title="Control.Monad.Trans.Identity">IdentityT</a> m)</span> <a href="src/Control.Monad.Accum.html#line-198" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="../transformers-0.6.1.0/Control-Monad-Trans-Identity.html#t:IdentityT" title="Control.Monad.Trans.Identity">IdentityT</a> m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Identity.html#t:IdentityT" title="Control.Monad.Trans.Identity">IdentityT</a> m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Identity.html#t:IdentityT" title="Control.Monad.Trans.Identity">IdentityT</a> m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:6"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> r m)</span> <a href="src/Control.Monad.Accum.html#line-226" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> r m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> r m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> r m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:7"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="../transformers-0.6.1.0/Control-Monad-Trans-Select.html#t:SelectT" title="Control.Monad.Trans.Select">SelectT</a> r m)</span> <a href="src/Control.Monad.Accum.html#line-236" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p>The 'ranking' function gains the ability to accumulate <code>w</code>s each time it
 is called. The final result will include the entire log of all such calls.</p><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="../transformers-0.6.1.0/Control-Monad-Trans-Select.html#t:SelectT" title="Control.Monad.Trans.Select">SelectT</a> r m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Select.html#t:SelectT" title="Control.Monad.Trans.Select">SelectT</a> r m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="../transformers-0.6.1.0/Control-Monad-Trans-Select.html#t:SelectT" title="Control.Monad.Trans.Select">SelectT</a> r m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:8"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> s m)</span> <a href="src/Control.Monad.Accum.html#line-243" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> s m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> s m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> s m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:9"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a> s m)</span> <a href="src/Control.Monad.Accum.html#line-250" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a> s m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a> s m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a> s m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:10"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' (<a href="Control-Monad-Writer-CPS.html#t:WriterT" title="Control.Monad.Writer.CPS">WriterT</a> w m)</span> <a href="src/Control.Monad.Accum.html#line-257" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Writer-CPS.html#t:WriterT" title="Control.Monad.Writer.CPS">WriterT</a> w m w' <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w' -&gt; <a href="Control-Monad-Writer-CPS.html#t:WriterT" title="Control.Monad.Writer.CPS">WriterT</a> w m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w' -&gt; (a, w')) -&gt; <a href="Control-Monad-Writer-CPS.html#t:WriterT" title="Control.Monad.Writer.CPS">WriterT</a> w m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:11"></span> (<a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' m, <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' (<a href="Control-Monad-Writer-Lazy.html#t:WriterT" title="Control.Monad.Writer.Lazy">WriterT</a> w m)</span> <a href="src/Control.Monad.Accum.html#line-264" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:11"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Writer-Lazy.html#t:WriterT" title="Control.Monad.Writer.Lazy">WriterT</a> w m w' <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w' -&gt; <a href="Control-Monad-Writer-Lazy.html#t:WriterT" title="Control.Monad.Writer.Lazy">WriterT</a> w m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w' -&gt; (a, w')) -&gt; <a href="Control-Monad-Writer-Lazy.html#t:WriterT" title="Control.Monad.Writer.Lazy">WriterT</a> w m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:12"></span> (<a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' m, <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' (<a href="Control-Monad-Writer-Strict.html#t:WriterT" title="Control.Monad.Writer.Strict">WriterT</a> w m)</span> <a href="src/Control.Monad.Accum.html#line-271" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:12"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Writer-Strict.html#t:WriterT" title="Control.Monad.Writer.Strict">WriterT</a> w m w' <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w' -&gt; <a href="Control-Monad-Writer-Strict.html#t:WriterT" title="Control.Monad.Writer.Strict">WriterT</a> w m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w' -&gt; (a, w')) -&gt; <a href="Control-Monad-Writer-Strict.html#t:WriterT" title="Control.Monad.Writer.Strict">WriterT</a> w m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:13"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-Cont.html#t:ContT" title="Control.Monad.Cont">ContT</a> r m)</span> <a href="src/Control.Monad.Accum.html#line-181" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p>The continuation can see, and interact with, the accumulated value.</p><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:13"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Cont.html#t:ContT" title="Control.Monad.Cont">ContT</a> r m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-Cont.html#t:ContT" title="Control.Monad.Cont">ContT</a> r m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-Cont.html#t:ContT" title="Control.Monad.Cont">ContT</a> r m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:14"></span> <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' m =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' (<a href="Control-Monad-RWS-CPS.html#t:RWST" title="Control.Monad.RWS.CPS">RWST</a> r w s m)</span> <a href="src/Control.Monad.Accum.html#line-205" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:14"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-RWS-CPS.html#t:RWST" title="Control.Monad.RWS.CPS">RWST</a> r w s m w' <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w' -&gt; <a href="Control-Monad-RWS-CPS.html#t:RWST" title="Control.Monad.RWS.CPS">RWST</a> r w s m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w' -&gt; (a, w')) -&gt; <a href="Control-Monad-RWS-CPS.html#t:RWST" title="Control.Monad.RWS.CPS">RWST</a> r w s m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:15"></span> (<a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' m, <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' (<a href="Control-Monad-RWS-Lazy.html#t:RWST" title="Control.Monad.RWS.Lazy">RWST</a> r w s m)</span> <a href="src/Control.Monad.Accum.html#line-212" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:15"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-RWS-Lazy.html#t:RWST" title="Control.Monad.RWS.Lazy">RWST</a> r w s m w' <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w' -&gt; <a href="Control-Monad-RWS-Lazy.html#t:RWST" title="Control.Monad.RWS.Lazy">RWST</a> r w s m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w' -&gt; (a, w')) -&gt; <a href="Control-Monad-RWS-Lazy.html#t:RWST" title="Control.Monad.RWS.Lazy">RWST</a> r w s m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadAccum:MonadAccum:16"></span> (<a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' m, <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w' (<a href="Control-Monad-RWS-Strict.html#t:RWST" title="Control.Monad.RWS.Strict">RWST</a> r w s m)</span> <a href="src/Control.Monad.Accum.html#line-219" class="link">Source</a> <a href="#t:MonadAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:ic:MonadAccum:MonadAccum:16"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-RWS-Strict.html#t:RWST" title="Control.Monad.RWS.Strict">RWST</a> r w s m w' <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w' -&gt; <a href="Control-Monad-RWS-Strict.html#t:RWST" title="Control.Monad.RWS.Strict">RWST</a> r w s m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w' -&gt; (a, w')) -&gt; <a href="Control-Monad-RWS-Strict.html#t:RWST" title="Control.Monad.RWS.Strict">RWST</a> r w s m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Lifting helper type</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:LiftingAccum" class="def">LiftingAccum</a> (t :: (<a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (m :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Control.Monad.Accum.html#LiftingAccum" class="link">Source</a> <a href="#t:LiftingAccum" class="selflink">#</a></p><div class="doc"><p>A helper type to decrease boilerplate when defining new transformer
 instances of <code><a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a></code>.</p><p>Most of the instances in this module are derived using this method; for
 example, our instance of <code><a href="Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a></code> is derived as follows:</p><pre>deriving via (LiftingAccum (ExceptT e) m) instance (MonadAccum w m) =&gt;
 MonadAccum w (ExceptT e m)</pre><p><em>Since: mtl-2.3</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LiftingAccum" class="def">LiftingAccum</a> (t m a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:LiftingAccum">Instances</h4><details id="i:LiftingAccum" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LiftingAccum:MonadAccum:1"></span> (<a href="../transformers-0.6.1.0/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t, <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m) =&gt; <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w (<a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m)</span> <a href="src/Control.Monad.Accum.html#line-300" class="link">Source</a> <a href="#t:LiftingAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:id:LiftingAccum:MonadAccum:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:look">look</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m w <a href="src/Control.Monad.Accum.html#look" class="link">Source</a> <a href="#v:look" class="selflink">#</a></p><p class="src"><a href="#v:add">add</a> :: w -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m () <a href="src/Control.Monad.Accum.html#add" class="link">Source</a> <a href="#v:add" class="selflink">#</a></p><p class="src"><a href="#v:accum">accum</a> :: (w -&gt; (a, w)) -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a <a href="src/Control.Monad.Accum.html#accum" class="link">Source</a> <a href="#v:accum" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LiftingAccum:Applicative:2"></span> <a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (t m) =&gt; <a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m)</span> <a href="src/Control.Monad.Accum.html#line-293" class="link">Source</a> <a href="#t:LiftingAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:id:LiftingAccum:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a <a href="../base-4.18.2.1/src/GHC.Base.html#pure" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m (a -&gt; b) -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A%3E" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m c <a href="../base-4.18.2.1/src/GHC.Base.html#liftA2" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b <a href="../base-4.18.2.1/src/GHC.Base.html#%2A%3E" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LiftingAccum:Functor:3"></span> <a href="../base-4.18.2.1/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (t m) =&gt; <a href="../base-4.18.2.1/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m)</span> <a href="src/Control.Monad.Accum.html#line-291" class="link">Source</a> <a href="#t:LiftingAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:id:LiftingAccum:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b <a href="../base-4.18.2.1/src/GHC.Base.html#fmap" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%24" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LiftingAccum:Monad:4"></span> <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m) =&gt; <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m)</span> <a href="src/Control.Monad.Accum.html#line-295" class="link">Source</a> <a href="#t:LiftingAccum" class="selflink">#</a></td><td class="doc"><p><em>Since: mtl-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:id:LiftingAccum:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Accum.html">Control.Monad.Accum</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; (a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b) -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Control-Monad-Accum.html#t:LiftingAccum" title="Control.Monad.Accum">LiftingAccum</a> t m a <a href="../base-4.18.2.1/src/GHC.Base.html#return" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h1>Other functions</h1></a><div class="top"><p class="src"><a id="v:looks" class="def">looks</a> :: <span class="keyword">forall</span> (a :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (m :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (w :: <a href="../base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). <a href="Control-Monad-Accum.html#t:MonadAccum" title="Control.Monad.Accum">MonadAccum</a> w m =&gt; (w -&gt; a) -&gt; m a <a href="src/Control.Monad.Accum.html#looks" class="link">Source</a> <a href="#v:looks" class="selflink">#</a></p><div class="doc"><p>Retrieve a function of the accumulated value.</p><p><em>Since: mtl-2.3</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>