<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- |</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- Module      : Data.ByteArray.Pack</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- License     : BSD-Style</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Maintainer  : Vincent Hanquez &lt;vincent@snarc.org&gt;</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Portability : unknown</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Simple Byte Array packer</span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Simple example:</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- &gt; &gt; flip pack 20 $ putWord8 0x41 &gt;&gt; putByteString &quot;BCD&quot; &gt;&gt; putWord8 0x20 &gt;&gt; putStorable (42 :: Word32)</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- &gt; Right (ABCD *\NUL\NUL\NUL&quot;)</span><span>
</span><span id="line-14"></span><span class="hs-comment">--</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Original code from &lt;https://hackage.haskell.org/package/bspack&gt;</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- generalized and adapted to run on 'memory', and spellchecked / tweaked. (2015-05)</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Copyright (c) 2014 Nicolas DI PRIMA</span><span>
</span><span id="line-18"></span><span class="hs-comment">--</span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.ByteArray.Pack</span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier">Packer</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Result"><span class="hs-identifier">Result</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#fill"><span class="hs-identifier">fill</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#pack"><span class="hs-identifier">pack</span></a></span><span>
</span><span id="line-24"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Operations</span></span><span>
</span><span id="line-25"></span><span>      </span><span class="annot"><span class="hs-comment">-- ** put</span></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord8"><span class="hs-identifier">putWord8</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord16"><span class="hs-identifier">putWord16</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord32"><span class="hs-identifier">putWord32</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier">putStorable</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putBytes"><span class="hs-identifier">putBytes</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#fillList"><span class="hs-identifier">fillList</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#fillUpWith"><span class="hs-identifier">fillUpWith</span></a></span><span>
</span><span id="line-33"></span><span>      </span><span class="annot"><span class="hs-comment">-- ** skip</span></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#skip"><span class="hs-identifier">skip</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#skipStorable"><span class="hs-identifier">skipStorable</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Foreign.Ptr</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Foreign.Storable</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Memory.Internal.Imports.html"><span class="hs-identifier">Data.Memory.Internal.Imports</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Memory.Internal.Compat.html"><span class="hs-identifier">Data.Memory.Internal.Compat</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Memory.PtrMethods.html"><span class="hs-identifier">Data.Memory.PtrMethods</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html"><span class="hs-identifier">Data.ByteArray.Pack.Internal</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.ByteArray.html"><span class="hs-identifier">Data.ByteArray</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteArray.Types.html#ByteArray"><span class="hs-identifier">ByteArray</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.Types.html#ByteArrayAccess"><span class="hs-identifier">ByteArrayAccess</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteArray.MemView.html#MemView"><span class="hs-identifier">MemView</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.ByteArray.html"><span class="hs-identifier">Data.ByteArray</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><span class="hs-comment">-- | Fill a given sized buffer with the result of the Packer action</span></span><span>
</span><span id="line-49"></span><span id="local-6989586621679082989"><span id="local-6989586621679082991"><span class="annot"><a href="Data.ByteArray.Pack.html#fill"><span class="hs-identifier hs-type">fill</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ByteArray.Types.html#ByteArray"><span class="hs-identifier hs-type">ByteArray</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082989"><span class="hs-identifier hs-type">byteArray</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082991"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679082989"><span class="hs-identifier hs-type">byteArray</span></a></span></span></span><span>
</span><span id="line-50"></span><span id="fill"><span class="annot"><span class="annottext">fill :: forall byteArray a.
ByteArray byteArray =&gt;
Int -&gt; Packer a -&gt; Either String byteArray
</span><a href="Data.ByteArray.Pack.html#fill"><span class="hs-identifier hs-var hs-var">fill</span></a></span></span><span> </span><span id="local-6989586621679083075"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083075"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621679083076"><span class="annot"><span class="annottext">Packer a
</span><a href="#local-6989586621679083076"><span class="hs-identifier hs-var">packing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (Either String byteArray) -&gt; Either String byteArray
forall a. IO a -&gt; a
</span><a href="Data.Memory.Internal.Compat.html#unsafeDoIO"><span class="hs-identifier hs-var">unsafeDoIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either String byteArray) -&gt; Either String byteArray)
-&gt; IO (Either String byteArray) -&gt; Either String byteArray
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679083078"><span class="annot"><span class="annottext">Result a
</span><a href="#local-6989586621679083078"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083079"><span class="annot"><span class="annottext">byteArray
</span><a href="#local-6989586621679083079"><span class="hs-identifier hs-var">out</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Ptr Word8 -&gt; IO (Result a)) -&gt; IO (Result a, byteArray)
forall ba p a. ByteArray ba =&gt; Int -&gt; (Ptr p -&gt; IO a) -&gt; IO (a, ba)
forall p a. Int -&gt; (Ptr p -&gt; IO a) -&gt; IO (a, byteArray)
</span><a href="Data.ByteArray.Types.html#allocRet"><span class="hs-identifier hs-var">B.allocRet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083075"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Word8 -&gt; IO (Result a)) -&gt; IO (Result a, byteArray))
-&gt; (Ptr Word8 -&gt; IO (Result a)) -&gt; IO (Result a, byteArray)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679083081"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083081"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Packer a -&gt; MemView -&gt; IO (Result a)
forall a. Packer a -&gt; MemView -&gt; IO (Result a)
</span><a href="Data.ByteArray.Pack.Internal.html#runPacker_"><span class="hs-identifier hs-var">runPacker_</span></a></span><span> </span><span class="annot"><span class="annottext">Packer a
</span><a href="#local-6989586621679083076"><span class="hs-identifier hs-var">packing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Int -&gt; MemView
</span><a href="Data.ByteArray.MemView.html#MemView"><span class="hs-identifier hs-var">MemView</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083081"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083075"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Result a
</span><a href="#local-6989586621679083078"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#PackerMore"><span class="hs-identifier hs-type">PackerMore</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteArray.MemView.html#MemView"><span class="hs-identifier hs-type">MemView</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679083085"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083085"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083085"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String byteArray -&gt; IO (Either String byteArray)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either String byteArray -&gt; IO (Either String byteArray))
-&gt; Either String byteArray -&gt; IO (Either String byteArray)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">byteArray -&gt; Either String byteArray
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">byteArray
</span><a href="#local-6989586621679083079"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-55"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String byteArray -&gt; IO (Either String byteArray)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either String byteArray -&gt; IO (Either String byteArray))
-&gt; Either String byteArray -&gt; IO (Either String byteArray)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String byteArray
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;remaining unpacked bytes &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083085"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; at the end of buffer&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#PackerFail"><span class="hs-identifier hs-type">PackerFail</span></a></span><span> </span><span id="local-6989586621679083088"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679083088"><span class="hs-identifier hs-var">err</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String byteArray -&gt; IO (Either String byteArray)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either String byteArray -&gt; IO (Either String byteArray))
-&gt; Either String byteArray -&gt; IO (Either String byteArray)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String byteArray
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679083088"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="annot"><span class="hs-comment">-- | Pack the given packer into the given bytestring</span></span><span>
</span><span id="line-59"></span><span id="local-6989586621679083012"><span id="local-6989586621679083013"><span class="annot"><a href="Data.ByteArray.Pack.html#pack"><span class="hs-identifier hs-type">pack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ByteArray.Types.html#ByteArray"><span class="hs-identifier hs-type">ByteArray</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083012"><span class="hs-identifier hs-type">byteArray</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083013"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679083012"><span class="hs-identifier hs-type">byteArray</span></a></span></span></span><span>
</span><span id="line-60"></span><span id="pack"><span class="annot"><span class="annottext">pack :: forall byteArray a.
ByteArray byteArray =&gt;
Packer a -&gt; Int -&gt; Either String byteArray
</span><a href="Data.ByteArray.Pack.html#pack"><span class="hs-identifier hs-var hs-var">pack</span></a></span></span><span> </span><span id="local-6989586621679083091"><span class="annot"><span class="annottext">Packer a
</span><a href="#local-6989586621679083091"><span class="hs-identifier hs-var">packing</span></a></span></span><span> </span><span id="local-6989586621679083092"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083092"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Packer a -&gt; Either String byteArray
forall byteArray a.
ByteArray byteArray =&gt;
Int -&gt; Packer a -&gt; Either String byteArray
</span><a href="Data.ByteArray.Pack.html#fill"><span class="hs-identifier hs-var">fill</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083092"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Packer a
</span><a href="#local-6989586621679083091"><span class="hs-identifier hs-var">packing</span></a></span><span>
</span><span id="line-61"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">pack</span><span> </span><span class="hs-pragma">&quot;use fill instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><a href="Data.ByteArray.Pack.html#fillUpWithWord8%27"><span class="hs-identifier hs-type">fillUpWithWord8'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span id="fillUpWithWord8%27"><span class="annot"><span class="annottext">fillUpWithWord8' :: Word8 -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#fillUpWithWord8%27"><span class="hs-identifier hs-var hs-var">fillUpWithWord8'</span></a></span></span><span> </span><span id="local-6989586621679083094"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679083094"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MemView -&gt; IO (Result ())) -&gt; Packer ()
forall a. (MemView -&gt; IO (Result a)) -&gt; Packer a
</span><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-var">Packer</span></a></span><span> </span><span class="annot"><span class="annottext">((MemView -&gt; IO (Result ())) -&gt; Packer ())
-&gt; (MemView -&gt; IO (Result ())) -&gt; Packer ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteArray.MemView.html#MemView"><span class="hs-identifier hs-type">MemView</span></a></span><span> </span><span id="local-6989586621679083096"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span id="local-6989586621679083097"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083097"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Word8 -&gt; Int -&gt; IO ()
</span><a href="Data.Memory.PtrMethods.html#memSet"><span class="hs-identifier hs-var">memSet</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679083094"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083097"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><span class="annottext">Result () -&gt; IO (Result ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Result () -&gt; IO (Result ())) -&gt; Result () -&gt; IO (Result ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; MemView -&gt; Result ()
forall a. a -&gt; MemView -&gt; Result a
</span><a href="Data.ByteArray.Pack.Internal.html#PackerMore"><span class="hs-identifier hs-var">PackerMore</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Int -&gt; MemView
</span><a href="Data.ByteArray.MemView.html#MemView"><span class="hs-identifier hs-var">MemView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span><span class="hs-operator hs-var">`plusPtr`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083097"><span class="hs-identifier hs-var">size</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="annot"><span class="hs-comment">-- | Put a storable from the current position in the stream</span></span><span>
</span><span id="line-69"></span><span id="local-6989586621679083020"><span class="annot"><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier hs-type">putStorable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Storable</span></span><span> </span><span class="annot"><a href="#local-6989586621679083020"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083020"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-70"></span><span id="putStorable"><span class="annot"><span class="annottext">putStorable :: forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier hs-var hs-var">putStorable</span></a></span></span><span> </span><span id="local-6989586621679083103"><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083103"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Ptr Word8 -&gt; IO ()) -&gt; Packer ()
forall a. Int -&gt; (Ptr Word8 -&gt; IO a) -&gt; Packer a
</span><a href="Data.ByteArray.Pack.Internal.html#actionPacker"><span class="hs-identifier hs-var">actionPacker</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">storable -&gt; Int
forall a. Storable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">sizeOf</span></span><span> </span><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083103"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083106"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083106"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr storable -&gt; storable -&gt; IO ()
forall a. Storable a =&gt; Ptr a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">poke</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Ptr storable
forall a b. Ptr a -&gt; Ptr b
</span><span class="hs-identifier hs-var">castPtr</span></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083106"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083103"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-comment">-- | Put a Byte Array from the current position in the stream</span><span>
</span><span id="line-73"></span><span class="hs-comment">--</span><span>
</span><span id="line-74"></span><span class="hs-comment">-- If the ByteArray is null, then do nothing</span><span>
</span><span id="line-75"></span><span id="local-6989586621679083026"><span class="annot"><a href="Data.ByteArray.Pack.html#putBytes"><span class="hs-identifier hs-type">putBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ByteArray.Types.html#ByteArrayAccess"><span class="hs-identifier hs-type">ByteArrayAccess</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083026"><span class="hs-identifier hs-type">ba</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083026"><span class="hs-identifier hs-type">ba</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-76"></span><span id="putBytes"><span class="annot"><span class="annottext">putBytes :: forall ba. ByteArrayAccess ba =&gt; ba -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putBytes"><span class="hs-identifier hs-var hs-var">putBytes</span></a></span></span><span> </span><span id="local-6989586621679083115"><span class="annot"><span class="annottext">ba
</span><a href="#local-6989586621679083115"><span class="hs-identifier hs-var">bs</span></a></span></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083116"><span class="hs-identifier hs-var">neededLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Packer ()
forall a. a -&gt; Packer a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>         </span><span class="hs-glyph">=</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="annottext">Int -&gt; (Ptr Word8 -&gt; IO ()) -&gt; Packer ()
forall a. Int -&gt; (Ptr Word8 -&gt; IO a) -&gt; Packer a
</span><a href="Data.ByteArray.Pack.Internal.html#actionPacker"><span class="hs-identifier hs-var">actionPacker</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083116"><span class="hs-identifier hs-var">neededLength</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Word8 -&gt; IO ()) -&gt; Packer ())
-&gt; (Ptr Word8 -&gt; IO ()) -&gt; Packer ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679083117"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083117"><span class="hs-identifier hs-var">dstPtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ba -&gt; (Ptr Word8 -&gt; IO ()) -&gt; IO ()
forall ba p a. ByteArrayAccess ba =&gt; ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a
forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a
</span><a href="Data.ByteArray.Types.html#withByteArray"><span class="hs-identifier hs-var">B.withByteArray</span></a></span><span> </span><span class="annot"><span class="annottext">ba
</span><a href="#local-6989586621679083115"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Word8 -&gt; IO ()) -&gt; IO ()) -&gt; (Ptr Word8 -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679083119"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var">srcPtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-80"></span><span>            </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Ptr Word8 -&gt; Int -&gt; IO ()
</span><a href="Data.Memory.PtrMethods.html#memCopy"><span class="hs-identifier hs-var">memCopy</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083117"><span class="hs-identifier hs-var">dstPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var">srcPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083116"><span class="hs-identifier hs-var">neededLength</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>    </span><span id="local-6989586621679083116"><span class="annot"><span class="annottext">neededLength :: Int
</span><a href="#local-6989586621679083116"><span class="hs-identifier hs-var hs-var">neededLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ba -&gt; Int
forall ba. ByteArrayAccess ba =&gt; ba -&gt; Int
</span><a href="Data.ByteArray.Types.html#length"><span class="hs-identifier hs-var">B.length</span></a></span><span> </span><span class="annot"><span class="annottext">ba
</span><a href="#local-6989586621679083115"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="annot"><span class="hs-comment">-- | Skip some bytes from the current position in the stream</span></span><span>
</span><span id="line-85"></span><span class="annot"><a href="Data.ByteArray.Pack.html#skip"><span class="hs-identifier hs-type">skip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span id="skip"><span class="annot"><span class="annottext">skip :: Int -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#skip"><span class="hs-identifier hs-var hs-var">skip</span></a></span></span><span> </span><span id="local-6989586621679083123"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083123"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Ptr Word8 -&gt; IO ()) -&gt; Packer ()
forall a. Int -&gt; (Ptr Word8 -&gt; IO a) -&gt; Packer a
</span><a href="Data.ByteArray.Pack.Internal.html#actionPacker"><span class="hs-identifier hs-var">actionPacker</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083123"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Ptr Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><span class="hs-comment">-- | Skip the size of a storable from the current position in the stream</span></span><span>
</span><span id="line-89"></span><span id="local-6989586621679083124"><span class="annot"><a href="Data.ByteArray.Pack.html#skipStorable"><span class="hs-identifier hs-type">skipStorable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Storable</span></span><span> </span><span class="annot"><a href="#local-6989586621679083124"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083124"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-90"></span><span id="skipStorable"><span class="annot"><span class="annottext">skipStorable :: forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#skipStorable"><span class="hs-identifier hs-var hs-var">skipStorable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#skip"><span class="hs-identifier hs-var">skip</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Packer ()) -&gt; (storable -&gt; Int) -&gt; storable -&gt; Packer ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">storable -&gt; Int
forall a. Storable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">sizeOf</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-comment">-- | Fill up from the current position in the stream to the end</span><span>
</span><span id="line-93"></span><span class="hs-comment">--</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- It is equivalent to:</span><span>
</span><span id="line-95"></span><span class="hs-comment">--</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- &gt; fillUpWith s == fillList (repeat s)</span><span>
</span><span id="line-97"></span><span class="hs-comment">--</span><span>
</span><span id="line-98"></span><span id="local-6989586621679083128"><span class="annot"><a href="Data.ByteArray.Pack.html#fillUpWith"><span class="hs-identifier hs-type">fillUpWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Storable</span></span><span> </span><span class="annot"><a href="#local-6989586621679083128"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083128"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-99"></span><span id="fillUpWith"><span class="annot"><span class="annottext">fillUpWith :: forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#fillUpWith"><span class="hs-identifier hs-var hs-var">fillUpWith</span></a></span></span><span> </span><span id="local-6989586621679083131"><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083131"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[storable] -&gt; Packer ()
forall storable. Storable storable =&gt; [storable] -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#fillList"><span class="hs-identifier hs-var">fillList</span></a></span><span> </span><span class="annot"><span class="annottext">([storable] -&gt; Packer ()) -&gt; [storable] -&gt; Packer ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">storable -&gt; [storable]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083131"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-100"></span><span class="hs-pragma">{-# RULES</span><span> </span><span class="annot"><span class="hs-pragma">&quot;fillUpWithWord8&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679083133"><span class="annot"><a href="#local-6989586621679083133"><span class="hs-pragma hs-var">s</span></a></span></span><span> </span><span class="hs-pragma">.</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#fillUpWith"><span class="hs-pragma hs-type">fillUpWith</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083133"><span class="hs-pragma hs-type">s</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#fillUpWithWord8%27"><span class="hs-pragma hs-type">fillUpWithWord8'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083133"><span class="hs-pragma hs-type">s</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-101"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#fillUpWith"><span class="hs-pragma hs-type">fillUpWith</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Will put the given storable list from the current position in the stream</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- to the end.</span><span>
</span><span id="line-105"></span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- This function will fail with not enough storage if the given storable can't</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- be written (not enough space)</span><span>
</span><span id="line-108"></span><span class="hs-comment">--</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- Example:</span><span>
</span><span id="line-110"></span><span class="hs-comment">--</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- &gt; &gt; pack (fillList $ [1..] :: Word8) 9</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- &gt; &quot;\1\2\3\4\5\6\7\8\9&quot;</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- &gt; &gt; pack (fillList $ [1..] :: Word32) 4</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- &gt; &quot;\1\0\0\0&quot;</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- &gt; &gt; pack (fillList $ [1..] :: Word32) 64</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- &gt; .. &lt;..succesful..&gt;</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- &gt; &gt; pack (fillList $ [1..] :: Word32) 1</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- &gt; .. &lt;.. not enough space ..&gt;</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- &gt; &gt; pack (fillList $ [1..] :: Word32) 131</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- &gt; .. &lt;.. not enough space ..&gt;</span><span>
</span><span id="line-121"></span><span class="hs-comment">--</span><span>
</span><span id="line-122"></span><span id="local-6989586621679083037"><span class="annot"><a href="Data.ByteArray.Pack.html#fillList"><span class="hs-identifier hs-type">fillList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Storable</span></span><span> </span><span class="annot"><a href="#local-6989586621679083037"><span class="hs-identifier hs-type">storable</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679083037"><span class="hs-identifier hs-type">storable</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-123"></span><span id="fillList"><span class="annot"><span class="annottext">fillList :: forall storable. Storable storable =&gt; [storable] -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#fillList"><span class="hs-identifier hs-var hs-var">fillList</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Packer ()
forall a. a -&gt; Packer a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span class="annot"><a href="Data.ByteArray.Pack.html#fillList"><span class="hs-identifier hs-var">fillList</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083139"><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083139"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679083140"><span class="annot"><span class="annottext">[storable]
</span><a href="#local-6989586621679083140"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">storable -&gt; Packer ()
forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier hs-var">putStorable</span></a></span><span> </span><span class="annot"><span class="annottext">storable
</span><a href="#local-6989586621679083139"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Packer () -&gt; Packer () -&gt; Packer ()
forall a b. Packer a -&gt; Packer b -&gt; Packer b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[storable] -&gt; Packer ()
forall storable. Storable storable =&gt; [storable] -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#fillList"><span class="hs-identifier hs-var">fillList</span></a></span><span> </span><span class="annot"><span class="annottext">[storable]
</span><a href="#local-6989586621679083140"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- Common packer                                                            --</span><span>
</span><span id="line-128"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="annot"><span class="hs-comment">-- | put Word8 in the current position in the stream</span></span><span>
</span><span id="line-131"></span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord8"><span class="hs-identifier hs-type">putWord8</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span id="putWord8"><span class="annot"><span class="annottext">putWord8 :: Word8 -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putWord8"><span class="hs-identifier hs-var hs-var">putWord8</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Packer ()
forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier hs-var">putStorable</span></a></span><span>
</span><span id="line-133"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord8"><span class="hs-pragma hs-type">putWord8</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | put Word16 in the current position in the stream</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- /!\ use Host Endianness</span><span>
</span><span id="line-137"></span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord16"><span class="hs-identifier hs-type">putWord16</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span id="putWord16"><span class="annot"><span class="annottext">putWord16 :: Word16 -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putWord16"><span class="hs-identifier hs-var hs-var">putWord16</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Packer ()
forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier hs-var">putStorable</span></a></span><span>
</span><span id="line-139"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord16"><span class="hs-pragma hs-type">putWord16</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | put Word32 in the current position in the stream</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- /!\ use Host Endianness</span><span>
</span><span id="line-143"></span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord32"><span class="hs-identifier hs-type">putWord32</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.Internal.html#Packer"><span class="hs-identifier hs-type">Packer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span id="putWord32"><span class="annot"><span class="annottext">putWord32 :: Word32 -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putWord32"><span class="hs-identifier hs-var hs-var">putWord32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Packer ()
forall storable. Storable storable =&gt; storable -&gt; Packer ()
</span><a href="Data.ByteArray.Pack.html#putStorable"><span class="hs-identifier hs-var">putStorable</span></a></span><span>
</span><span id="line-145"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.ByteArray.Pack.html#putWord32"><span class="hs-pragma hs-type">putWord32</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-146"></span></pre></body></html>