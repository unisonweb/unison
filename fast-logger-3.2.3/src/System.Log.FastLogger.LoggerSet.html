<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System.Log.FastLogger.LoggerSet</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-5"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Creating a logger set</span></span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier">LoggerSet</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSet"><span class="hs-identifier">newFileLoggerSet</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSetN"><span class="hs-identifier">newFileLoggerSetN</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSet"><span class="hs-identifier">newStdoutLoggerSet</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSetN"><span class="hs-identifier">newStdoutLoggerSetN</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStderrLoggerSet"><span class="hs-identifier">newStderrLoggerSet</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStderrLoggerSetN"><span class="hs-identifier">newStderrLoggerSetN</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newLoggerSet"><span class="hs-identifier">newLoggerSet</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier">newFDLoggerSet</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Renewing and removing a logger set</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#renewLoggerSet"><span class="hs-identifier">renewLoggerSet</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#rmLoggerSet"><span class="hs-identifier">rmLoggerSet</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Writing a log message</span></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#pushLogStr"><span class="hs-identifier">pushLogStr</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#pushLogStrLn"><span class="hs-identifier">pushLogStrLn</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Flushing buffered log messages</span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#flushLogStr"><span class="hs-identifier">flushLogStr</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Misc</span></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#replaceLoggerSet"><span class="hs-identifier">replaceLoggerSet</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getNumCapabilities</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Debounce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mkDebounce</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultDebounceSettings</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">debounceAction</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.FileIO.html"><span class="hs-identifier">System.Log.FastLogger.FileIO</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html"><span class="hs-identifier">System.Log.FastLogger.IO</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.Imports.html"><span class="hs-identifier">System.Log.FastLogger.Imports</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LogStr.html"><span class="hs-identifier">System.Log.FastLogger.LogStr</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.MultiLogger.html"><span class="hs-identifier">System.Log.FastLogger.MultiLogger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Log.FastLogger.MultiLogger.html#MultiLogger"><span class="hs-identifier">MultiLogger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="System.Log.FastLogger.MultiLogger.html"><span class="hs-identifier">System.Log.FastLogger.MultiLogger</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.SingleLogger.html"><span class="hs-identifier">System.Log.FastLogger.SingleLogger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Log.FastLogger.SingleLogger.html#SingleLogger"><span class="hs-identifier">SingleLogger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="System.Log.FastLogger.SingleLogger.html"><span class="hs-identifier">System.Log.FastLogger.SingleLogger</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="System.Log.FastLogger.Write.html"><span class="hs-identifier">System.Log.FastLogger.Write</span></a></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">data</span><span> </span><span id="Logger"><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#Logger"><span class="hs-identifier hs-var">Logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SL"><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#SL"><span class="hs-identifier hs-var">SL</span></a></span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.SingleLogger.html#SingleLogger"><span class="hs-identifier hs-type">SingleLogger</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ML"><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#ML"><span class="hs-identifier hs-var">ML</span></a></span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.MultiLogger.html#MultiLogger"><span class="hs-identifier hs-type">MultiLogger</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- | A set of loggers.</span><span>
</span><span id="line-47"></span><span class="hs-comment">--   The number of loggers is the capabilities of GHC RTS.</span><span>
</span><span id="line-48"></span><span class="hs-comment">--   You can specify it with \&quot;+RTS -N\&lt;x\&gt;\&quot;.</span><span>
</span><span id="line-49"></span><span class="hs-comment">--   A buffer is prepared for each capability.</span><span>
</span><span id="line-50"></span><span class="hs-keyword">data</span><span> </span><span id="LoggerSet"><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-var">LoggerSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoggerSet"><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-var">LoggerSet</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-51"></span><span>    </span><span id="lgrsetFilePath"><span class="annot"><span class="annottext">LoggerSet -&gt; Maybe FilePath
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-identifier hs-var hs-var">lgrsetFilePath</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="lgrsetFdRef"><span class="annot"><span class="annottext">LoggerSet -&gt; IORef FD
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFdRef"><span class="hs-identifier hs-var hs-var">lgrsetFdRef</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.FileIO.html#FD"><span class="hs-identifier hs-type">FD</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="lgrsetLogger"><span class="annot"><span class="annottext">LoggerSet -&gt; Logger
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetLogger"><span class="hs-identifier hs-var hs-var">lgrsetLogger</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="lgrsetDebounce"><span class="annot"><span class="annottext">LoggerSet -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetDebounce"><span class="hs-identifier hs-var hs-var">lgrsetDebounce</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | Creating a new 'LoggerSet' using a file.</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- Uses `numCapabilties` many buffers, which will result in log</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- output that is not ordered by time (see `newFileLoggerSetN`).</span><span>
</span><span id="line-61"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSet"><span class="hs-identifier hs-type">newFileLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-62"></span><span id="newFileLoggerSet"><span class="annot"><span class="annottext">newFileLoggerSet :: Int -&gt; FilePath -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSet"><span class="hs-identifier hs-var hs-var">newFileLoggerSet</span></a></span></span><span> </span><span id="local-6989586621679062227"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062227"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621679062228"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062228"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FD
</span><a href="System.Log.FastLogger.FileIO.html#openFileFD"><span class="hs-identifier hs-var">openFileFD</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062228"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">IO FD -&gt; (FD -&gt; IO LoggerSet) -&gt; IO LoggerSet
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var">newFDLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062227"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062228"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-comment">-- | Creating a new 'LoggerSet' using a file, using only the given number of capabilites.</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- Giving @mn = Just 1@ scales less well on multi-core machines,</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- but provides time-ordered output.</span><span>
</span><span id="line-68"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSetN"><span class="hs-identifier hs-type">newFileLoggerSetN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-69"></span><span id="newFileLoggerSetN"><span class="annot"><span class="annottext">newFileLoggerSetN :: Int -&gt; Maybe Int -&gt; FilePath -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSetN"><span class="hs-identifier hs-var hs-var">newFileLoggerSetN</span></a></span></span><span> </span><span id="local-6989586621679062230"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062230"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621679062231"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062231"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span id="local-6989586621679062232"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062232"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FD
</span><a href="System.Log.FastLogger.FileIO.html#openFileFD"><span class="hs-identifier hs-var">openFileFD</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062232"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">IO FD -&gt; (FD -&gt; IO LoggerSet) -&gt; IO LoggerSet
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var">newFDLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062230"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062231"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062232"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="annot"><span class="hs-comment">-- | Creating a new 'LoggerSet' using stdout.</span></span><span>
</span><span id="line-72"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSet"><span class="hs-identifier hs-type">newStdoutLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-73"></span><span id="newStdoutLoggerSet"><span class="annot"><span class="annottext">newStdoutLoggerSet :: Int -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSet"><span class="hs-identifier hs-var hs-var">newStdoutLoggerSet</span></a></span></span><span> </span><span id="local-6989586621679062233"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062233"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO FD
</span><a href="System.Log.FastLogger.FileIO.html#getStdoutFD"><span class="hs-identifier hs-var">getStdoutFD</span></a></span><span> </span><span class="annot"><span class="annottext">IO FD -&gt; (FD -&gt; IO LoggerSet) -&gt; IO LoggerSet
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var">newFDLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062233"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | Creating a new 'LoggerSet' using stdout, with the given number of buffers</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- (see `newFileLoggerSetN`).</span><span>
</span><span id="line-77"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSetN"><span class="hs-identifier hs-type">newStdoutLoggerSetN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-78"></span><span id="newStdoutLoggerSetN"><span class="annot"><span class="annottext">newStdoutLoggerSetN :: Int -&gt; Maybe Int -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSetN"><span class="hs-identifier hs-var hs-var">newStdoutLoggerSetN</span></a></span></span><span> </span><span id="local-6989586621679062235"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062235"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621679062236"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062236"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO FD
</span><a href="System.Log.FastLogger.FileIO.html#getStdoutFD"><span class="hs-identifier hs-var">getStdoutFD</span></a></span><span> </span><span class="annot"><span class="annottext">IO FD -&gt; (FD -&gt; IO LoggerSet) -&gt; IO LoggerSet
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var">newFDLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062235"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062236"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><span class="hs-comment">-- | Creating a new 'LoggerSet' using stderr.</span></span><span>
</span><span id="line-81"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStderrLoggerSet"><span class="hs-identifier hs-type">newStderrLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-82"></span><span id="newStderrLoggerSet"><span class="annot"><span class="annottext">newStderrLoggerSet :: Int -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newStderrLoggerSet"><span class="hs-identifier hs-var hs-var">newStderrLoggerSet</span></a></span></span><span> </span><span id="local-6989586621679062237"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062237"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO FD
</span><a href="System.Log.FastLogger.FileIO.html#getStderrFD"><span class="hs-identifier hs-var">getStderrFD</span></a></span><span> </span><span class="annot"><span class="annottext">IO FD -&gt; (FD -&gt; IO LoggerSet) -&gt; IO LoggerSet
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var">newFDLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062237"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | Creating a new 'LoggerSet' using stderr, with the given number of buffers</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- (see `newFileLoggerSetN`).</span><span>
</span><span id="line-86"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newStderrLoggerSetN"><span class="hs-identifier hs-type">newStderrLoggerSetN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-87"></span><span id="newStderrLoggerSetN"><span class="annot"><span class="annottext">newStderrLoggerSetN :: Int -&gt; Maybe Int -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newStderrLoggerSetN"><span class="hs-identifier hs-var hs-var">newStderrLoggerSetN</span></a></span></span><span> </span><span id="local-6989586621679062239"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062239"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621679062240"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062240"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO FD
</span><a href="System.Log.FastLogger.FileIO.html#getStderrFD"><span class="hs-identifier hs-var">getStderrFD</span></a></span><span> </span><span class="annot"><span class="annottext">IO FD -&gt; (FD -&gt; IO LoggerSet) -&gt; IO LoggerSet
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var">newFDLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062239"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062240"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newLoggerSet</span><span> </span><span class="hs-pragma">&quot;Use newFileLoggerSet etc instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- | Creating a new 'LoggerSet'.</span><span>
</span><span id="line-91"></span><span class="hs-comment">--   If 'Nothing' is specified to the second argument,</span><span>
</span><span id="line-92"></span><span class="hs-comment">--   stdout is used.</span><span>
</span><span id="line-93"></span><span class="hs-comment">--   Please note that the minimum 'BufSize' is 1.</span><span>
</span><span id="line-94"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newLoggerSet"><span class="hs-identifier hs-type">newLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-95"></span><span id="newLoggerSet"><span class="annot"><span class="annottext">newLoggerSet :: Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newLoggerSet"><span class="hs-identifier hs-var hs-var">newLoggerSet</span></a></span></span><span> </span><span id="local-6989586621679062241"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062241"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621679062242"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062242"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO LoggerSet
-&gt; (FilePath -&gt; IO LoggerSet) -&gt; Maybe FilePath -&gt; IO LoggerSet
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newStdoutLoggerSet"><span class="hs-identifier hs-var">newStdoutLoggerSet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062241"><span class="hs-identifier hs-var">size</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; FilePath -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFileLoggerSetN"><span class="hs-identifier hs-var">newFileLoggerSetN</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062241"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062242"><span class="hs-identifier hs-var">mn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="annot"><span class="hs-comment">-- | Creating a new 'LoggerSet' using a FD.</span></span><span>
</span><span id="line-98"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-type">newFDLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.IO.html#BufSize"><span class="hs-identifier hs-type">BufSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Log.FastLogger.FileIO.html#FD"><span class="hs-identifier hs-type">FD</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span>
</span><span id="line-99"></span><span id="newFDLoggerSet"><span class="annot"><span class="annottext">newFDLoggerSet :: Int -&gt; Maybe Int -&gt; Maybe FilePath -&gt; FD -&gt; IO LoggerSet
</span><a href="System.Log.FastLogger.LoggerSet.html#newFDLoggerSet"><span class="hs-identifier hs-var hs-var">newFDLoggerSet</span></a></span></span><span> </span><span id="local-6989586621679062244"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062244"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621679062245"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062245"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span id="local-6989586621679062246"><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679062246"><span class="hs-identifier hs-var">mfile</span></a></span></span><span> </span><span id="local-6989586621679062247"><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062247"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-100"></span><span>    </span><span id="local-6989586621679062248"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062248"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062245"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-101"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679062249"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062249"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO Int
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062249"><span class="hs-identifier hs-var">n'</span></a></span><span>
</span><span id="line-102"></span><span>      </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO Int
</span><span class="hs-identifier hs-var">getNumCapabilities</span></span><span>
</span><span id="line-103"></span><span>    </span><span id="local-6989586621679062250"><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062250"><span class="hs-identifier hs-var">fdref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FD -&gt; IO (IORef FD)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062247"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679062255"><span class="annot"><span class="annottext">bufsiz :: Int
</span><a href="#local-6989586621679062255"><span class="hs-identifier hs-var hs-var">bufsiz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062244"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span id="local-6989586621679062257"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679062257"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062248"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679062245"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Maybe Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-106"></span><span>                  </span><span class="annot"><span class="annottext">SingleLogger -&gt; Logger
</span><a href="System.Log.FastLogger.LoggerSet.html#SL"><span class="hs-identifier hs-var">SL</span></a></span><span> </span><span class="annot"><span class="annottext">(SingleLogger -&gt; Logger) -&gt; IO SingleLogger -&gt; IO Logger
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IORef FD -&gt; IO SingleLogger
</span><a href="System.Log.FastLogger.SingleLogger.html#newSingleLogger"><span class="hs-identifier hs-var">S.newSingleLogger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062255"><span class="hs-identifier hs-var">bufsiz</span></a></span><span> </span><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062250"><span class="hs-identifier hs-var">fdref</span></a></span><span>
</span><span id="line-107"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-108"></span><span>                  </span><span class="annot"><span class="annottext">MultiLogger -&gt; Logger
</span><a href="System.Log.FastLogger.LoggerSet.html#ML"><span class="hs-identifier hs-var">ML</span></a></span><span> </span><span class="annot"><span class="annottext">(MultiLogger -&gt; Logger) -&gt; IO MultiLogger -&gt; IO Logger
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; IORef FD -&gt; IO MultiLogger
</span><a href="System.Log.FastLogger.MultiLogger.html#newMultiLogger"><span class="hs-identifier hs-var">M.newMultiLogger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062248"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679062255"><span class="hs-identifier hs-var">bufsiz</span></a></span><span> </span><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062250"><span class="hs-identifier hs-var">fdref</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span id="local-6989586621679062262"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679062262"><span class="hs-identifier hs-var">flush</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DebounceSettings -&gt; IO (IO ())
</span><span class="hs-identifier hs-var">mkDebounce</span></span><span> </span><span class="annot"><span class="annottext">DebounceSettings
</span><span class="hs-identifier hs-var">defaultDebounceSettings</span></span><span>
</span><span id="line-110"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">debounceAction</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#flushLogStrRaw"><span class="hs-identifier hs-type">flushLogStrRaw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679062257"><span class="hs-identifier hs-type">logger</span></a></span><span>
</span><span id="line-111"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="annottext">LoggerSet -&gt; IO LoggerSet
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LoggerSet -&gt; IO LoggerSet) -&gt; LoggerSet -&gt; IO LoggerSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="annottext">lgrsetFilePath :: Maybe FilePath
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-identifier hs-var">lgrsetFilePath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679062246"><span class="hs-identifier hs-var">mfile</span></a></span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrsetFdRef :: IORef FD
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFdRef"><span class="hs-identifier hs-var">lgrsetFdRef</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062250"><span class="hs-identifier hs-var">fdref</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrsetLogger :: Logger
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetLogger"><span class="hs-identifier hs-var">lgrsetLogger</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679062257"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrsetDebounce :: IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetDebounce"><span class="hs-identifier hs-var">lgrsetDebounce</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679062262"><span class="hs-identifier hs-var">flush</span></a></span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-comment">-- | Writing a log message to the corresponding buffer.</span><span>
</span><span id="line-120"></span><span class="hs-comment">--   If the buffer becomes full, the log messages in the buffer</span><span>
</span><span id="line-121"></span><span class="hs-comment">--   are written to its corresponding file, stdout, or stderr.</span><span>
</span><span id="line-122"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#pushLogStr"><span class="hs-identifier hs-type">pushLogStr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LogStr.html#LogStr"><span class="hs-identifier hs-type">LogStr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span id="pushLogStr"><span class="annot"><span class="annottext">pushLogStr :: LoggerSet -&gt; LogStr -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#pushLogStr"><span class="hs-identifier hs-var hs-var">pushLogStr</span></a></span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span class="hs-special">{</span><span id="local-6989586621679062264"><span id="local-6989586621679062265"><span id="local-6989586621679062266"><span id="local-6989586621679062267"><span class="annot"><span class="annottext">Maybe FilePath
IO ()
IORef FD
Logger
lgrsetFilePath :: LoggerSet -&gt; Maybe FilePath
lgrsetFdRef :: LoggerSet -&gt; IORef FD
lgrsetLogger :: LoggerSet -&gt; Logger
lgrsetDebounce :: LoggerSet -&gt; IO ()
lgrsetFilePath :: Maybe FilePath
lgrsetFdRef :: IORef FD
lgrsetLogger :: Logger
lgrsetDebounce :: IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679062268"><span class="annot"><span class="annottext">LogStr
</span><a href="#local-6989586621679062268"><span class="hs-identifier hs-var">logmsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679062266"><span class="hs-identifier hs-var">lgrsetLogger</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span id="local-6989586621679062269"><span class="annot"><span class="annottext">SingleLogger
</span><a href="#local-6989586621679062269"><span class="hs-identifier hs-var">sl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="annottext">SingleLogger -&gt; LogStr -&gt; IO ()
forall a. Loggers a =&gt; a -&gt; LogStr -&gt; IO ()
</span><a href="System.Log.FastLogger.Write.html#pushLog"><span class="hs-identifier hs-var">pushLog</span></a></span><span> </span><span class="annot"><span class="annottext">SingleLogger
</span><a href="#local-6989586621679062269"><span class="hs-identifier hs-var">sl</span></a></span><span> </span><span class="annot"><span class="annottext">LogStr
</span><a href="#local-6989586621679062268"><span class="hs-identifier hs-var">logmsg</span></a></span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679062267"><span class="hs-identifier hs-var">lgrsetDebounce</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#ML"><span class="hs-identifier hs-type">ML</span></a></span><span> </span><span id="local-6989586621679062271"><span class="annot"><span class="annottext">MultiLogger
</span><a href="#local-6989586621679062271"><span class="hs-identifier hs-var">ml</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><span class="annottext">MultiLogger -&gt; LogStr -&gt; IO ()
forall a. Loggers a =&gt; a -&gt; LogStr -&gt; IO ()
</span><a href="System.Log.FastLogger.Write.html#pushLog"><span class="hs-identifier hs-var">pushLog</span></a></span><span> </span><span class="annot"><span class="annottext">MultiLogger
</span><a href="#local-6989586621679062271"><span class="hs-identifier hs-var">ml</span></a></span><span> </span><span class="annot"><span class="annottext">LogStr
</span><a href="#local-6989586621679062268"><span class="hs-identifier hs-var">logmsg</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679062267"><span class="hs-identifier hs-var">lgrsetDebounce</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><span class="hs-comment">-- | Same as 'pushLogStr' but also appends a newline.</span></span><span>
</span><span id="line-132"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#pushLogStrLn"><span class="hs-identifier hs-type">pushLogStrLn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LogStr.html#LogStr"><span class="hs-identifier hs-type">LogStr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span id="pushLogStrLn"><span class="annot"><span class="annottext">pushLogStrLn :: LoggerSet -&gt; LogStr -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#pushLogStrLn"><span class="hs-identifier hs-var hs-var">pushLogStrLn</span></a></span></span><span> </span><span id="local-6989586621679062272"><span class="annot"><span class="annottext">LoggerSet
</span><a href="#local-6989586621679062272"><span class="hs-identifier hs-var">loggerSet</span></a></span></span><span> </span><span id="local-6989586621679062273"><span class="annot"><span class="annottext">LogStr
</span><a href="#local-6989586621679062273"><span class="hs-identifier hs-var">logStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LoggerSet -&gt; LogStr -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#pushLogStr"><span class="hs-identifier hs-var">pushLogStr</span></a></span><span> </span><span class="annot"><span class="annottext">LoggerSet
</span><a href="#local-6989586621679062272"><span class="hs-identifier hs-var">loggerSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogStr
</span><a href="#local-6989586621679062273"><span class="hs-identifier hs-var">logStr</span></a></span><span> </span><span class="annot"><span class="annottext">LogStr -&gt; LogStr -&gt; LogStr
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">LogStr
</span><span class="hs-string">&quot;\n&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | Flushing log messages in buffers.</span><span>
</span><span id="line-136"></span><span class="hs-comment">--   This function must be called explicitly when the program is</span><span>
</span><span id="line-137"></span><span class="hs-comment">--   being terminated.</span><span>
</span><span id="line-138"></span><span class="hs-comment">--</span><span>
</span><span id="line-139"></span><span class="hs-comment">--   Note: Since version 2.1.6, this function does not need to be</span><span>
</span><span id="line-140"></span><span class="hs-comment">--   explicitly called, as every push includes an auto-debounced flush</span><span>
</span><span id="line-141"></span><span class="hs-comment">--   courtesy of the auto-update package. Since version 2.2.2, this</span><span>
</span><span id="line-142"></span><span class="hs-comment">--   function can be used to force flushing outside of the debounced</span><span>
</span><span id="line-143"></span><span class="hs-comment">--   flush calls.</span><span>
</span><span id="line-144"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#flushLogStr"><span class="hs-identifier hs-type">flushLogStr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span id="flushLogStr"><span class="annot"><span class="annottext">flushLogStr :: LoggerSet -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#flushLogStr"><span class="hs-identifier hs-var hs-var">flushLogStr</span></a></span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span class="hs-special">{</span><span id="local-6989586621679062274"><span id="local-6989586621679062275"><span id="local-6989586621679062276"><span id="local-6989586621679062277"><span class="annot"><span class="annottext">Maybe FilePath
IO ()
IORef FD
Logger
lgrsetFilePath :: LoggerSet -&gt; Maybe FilePath
lgrsetFdRef :: LoggerSet -&gt; IORef FD
lgrsetLogger :: LoggerSet -&gt; Logger
lgrsetDebounce :: LoggerSet -&gt; IO ()
lgrsetFilePath :: Maybe FilePath
lgrsetFdRef :: IORef FD
lgrsetLogger :: Logger
lgrsetDebounce :: IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#flushLogStrRaw"><span class="hs-identifier hs-var">flushLogStrRaw</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679062276"><span class="hs-identifier hs-var">lgrsetLogger</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#flushLogStrRaw"><span class="hs-identifier hs-type">flushLogStrRaw</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span id="flushLogStrRaw"><span class="annot"><span class="annottext">flushLogStrRaw :: Logger -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#flushLogStrRaw"><span class="hs-identifier hs-var hs-var">flushLogStrRaw</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span id="local-6989586621679062278"><span class="annot"><span class="annottext">SingleLogger
</span><a href="#local-6989586621679062278"><span class="hs-identifier hs-var">sl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SingleLogger -&gt; IO ()
forall a. Loggers a =&gt; a -&gt; IO ()
</span><a href="System.Log.FastLogger.Write.html#flushAllLog"><span class="hs-identifier hs-var">flushAllLog</span></a></span><span> </span><span class="annot"><span class="annottext">SingleLogger
</span><a href="#local-6989586621679062278"><span class="hs-identifier hs-var">sl</span></a></span><span>
</span><span id="line-149"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#flushLogStrRaw"><span class="hs-identifier hs-var">flushLogStrRaw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#ML"><span class="hs-identifier hs-type">ML</span></a></span><span> </span><span id="local-6989586621679062280"><span class="annot"><span class="annottext">MultiLogger
</span><a href="#local-6989586621679062280"><span class="hs-identifier hs-var">ml</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MultiLogger -&gt; IO ()
forall a. Loggers a =&gt; a -&gt; IO ()
</span><a href="System.Log.FastLogger.Write.html#flushAllLog"><span class="hs-identifier hs-var">flushAllLog</span></a></span><span> </span><span class="annot"><span class="annottext">MultiLogger
</span><a href="#local-6989586621679062280"><span class="hs-identifier hs-var">ml</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- | Renewing the internal file information in 'LoggerSet'.</span><span>
</span><span id="line-152"></span><span class="hs-comment">--   This does nothing for stdout and stderr.</span><span>
</span><span id="line-153"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#renewLoggerSet"><span class="hs-identifier hs-type">renewLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span id="renewLoggerSet"><span class="annot"><span class="annottext">renewLoggerSet :: LoggerSet -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#renewLoggerSet"><span class="hs-identifier hs-var hs-var">renewLoggerSet</span></a></span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span class="hs-special">{</span><span id="local-6989586621679062281"><span id="local-6989586621679062282"><span id="local-6989586621679062283"><span id="local-6989586621679062284"><span class="annot"><span class="annottext">Maybe FilePath
IO ()
IORef FD
Logger
lgrsetFilePath :: LoggerSet -&gt; Maybe FilePath
lgrsetFdRef :: LoggerSet -&gt; IORef FD
lgrsetLogger :: LoggerSet -&gt; Logger
lgrsetDebounce :: LoggerSet -&gt; IO ()
lgrsetFilePath :: Maybe FilePath
lgrsetFdRef :: IORef FD
lgrsetLogger :: Logger
lgrsetDebounce :: IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679062281"><span class="hs-identifier hs-var">lgrsetFilePath</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="annottext">Maybe FilePath
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679062285"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062285"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-157"></span><span>      </span><span id="local-6989586621679062286"><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062286"><span class="hs-identifier hs-var">newfd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FD
</span><a href="System.Log.FastLogger.FileIO.html#openFileFD"><span class="hs-identifier hs-var">openFileFD</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062285"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-158"></span><span>      </span><span id="local-6989586621679062287"><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062287"><span class="hs-identifier hs-var">oldfd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef FD -&gt; (FD -&gt; (FD, FD)) -&gt; IO FD
forall a b. IORef a -&gt; (a -&gt; (a, b)) -&gt; IO b
</span><span class="hs-identifier hs-var">atomicModifyIORef'</span></span><span> </span><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062282"><span class="hs-identifier hs-var">lgrsetFdRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679062289"><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062289"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062286"><span class="hs-identifier hs-var">newfd</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062289"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>      </span><span class="annot"><span class="annottext">FD -&gt; IO ()
</span><a href="System.Log.FastLogger.FileIO.html#closeFD"><span class="hs-identifier hs-var">closeFD</span></a></span><span> </span><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062287"><span class="hs-identifier hs-var">oldfd</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- | Flushing the buffers, closing the internal file information</span><span>
</span><span id="line-162"></span><span class="hs-comment">--   and freeing the buffers.</span><span>
</span><span id="line-163"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#rmLoggerSet"><span class="hs-identifier hs-type">rmLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span id="rmLoggerSet"><span class="annot"><span class="annottext">rmLoggerSet :: LoggerSet -&gt; IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#rmLoggerSet"><span class="hs-identifier hs-var hs-var">rmLoggerSet</span></a></span></span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span class="hs-special">{</span><span id="local-6989586621679062291"><span id="local-6989586621679062292"><span id="local-6989586621679062293"><span id="local-6989586621679062294"><span class="annot"><span class="annottext">Maybe FilePath
IO ()
IORef FD
Logger
lgrsetFilePath :: LoggerSet -&gt; Maybe FilePath
lgrsetFdRef :: LoggerSet -&gt; IORef FD
lgrsetLogger :: LoggerSet -&gt; Logger
lgrsetDebounce :: LoggerSet -&gt; IO ()
lgrsetFilePath :: Maybe FilePath
lgrsetFdRef :: IORef FD
lgrsetLogger :: Logger
lgrsetDebounce :: IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621679062295"><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062295"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef FD -&gt; IO FD
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062292"><span class="hs-identifier hs-var">lgrsetFdRef</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FD -&gt; Bool
</span><a href="System.Log.FastLogger.FileIO.html#isFDValid"><span class="hs-identifier hs-var">isFDValid</span></a></span><span> </span><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062295"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679062293"><span class="hs-identifier hs-var">lgrsetLogger</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-168"></span><span>          </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span id="local-6989586621679062299"><span class="annot"><span class="annottext">SingleLogger
</span><a href="#local-6989586621679062299"><span class="hs-identifier hs-var">sl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SingleLogger -&gt; IO ()
forall a. Loggers a =&gt; a -&gt; IO ()
</span><a href="System.Log.FastLogger.Write.html#stopLoggers"><span class="hs-identifier hs-var">stopLoggers</span></a></span><span> </span><span class="annot"><span class="annottext">SingleLogger
</span><a href="#local-6989586621679062299"><span class="hs-identifier hs-var">sl</span></a></span><span>
</span><span id="line-169"></span><span>          </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#ML"><span class="hs-identifier hs-type">ML</span></a></span><span> </span><span id="local-6989586621679062301"><span class="annot"><span class="annottext">MultiLogger
</span><a href="#local-6989586621679062301"><span class="hs-identifier hs-var">ml</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MultiLogger -&gt; IO ()
forall a. Loggers a =&gt; a -&gt; IO ()
</span><a href="System.Log.FastLogger.Write.html#stopLoggers"><span class="hs-identifier hs-var">stopLoggers</span></a></span><span> </span><span class="annot"><span class="annottext">MultiLogger
</span><a href="#local-6989586621679062301"><span class="hs-identifier hs-var">ml</span></a></span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe FilePath -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679062291"><span class="hs-identifier hs-var">lgrsetFilePath</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FD -&gt; IO ()
</span><a href="System.Log.FastLogger.FileIO.html#closeFD"><span class="hs-identifier hs-var">closeFD</span></a></span><span> </span><span class="annot"><span class="annottext">FD
</span><a href="#local-6989586621679062295"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="annottext">IORef FD -&gt; FD -&gt; IO ()
forall a. IORef a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">writeIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef FD
</span><a href="#local-6989586621679062292"><span class="hs-identifier hs-var">lgrsetFdRef</span></a></span><span> </span><span class="annot"><span class="annottext">FD
</span><a href="System.Log.FastLogger.FileIO.html#invalidFD"><span class="hs-identifier hs-var">invalidFD</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- | Replacing the file path in 'LoggerSet' and returning a new</span><span>
</span><span id="line-174"></span><span class="hs-comment">--   'LoggerSet' and the old file path.</span><span>
</span><span id="line-175"></span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#replaceLoggerSet"><span class="hs-identifier hs-type">replaceLoggerSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span id="replaceLoggerSet"><span class="annot"><span class="annottext">replaceLoggerSet :: LoggerSet -&gt; FilePath -&gt; (LoggerSet, Maybe FilePath)
</span><a href="System.Log.FastLogger.LoggerSet.html#replaceLoggerSet"><span class="hs-identifier hs-var hs-var">replaceLoggerSet</span></a></span></span><span> </span><span id="local-6989586621679062305"><span class="annot"><span class="annottext">lgrset :: LoggerSet
</span><a href="#local-6989586621679062305"><span class="hs-identifier hs-var">lgrset</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#LoggerSet"><span class="hs-identifier hs-type">LoggerSet</span></a></span><span class="hs-special">{</span><span id="local-6989586621679062306"><span id="local-6989586621679062307"><span id="local-6989586621679062308"><span id="local-6989586621679062309"><span class="annot"><span class="annottext">Maybe FilePath
IO ()
IORef FD
Logger
lgrsetFilePath :: LoggerSet -&gt; Maybe FilePath
lgrsetFdRef :: LoggerSet -&gt; IORef FD
lgrsetLogger :: LoggerSet -&gt; Logger
lgrsetDebounce :: LoggerSet -&gt; IO ()
lgrsetFilePath :: Maybe FilePath
lgrsetFdRef :: IORef FD
lgrsetLogger :: Logger
lgrsetDebounce :: IO ()
</span><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679062310"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679062310"><span class="hs-identifier hs-var">new_file_path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoggerSet
</span><a href="#local-6989586621679062305"><span class="hs-identifier hs-var">lgrset</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="System.Log.FastLogger.LoggerSet.html#lgrsetFilePath"><span class="hs-identifier hs-var">lgrsetFilePath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679062310"><span class="hs-identifier hs-type">new_file_path</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679062306"><span class="hs-identifier hs-var">lgrsetFilePath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span></pre></body></html>