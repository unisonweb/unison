<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE OverloadedStrings, ScopedTypeVariables, ViewPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ImpredicativeTypes, CPP #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE MagicHash, UnboxedTuples #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Network.Wai.Handler.Warp.Settings</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unsafeUnmask</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Prim</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fork#</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">UnliftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromException</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C8</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Builder</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Streaming.Network</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HostPreference</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.IO</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TIO</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Version</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">showVersion</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.IO.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IOErrorType</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">AsyncException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ThreadKilled</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.Socket</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Socket</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SockAddr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">accept</span></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.Wai</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Paths_warp.html"><span class="hs-identifier">Paths_warp</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">stderr</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO.Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ioeGetErrorType</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.TimeManager</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Imports.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Imports</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Types</span></a></span><span class="hs-cpp">
#if WINDOWS
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Network.Wai.Handler.Warp.Windows</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">windowsThreadBlockHack</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- | Various Warp server settings. This is purposely kept as an abstract data</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- type so that new settings can be added without breaking backwards</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- compatibility. In order to create a 'Settings' value, use 'defaultSettings'</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- and the various \'set\' functions to modify individual fields. For example:</span><span>
</span><span id="line-36"></span><span class="hs-comment">--</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- &gt; setTimeout 20 defaultSettings</span><span>
</span><span id="line-38"></span><span class="hs-keyword">data</span><span> </span><span id="Settings"><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-var">Settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Settings"><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-var">Settings</span></a></span></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="settingsPort"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsPort"><span class="hs-identifier hs-var hs-var">settingsPort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Port to listen on. Default value: 3000</span></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsHost"><span class="annot"><span class="annottext">Settings -&gt; HostPreference
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsHost"><span class="hs-identifier hs-var hs-var">settingsHost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HostPreference</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Default value: HostIPv4</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsOnException"><span class="annot"><span class="annottext">Settings -&gt; Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnException"><span class="hs-identifier hs-var hs-var">settingsOnException</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ What to do with exceptions thrown by either the application or server. Default: ignore server-generated exceptions (see 'InvalidRequest') and print application-generated applications to stderr.</span></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsOnExceptionResponse"><span class="annot"><span class="annottext">Settings -&gt; SomeException -&gt; Response
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnExceptionResponse"><span class="hs-identifier hs-var hs-var">settingsOnExceptionResponse</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span>
</span><span id="line-43"></span><span>      </span><span class="hs-comment">-- ^ A function to create `Response` when an exception occurs.</span><span>
</span><span id="line-44"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-45"></span><span>      </span><span class="hs-comment">-- Default: 500, text/plain, \&quot;Something went wrong\&quot;</span><span>
</span><span id="line-46"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-47"></span><span>      </span><span class="hs-comment">-- Since 2.0.3</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsOnOpen"><span class="annot"><span class="annottext">Settings -&gt; SockAddr -&gt; IO Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnOpen"><span class="hs-identifier hs-var hs-var">settingsOnOpen</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ What to do when a connection is open. When 'False' is returned, the connection is closed immediately. Otherwise, the connection is going on. Default: always returns 'True'.</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsOnClose"><span class="annot"><span class="annottext">Settings -&gt; SockAddr -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnClose"><span class="hs-identifier hs-var hs-var">settingsOnClose</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ What to do when a connection is close. Default: do nothing.</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsTimeout"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsTimeout"><span class="hs-identifier hs-var hs-var">settingsTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Timeout value in seconds. Default value: 30</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsManager"><span class="annot"><span class="annottext">Settings -&gt; Maybe Manager
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsManager"><span class="hs-identifier hs-var hs-var">settingsManager</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Manager</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Use an existing timeout manager instead of spawning a new one. If used, 'settingsTimeout' is ignored. Default is 'Nothing'</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsFdCacheDuration"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsFdCacheDuration"><span class="hs-identifier hs-var hs-var">settingsFdCacheDuration</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Cache duration time of file descriptors in seconds. 0 means that the cache mechanism is not used. Default value: 0</span></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsFileInfoCacheDuration"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsFileInfoCacheDuration"><span class="hs-identifier hs-var hs-var">settingsFileInfoCacheDuration</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Cache duration time of file information in seconds. 0 means that the cache mechanism is not used. Default value: 0</span></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsBeforeMainLoop"><span class="annot"><span class="annottext">Settings -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsBeforeMainLoop"><span class="hs-identifier hs-var hs-var">settingsBeforeMainLoop</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>      </span><span class="hs-comment">-- ^ Code to run after the listening socket is ready but before entering</span><span>
</span><span id="line-56"></span><span>      </span><span class="hs-comment">-- the main event loop. Useful for signaling to tests that they can start</span><span>
</span><span id="line-57"></span><span>      </span><span class="hs-comment">-- running, or to drop permissions after binding to a restricted port.</span><span>
</span><span id="line-58"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span>      </span><span class="hs-comment">-- Default: do nothing.</span><span>
</span><span id="line-60"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-61"></span><span>      </span><span class="hs-comment">-- Since 1.3.6</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsFork"><span class="annot"><span class="annottext">Settings -&gt; ((forall a. IO a -&gt; IO a) -&gt; IO ()) -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsFork"><span class="hs-identifier hs-var hs-var">settingsFork</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679110118"><span class="annot"><a href="#local-6989586621679110118"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679110118"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679110118"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>      </span><span class="hs-comment">-- ^ Code to fork a new thread to accept a connection.</span><span>
</span><span id="line-65"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span>      </span><span class="hs-comment">-- This may be useful if you need OS bound threads, or if</span><span>
</span><span id="line-67"></span><span>      </span><span class="hs-comment">-- you wish to develop an alternative threading model.</span><span>
</span><span id="line-68"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-69"></span><span>      </span><span class="hs-comment">-- Default: 'defaultFork'</span><span>
</span><span id="line-70"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-71"></span><span>      </span><span class="hs-comment">-- Since 3.0.4</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsAccept"><span class="annot"><span class="annottext">Settings -&gt; Socket -&gt; IO (Socket, SockAddr)
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsAccept"><span class="hs-identifier hs-var hs-var">settingsAccept</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Socket</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Socket</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-comment">-- ^ Code to accept a new connection.</span><span>
</span><span id="line-75"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-76"></span><span>      </span><span class="hs-comment">-- Useful if you need to provide connected sockets from something other</span><span>
</span><span id="line-77"></span><span>      </span><span class="hs-comment">-- than a standard accept call.</span><span>
</span><span id="line-78"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-79"></span><span>      </span><span class="hs-comment">-- Default: 'defaultAccept'</span><span>
</span><span id="line-80"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-comment">-- Since 3.3.24</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsNoParsePath"><span class="annot"><span class="annottext">Settings -&gt; Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsNoParsePath"><span class="hs-identifier hs-var hs-var">settingsNoParsePath</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-84"></span><span>      </span><span class="hs-comment">-- ^ Perform no parsing on the rawPathInfo.</span><span>
</span><span id="line-85"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-comment">-- This is useful for writing HTTP proxies.</span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-88"></span><span>      </span><span class="hs-comment">-- Default: False</span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-comment">-- Since 2.0.3</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsInstallShutdownHandler"><span class="annot"><span class="annottext">Settings -&gt; IO () -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsInstallShutdownHandler"><span class="hs-identifier hs-var hs-var">settingsInstallShutdownHandler</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-comment">-- ^ An action to install a handler (e.g. Unix signal handler)</span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-comment">-- to close a listen socket.</span><span>
</span><span id="line-94"></span><span>      </span><span class="hs-comment">-- The first argument is an action to close the listen socket.</span><span>
</span><span id="line-95"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-96"></span><span>      </span><span class="hs-comment">-- Default: no action</span><span>
</span><span id="line-97"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-98"></span><span>      </span><span class="hs-comment">-- Since 3.0.1</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsServerName"><span class="annot"><span class="annottext">Settings -&gt; ByteString
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsServerName"><span class="hs-identifier hs-var hs-var">settingsServerName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-100"></span><span>      </span><span class="hs-comment">-- ^ Default server name if application does not set one.</span><span>
</span><span id="line-101"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-102"></span><span>      </span><span class="hs-comment">-- Since 3.0.2</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsMaximumBodyFlush"><span class="annot"><span class="annottext">Settings -&gt; Maybe Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaximumBodyFlush"><span class="hs-identifier hs-var hs-var">settingsMaximumBodyFlush</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-104"></span><span>      </span><span class="hs-comment">-- ^ See @setMaximumBodyFlush@.</span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span>      </span><span class="hs-comment">-- Since 3.0.3</span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsProxyProtocol"><span class="annot"><span class="annottext">Settings -&gt; ProxyProtocol
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsProxyProtocol"><span class="hs-identifier hs-var hs-var">settingsProxyProtocol</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocol"><span class="hs-identifier hs-type">ProxyProtocol</span></a></span><span>
</span><span id="line-108"></span><span>      </span><span class="hs-comment">-- ^ Specify usage of the PROXY protocol.</span><span>
</span><span id="line-109"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-110"></span><span>      </span><span class="hs-comment">-- Since 3.0.5</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsSlowlorisSize"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsSlowlorisSize"><span class="hs-identifier hs-var hs-var">settingsSlowlorisSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-112"></span><span>      </span><span class="hs-comment">-- ^ Size of bytes read to prevent Slowloris protection. Default value: 2048</span><span>
</span><span id="line-113"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-comment">-- Since 3.1.2</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsHTTP2Enabled"><span class="annot"><span class="annottext">Settings -&gt; Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsHTTP2Enabled"><span class="hs-identifier hs-var hs-var">settingsHTTP2Enabled</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-comment">-- ^ Whether to enable HTTP2 ALPN/upgrades. Default: True</span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-118"></span><span>      </span><span class="hs-comment">-- Since 3.1.7</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsLogger"><span class="annot"><span class="annottext">Settings -&gt; Request -&gt; Status -&gt; Maybe Integer -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsLogger"><span class="hs-identifier hs-var hs-var">settingsLogger</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.Status</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>      </span><span class="hs-comment">-- ^ A log function. Default: no action.</span><span>
</span><span id="line-121"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-122"></span><span>      </span><span class="hs-comment">-- Since 3.1.10</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsServerPushLogger"><span class="annot"><span class="annottext">Settings -&gt; Request -&gt; ByteString -&gt; Integer -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsServerPushLogger"><span class="hs-identifier hs-var hs-var">settingsServerPushLogger</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>      </span><span class="hs-comment">-- ^ A HTTP/2 server push log function. Default: no action.</span><span>
</span><span id="line-125"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span>      </span><span class="hs-comment">-- Since 3.2.7</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsGracefulShutdownTimeout"><span class="annot"><span class="annottext">Settings -&gt; Maybe Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulShutdownTimeout"><span class="hs-identifier hs-var hs-var">settingsGracefulShutdownTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-128"></span><span>      </span><span class="hs-comment">-- ^ An optional timeout to limit the time (in seconds) waiting for</span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-comment">-- a graceful shutdown of the web server.</span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-131"></span><span>      </span><span class="hs-comment">-- Since 3.2.8</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsGracefulCloseTimeout1"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout1"><span class="hs-identifier hs-var hs-var">settingsGracefulCloseTimeout1</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-133"></span><span>      </span><span class="hs-comment">-- ^ A timeout to limit the time (in milliseconds) waiting for</span><span>
</span><span id="line-134"></span><span>      </span><span class="hs-comment">-- FIN for HTTP/1.x. 0 means uses immediate close.</span><span>
</span><span id="line-135"></span><span>      </span><span class="hs-comment">-- Default: 0.</span><span>
</span><span id="line-136"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsGracefulCloseTimeout2"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout2"><span class="hs-identifier hs-var hs-var">settingsGracefulCloseTimeout2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-139"></span><span>      </span><span class="hs-comment">-- ^ A timeout to limit the time (in milliseconds) waiting for</span><span>
</span><span id="line-140"></span><span>      </span><span class="hs-comment">-- FIN for HTTP/2. 0 means uses immediate close.</span><span>
</span><span id="line-141"></span><span>      </span><span class="hs-comment">-- Default: 2000.</span><span>
</span><span id="line-142"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-143"></span><span>      </span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsMaxTotalHeaderLength"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaxTotalHeaderLength"><span class="hs-identifier hs-var hs-var">settingsMaxTotalHeaderLength</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-145"></span><span>      </span><span class="hs-comment">-- ^ Determines the maximum header size that Warp will tolerate when using HTTP/1.x.</span><span>
</span><span id="line-146"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-comment">-- Since 3.3.8</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsAltSvc"><span class="annot"><span class="annottext">Settings -&gt; Maybe ByteString
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsAltSvc"><span class="hs-identifier hs-var hs-var">settingsAltSvc</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-149"></span><span>      </span><span class="hs-comment">-- ^ Specify the header value of Alternative Services (AltSvc:).</span><span>
</span><span id="line-150"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span>      </span><span class="hs-comment">-- Default: Nothing</span><span>
</span><span id="line-152"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-153"></span><span>      </span><span class="hs-comment">-- Since 3.3.11</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="settingsMaxBuilderResponseBufferSize"><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaxBuilderResponseBufferSize"><span class="hs-identifier hs-var hs-var">settingsMaxBuilderResponseBufferSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-155"></span><span>      </span><span class="hs-comment">-- ^ Determines the maxium buffer size when sending `Builder` responses</span><span>
</span><span id="line-156"></span><span>      </span><span class="hs-comment">-- (See `responseBuilder`).</span><span>
</span><span id="line-157"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-158"></span><span>      </span><span class="hs-comment">-- When sending a builder response warp uses a 16 KiB buffer to write the</span><span>
</span><span id="line-159"></span><span>      </span><span class="hs-comment">-- builder to. When that buffer is too small to fit the builder warp will</span><span>
</span><span id="line-160"></span><span>      </span><span class="hs-comment">-- free it and create a new one that will fit the builder.</span><span>
</span><span id="line-161"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span>      </span><span class="hs-comment">-- To protect against allocating too large a buffer warp will error if the</span><span>
</span><span id="line-163"></span><span>      </span><span class="hs-comment">-- builder requires more than this maximum.</span><span>
</span><span id="line-164"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-165"></span><span>      </span><span class="hs-comment">-- Default: 1049_000_000 = 1 MiB.</span><span>
</span><span id="line-166"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-167"></span><span>      </span><span class="hs-comment">-- Since 3.3.22</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="annot"><span class="hs-comment">-- | Specify usage of the PROXY protocol.</span></span><span>
</span><span id="line-171"></span><span class="hs-keyword">data</span><span> </span><span id="ProxyProtocol"><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocol"><span class="hs-identifier hs-var">ProxyProtocol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProxyProtocolNone"><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolNone"><span class="hs-identifier hs-var">ProxyProtocolNone</span></a></span></span><span>
</span><span id="line-172"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ See @setProxyProtocolNone@.</span></span><span>
</span><span id="line-173"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="ProxyProtocolRequired"><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolRequired"><span class="hs-identifier hs-var">ProxyProtocolRequired</span></a></span></span><span>
</span><span id="line-174"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ See @setProxyProtocolRequired@.</span></span><span>
</span><span id="line-175"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="ProxyProtocolOptional"><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolOptional"><span class="hs-identifier hs-var">ProxyProtocolOptional</span></a></span></span><span>
</span><span id="line-176"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ See @setProxyProtocolOptional@.</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | The default settings for the Warp server. See the individual settings for</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- the default value.</span><span>
</span><span id="line-180"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultSettings"><span class="hs-identifier hs-type">defaultSettings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-181"></span><span id="defaultSettings"><span class="annot"><span class="annottext">defaultSettings :: Settings
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultSettings"><span class="hs-identifier hs-var hs-var">defaultSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">settingsPort :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsPort"><span class="hs-identifier hs-var">settingsPort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3000</span></span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsHost :: HostPreference
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsHost"><span class="hs-identifier hs-var">settingsHost</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HostPreference
</span><span class="hs-string">&quot;*4&quot;</span></span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsOnException :: Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnException"><span class="hs-identifier hs-var">settingsOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnException"><span class="hs-identifier hs-var">defaultOnException</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsOnExceptionResponse :: SomeException -&gt; Response
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnExceptionResponse"><span class="hs-identifier hs-var">settingsOnExceptionResponse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Response
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnExceptionResponse"><span class="hs-identifier hs-var">defaultOnExceptionResponse</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsOnOpen :: SockAddr -&gt; IO Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnOpen"><span class="hs-identifier hs-var">settingsOnOpen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; SockAddr -&gt; IO Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; SockAddr -&gt; IO Bool) -&gt; IO Bool -&gt; SockAddr -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsOnClose :: SockAddr -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnClose"><span class="hs-identifier hs-var">settingsOnClose</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; SockAddr -&gt; IO ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SockAddr -&gt; IO ()) -&gt; IO () -&gt; SockAddr -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsTimeout :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsTimeout"><span class="hs-identifier hs-var">settingsTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsManager :: Maybe Manager
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsManager"><span class="hs-identifier hs-var">settingsManager</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Manager
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsFdCacheDuration :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsFdCacheDuration"><span class="hs-identifier hs-var">settingsFdCacheDuration</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsFileInfoCacheDuration :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsFileInfoCacheDuration"><span class="hs-identifier hs-var">settingsFileInfoCacheDuration</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsBeforeMainLoop :: IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsBeforeMainLoop"><span class="hs-identifier hs-var">settingsBeforeMainLoop</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsFork :: ((forall a. IO a -&gt; IO a) -&gt; IO ()) -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsFork"><span class="hs-identifier hs-var">settingsFork</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. IO a -&gt; IO a) -&gt; IO ()) -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultFork"><span class="hs-identifier hs-var">defaultFork</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsAccept :: Socket -&gt; IO (Socket, SockAddr)
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsAccept"><span class="hs-identifier hs-var">settingsAccept</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Socket -&gt; IO (Socket, SockAddr)
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultAccept"><span class="hs-identifier hs-var">defaultAccept</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsNoParsePath :: Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsNoParsePath"><span class="hs-identifier hs-var">settingsNoParsePath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsInstallShutdownHandler :: IO () -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsInstallShutdownHandler"><span class="hs-identifier hs-var">settingsInstallShutdownHandler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO () -&gt; IO ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO () -&gt; IO ()) -&gt; IO () -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsServerName :: ByteString
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsServerName"><span class="hs-identifier hs-var">settingsServerName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ByteString
</span><span class="hs-identifier hs-var">C8.pack</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; ByteString) -&gt; [Char] -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Warp/&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Version -&gt; [Char]
</span><span class="hs-identifier hs-var">showVersion</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Paths_warp.html#version"><span class="hs-identifier hs-var">Paths_warp.version</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsMaximumBodyFlush :: Maybe Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaximumBodyFlush"><span class="hs-identifier hs-var">settingsMaximumBodyFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8192</span></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsProxyProtocol :: ProxyProtocol
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsProxyProtocol"><span class="hs-identifier hs-var">settingsProxyProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProxyProtocol
</span><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolNone"><span class="hs-identifier hs-var">ProxyProtocolNone</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsSlowlorisSize :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsSlowlorisSize"><span class="hs-identifier hs-var">settingsSlowlorisSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2048</span></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsHTTP2Enabled :: Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsHTTP2Enabled"><span class="hs-identifier hs-var">settingsHTTP2Enabled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsLogger :: Request -&gt; Status -&gt; Maybe Integer -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsLogger"><span class="hs-identifier hs-var">settingsLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Request
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsServerPushLogger :: Request -&gt; ByteString -&gt; Integer -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsServerPushLogger"><span class="hs-identifier hs-var">settingsServerPushLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Request
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsGracefulShutdownTimeout :: Maybe Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulShutdownTimeout"><span class="hs-identifier hs-var">settingsGracefulShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsGracefulCloseTimeout1 :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout1"><span class="hs-identifier hs-var">settingsGracefulCloseTimeout1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsGracefulCloseTimeout2 :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout2"><span class="hs-identifier hs-var">settingsGracefulCloseTimeout2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2000</span></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsMaxTotalHeaderLength :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaxTotalHeaderLength"><span class="hs-identifier hs-var">settingsMaxTotalHeaderLength</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">50</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1024</span></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsAltSvc :: Maybe ByteString
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsAltSvc"><span class="hs-identifier hs-var">settingsAltSvc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">settingsMaxBuilderResponseBufferSize :: Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaxBuilderResponseBufferSize"><span class="hs-identifier hs-var">settingsMaxBuilderResponseBufferSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1049000000</span></span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- | Apply the logic provided by 'defaultOnException' to determine if an</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- exception should be shown or not. The goal is to hide exceptions which occur</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- under the normal course of the web server running.</span><span>
</span><span id="line-215"></span><span class="hs-comment">--</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- Since 2.1.3</span><span>
</span><span id="line-217"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultShouldDisplayException"><span class="hs-identifier hs-type">defaultShouldDisplayException</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-218"></span><span id="defaultShouldDisplayException"><span class="annot"><span class="annottext">defaultShouldDisplayException :: SomeException -&gt; Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultShouldDisplayException"><span class="hs-identifier hs-var hs-var">defaultShouldDisplayException</span></a></span></span><span> </span><span id="local-6989586621679110246"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110246"><span class="hs-identifier hs-var">se</span></a></span></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">AsyncException
</span><span class="hs-identifier hs-var">ThreadKilled</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe AsyncException
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110246"><span class="hs-identifier hs-var">se</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InvalidRequest
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#InvalidRequest"><span class="hs-identifier hs-type">InvalidRequest</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe InvalidRequest
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110246"><span class="hs-identifier hs-var">se</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOError -&gt; IOErrorType
</span><span class="hs-identifier hs-var">ioeGetErrorType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679110247"><span class="annot"><span class="annottext">IOErrorType
</span><a href="#local-6989586621679110247"><span class="hs-identifier hs-var">et</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe IOError
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110246"><span class="hs-identifier hs-var">se</span></a></span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IOErrorType
</span><a href="#local-6989586621679110247"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="annot"><span class="annottext">IOErrorType -&gt; IOErrorType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IOErrorType
</span><span class="hs-identifier hs-var">ResourceVanished</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">IOErrorType
</span><a href="#local-6989586621679110247"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="annot"><span class="annottext">IOErrorType -&gt; IOErrorType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IOErrorType
</span><span class="hs-identifier hs-var">InvalidArgument</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">TimeoutThread
</span><span class="hs-identifier hs-var">TimeoutThread</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe TimeoutThread
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110246"><span class="hs-identifier hs-var">se</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-comment">-- | Printing an exception to standard error</span><span>
</span><span id="line-227"></span><span class="hs-comment">--   if `defaultShouldDisplayException` returns `True`.</span><span>
</span><span id="line-228"></span><span class="hs-comment">--</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- Since: 3.1.0</span><span>
</span><span id="line-230"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnException"><span class="hs-identifier hs-type">defaultOnException</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span id="defaultOnException"><span class="annot"><span class="annottext">defaultOnException :: Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnException"><span class="hs-identifier hs-var hs-var">defaultOnException</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Request
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679110252"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110252"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException -&gt; Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultShouldDisplayException"><span class="hs-identifier hs-var">defaultShouldDisplayException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110252"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Handle -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">TIO.hPutStrLn</span></span><span> </span><span class="annot"><span class="annottext">Handle
</span><span class="hs-identifier hs-var">stderr</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ()) -&gt; Text -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Text) -&gt; [Char] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110252"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | Sending 400 for bad requests.</span><span>
</span><span id="line-236"></span><span class="hs-comment">--   Sending 500 for internal server errors.</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- Since: 3.1.0</span><span>
</span><span id="line-238"></span><span class="hs-comment">--   Sending 413 for too large payload.</span><span>
</span><span id="line-239"></span><span class="hs-comment">--   Sending 431 for too large headers.</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- Since 3.2.27</span><span>
</span><span id="line-241"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnExceptionResponse"><span class="hs-identifier hs-type">defaultOnExceptionResponse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span>
</span><span id="line-242"></span><span id="defaultOnExceptionResponse"><span class="annot"><span class="annottext">defaultOnExceptionResponse :: SomeException -&gt; Response
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnExceptionResponse"><span class="hs-identifier hs-var hs-var">defaultOnExceptionResponse</span></a></span></span><span> </span><span id="local-6989586621679110257"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110257"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">InvalidRequest
</span><a href="Network.Wai.Handler.Warp.Types.html#PayloadTooLarge"><span class="hs-identifier hs-var">PayloadTooLarge</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe InvalidRequest
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110257"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status -&gt; ResponseHeaders -&gt; ByteString -&gt; Response
</span><span class="hs-identifier hs-var">responseLBS</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">H.status413</span></span><span>
</span><span id="line-245"></span><span>                                 </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">H.hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text/plain; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-246"></span><span>                                  </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Payload too large&quot;</span></span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">InvalidRequest
</span><a href="Network.Wai.Handler.Warp.Types.html#RequestHeaderFieldsTooLarge"><span class="hs-identifier hs-var">RequestHeaderFieldsTooLarge</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe InvalidRequest
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110257"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status -&gt; ResponseHeaders -&gt; ByteString -&gt; Response
</span><span class="hs-identifier hs-var">responseLBS</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">H.status431</span></span><span>
</span><span id="line-249"></span><span>                                </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">H.hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text/plain; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-250"></span><span>                                 </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Request header fields too large&quot;</span></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InvalidRequest
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#InvalidRequest"><span class="hs-identifier hs-type">InvalidRequest</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe InvalidRequest
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110257"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status -&gt; ResponseHeaders -&gt; ByteString -&gt; Response
</span><span class="hs-identifier hs-var">responseLBS</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">H.badRequest400</span></span><span>
</span><span id="line-253"></span><span>                                </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">H.hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text/plain; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-254"></span><span>                                 </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Bad Request&quot;</span></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status -&gt; ResponseHeaders -&gt; ByteString -&gt; Response
</span><span class="hs-identifier hs-var">responseLBS</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">H.internalServerError500</span></span><span>
</span><span id="line-256"></span><span>                                </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">H.hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text/plain; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-257"></span><span>                                 </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Something went wrong&quot;</span></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-comment">-- | Exception handler for the debugging purpose.</span><span>
</span><span id="line-260"></span><span class="hs-comment">--   500, text/plain, a showed exception.</span><span>
</span><span id="line-261"></span><span class="hs-comment">--</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- Since: 2.0.3.2</span><span>
</span><span id="line-263"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#exceptionResponseForDebug"><span class="hs-identifier hs-type">exceptionResponseForDebug</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span>
</span><span id="line-264"></span><span id="exceptionResponseForDebug"><span class="annot"><span class="annottext">exceptionResponseForDebug :: SomeException -&gt; Response
</span><a href="Network.Wai.Handler.Warp.Settings.html#exceptionResponseForDebug"><span class="hs-identifier hs-var hs-var">exceptionResponseForDebug</span></a></span></span><span> </span><span id="local-6989586621679110267"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110267"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><span class="annottext">Status -&gt; ResponseHeaders -&gt; Builder -&gt; Response
</span><span class="hs-identifier hs-var">responseBuilder</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">H.internalServerError500</span></span><span>
</span><span id="line-266"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">H.hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text/plain; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-267"></span><span>                    </span><span class="annot"><span class="annottext">(Builder -&gt; Response) -&gt; Builder -&gt; Response
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Builder
</span><span class="hs-string">&quot;Exception: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Builder
</span><span class="hs-identifier hs-var">Builder.stringUtf8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679110267"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">-- | Similar to @forkIOWithUnmask@, but does not set up the default exception handler.</span><span>
</span><span id="line-270"></span><span class="hs-comment">--</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- Since Warp will always install its own exception handler in forked threads, this provides</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- a minor optimization.</span><span>
</span><span id="line-273"></span><span class="hs-comment">--</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- For inspiration of this function, see @rawForkIO@ in the @async@ package.</span><span>
</span><span id="line-275"></span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- @since 3.3.17</span><span>
</span><span id="line-277"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultFork"><span class="hs-identifier hs-type">defaultFork</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679110269"><span class="annot"><a href="#local-6989586621679110269"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679110269"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679110269"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span id="defaultFork"><span class="annot"><span class="annottext">defaultFork :: ((forall a. IO a -&gt; IO a) -&gt; IO ()) -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultFork"><span class="hs-identifier hs-var hs-var">defaultFork</span></a></span></span><span> </span><span id="local-6989586621679110270"><span class="annot"><span class="annottext">(forall a. IO a -&gt; IO a) -&gt; IO ()
</span><a href="#local-6989586621679110270"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span class="hs-glyph">=</span><span class="hs-cpp">
#if __GLASGOW_HASKELL__ &gt;= 904
</span><span>  </span><span class="annot"><span class="annottext">(State# RealWorld -&gt; (# State# RealWorld, () #)) -&gt; IO ()
forall a. (State# RealWorld -&gt; (# State# RealWorld, a #)) -&gt; IO a
</span><span class="hs-identifier hs-var">IO</span></span><span> </span><span class="annot"><span class="annottext">((State# RealWorld -&gt; (# State# RealWorld, () #)) -&gt; IO ())
-&gt; (State# RealWorld -&gt; (# State# RealWorld, () #)) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679110271"><span class="annot"><span class="annottext">State# RealWorld
</span><a href="#local-6989586621679110271"><span class="hs-identifier hs-var">s0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(forall a. IO a -&gt; IO a) -&gt; IO ()
</span><a href="#local-6989586621679110270"><span class="hs-identifier hs-var">io</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO a
forall a. IO a -&gt; IO a
</span><span class="hs-identifier hs-var">unsafeUnmask</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-282"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span id="local-6989586621679110272"><span class="annot"><span class="annottext">State# RealWorld -&gt; (# State# RealWorld, () #)
</span><a href="#local-6989586621679110272"><span class="hs-identifier hs-var">io'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(State# RealWorld -&gt; (# State# RealWorld, () #))
-&gt; State# RealWorld -&gt; (# State# RealWorld, ThreadId# #)
forall a.
(State# RealWorld -&gt; (# State# RealWorld, a #))
-&gt; State# RealWorld -&gt; (# State# RealWorld, ThreadId# #)
</span><span class="hs-identifier hs-var">fork#</span></span><span> </span><span class="annot"><span class="annottext">State# RealWorld -&gt; (# State# RealWorld, () #)
</span><a href="#local-6989586621679110272"><span class="hs-identifier hs-var">io'</span></a></span><span> </span><span class="annot"><span class="annottext">State# RealWorld
</span><a href="#local-6989586621679110271"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-284"></span><span>          </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621679110273"><span class="annot"><span class="annottext">State# RealWorld
</span><a href="#local-6989586621679110273"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679110274"><span class="annot"><span class="annottext">ThreadId#
</span><a href="#local-6989586621679110274"><span class="hs-identifier hs-var">_tid</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-285"></span><span>            </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">State# RealWorld
</span><a href="#local-6989586621679110273"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">#)</span><span class="hs-cpp">
#else
</span><span>  </span><span class="hs-identifier">IO</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">s0</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fork#</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">io</span><span> </span><span class="hs-identifier">unsafeUnmask</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">s0</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-289"></span><span>      </span><span class="hs-special">(#</span><span> </span><span class="hs-identifier">s1</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_tid</span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-special">(#</span><span> </span><span class="hs-identifier">s1</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">#)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- | Standard &quot;accept&quot; call for a listening socket.</span><span>
</span><span id="line-294"></span><span class="hs-comment">--</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- @since 3.3.24</span><span>
</span><span id="line-296"></span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultAccept"><span class="hs-identifier hs-type">defaultAccept</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Socket</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Socket</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span id="defaultAccept"><span class="annot"><span class="annottext">defaultAccept :: Socket -&gt; IO (Socket, SockAddr)
</span><a href="Network.Wai.Handler.Warp.Settings.html#defaultAccept"><span class="hs-identifier hs-var hs-var">defaultAccept</span></a></span></span><span> </span><span class="hs-glyph">=</span><span class="hs-cpp">
#if WINDOWS
</span><span>    </span><span class="hs-identifier">windowsThreadBlockHack</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">accept</span><span class="hs-cpp">
#else
</span><span>    </span><span class="annot"><span class="annottext">Socket -&gt; IO (Socket, SockAddr)
</span><span class="hs-identifier hs-var">accept</span></span><span class="hs-cpp">
#endif
</span></pre></body></html>