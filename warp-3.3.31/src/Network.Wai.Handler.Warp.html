<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-deprecations #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">---------------------------------------------------------</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Module        : Network.Wai.Handler.Warp</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Copyright     : Michael Snoyman</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- License       : BSD3</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Maintainer    : Michael Snoyman &lt;michael@snoyman.com&gt;</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Stability     : Stable</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Portability   : portable</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- A fast, light-weight HTTP server handler for WAI.</span><span>
</span><span id="line-17"></span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span class="hs-comment">---------------------------------------------------------</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-comment">-- | A fast, light-weight HTTP server handler for WAI.</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- HTTP\/1.0, HTTP\/1.1 and HTTP\/2 are supported. For HTTP\/2,</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- Warp supports direct and ALPN (in TLS) but not upgrade.</span><span>
</span><span id="line-24"></span><span class="hs-comment">--</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- Note on slowloris timeouts: to prevent slowloris attacks, timeouts are used</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- at various points in request receiving and response sending. One interesting</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- corner case is partial request body consumption; in that case, Warp's</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- timeout handling is still in effect, and the timeout will not be triggered</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- again. Therefore, it is recommended that once you start consuming the</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- request body, you either:</span><span>
</span><span id="line-31"></span><span class="hs-comment">--</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- * consume the entire body promptly</span><span>
</span><span id="line-33"></span><span class="hs-comment">--</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- * call the 'pauseTimeout' function</span><span>
</span><span id="line-35"></span><span class="hs-comment">--</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- For more information, see &lt;https://github.com/yesodweb/wai/issues/351&gt;.</span><span>
</span><span id="line-37"></span><span class="hs-comment">--</span><span>
</span><span id="line-38"></span><span class="hs-comment">--</span><span>
</span><span id="line-39"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Network.Wai.Handler.Warp</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Run a Warp server</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-comment">-- | All of these automatically serve the same 'Application' over HTTP\/1,</span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-comment">-- HTTP\/1.1, and HTTP\/2.</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Network.Wai.Handler.Warp.Run.html#run"><span class="hs-identifier">run</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Run.html#runEnv"><span class="hs-identifier">runEnv</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Run.html#runSettings"><span class="hs-identifier">runSettings</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Run.html#runSettingsSocket"><span class="hs-identifier">runSettingsSocket</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Settings</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier">Settings</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultSettings"><span class="hs-identifier">defaultSettings</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Setters</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setPort"><span class="hs-identifier">setPort</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setHost"><span class="hs-identifier">setHost</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnException"><span class="hs-identifier">setOnException</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnExceptionResponse"><span class="hs-identifier">setOnExceptionResponse</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnOpen"><span class="hs-identifier">setOnOpen</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnClose"><span class="hs-identifier">setOnClose</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setTimeout"><span class="hs-identifier">setTimeout</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setManager"><span class="hs-identifier">setManager</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setFdCacheDuration"><span class="hs-identifier">setFdCacheDuration</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setFileInfoCacheDuration"><span class="hs-identifier">setFileInfoCacheDuration</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setBeforeMainLoop"><span class="hs-identifier">setBeforeMainLoop</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setNoParsePath"><span class="hs-identifier">setNoParsePath</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setInstallShutdownHandler"><span class="hs-identifier">setInstallShutdownHandler</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setServerName"><span class="hs-identifier">setServerName</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setMaximumBodyFlush"><span class="hs-identifier">setMaximumBodyFlush</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setFork"><span class="hs-identifier">setFork</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setAccept"><span class="hs-identifier">setAccept</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setProxyProtocolNone"><span class="hs-identifier">setProxyProtocolNone</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setProxyProtocolRequired"><span class="hs-identifier">setProxyProtocolRequired</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setProxyProtocolOptional"><span class="hs-identifier">setProxyProtocolOptional</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setSlowlorisSize"><span class="hs-identifier">setSlowlorisSize</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setHTTP2Disabled"><span class="hs-identifier">setHTTP2Disabled</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setLogger"><span class="hs-identifier">setLogger</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setServerPushLogger"><span class="hs-identifier">setServerPushLogger</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setGracefulShutdownTimeout"><span class="hs-identifier">setGracefulShutdownTimeout</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setGracefulCloseTimeout1"><span class="hs-identifier">setGracefulCloseTimeout1</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setGracefulCloseTimeout2"><span class="hs-identifier">setGracefulCloseTimeout2</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setMaxTotalHeaderLength"><span class="hs-identifier">setMaxTotalHeaderLength</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setAltSvc"><span class="hs-identifier">setAltSvc</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setMaxBuilderResponseBufferSize"><span class="hs-identifier">setMaxBuilderResponseBufferSize</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Getters</span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getPort"><span class="hs-identifier">getPort</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getHost"><span class="hs-identifier">getHost</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getOnOpen"><span class="hs-identifier">getOnOpen</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getOnClose"><span class="hs-identifier">getOnClose</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getOnException"><span class="hs-identifier">getOnException</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getGracefulShutdownTimeout"><span class="hs-identifier">getGracefulShutdownTimeout</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getGracefulCloseTimeout1"><span class="hs-identifier">getGracefulCloseTimeout1</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getGracefulCloseTimeout2"><span class="hs-identifier">getGracefulCloseTimeout2</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Exception handler</span></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnException"><span class="hs-identifier">defaultOnException</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultShouldDisplayException"><span class="hs-identifier">defaultShouldDisplayException</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Exception response handler</span></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#defaultOnExceptionResponse"><span class="hs-identifier">defaultOnExceptionResponse</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#exceptionResponseForDebug"><span class="hs-identifier">exceptionResponseForDebug</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Data types</span></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">HostPreference</span></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#Port"><span class="hs-identifier">Port</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#InvalidRequest"><span class="hs-identifier">InvalidRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#pauseTimeout"><span class="hs-identifier">pauseTimeout</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.FileInfoCache.html#FileInfo"><span class="hs-identifier">FileInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getFileInfo"><span class="hs-identifier">getFileInfo</span></a></span><span class="hs-cpp">
#ifdef MIN_VERSION_crypton_x509
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.html#clientCertificate"><span class="hs-identifier">clientCertificate</span></a></span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.WithApplication.html#withApplication"><span class="hs-identifier">withApplication</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.WithApplication.html#withApplicationSettings"><span class="hs-identifier">withApplicationSettings</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.WithApplication.html#testWithApplication"><span class="hs-identifier">testWithApplication</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.WithApplication.html#testWithApplicationSettings"><span class="hs-identifier">testWithApplicationSettings</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.WithApplication.html#openFreePort"><span class="hs-identifier">openFreePort</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Version</span></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Response.html#warpVersion"><span class="hs-identifier">warpVersion</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><span class="hs-comment">-- * HTTP/2</span></span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** HTTP2 data</span></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#HTTP2Data"><span class="hs-identifier">HTTP2Data</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#http2dataPushPromise"><span class="hs-identifier">http2dataPushPromise</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#http2dataTrailers"><span class="hs-identifier">http2dataTrailers</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#defaultHTTP2Data"><span class="hs-identifier">defaultHTTP2Data</span></a></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html#getHTTP2Data"><span class="hs-identifier">getHTTP2Data</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html#setHTTP2Data"><span class="hs-identifier">setHTTP2Data</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html#modifyHTTP2Data"><span class="hs-identifier">modifyHTTP2Data</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Push promise</span></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#PushPromise"><span class="hs-identifier">PushPromise</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#promisedPath"><span class="hs-identifier">promisedPath</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#promisedFile"><span class="hs-identifier">promisedFile</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#promisedResponseHeaders"><span class="hs-identifier">promisedResponseHeaders</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#promisedWeight"><span class="hs-identifier">promisedWeight</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html#defaultPushPromise"><span class="hs-identifier">defaultPushPromise</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">UnliftIO.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">throwIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Streaming.Network</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HostPreference</span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vault.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Vault</span></span><span class="hs-cpp">
#ifdef MIN_VERSION_crypton_x509
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.X509</span></span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.Socket</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Socket</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SockAddr</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.Wai</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Request</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Response</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">vault</span></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.TimeManager</span></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.FileInfoCache.html"><span class="hs-identifier">Network.Wai.Handler.Warp.FileInfoCache</span></a></span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html"><span class="hs-identifier">Network.Wai.Handler.Warp.HTTP2.Request</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html#getHTTP2Data"><span class="hs-identifier">getHTTP2Data</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html#setHTTP2Data"><span class="hs-identifier">setHTTP2Data</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Request.html#modifyHTTP2Data"><span class="hs-identifier">modifyHTTP2Data</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.HTTP2.Types.html"><span class="hs-identifier">Network.Wai.Handler.Warp.HTTP2.Types</span></a></span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Imports.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Imports</span></a></span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Request.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Request</span></a></span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Response.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Response</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.Wai.Handler.Warp.Response.html#warpVersion"><span class="hs-identifier">warpVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Run.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Run</span></a></span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Settings</span></a></span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html"><span class="hs-identifier">Network.Wai.Handler.Warp.Types</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#getFileInfo"><span class="hs-identifier">getFileInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.WithApplication.html"><span class="hs-identifier">Network.Wai.Handler.Warp.WithApplication</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | Port to listen on. Default value: 3000</span><span>
</span><span id="line-155"></span><span class="hs-comment">--</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-157"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setPort"><span class="hs-identifier hs-type">setPort</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-158"></span><span id="setPort"><span class="annot"><span class="annottext">setPort :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setPort"><span class="hs-identifier hs-var hs-var">setPort</span></a></span></span><span> </span><span id="local-6989586621679113228"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113228"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113229"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113229"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113229"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsPort"><span class="hs-identifier hs-var">settingsPort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113228"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- | Interface to bind to. Default value: HostIPv4</span><span>
</span><span id="line-161"></span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-163"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setHost"><span class="hs-identifier hs-type">setHost</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HostPreference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-164"></span><span id="setHost"><span class="annot"><span class="annottext">setHost :: HostPreference -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setHost"><span class="hs-identifier hs-var hs-var">setHost</span></a></span></span><span> </span><span id="local-6989586621679113231"><span class="annot"><span class="annottext">HostPreference
</span><a href="#local-6989586621679113231"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113232"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113232"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113232"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsHost"><span class="hs-identifier hs-var">settingsHost</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113231"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">-- | What to do with exceptions thrown by either the application or server.</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- Default: 'defaultOnException'</span><span>
</span><span id="line-168"></span><span class="hs-comment">--</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-170"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnException"><span class="hs-identifier hs-type">setOnException</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-171"></span><span id="setOnException"><span class="annot"><span class="annottext">setOnException :: (Maybe Request -&gt; SomeException -&gt; IO ()) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setOnException"><span class="hs-identifier hs-var hs-var">setOnException</span></a></span></span><span> </span><span id="local-6989586621679113234"><span class="annot"><span class="annottext">Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="#local-6989586621679113234"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113235"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113235"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113235"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnException"><span class="hs-identifier hs-var">settingsOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113234"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- | A function to create a `Response` when an exception occurs.</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- Default: 'defaultOnExceptionResponse'</span><span>
</span><span id="line-175"></span><span class="hs-comment">--</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- Note that an application can handle its own exceptions without interfering with Warp:</span><span>
</span><span id="line-177"></span><span class="hs-comment">--</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- &gt; myApp :: Application</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- &gt; myApp request respond = innerApp `catch` onError</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- &gt;   where</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- &gt;     onError = respond . response500 request</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- &gt; response500 :: Request -&gt; SomeException -&gt; Response</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- &gt; response500 req someEx = responseLBS status500 -- ...</span><span>
</span><span id="line-185"></span><span class="hs-comment">--</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-187"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnExceptionResponse"><span class="hs-identifier hs-type">setOnExceptionResponse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-188"></span><span id="setOnExceptionResponse"><span class="annot"><span class="annottext">setOnExceptionResponse :: (SomeException -&gt; Response) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setOnExceptionResponse"><span class="hs-identifier hs-var hs-var">setOnExceptionResponse</span></a></span></span><span> </span><span id="local-6989586621679113237"><span class="annot"><span class="annottext">SomeException -&gt; Response
</span><a href="#local-6989586621679113237"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113238"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113238"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113238"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnExceptionResponse"><span class="hs-identifier hs-var">settingsOnExceptionResponse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113237"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-comment">-- | What to do when a connection is opened. When 'False' is returned, the</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- connection is closed immediately. Otherwise, the connection is going on.</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- Default: always returns 'True'.</span><span>
</span><span id="line-193"></span><span class="hs-comment">--</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-195"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnOpen"><span class="hs-identifier hs-type">setOnOpen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-196"></span><span id="setOnOpen"><span class="annot"><span class="annottext">setOnOpen :: (SockAddr -&gt; IO Bool) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setOnOpen"><span class="hs-identifier hs-var hs-var">setOnOpen</span></a></span></span><span> </span><span id="local-6989586621679113240"><span class="annot"><span class="annottext">SockAddr -&gt; IO Bool
</span><a href="#local-6989586621679113240"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113241"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113241"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113241"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnOpen"><span class="hs-identifier hs-var">settingsOnOpen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113240"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-comment">-- | What to do when a connection is closed. Default: do nothing.</span><span>
</span><span id="line-199"></span><span class="hs-comment">--</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-201"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setOnClose"><span class="hs-identifier hs-type">setOnClose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-202"></span><span id="setOnClose"><span class="annot"><span class="annottext">setOnClose :: (SockAddr -&gt; IO ()) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setOnClose"><span class="hs-identifier hs-var hs-var">setOnClose</span></a></span></span><span> </span><span id="local-6989586621679113243"><span class="annot"><span class="annottext">SockAddr -&gt; IO ()
</span><a href="#local-6989586621679113243"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113244"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113244"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113244"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnClose"><span class="hs-identifier hs-var">settingsOnClose</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113243"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-comment">-- | &quot;Slow-loris&quot; timeout lower-bound value in seconds.  Connections where</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- network progress is made less frequently than this may be closed.  In</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- practice many connections may be allowed to go without progress for up to</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- twice this amount of time.  Note that this timeout is not applied to</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- application code, only network progress.</span><span>
</span><span id="line-209"></span><span class="hs-comment">--</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- Default value: 30</span><span>
</span><span id="line-211"></span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-213"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setTimeout"><span class="hs-identifier hs-type">setTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-214"></span><span id="setTimeout"><span class="annot"><span class="annottext">setTimeout :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setTimeout"><span class="hs-identifier hs-var hs-var">setTimeout</span></a></span></span><span> </span><span id="local-6989586621679113246"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113246"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113247"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113247"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113247"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsTimeout"><span class="hs-identifier hs-var">settingsTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113246"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- | Use an existing timeout manager instead of spawning a new one. If used,</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- 'settingsTimeout' is ignored.</span><span>
</span><span id="line-218"></span><span class="hs-comment">--</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-220"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setManager"><span class="hs-identifier hs-type">setManager</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Manager</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-221"></span><span id="setManager"><span class="annot"><span class="annottext">setManager :: Manager -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setManager"><span class="hs-identifier hs-var hs-var">setManager</span></a></span></span><span> </span><span id="local-6989586621679113249"><span class="annot"><span class="annottext">Manager
</span><a href="#local-6989586621679113249"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113250"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113250"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113250"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsManager"><span class="hs-identifier hs-var">settingsManager</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679113249"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">-- | Cache duration time of file descriptors in seconds. 0 means that the cache mechanism is not used.</span><span>
</span><span id="line-224"></span><span class="hs-comment">--</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- The FD cache is an optimization that is useful for servers dealing with</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- static files. However, if files are being modified, it can cause incorrect</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- results in some cases. Therefore, we disable it by default. If you know that</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- your files will be static or you prefer performance to file consistency,</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- it's recommended to turn this on; a reasonable value for those cases is 10.</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- Enabling this cache results in drastic performance improvement for file</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- transfers.</span><span>
</span><span id="line-232"></span><span class="hs-comment">--</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- Default value: 0, was previously 10</span><span>
</span><span id="line-234"></span><span class="hs-comment">--</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- Since 3.0.13</span><span>
</span><span id="line-236"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setFdCacheDuration"><span class="hs-identifier hs-type">setFdCacheDuration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-237"></span><span id="setFdCacheDuration"><span class="annot"><span class="annottext">setFdCacheDuration :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setFdCacheDuration"><span class="hs-identifier hs-var hs-var">setFdCacheDuration</span></a></span></span><span> </span><span id="local-6989586621679113252"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113252"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113253"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113253"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113253"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsFdCacheDuration"><span class="hs-identifier hs-var">settingsFdCacheDuration</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113252"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | Cache duration time of file information in seconds. 0 means that the cache mechanism is not used.</span><span>
</span><span id="line-240"></span><span class="hs-comment">--</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- The file information cache is an optimization that is useful for servers dealing with</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- static files. However, if files are being modified, it can cause incorrect</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- results in some cases. Therefore, we disable it by default. If you know that</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- your files will be static or you prefer performance to file consistency,</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- it's recommended to turn this on; a reasonable value for those cases is 10.</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- Enabling this cache results in drastic performance improvement for file</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- transfers.</span><span>
</span><span id="line-248"></span><span class="hs-comment">--</span><span>
</span><span id="line-249"></span><span class="hs-comment">-- Default value: 0</span><span>
</span><span id="line-250"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setFileInfoCacheDuration"><span class="hs-identifier hs-type">setFileInfoCacheDuration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-251"></span><span id="setFileInfoCacheDuration"><span class="annot"><span class="annottext">setFileInfoCacheDuration :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setFileInfoCacheDuration"><span class="hs-identifier hs-var hs-var">setFileInfoCacheDuration</span></a></span></span><span> </span><span id="local-6989586621679113255"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113255"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113256"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113256"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113256"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsFileInfoCacheDuration"><span class="hs-identifier hs-var">settingsFileInfoCacheDuration</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113255"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- | Code to run after the listening socket is ready but before entering</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- the main event loop. Useful for signaling to tests that they can start</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- running, or to drop permissions after binding to a restricted port.</span><span>
</span><span id="line-256"></span><span class="hs-comment">--</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- Default: do nothing.</span><span>
</span><span id="line-258"></span><span class="hs-comment">--</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-260"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setBeforeMainLoop"><span class="hs-identifier hs-type">setBeforeMainLoop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-261"></span><span id="setBeforeMainLoop"><span class="annot"><span class="annottext">setBeforeMainLoop :: IO () -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setBeforeMainLoop"><span class="hs-identifier hs-var hs-var">setBeforeMainLoop</span></a></span></span><span> </span><span id="local-6989586621679113258"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679113258"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113259"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113259"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113259"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsBeforeMainLoop"><span class="hs-identifier hs-var">settingsBeforeMainLoop</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113258"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- | Perform no parsing on the rawPathInfo.</span><span>
</span><span id="line-264"></span><span class="hs-comment">--</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- This is useful for writing HTTP proxies.</span><span>
</span><span id="line-266"></span><span class="hs-comment">--</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- Default: False</span><span>
</span><span id="line-268"></span><span class="hs-comment">--</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- Since 2.1.0</span><span>
</span><span id="line-270"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setNoParsePath"><span class="hs-identifier hs-type">setNoParsePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-271"></span><span id="setNoParsePath"><span class="annot"><span class="annottext">setNoParsePath :: Bool -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setNoParsePath"><span class="hs-identifier hs-var hs-var">setNoParsePath</span></a></span></span><span> </span><span id="local-6989586621679113261"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679113261"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113262"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113262"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113262"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsNoParsePath"><span class="hs-identifier hs-var">settingsNoParsePath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113261"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">-- | Get the listening port.</span><span>
</span><span id="line-274"></span><span class="hs-comment">--</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- Since 2.1.1</span><span>
</span><span id="line-276"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getPort"><span class="hs-identifier hs-type">getPort</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Types.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span>
</span><span id="line-277"></span><span id="getPort"><span class="annot"><span class="annottext">getPort :: Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.html#getPort"><span class="hs-identifier hs-var hs-var">getPort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsPort"><span class="hs-identifier hs-var">settingsPort</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-comment">-- | Get the interface to bind to.</span><span>
</span><span id="line-280"></span><span class="hs-comment">--</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- Since 2.1.1</span><span>
</span><span id="line-282"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getHost"><span class="hs-identifier hs-type">getHost</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HostPreference</span></span><span>
</span><span id="line-283"></span><span id="getHost"><span class="annot"><span class="annottext">getHost :: Settings -&gt; HostPreference
</span><a href="Network.Wai.Handler.Warp.html#getHost"><span class="hs-identifier hs-var hs-var">getHost</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; HostPreference
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsHost"><span class="hs-identifier hs-var">settingsHost</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="annot"><span class="hs-comment">-- | Get the action on opening connection.</span></span><span>
</span><span id="line-286"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getOnOpen"><span class="hs-identifier hs-type">getOnOpen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-287"></span><span id="getOnOpen"><span class="annot"><span class="annottext">getOnOpen :: Settings -&gt; SockAddr -&gt; IO Bool
</span><a href="Network.Wai.Handler.Warp.html#getOnOpen"><span class="hs-identifier hs-var hs-var">getOnOpen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; SockAddr -&gt; IO Bool
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnOpen"><span class="hs-identifier hs-var">settingsOnOpen</span></a></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="annot"><span class="hs-comment">-- | Get the action on closeing connection.</span></span><span>
</span><span id="line-290"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getOnClose"><span class="hs-identifier hs-type">getOnClose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span id="getOnClose"><span class="annot"><span class="annottext">getOnClose :: Settings -&gt; SockAddr -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.html#getOnClose"><span class="hs-identifier hs-var hs-var">getOnClose</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; SockAddr -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnClose"><span class="hs-identifier hs-var">settingsOnClose</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><span class="hs-comment">-- | Get the exception handler.</span></span><span>
</span><span id="line-294"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getOnException"><span class="hs-identifier hs-type">getOnException</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span id="getOnException"><span class="annot"><span class="annottext">getOnException :: Settings -&gt; Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.html#getOnException"><span class="hs-identifier hs-var hs-var">getOnException</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Maybe Request -&gt; SomeException -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsOnException"><span class="hs-identifier hs-var">settingsOnException</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-comment">-- | Get the graceful shutdown timeout</span><span>
</span><span id="line-298"></span><span class="hs-comment">--</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- Since 3.2.8</span><span>
</span><span id="line-300"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getGracefulShutdownTimeout"><span class="hs-identifier hs-type">getGracefulShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-301"></span><span id="getGracefulShutdownTimeout"><span class="annot"><span class="annottext">getGracefulShutdownTimeout :: Settings -&gt; Maybe Int
</span><a href="Network.Wai.Handler.Warp.html#getGracefulShutdownTimeout"><span class="hs-identifier hs-var hs-var">getGracefulShutdownTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Maybe Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulShutdownTimeout"><span class="hs-identifier hs-var">settingsGracefulShutdownTimeout</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-comment">-- | A code to install shutdown handler.</span><span>
</span><span id="line-304"></span><span class="hs-comment">--</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- For instance, this code should set up a UNIX signal</span><span>
</span><span id="line-306"></span><span class="hs-comment">-- handler. The handler should call the first argument,</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- which closes the listen socket, at shutdown.</span><span>
</span><span id="line-308"></span><span class="hs-comment">--</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- Example usage:</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- settings :: IO () -&gt; 'Settings'</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- settings shutdownAction = 'setInstallShutdownHandler' shutdownHandler 'defaultSettings'</span><span>
</span><span id="line-314"></span><span class="hs-comment">--   __where__</span><span>
</span><span id="line-315"></span><span class="hs-comment">--     shutdownHandler closeSocket =</span><span>
</span><span id="line-316"></span><span class="hs-comment">--       void $ 'System.Posix.Signals.installHandler' 'System.Posix.Signals.sigTERM' ('System.Posix.Signals.Catch' $ shutdownAction &gt;&gt; closeSocket) 'Nothing'</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-318"></span><span class="hs-comment">--</span><span>
</span><span id="line-319"></span><span class="hs-comment">-- Note that by default, the graceful shutdown mode lasts indefinitely</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- (see 'setGracefulShutdownTimeout'). If you install a signal handler as above,</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- upon receiving that signal, the custom shutdown action will run /and/ all</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- outstanding requests will be handled.</span><span>
</span><span id="line-323"></span><span class="hs-comment">--</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- You may instead prefer to do one or both of the following:</span><span>
</span><span id="line-325"></span><span class="hs-comment">--</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- * Only wait a finite amount of time for outstanding requests to complete,</span><span>
</span><span id="line-327"></span><span class="hs-comment">--   using 'setGracefulShutdownTimeout'.</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- * Only catch one signal, so the second hard-kills the Warp server, using</span><span>
</span><span id="line-329"></span><span class="hs-comment">--   'System.Posix.Signals.CatchOnce'.</span><span>
</span><span id="line-330"></span><span class="hs-comment">--</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- Default: does not install any code.</span><span>
</span><span id="line-332"></span><span class="hs-comment">--</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- Since 3.0.1</span><span>
</span><span id="line-334"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setInstallShutdownHandler"><span class="hs-identifier hs-type">setInstallShutdownHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-335"></span><span id="setInstallShutdownHandler"><span class="annot"><span class="annottext">setInstallShutdownHandler :: (IO () -&gt; IO ()) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setInstallShutdownHandler"><span class="hs-identifier hs-var hs-var">setInstallShutdownHandler</span></a></span></span><span> </span><span id="local-6989586621679113266"><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679113266"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113267"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113267"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113267"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsInstallShutdownHandler"><span class="hs-identifier hs-var">settingsInstallShutdownHandler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113266"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-comment">-- | Default server name to be sent as the \&quot;Server:\&quot; header</span><span>
</span><span id="line-338"></span><span class="hs-comment">--   if an application does not set one.</span><span>
</span><span id="line-339"></span><span class="hs-comment">--   If an empty string is set, the \&quot;Server:\&quot; header is not sent.</span><span>
</span><span id="line-340"></span><span class="hs-comment">--   This is true even if an application set one.</span><span>
</span><span id="line-341"></span><span class="hs-comment">--</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- Since 3.0.2</span><span>
</span><span id="line-343"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setServerName"><span class="hs-identifier hs-type">setServerName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-344"></span><span id="setServerName"><span class="annot"><span class="annottext">setServerName :: ByteString -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setServerName"><span class="hs-identifier hs-var hs-var">setServerName</span></a></span></span><span> </span><span id="local-6989586621679113269"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679113269"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113270"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113270"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113270"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsServerName"><span class="hs-identifier hs-var">settingsServerName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113269"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-comment">-- | The maximum number of bytes to flush from an unconsumed request body.</span><span>
</span><span id="line-347"></span><span class="hs-comment">--</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- By default, Warp does not flush the request body so that, if a large body is</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- present, the connection is simply terminated instead of wasting time and</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- bandwidth on transmitting it. However, some clients do not deal with that</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- situation well. You can either change this setting to @Nothing@ to flush the</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- entire body in all cases, or in your application ensure that you always</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- consume the entire request body.</span><span>
</span><span id="line-354"></span><span class="hs-comment">--</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- Default: 8192 bytes.</span><span>
</span><span id="line-356"></span><span class="hs-comment">--</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- Since 3.0.3</span><span>
</span><span id="line-358"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setMaximumBodyFlush"><span class="hs-identifier hs-type">setMaximumBodyFlush</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-359"></span><span id="setMaximumBodyFlush"><span class="annot"><span class="annottext">setMaximumBodyFlush :: Maybe Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setMaximumBodyFlush"><span class="hs-identifier hs-var hs-var">setMaximumBodyFlush</span></a></span></span><span> </span><span id="local-6989586621679113272"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679113272"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113273"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113273"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679113274"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113274"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679113272"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113274"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Settings
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;setMaximumBodyFlush: must be positive&quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113273"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaximumBodyFlush"><span class="hs-identifier hs-var">settingsMaximumBodyFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113272"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-comment">-- | Code to fork a new thread to accept a connection.</span><span>
</span><span id="line-364"></span><span class="hs-comment">--</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- This may be useful if you need OS bound threads, or if</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- you wish to develop an alternative threading model.</span><span>
</span><span id="line-367"></span><span class="hs-comment">--</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- Default: void . forkIOWithUnmask</span><span>
</span><span id="line-369"></span><span class="hs-comment">--</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- Since 3.0.4</span><span>
</span><span id="line-371"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setFork"><span class="hs-identifier hs-type">setFork</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679113120"><span class="annot"><a href="#local-6989586621679113120"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679113120"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679113120"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-372"></span><span id="setFork"><span class="annot"><span class="annottext">setFork :: (((forall a. IO a -&gt; IO a) -&gt; IO ()) -&gt; IO ())
-&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setFork"><span class="hs-identifier hs-var hs-var">setFork</span></a></span></span><span> </span><span id="local-6989586621679113278"><span class="annot"><span class="annottext">((forall a. IO a -&gt; IO a) -&gt; IO ()) -&gt; IO ()
</span><a href="#local-6989586621679113278"><span class="hs-identifier hs-var">fork'</span></a></span></span><span> </span><span id="local-6989586621679113279"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113279"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113279"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsFork"><span class="hs-identifier hs-var">settingsFork</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113278"><span class="hs-identifier hs-type">fork'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="hs-comment">-- | Code to accept a new connection.</span><span>
</span><span id="line-375"></span><span class="hs-comment">--</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- Useful if you need to provide connected sockets from something other</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- than a standard accept call.</span><span>
</span><span id="line-378"></span><span class="hs-comment">--</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- Default: 'defaultAccept'</span><span>
</span><span id="line-380"></span><span class="hs-comment">--</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- Since 3.3.24</span><span>
</span><span id="line-382"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setAccept"><span class="hs-identifier hs-type">setAccept</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Socket</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Socket</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SockAddr</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-383"></span><span id="setAccept"><span class="annot"><span class="annottext">setAccept :: (Socket -&gt; IO (Socket, SockAddr)) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setAccept"><span class="hs-identifier hs-var hs-var">setAccept</span></a></span></span><span> </span><span id="local-6989586621679113282"><span class="annot"><span class="annottext">Socket -&gt; IO (Socket, SockAddr)
</span><a href="#local-6989586621679113282"><span class="hs-identifier hs-var">accept'</span></a></span></span><span> </span><span id="local-6989586621679113283"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113283"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113283"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsAccept"><span class="hs-identifier hs-var">settingsAccept</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113282"><span class="hs-identifier hs-type">accept'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">-- | Do not use the PROXY protocol.</span><span>
</span><span id="line-386"></span><span class="hs-comment">--</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- Since 3.0.5</span><span>
</span><span id="line-388"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setProxyProtocolNone"><span class="hs-identifier hs-type">setProxyProtocolNone</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-389"></span><span id="setProxyProtocolNone"><span class="annot"><span class="annottext">setProxyProtocolNone :: Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setProxyProtocolNone"><span class="hs-identifier hs-var hs-var">setProxyProtocolNone</span></a></span></span><span> </span><span id="local-6989586621679113285"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113285"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113285"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsProxyProtocol"><span class="hs-identifier hs-var">settingsProxyProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolNone"><span class="hs-identifier hs-type">ProxyProtocolNone</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="hs-comment">-- | Require PROXY header.</span><span>
</span><span id="line-392"></span><span class="hs-comment">--</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- This is for cases where a &quot;dumb&quot; TCP/SSL proxy is being used, which cannot</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- add an @X-Forwarded-For@ HTTP header field but has enabled support for the</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- PROXY protocol.</span><span>
</span><span id="line-396"></span><span class="hs-comment">--</span><span>
</span><span id="line-397"></span><span class="hs-comment">-- See &lt;http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt&gt; and</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- &lt;http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/TerminologyandKeyConcepts.html#proxy-protocol&gt;.</span><span>
</span><span id="line-399"></span><span class="hs-comment">--</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- Only the human-readable header format (version 1) is supported. The binary</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- header format (version 2) is /not/ supported.</span><span>
</span><span id="line-402"></span><span class="hs-comment">--</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- Since 3.0.5</span><span>
</span><span id="line-404"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setProxyProtocolRequired"><span class="hs-identifier hs-type">setProxyProtocolRequired</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-405"></span><span id="setProxyProtocolRequired"><span class="annot"><span class="annottext">setProxyProtocolRequired :: Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setProxyProtocolRequired"><span class="hs-identifier hs-var hs-var">setProxyProtocolRequired</span></a></span></span><span> </span><span id="local-6989586621679113288"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113288"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113288"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsProxyProtocol"><span class="hs-identifier hs-var">settingsProxyProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolRequired"><span class="hs-identifier hs-type">ProxyProtocolRequired</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-comment">-- | Use the PROXY header if it exists, but also accept</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- connections without the header.  See 'setProxyProtocolRequired'.</span><span>
</span><span id="line-409"></span><span class="hs-comment">--</span><span>
</span><span id="line-410"></span><span class="hs-comment">-- WARNING: This is contrary to the PROXY protocol specification and</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- using it can indicate a security problem with your</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- architecture if the web server is directly accessible</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- to the public, since it would allow easy IP address</span><span>
</span><span id="line-414"></span><span class="hs-comment">-- spoofing.  However, it can be useful in some cases,</span><span>
</span><span id="line-415"></span><span class="hs-comment">-- such as if a load balancer health check uses regular</span><span>
</span><span id="line-416"></span><span class="hs-comment">-- HTTP without the PROXY header, but proxied</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- connections /do/ include the PROXY header.</span><span>
</span><span id="line-418"></span><span class="hs-comment">--</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- Since 3.0.5</span><span>
</span><span id="line-420"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setProxyProtocolOptional"><span class="hs-identifier hs-type">setProxyProtocolOptional</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-421"></span><span id="setProxyProtocolOptional"><span class="annot"><span class="annottext">setProxyProtocolOptional :: Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setProxyProtocolOptional"><span class="hs-identifier hs-var hs-var">setProxyProtocolOptional</span></a></span></span><span> </span><span id="local-6989586621679113290"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113290"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113290"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsProxyProtocol"><span class="hs-identifier hs-var">settingsProxyProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#ProxyProtocolOptional"><span class="hs-identifier hs-type">ProxyProtocolOptional</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="hs-comment">-- | Size in bytes read to prevent Slowloris attacks. Default value: 2048</span><span>
</span><span id="line-424"></span><span class="hs-comment">--</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- Since 3.1.2</span><span>
</span><span id="line-426"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setSlowlorisSize"><span class="hs-identifier hs-type">setSlowlorisSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-427"></span><span id="setSlowlorisSize"><span class="annot"><span class="annottext">setSlowlorisSize :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setSlowlorisSize"><span class="hs-identifier hs-var hs-var">setSlowlorisSize</span></a></span></span><span> </span><span id="local-6989586621679113292"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113292"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113293"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113293"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113293"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsSlowlorisSize"><span class="hs-identifier hs-var">settingsSlowlorisSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113292"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-comment">-- | Disable HTTP2.</span><span>
</span><span id="line-430"></span><span class="hs-comment">--</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- Since 3.1.7</span><span>
</span><span id="line-432"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setHTTP2Disabled"><span class="hs-identifier hs-type">setHTTP2Disabled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-433"></span><span id="setHTTP2Disabled"><span class="annot"><span class="annottext">setHTTP2Disabled :: Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setHTTP2Disabled"><span class="hs-identifier hs-var hs-var">setHTTP2Disabled</span></a></span></span><span> </span><span id="local-6989586621679113295"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113295"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113295"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsHTTP2Enabled"><span class="hs-identifier hs-var">settingsHTTP2Enabled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span class="hs-comment">-- | Setting a log function.</span><span>
</span><span id="line-436"></span><span class="hs-comment">--</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- Since 3.X.X</span><span>
</span><span id="line-438"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setLogger"><span class="hs-identifier hs-type">setLogger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.Status</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ request, status, maybe file-size</span></span><span>
</span><span id="line-439"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-440"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-441"></span><span id="setLogger"><span class="annot"><span class="annottext">setLogger :: (Request -&gt; Status -&gt; Maybe Integer -&gt; IO ())
-&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setLogger"><span class="hs-identifier hs-var hs-var">setLogger</span></a></span></span><span> </span><span id="local-6989586621679113297"><span class="annot"><span class="annottext">Request -&gt; Status -&gt; Maybe Integer -&gt; IO ()
</span><a href="#local-6989586621679113297"><span class="hs-identifier hs-var">lgr</span></a></span></span><span> </span><span id="local-6989586621679113298"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113298"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113298"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsLogger"><span class="hs-identifier hs-var">settingsLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113297"><span class="hs-identifier hs-type">lgr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- | Setting a log function for HTTP/2 server push.</span><span>
</span><span id="line-444"></span><span class="hs-comment">--</span><span>
</span><span id="line-445"></span><span class="hs-comment">--   Since: 3.2.7</span><span>
</span><span id="line-446"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setServerPushLogger"><span class="hs-identifier hs-type">setServerPushLogger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ request, path, file-size</span></span><span>
</span><span id="line-447"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-448"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-449"></span><span id="setServerPushLogger"><span class="annot"><span class="annottext">setServerPushLogger :: (Request -&gt; ByteString -&gt; Integer -&gt; IO ()) -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setServerPushLogger"><span class="hs-identifier hs-var hs-var">setServerPushLogger</span></a></span></span><span> </span><span id="local-6989586621679113300"><span class="annot"><span class="annottext">Request -&gt; ByteString -&gt; Integer -&gt; IO ()
</span><a href="#local-6989586621679113300"><span class="hs-identifier hs-var">lgr</span></a></span></span><span> </span><span id="local-6989586621679113301"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113301"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113301"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsServerPushLogger"><span class="hs-identifier hs-var">settingsServerPushLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113300"><span class="hs-identifier hs-type">lgr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-comment">-- | Set the graceful shutdown timeout. A timeout of `Nothing' will</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- wait indefinitely, and a number, if provided, will be treated as seconds</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- to wait for requests to finish, before shutting down the server entirely.</span><span>
</span><span id="line-454"></span><span class="hs-comment">--</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- Graceful shutdown mode is entered when the server socket is closed; see</span><span>
</span><span id="line-456"></span><span class="hs-comment">-- 'setInstallShutdownHandler' for an example of how this could be done in</span><span>
</span><span id="line-457"></span><span class="hs-comment">-- response to a UNIX signal.</span><span>
</span><span id="line-458"></span><span class="hs-comment">--</span><span>
</span><span id="line-459"></span><span class="hs-comment">-- Since 3.2.8</span><span>
</span><span id="line-460"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setGracefulShutdownTimeout"><span class="hs-identifier hs-type">setGracefulShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-461"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-462"></span><span id="setGracefulShutdownTimeout"><span class="annot"><span class="annottext">setGracefulShutdownTimeout :: Maybe Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setGracefulShutdownTimeout"><span class="hs-identifier hs-var hs-var">setGracefulShutdownTimeout</span></a></span></span><span> </span><span id="local-6989586621679113303"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679113303"><span class="hs-identifier hs-var">time</span></a></span></span><span> </span><span id="local-6989586621679113304"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113304"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113304"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulShutdownTimeout"><span class="hs-identifier hs-var">settingsGracefulShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113303"><span class="hs-identifier hs-type">time</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="hs-comment">-- | Set the maximum header size that Warp will tolerate when using HTTP/1.x.</span><span>
</span><span id="line-465"></span><span class="hs-comment">--</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- Since 3.3.8</span><span>
</span><span id="line-467"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setMaxTotalHeaderLength"><span class="hs-identifier hs-type">setMaxTotalHeaderLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-468"></span><span id="setMaxTotalHeaderLength"><span class="annot"><span class="annottext">setMaxTotalHeaderLength :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setMaxTotalHeaderLength"><span class="hs-identifier hs-var hs-var">setMaxTotalHeaderLength</span></a></span></span><span> </span><span id="local-6989586621679113305"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113305"><span class="hs-identifier hs-var">maxTotalHeaderLength</span></a></span></span><span> </span><span id="local-6989586621679113306"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113306"><span class="hs-identifier hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113306"><span class="hs-identifier hs-var">settings</span></a></span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaxTotalHeaderLength"><span class="hs-identifier hs-var">settingsMaxTotalHeaderLength</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113305"><span class="hs-identifier hs-type">maxTotalHeaderLength</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="hs-comment">-- | Setting the header value of Alternative Services (AltSvc:).</span><span>
</span><span id="line-473"></span><span class="hs-comment">--</span><span>
</span><span id="line-474"></span><span class="hs-comment">-- Since 3.3.11</span><span>
</span><span id="line-475"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setAltSvc"><span class="hs-identifier hs-type">setAltSvc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-476"></span><span id="setAltSvc"><span class="annot"><span class="annottext">setAltSvc :: ByteString -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setAltSvc"><span class="hs-identifier hs-var hs-var">setAltSvc</span></a></span></span><span> </span><span id="local-6989586621679113308"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679113308"><span class="hs-identifier hs-var">altsvc</span></a></span></span><span> </span><span id="local-6989586621679113309"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113309"><span class="hs-identifier hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113309"><span class="hs-identifier hs-var">settings</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsAltSvc"><span class="hs-identifier hs-var">settingsAltSvc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679113308"><span class="hs-identifier hs-type">altsvc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-comment">-- | Set the maximum buffer size for sending `Builder` responses.</span><span>
</span><span id="line-479"></span><span class="hs-comment">--</span><span>
</span><span id="line-480"></span><span class="hs-comment">-- Since 3.3.22</span><span>
</span><span id="line-481"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setMaxBuilderResponseBufferSize"><span class="hs-identifier hs-type">setMaxBuilderResponseBufferSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-482"></span><span id="setMaxBuilderResponseBufferSize"><span class="annot"><span class="annottext">setMaxBuilderResponseBufferSize :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setMaxBuilderResponseBufferSize"><span class="hs-identifier hs-var hs-var">setMaxBuilderResponseBufferSize</span></a></span></span><span> </span><span id="local-6989586621679113311"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113311"><span class="hs-identifier hs-var">maxRspBufSize</span></a></span></span><span> </span><span id="local-6989586621679113312"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113312"><span class="hs-identifier hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113312"><span class="hs-identifier hs-var">settings</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsMaxBuilderResponseBufferSize"><span class="hs-identifier hs-var">settingsMaxBuilderResponseBufferSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113311"><span class="hs-identifier hs-type">maxRspBufSize</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="hs-comment">-- | Explicitly pause the slowloris timeout.</span><span>
</span><span id="line-485"></span><span class="hs-comment">--</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- This is useful for cases where you partially consume a request body. For</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- more information, see &lt;https://github.com/yesodweb/wai/issues/351&gt;</span><span>
</span><span id="line-488"></span><span class="hs-comment">--</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- Since 3.0.10</span><span>
</span><span id="line-490"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#pauseTimeout"><span class="hs-identifier hs-type">pauseTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span id="pauseTimeout"><span class="annot"><span class="annottext">pauseTimeout :: Request -&gt; IO ()
</span><a href="Network.Wai.Handler.Warp.html#pauseTimeout"><span class="hs-identifier hs-var hs-var">pauseTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; Maybe (IO ()) -&gt; IO ()
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (IO ()) -&gt; IO ())
-&gt; (Request -&gt; Maybe (IO ())) -&gt; Request -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Key (IO ()) -&gt; Vault -&gt; Maybe (IO ())
forall a. Key a -&gt; Vault -&gt; Maybe a
</span><span class="hs-identifier hs-var">Vault.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key (IO ())
</span><a href="Network.Wai.Handler.Warp.Request.html#pauseTimeoutKey"><span class="hs-identifier hs-var">pauseTimeoutKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Vault -&gt; Maybe (IO ()))
-&gt; (Request -&gt; Vault) -&gt; Request -&gt; Maybe (IO ())
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; Vault
</span><span class="hs-identifier hs-var">vault</span></span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span class="hs-comment">-- | Getting file information of the target file.</span><span>
</span><span id="line-494"></span><span class="hs-comment">--</span><span>
</span><span id="line-495"></span><span class="hs-comment">--   This function first uses a stat(2) or similar system call</span><span>
</span><span id="line-496"></span><span class="hs-comment">--   to obtain information of the target file, then registers</span><span>
</span><span id="line-497"></span><span class="hs-comment">--   it into the internal cache.</span><span>
</span><span id="line-498"></span><span class="hs-comment">--   From the next time, the information is obtained</span><span>
</span><span id="line-499"></span><span class="hs-comment">--   from the cache. This reduces the overhead to call the system call.</span><span>
</span><span id="line-500"></span><span class="hs-comment">--   The internal cache is refreshed every duration specified by</span><span>
</span><span id="line-501"></span><span class="hs-comment">--   'setFileInfoCacheDuration'.</span><span>
</span><span id="line-502"></span><span class="hs-comment">--</span><span>
</span><span id="line-503"></span><span class="hs-comment">--   This function throws an 'IO' exception if the information is not</span><span>
</span><span id="line-504"></span><span class="hs-comment">--   available. For instance, the target file does not exist.</span><span>
</span><span id="line-505"></span><span class="hs-comment">--   If this function is used an a Request generated by a WAI</span><span>
</span><span id="line-506"></span><span class="hs-comment">--   backend besides Warp, it also throws an 'IO' exception.</span><span>
</span><span id="line-507"></span><span class="hs-comment">--</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- Since 3.1.10</span><span>
</span><span id="line-509"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getFileInfo"><span class="hs-identifier hs-type">getFileInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.FileInfoCache.html#FileInfo"><span class="hs-identifier hs-type">FileInfo</span></a></span><span>
</span><span id="line-510"></span><span id="getFileInfo"><span class="annot"><span class="annottext">getFileInfo :: Request -&gt; [Char] -&gt; IO FileInfo
</span><a href="Network.Wai.Handler.Warp.html#getFileInfo"><span class="hs-identifier hs-var hs-var">getFileInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; IO FileInfo)
-&gt; Maybe ([Char] -&gt; IO FileInfo) -&gt; [Char] -&gt; IO FileInfo
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOError -&gt; IO FileInfo
forall (m :: * -&gt; *) e a. (MonadIO m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; IOError
</span><span class="hs-identifier hs-var">userError</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;getFileInfo&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe ([Char] -&gt; IO FileInfo) -&gt; [Char] -&gt; IO FileInfo)
-&gt; (Request -&gt; Maybe ([Char] -&gt; IO FileInfo))
-&gt; Request
-&gt; [Char]
-&gt; IO FileInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Key ([Char] -&gt; IO FileInfo)
-&gt; Vault -&gt; Maybe ([Char] -&gt; IO FileInfo)
forall a. Key a -&gt; Vault -&gt; Maybe a
</span><span class="hs-identifier hs-var">Vault.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key ([Char] -&gt; IO FileInfo)
</span><a href="Network.Wai.Handler.Warp.Request.html#getFileInfoKey"><span class="hs-identifier hs-var">getFileInfoKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Vault -&gt; Maybe ([Char] -&gt; IO FileInfo))
-&gt; (Request -&gt; Vault) -&gt; Request -&gt; Maybe ([Char] -&gt; IO FileInfo)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; Vault
</span><span class="hs-identifier hs-var">vault</span></span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span class="hs-comment">-- | A timeout to limit the time (in milliseconds) waiting for</span><span>
</span><span id="line-513"></span><span class="hs-comment">--   FIN for HTTP/1.x. 0 means uses immediate close.</span><span>
</span><span id="line-514"></span><span class="hs-comment">--   Default: 0.</span><span>
</span><span id="line-515"></span><span class="hs-comment">--</span><span>
</span><span id="line-516"></span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-517"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setGracefulCloseTimeout1"><span class="hs-identifier hs-type">setGracefulCloseTimeout1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-518"></span><span id="setGracefulCloseTimeout1"><span class="annot"><span class="annottext">setGracefulCloseTimeout1 :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setGracefulCloseTimeout1"><span class="hs-identifier hs-var hs-var">setGracefulCloseTimeout1</span></a></span></span><span> </span><span id="local-6989586621679113321"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113321"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113322"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113322"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113322"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout1"><span class="hs-identifier hs-var">settingsGracefulCloseTimeout1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113321"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span class="hs-comment">-- | A timeout to limit the time (in milliseconds) waiting for</span><span>
</span><span id="line-521"></span><span class="hs-comment">--   FIN for HTTP/1.x. 0 means uses immediate close.</span><span>
</span><span id="line-522"></span><span class="hs-comment">--</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-524"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getGracefulCloseTimeout1"><span class="hs-identifier hs-type">getGracefulCloseTimeout1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-525"></span><span id="getGracefulCloseTimeout1"><span class="annot"><span class="annottext">getGracefulCloseTimeout1 :: Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.html#getGracefulCloseTimeout1"><span class="hs-identifier hs-var hs-var">getGracefulCloseTimeout1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout1"><span class="hs-identifier hs-var">settingsGracefulCloseTimeout1</span></a></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span class="hs-comment">-- | A timeout to limit the time (in milliseconds) waiting for</span><span>
</span><span id="line-528"></span><span class="hs-comment">--   FIN for HTTP/2. 0 means uses immediate close.</span><span>
</span><span id="line-529"></span><span class="hs-comment">--   Default: 2000.</span><span>
</span><span id="line-530"></span><span class="hs-comment">--</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-532"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#setGracefulCloseTimeout2"><span class="hs-identifier hs-type">setGracefulCloseTimeout2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span>
</span><span id="line-533"></span><span id="setGracefulCloseTimeout2"><span class="annot"><span class="annottext">setGracefulCloseTimeout2 :: Int -&gt; Settings -&gt; Settings
</span><a href="Network.Wai.Handler.Warp.html#setGracefulCloseTimeout2"><span class="hs-identifier hs-var hs-var">setGracefulCloseTimeout2</span></a></span></span><span> </span><span id="local-6989586621679113324"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113324"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679113325"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113325"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679113325"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout2"><span class="hs-identifier hs-var">settingsGracefulCloseTimeout2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679113324"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-comment">-- | A timeout to limit the time (in milliseconds) waiting for</span><span>
</span><span id="line-536"></span><span class="hs-comment">--   FIN for HTTP/2. 0 means uses immediate close.</span><span>
</span><span id="line-537"></span><span class="hs-comment">--</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-539"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#getGracefulCloseTimeout2"><span class="hs-identifier hs-type">getGracefulCloseTimeout2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Network.Wai.Handler.Warp.Settings.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-540"></span><span id="getGracefulCloseTimeout2"><span class="annot"><span class="annottext">getGracefulCloseTimeout2 :: Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.html#getGracefulCloseTimeout2"><span class="hs-identifier hs-var hs-var">getGracefulCloseTimeout2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Int
</span><a href="Network.Wai.Handler.Warp.Settings.html#settingsGracefulCloseTimeout2"><span class="hs-identifier hs-var">settingsGracefulCloseTimeout2</span></a></span><span class="hs-cpp">

#ifdef MIN_VERSION_crypton_x509
</span><span class="hs-comment">-- | Getting information of client certificate.</span><span>
</span><span id="line-544"></span><span class="hs-comment">--</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- Since 3.3.5</span><span>
</span><span id="line-546"></span><span class="annot"><a href="Network.Wai.Handler.Warp.html#clientCertificate"><span class="hs-identifier hs-type">clientCertificate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CertificateChain</span></span><span>
</span><span id="line-547"></span><span id="clientCertificate"><span class="annot"><span class="annottext">clientCertificate :: Request -&gt; Maybe CertificateChain
</span><a href="Network.Wai.Handler.Warp.html#clientCertificate"><span class="hs-identifier hs-var hs-var">clientCertificate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe CertificateChain) -&gt; Maybe CertificateChain
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe CertificateChain) -&gt; Maybe CertificateChain)
-&gt; (Request -&gt; Maybe (Maybe CertificateChain))
-&gt; Request
-&gt; Maybe CertificateChain
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Key (Maybe CertificateChain)
-&gt; Vault -&gt; Maybe (Maybe CertificateChain)
forall a. Key a -&gt; Vault -&gt; Maybe a
</span><span class="hs-identifier hs-var">Vault.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key (Maybe CertificateChain)
</span><a href="Network.Wai.Handler.Warp.Request.html#getClientCertificateKey"><span class="hs-identifier hs-var">getClientCertificateKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Vault -&gt; Maybe (Maybe CertificateChain))
-&gt; (Request -&gt; Vault) -&gt; Request -&gt; Maybe (Maybe CertificateChain)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; Vault
</span><span class="hs-identifier hs-var">vault</span></span><span class="hs-cpp">
#endif
</span></pre></body></html>