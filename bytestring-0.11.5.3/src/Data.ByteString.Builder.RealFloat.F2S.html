<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE BangPatterns, MagicHash #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Module      : Data.ByteString.Builder.RealFloat.F2S</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Copyright   : (c) Lawrence Wu 2021</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- License     : BSD-style</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Maintainer  : lawrencejwu@gmail.com</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Implementation of float-to-string conversion</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.ByteString.Builder.RealFloat.F2S</span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier">FloatingDecimal</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s"><span class="hs-identifier">f2s</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2Intermediate"><span class="hs-identifier">f2Intermediate</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Arrow.html#/Control.Arrow.html"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Arrow.html#first/Control.Arrow.html#first"><span class="hs-identifier">first</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Bits.html#/Data.Bits.html"><span class="hs-identifier">Data.Bits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%7C./GHC.Bits.html#.%7C."><span class="hs-operator">(.|.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%26./GHC.Bits.html#.%26."><span class="hs-operator">(.&amp;.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftL/GHC.Bits.html#unsafeShiftL"><span class="hs-identifier">unsafeShiftL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftR/GHC.Bits.html#unsafeShiftR"><span class="hs-identifier">unsafeShiftR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.Internal.html"><span class="hs-identifier">Data.ByteString.Builder.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.Internal.html#Builder"><span class="hs-identifier">Builder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.Prim.html"><span class="hs-identifier">Data.ByteString.Builder.Prim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.Prim.html#primBounded"><span class="hs-identifier">primBounded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html"><span class="hs-identifier">Data.ByteString.Builder.RealFloat.Internal</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#/GHC.Int.html"><span class="hs-identifier">GHC.Int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier">Int32</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#/GHC.Word.html"><span class="hs-identifier">GHC.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier">Word32</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word64/GHC.Word.html#Word64"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-comment">-- See Data.ByteString.Builder.RealFloat.TableGenerator for a high-level</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- explanation of the ryu algorithm</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-comment">-- | Table of 2^k / 5^q + 1</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- Byte-swapped version of</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- &gt; fmap (finv float_pow5_inv_bitcount) [0..float_max_inv_split]</span><span>
</span><span id="line-31"></span><span class="hs-comment">--</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- Displayed here as 2 Word64 table values per line</span><span>
</span><span id="line-33"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_pow5_inv_split"><span class="hs-identifier hs-type">float_pow5_inv_split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span>
</span><span id="line-34"></span><span id="float_pow5_inv_split"><span class="annot"><span class="annottext">float_pow5_inv_split :: Addr
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_pow5_inv_split"><span class="hs-identifier hs-var hs-var">float_pow5_inv_split</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr# -&gt; Addr
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#Addr"><span class="hs-identifier hs-var">Addr</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="annottext">Addr#
</span><span class="hs-string">&quot;\x01\x00\x00\x00\x00\x00\x00\x08\x67\x66\x66\x66\x66\x66\x66\x06\
  \\xb9\x1e\x85\xeb\x51\xb8\x1e\x05\xfa\x7e\x6a\xbc\x74\x93\x18\x04\
  \\x2a\xcb\x10\xc7\xba\xb8\x8d\x06\x22\x3c\xda\x38\x62\x2d\x3e\x05\
  \\x4e\x63\x7b\x2d\xe8\xbd\x31\x04\x16\xd2\x2b\xaf\xa6\xfc\xb5\x06\
  \\x78\x0e\x23\x8c\xb8\x63\x5e\x05\x2d\xa5\xb5\x09\xfa\x82\x4b\x04\
  \\xae\x6e\xef\x75\xf6\x37\xdf\x06\x58\x25\x59\x5e\xf8\x5f\x7f\x05\
  \\x47\x84\x7a\x4b\x60\xe6\x65\x04\x71\xa0\x5d\x12\x9a\x70\x09\x07\
  \\xc1\xe6\x4a\xa8\xe1\x26\xa1\x05\x67\x85\xd5\xb9\xe7\xeb\x80\x04\
  \\x0b\x6f\x22\xf6\xa5\xac\x34\x07\xa3\x25\xb5\x91\x51\xbd\xc3\x05\
  \\xe9\xea\x90\x74\x74\x97\x9c\x04\x0e\xab\xb4\xed\x53\xf2\x60\x07\
  \\xd8\x88\x90\x24\x43\x28\xe7\x05\xe0\xd3\xa6\x83\x02\xed\xb8\x04\
  \\x66\xb9\xd7\x05\x04\x48\x8e\x07\x52\x94\xac\x04\xd0\x6c\x0b\x06\
  \\xdb\xa9\x23\x6a\xa6\xf0\xd5\x04\x2b\x76\x9f\x76\x3d\xb4\xbc\x07\
  \\xef\xc4\xb2\x2b\x31\x90\x30\x06\xf3\x03\x8f\xbc\x8d\xa6\xf3\x04\
  \\x51\x06\x18\x94\xaf\x3d\xec\x07\xda\xd1\xac\xa9\xbf\x97\x56\x06\
  \\xe2\xa7\xf0\xba\xff\x12\x12\x05&quot;#</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- | Table of 5^(-e2-q) / 2^k + 1</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- Byte-swapped version of</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- &gt; fmap (fnorm float_pow5_bitcount) [0..float_max_split]</span><span>
</span><span id="line-55"></span><span class="hs-comment">--</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- Displayed here as 2 Word64 table values per line</span><span>
</span><span id="line-57"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_pow5_split"><span class="hs-identifier hs-type">float_pow5_split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span>
</span><span id="line-58"></span><span id="float_pow5_split"><span class="annot"><span class="annottext">float_pow5_split :: Addr
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_pow5_split"><span class="hs-identifier hs-var hs-var">float_pow5_split</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr# -&gt; Addr
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#Addr"><span class="hs-identifier hs-var">Addr</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="annottext">Addr#
</span><span class="hs-string">&quot;\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x14\
  \\x00\x00\x00\x00\x00\x00\x00\x19\x00\x00\x00\x00\x00\x00\x40\x1f\
  \\x00\x00\x00\x00\x00\x00\x88\x13\x00\x00\x00\x00\x00\x00\x6a\x18\
  \\x00\x00\x00\x00\x00\x80\x84\x1e\x00\x00\x00\x00\x00\xd0\x12\x13\
  \\x00\x00\x00\x00\x00\x84\xd7\x17\x00\x00\x00\x00\x00\x65\xcd\x1d\
  \\x00\x00\x00\x00\x20\x5f\xa0\x12\x00\x00\x00\x00\xe8\x76\x48\x17\
  \\x00\x00\x00\x00\xa2\x94\x1a\x1d\x00\x00\x00\x40\xe5\x9c\x30\x12\
  \\x00\x00\x00\x90\x1e\xc4\xbc\x16\x00\x00\x00\x34\x26\xf5\x6b\x1c\
  \\x00\x00\x80\xe0\x37\x79\xc3\x11\x00\x00\xa0\xd8\x85\x57\x34\x16\
  \\x00\x00\xc8\x4e\x67\x6d\xc1\x1b\x00\x00\x3d\x91\x60\xe4\x58\x11\
  \\x00\x40\x8c\xb5\x78\x1d\xaf\x15\x00\x50\xef\xe2\xd6\xe4\x1a\x1b\
  \\x00\x92\xd5\x4d\x06\xcf\xf0\x10\x80\xf6\x4a\xe1\xc7\x02\x2d\x15\
  \\x20\xb4\x9d\xd9\x79\x43\x78\x1a\x94\x90\x02\x28\x2c\x2a\x8b\x10\
  \\xb9\x34\x03\x32\xb7\xf4\xad\x14\xe7\x01\x84\xfe\xe4\x71\xd9\x19\
  \\x30\x81\x12\x1f\x2f\xe7\x27\x10\x7c\x21\xd7\xe6\xfa\xe0\x31\x14\
  \\xdb\xe9\x8c\xa0\x39\x59\x3e\x19\x52\x24\xb0\x08\x88\xef\x8d\x1f\
  \\xb3\x16\x6e\x05\xb5\xb5\xb8\x13\x60\x9c\xc9\x46\x22\xe3\xa6\x18\
  \\x78\x03\x7c\xd8\xea\x9b\xd0\x1e\x2b\x82\x4d\xc7\x72\x61\x42\x13\
  \\xb6\xe2\x20\x79\xcf\xf9\x12\x18\x64\x1b\x69\x57\x43\xb8\x17\x1e\
  \\x1e\xb1\xa1\x16\x2a\xd3\xce\x12\x66\x1d\x4a\x9c\xf4\x87\x82\x17\
  \\xbf\xa4\x5c\xc3\xf1\x29\x63\x1d\xf7\xe6\x19\x1a\x37\xfa\x5d\x12\
  \\xb5\x60\xa0\xe0\xc4\x78\xf5\x16\xe3\x78\xc8\x18\xf6\xd6\xb2\x1c\
  \\x8d\x4b\x7d\xcf\x59\xc6\xef\x11\x71\x9e\x5c\x43\xf0\xb7\x6b\x16\
  \\x0d\xc6\x33\x54\xec\xa5\x06\x1c&quot;#</span></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | Number of mantissa bits of a 32-bit float. The number of significant bits</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- (floatDigits (undefined :: Float)) is 24 since we have a leading 1 for</span><span>
</span><span id="line-86"></span><span class="hs-comment">-- normal floats and 0 for subnormal floats</span><span>
</span><span id="line-87"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-type">float_mantissa_bits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-88"></span><span id="float_mantissa_bits"><span class="annot"><span class="annottext">float_mantissa_bits :: Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var hs-var">float_mantissa_bits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">23</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="annot"><span class="hs-comment">-- | Number of exponent bits of a 32-bit float</span></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_exponent_bits"><span class="hs-identifier hs-type">float_exponent_bits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-92"></span><span id="float_exponent_bits"><span class="annot"><span class="annottext">float_exponent_bits :: Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_exponent_bits"><span class="hs-identifier hs-var hs-var">float_exponent_bits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="annot"><span class="hs-comment">-- | Bias in encoded 32-bit float representation (2^7 - 1)</span></span><span>
</span><span id="line-95"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_bias"><span class="hs-identifier hs-type">float_bias</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-96"></span><span id="float_bias"><span class="annot"><span class="annottext">float_bias :: Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_bias"><span class="hs-identifier hs-var hs-var">float_bias</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">127</span></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">data</span><span> </span><span id="FloatingDecimal"><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-var">FloatingDecimal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FloatingDecimal"><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-var">FloatingDecimal</span></a></span></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="fmantissa"><span class="annot"><span class="annottext">FloatingDecimal -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#fmantissa"><span class="hs-identifier hs-var hs-var">fmantissa</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fexponent"><span class="annot"><span class="annottext">FloatingDecimal -&gt; Int32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#fexponent"><span class="hs-identifier hs-var hs-var">fexponent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679107211"><span id="local-6989586621679107219"><span id="local-6989586621679107223"><span class="annot"><span class="annottext">Int -&gt; FloatingDecimal -&gt; ShowS
[FloatingDecimal] -&gt; ShowS
FloatingDecimal -&gt; String
(Int -&gt; FloatingDecimal -&gt; ShowS)
-&gt; (FloatingDecimal -&gt; String)
-&gt; ([FloatingDecimal] -&gt; ShowS)
-&gt; Show FloatingDecimal
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FloatingDecimal -&gt; ShowS
showsPrec :: Int -&gt; FloatingDecimal -&gt; ShowS
$cshow :: FloatingDecimal -&gt; String
show :: FloatingDecimal -&gt; String
$cshowList :: [FloatingDecimal] -&gt; ShowS
showList :: [FloatingDecimal] -&gt; ShowS
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107227"><span id="local-6989586621679107233"><span class="annot"><span class="annottext">FloatingDecimal -&gt; FloatingDecimal -&gt; Bool
(FloatingDecimal -&gt; FloatingDecimal -&gt; Bool)
-&gt; (FloatingDecimal -&gt; FloatingDecimal -&gt; Bool)
-&gt; Eq FloatingDecimal
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FloatingDecimal -&gt; FloatingDecimal -&gt; Bool
== :: FloatingDecimal -&gt; FloatingDecimal -&gt; Bool
$c/= :: FloatingDecimal -&gt; FloatingDecimal -&gt; Bool
/= :: FloatingDecimal -&gt; FloatingDecimal -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#Eq/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Multiply a 32-bit number with a 64-bit number while keeping the upper 64</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- bits. Then shift by specified amount minus 32</span><span>
</span><span id="line-105"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulShift32"><span class="hs-identifier hs-type">mulShift32</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word64/GHC.Word.html#Word64"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-106"></span><span id="mulShift32"><span class="annot"><span class="annottext">mulShift32 :: Word32 -&gt; Word64 -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulShift32"><span class="hs-identifier hs-var hs-var">mulShift32</span></a></span></span><span> </span><span id="local-6989586621679107238"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107238"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679107239"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107239"><span class="hs-identifier hs-var">factor</span></a></span></span><span> </span><span id="local-6989586621679107240"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107240"><span class="hs-identifier hs-var">shift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107245"><span class="annot"><span class="annottext">factorLo :: Word64
</span><a href="#local-6989586621679107245"><span class="hs-identifier hs-var hs-var">factorLo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107239"><span class="hs-identifier hs-var">factor</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%26./GHC.Bits.html#.%26."><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word64
forall a. (Bits a, Integral a) =&gt; Int -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#mask"><span class="hs-identifier hs-var">mask</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-108"></span><span>      </span><span id="local-6989586621679107248"><span class="annot"><span class="annottext">factorHi :: Word64
</span><a href="#local-6989586621679107248"><span class="hs-identifier hs-var hs-var">factorHi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107239"><span class="hs-identifier hs-var">factor</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int -&gt; Word64
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftR/GHC.Bits.html#unsafeShiftR"><span class="hs-operator hs-var">`unsafeShiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-109"></span><span>      </span><span id="local-6989586621679107251"><span class="annot"><span class="annottext">bits0 :: Word64
</span><a href="#local-6989586621679107251"><span class="hs-identifier hs-var hs-var">bits0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#word32ToWord64"><span class="hs-identifier hs-var">word32ToWord64</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107238"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107245"><span class="hs-identifier hs-var">factorLo</span></a></span><span>
</span><span id="line-110"></span><span>      </span><span id="local-6989586621679107255"><span class="annot"><span class="annottext">bits1 :: Word64
</span><a href="#local-6989586621679107255"><span class="hs-identifier hs-var hs-var">bits1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#word32ToWord64"><span class="hs-identifier hs-var">word32ToWord64</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107238"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107248"><span class="hs-identifier hs-var">factorHi</span></a></span><span>
</span><span id="line-111"></span><span>      </span><span id="local-6989586621679107258"><span class="annot"><span class="annottext">total :: Word64
</span><a href="#local-6989586621679107258"><span class="hs-identifier hs-var hs-var">total</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107251"><span class="hs-identifier hs-var">bits0</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int -&gt; Word64
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftR/GHC.Bits.html#unsafeShiftR"><span class="hs-operator hs-var">`unsafeShiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107255"><span class="hs-identifier hs-var">bits1</span></a></span><span>
</span><span id="line-112"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#word64ToWord32"><span class="hs-identifier hs-var">word64ToWord32</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Word32) -&gt; Word64 -&gt; Word32
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679107258"><span class="hs-identifier hs-var">total</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int -&gt; Word64
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftR/GHC.Bits.html#unsafeShiftR"><span class="hs-operator hs-var">`unsafeShiftR`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107240"><span class="hs-identifier hs-var">shift</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><span class="hs-comment">-- | Index into the 64-bit word lookup table float_pow5_inv_split</span></span><span>
</span><span id="line-115"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#get_float_pow5_inv_split"><span class="hs-identifier hs-type">get_float_pow5_inv_split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word64/GHC.Word.html#Word64"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-116"></span><span id="get_float_pow5_inv_split"><span class="annot"><span class="annottext">get_float_pow5_inv_split :: Int -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#get_float_pow5_inv_split"><span class="hs-identifier hs-var hs-var">get_float_pow5_inv_split</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span id="local-6989586621679107262"><span class="annot"><span class="annottext">Addr#
</span><a href="#local-6989586621679107262"><span class="hs-identifier hs-var">arr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_pow5_inv_split"><span class="hs-identifier hs-var">float_pow5_inv_split</span></a></span><span>
</span><span id="line-118"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Addr# -&gt; Int -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#getWord64At"><span class="hs-identifier hs-var">getWord64At</span></a></span><span> </span><span class="annot"><span class="annottext">Addr#
</span><a href="#local-6989586621679107262"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="annot"><span class="hs-comment">-- | Index into the 64-bit word lookup table float_pow5_split</span></span><span>
</span><span id="line-121"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#get_float_pow5_split"><span class="hs-identifier hs-type">get_float_pow5_split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word64/GHC.Word.html#Word64"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-122"></span><span id="get_float_pow5_split"><span class="annot"><span class="annottext">get_float_pow5_split :: Int -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#get_float_pow5_split"><span class="hs-identifier hs-var hs-var">get_float_pow5_split</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span id="local-6989586621679107265"><span class="annot"><span class="annottext">Addr#
</span><a href="#local-6989586621679107265"><span class="hs-identifier hs-var">arr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_pow5_split"><span class="hs-identifier hs-var">float_pow5_split</span></a></span><span>
</span><span id="line-124"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Addr# -&gt; Int -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#getWord64At"><span class="hs-identifier hs-var">getWord64At</span></a></span><span> </span><span class="annot"><span class="annottext">Addr#
</span><a href="#local-6989586621679107265"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="annot"><span class="hs-comment">-- | Take the high bits of m * 2^k / 5^q / 2^-e2+q+k</span></span><span>
</span><span id="line-127"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5InvDivPow2"><span class="hs-identifier hs-type">mulPow5InvDivPow2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-128"></span><span id="mulPow5InvDivPow2"><span class="annot"><span class="annottext">mulPow5InvDivPow2 :: Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5InvDivPow2"><span class="hs-identifier hs-var hs-var">mulPow5InvDivPow2</span></a></span></span><span> </span><span id="local-6989586621679107267"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107267"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679107268"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107268"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679107269"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107269"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word64 -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulShift32"><span class="hs-identifier hs-var">mulShift32</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107267"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#get_float_pow5_inv_split"><span class="hs-identifier hs-var">get_float_pow5_inv_split</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107268"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107269"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="annot"><span class="hs-comment">-- | Take the high bits of m * 5^-e2-q / 2^k / 2^q-k</span></span><span>
</span><span id="line-131"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5DivPow2"><span class="hs-identifier hs-type">mulPow5DivPow2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Int/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-132"></span><span id="mulPow5DivPow2"><span class="annot"><span class="annottext">mulPow5DivPow2 :: Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5DivPow2"><span class="hs-identifier hs-var hs-var">mulPow5DivPow2</span></a></span></span><span> </span><span id="local-6989586621679107271"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107271"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679107272"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107272"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679107273"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107273"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word64 -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulShift32"><span class="hs-identifier hs-var">mulShift32</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107271"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word64
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#get_float_pow5_split"><span class="hs-identifier hs-var">get_float_pow5_split</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107272"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107273"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="annot"><span class="hs-comment">-- | Handle case e2 &gt;= 0</span></span><span>
</span><span id="line-135"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2dGT"><span class="hs-identifier hs-type">f2dGT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#BoundsState"><span class="hs-identifier hs-type">BoundsState</span></a></span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span id="f2dGT"><span class="annot"><span class="annottext">f2dGT :: Int32 -&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; (BoundsState Word32, Int32)
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2dGT"><span class="hs-identifier hs-var hs-var">f2dGT</span></a></span></span><span> </span><span id="local-6989586621679107275"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107275"><span class="hs-identifier hs-var">e2'</span></a></span></span><span> </span><span id="local-6989586621679107276"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107276"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621679107277"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107277"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679107278"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107278"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107279"><span class="annot"><span class="annottext">e2 :: Int
</span><a href="#local-6989586621679107279"><span class="hs-identifier hs-var hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#int32ToInt"><span class="hs-identifier hs-var">int32ToInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107275"><span class="hs-identifier hs-var">e2'</span></a></span><span>
</span><span id="line-138"></span><span>      </span><span class="hs-comment">-- q = e10 = log_10(2^e2)</span><span>
</span><span id="line-139"></span><span>      </span><span id="local-6989586621679107281"><span class="annot"><span class="annottext">q :: Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#log10pow2"><span class="hs-identifier hs-var">log10pow2</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107279"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-140"></span><span>      </span><span class="hs-comment">-- k = B0 + log_2(5^q)</span><span>
</span><span id="line-141"></span><span>      </span><span id="local-6989586621679107286"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621679107286"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.TableGenerator.html#float_pow5_inv_bitcount"><span class="hs-identifier hs-var">float_pow5_inv_bitcount</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#pow5bits"><span class="hs-identifier hs-var">pow5bits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-142"></span><span>      </span><span id="local-6989586621679107292"><span class="annot"><span class="annottext">i :: Int
</span><a href="#local-6989586621679107292"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107279"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107286"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-143"></span><span>      </span><span class="hs-comment">-- (u, v, w) * 2^k / 5^q / 2^-e2+q+k</span><span>
</span><span id="line-144"></span><span>      </span><span id="local-6989586621679107293"><span class="annot"><span class="annottext">u' :: Word32
</span><a href="#local-6989586621679107293"><span class="hs-identifier hs-var hs-var">u'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5InvDivPow2"><span class="hs-identifier hs-var">mulPow5InvDivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107276"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107292"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-145"></span><span>      </span><span id="local-6989586621679107294"><span class="annot"><span class="annottext">v' :: Word32
</span><a href="#local-6989586621679107294"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5InvDivPow2"><span class="hs-identifier hs-var">mulPow5InvDivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107277"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107292"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-146"></span><span>      </span><span id="local-6989586621679107295"><span class="annot"><span class="annottext">w' :: Word32
</span><a href="#local-6989586621679107295"><span class="hs-identifier hs-var hs-var">w'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5InvDivPow2"><span class="hs-identifier hs-var">mulPow5InvDivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107278"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107292"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107311"><span class="annot"><span class="annottext">lastRemoved :: Word32
</span><a href="#local-6989586621679107311"><span class="hs-identifier hs-var hs-var">lastRemoved</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D/GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%26%26/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#fquot10"><span class="hs-identifier hs-var">fquot10</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107295"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#fquot10"><span class="hs-identifier hs-var">fquot10</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107293"><span class="hs-identifier hs-var">u'</span></a></span><span>
</span><span id="line-149"></span><span>          </span><span class="hs-comment">-- We need to know one removed digit even if we are not going to loop</span><span>
</span><span id="line-150"></span><span>          </span><span class="hs-comment">-- below. We could use q = X - 1 above, except that would require 33</span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-comment">-- bits for the result, and we've found that 32-bit arithmetic is</span><span>
</span><span id="line-152"></span><span>          </span><span class="hs-comment">-- faster even on 64-bit machines.</span><span>
</span><span id="line-153"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107321"><span class="annot"><span class="annottext">l :: Int
</span><a href="#local-6989586621679107321"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.TableGenerator.html#float_pow5_inv_bitcount"><span class="hs-identifier hs-var">float_pow5_inv_bitcount</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#pow5bits"><span class="hs-identifier hs-var">pow5bits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-154"></span><span>                </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#frem10"><span class="hs-identifier hs-var">frem10</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5InvDivPow2"><span class="hs-identifier hs-var">mulPow5InvDivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107277"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107279"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107321"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-156"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span id="local-6989586621679107336"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107336"><span class="hs-identifier hs-var">vvTrailing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107337"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107337"><span class="hs-identifier hs-var">vuTrailing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107338"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107338"><span class="hs-identifier hs-var">vw'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>          </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C/GHC.Classes.html#%3C"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%26%26/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#frem5"><span class="hs-identifier hs-var">frem5</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107277"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-159"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Int -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#multipleOfPowerOf5"><span class="hs-identifier hs-var">multipleOfPowerOf5</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107277"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107295"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C/GHC.Classes.html#%3C"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%26%26/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#acceptBounds"><span class="hs-identifier hs-var">acceptBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107277"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-161"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Int -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#multipleOfPowerOf5"><span class="hs-identifier hs-var">multipleOfPowerOf5</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107276"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107295"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C/GHC.Classes.html#%3C"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span>
</span><span id="line-163"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107295"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#boolToWord32"><span class="hs-identifier hs-var">boolToWord32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Int -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#multipleOfPowerOf5"><span class="hs-identifier hs-var">multipleOfPowerOf5</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107278"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-165"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107295"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
-&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; Bool -&gt; Bool -&gt; BoundsState Word32
forall a. a -&gt; a -&gt; a -&gt; a -&gt; Bool -&gt; Bool -&gt; BoundsState a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#BoundsState"><span class="hs-identifier hs-var">BoundsState</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107293"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107294"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107338"><span class="hs-identifier hs-var">vw'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107311"><span class="hs-identifier hs-var">lastRemoved</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107337"><span class="hs-identifier hs-var">vuTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107336"><span class="hs-identifier hs-var">vvTrailing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#intToInt32"><span class="hs-identifier hs-var">intToInt32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107281"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><span class="hs-comment">-- | Handle case e2 &lt; 0</span></span><span>
</span><span id="line-169"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2dLT"><span class="hs-identifier hs-type">f2dLT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#BoundsState"><span class="hs-identifier hs-type">BoundsState</span></a></span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span id="f2dLT"><span class="annot"><span class="annottext">f2dLT :: Int32 -&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; (BoundsState Word32, Int32)
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2dLT"><span class="hs-identifier hs-var hs-var">f2dLT</span></a></span></span><span> </span><span id="local-6989586621679107347"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107347"><span class="hs-identifier hs-var">e2'</span></a></span></span><span> </span><span id="local-6989586621679107348"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107348"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621679107349"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107349"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679107350"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107350"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107351"><span class="annot"><span class="annottext">e2 :: Int
</span><a href="#local-6989586621679107351"><span class="hs-identifier hs-var hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#int32ToInt"><span class="hs-identifier hs-var">int32ToInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107347"><span class="hs-identifier hs-var">e2'</span></a></span><span>
</span><span id="line-172"></span><span>      </span><span id="local-6989586621679107353"><span class="annot"><span class="annottext">q :: Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#log10pow5"><span class="hs-identifier hs-var">log10pow5</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107351"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>      </span><span id="local-6989586621679107356"><span class="annot"><span class="annottext">e10 :: Int
</span><a href="#local-6989586621679107356"><span class="hs-identifier hs-var hs-var">e10</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107351"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span id="local-6989586621679107359"><span class="annot"><span class="annottext">i :: Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107351"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span class="hs-comment">-- k = log_2(5^-e2-q) - B1</span><span>
</span><span id="line-176"></span><span>      </span><span id="local-6989586621679107361"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621679107361"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#pow5bits"><span class="hs-identifier hs-var">pow5bits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.TableGenerator.html#float_pow5_bitcount"><span class="hs-identifier hs-var">float_pow5_bitcount</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span id="local-6989586621679107364"><span class="annot"><span class="annottext">j :: Int
</span><a href="#local-6989586621679107364"><span class="hs-identifier hs-var hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107361"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-178"></span><span>      </span><span class="hs-comment">-- (u, v, w) * 5^-e2-q / 2^k / 2^q-k</span><span>
</span><span id="line-179"></span><span>      </span><span id="local-6989586621679107365"><span class="annot"><span class="annottext">u' :: Word32
</span><a href="#local-6989586621679107365"><span class="hs-identifier hs-var hs-var">u'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5DivPow2"><span class="hs-identifier hs-var">mulPow5DivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107348"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107364"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-180"></span><span>      </span><span id="local-6989586621679107366"><span class="annot"><span class="annottext">v' :: Word32
</span><a href="#local-6989586621679107366"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5DivPow2"><span class="hs-identifier hs-var">mulPow5DivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107349"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107364"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-181"></span><span>      </span><span id="local-6989586621679107367"><span class="annot"><span class="annottext">w' :: Word32
</span><a href="#local-6989586621679107367"><span class="hs-identifier hs-var hs-var">w'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5DivPow2"><span class="hs-identifier hs-var">mulPow5DivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107350"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107364"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-182"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107376"><span class="annot"><span class="annottext">lastRemoved :: Word32
</span><a href="#local-6989586621679107376"><span class="hs-identifier hs-var hs-var">lastRemoved</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-183"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D/GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%26%26/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#fquot10"><span class="hs-identifier hs-var">fquot10</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107367"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#fquot10"><span class="hs-identifier hs-var">fquot10</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107365"><span class="hs-identifier hs-var">u'</span></a></span><span>
</span><span id="line-184"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107383"><span class="annot"><span class="annottext">j' :: Int
</span><a href="#local-6989586621679107383"><span class="hs-identifier hs-var hs-var">j'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#pow5bits"><span class="hs-identifier hs-var">pow5bits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.TableGenerator.html#float_pow5_bitcount"><span class="hs-identifier hs-var">float_pow5_bitcount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>                </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#frem10"><span class="hs-identifier hs-var">frem10</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Int -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#mulPow5DivPow2"><span class="hs-identifier hs-var">mulPow5DivPow2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107349"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107359"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107383"><span class="hs-identifier hs-var">j'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-187"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span id="local-6989586621679107399"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107399"><span class="hs-identifier hs-var">vvTrailing</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107400"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107400"><span class="hs-identifier hs-var">vuTrailing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107401"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107401"><span class="hs-identifier hs-var">vw'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-189"></span><span>          </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%26%26/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#acceptBounds"><span class="hs-identifier hs-var">acceptBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107349"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-190"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#True/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107349"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107348"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107367"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- mmShift == 1</span><span>
</span><span id="line-191"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-192"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#True/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107367"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C/GHC.Classes.html#%3C"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">31</span></span><span>
</span><span id="line-194"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Int -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#multipleOfPowerOf2"><span class="hs-identifier hs-var">multipleOfPowerOf2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107349"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107353"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107367"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-196"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#False/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107367"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
-&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; Bool -&gt; Bool -&gt; BoundsState Word32
forall a. a -&gt; a -&gt; a -&gt; a -&gt; Bool -&gt; Bool -&gt; BoundsState a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#BoundsState"><span class="hs-identifier hs-var">BoundsState</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107365"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107366"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107401"><span class="hs-identifier hs-var">vw'</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107376"><span class="hs-identifier hs-var">lastRemoved</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107400"><span class="hs-identifier hs-var">vuTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107399"><span class="hs-identifier hs-var">vvTrailing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#intToInt32"><span class="hs-identifier hs-var">intToInt32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107356"><span class="hs-identifier hs-var">e10</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">-- | Returns the decimal representation of the given mantissa and exponent of a</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- 32-bit Float using the ryu algorithm.</span><span>
</span><span id="line-201"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2d"><span class="hs-identifier hs-type">f2d</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-type">FloatingDecimal</span></a></span><span>
</span><span id="line-202"></span><span id="f2d"><span class="annot"><span class="annottext">f2d :: Word32 -&gt; Word32 -&gt; FloatingDecimal
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2d"><span class="hs-identifier hs-var hs-var">f2d</span></a></span></span><span> </span><span id="local-6989586621679107404"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107404"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679107405"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107405"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679107412"><span class="annot"><span class="annottext">mf :: Word32
</span><a href="#local-6989586621679107412"><span class="hs-identifier hs-var hs-var">mf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107405"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-204"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107404"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-205"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Word32
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftL/GHC.Bits.html#unsafeShiftL"><span class="hs-operator hs-var">`unsafeShiftL`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var">float_mantissa_bits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%7C./GHC.Bits.html#.%7C."><span class="hs-operator hs-var">.|.</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107404"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-206"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107420"><span class="annot"><span class="annottext">ef :: Int32
</span><a href="#local-6989586621679107420"><span class="hs-identifier hs-var hs-var">ef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#intToInt32"><span class="hs-identifier hs-var">intToInt32</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int32) -&gt; Int -&gt; Int32
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107405"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-207"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_bias"><span class="hs-identifier hs-var">float_bias</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var">float_mantissa_bits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#word32ToInt"><span class="hs-identifier hs-var">word32ToInt</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107405"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_bias"><span class="hs-identifier hs-var">float_bias</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var">float_mantissa_bits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107424"><span class="annot"><span class="annottext">e2 :: Int32
</span><a href="#local-6989586621679107424"><span class="hs-identifier hs-var hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107420"><span class="hs-identifier hs-var">ef</span></a></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int32 -&gt; Int32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-number">2</span></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-comment">-- Step 2. 3-tuple (u, v, w) * 2**e2</span><span>
</span><span id="line-211"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107434"><span class="annot"><span class="annottext">u :: Word32
</span><a href="#local-6989586621679107434"><span class="hs-identifier hs-var hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107412"><span class="hs-identifier hs-var">mf</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Word32
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#boolToWord32"><span class="hs-identifier hs-var">boolToWord32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107404"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D/GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107405"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107438"><span class="annot"><span class="annottext">v :: Word32
</span><a href="#local-6989586621679107438"><span class="hs-identifier hs-var hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107412"><span class="hs-identifier hs-var">mf</span></a></span><span>
</span><span id="line-213"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107443"><span class="annot"><span class="annottext">w :: Word32
</span><a href="#local-6989586621679107443"><span class="hs-identifier hs-var hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107412"><span class="hs-identifier hs-var">mf</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">2</span></span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-comment">-- Step 3. convert to decimal power base</span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span id="local-6989586621679107447"><span class="annot"><span class="annottext">BoundsState Word32
</span><a href="#local-6989586621679107447"><span class="hs-identifier hs-var">state</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107448"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107448"><span class="hs-identifier hs-var">e10</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-216"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107424"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3E%3D/GHC.Classes.html#%3E%3D"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-217"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; (BoundsState Word32, Int32)
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2dGT"><span class="hs-identifier hs-var">f2dGT</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107424"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107434"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107438"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107443"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-218"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; (BoundsState Word32, Int32)
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2dLT"><span class="hs-identifier hs-var">f2dLT</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107424"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107434"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107438"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107443"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-comment">-- Step 4: Find the shortest decimal representation in the interval of</span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-comment">-- valid representations.</span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span id="local-6989586621679107454"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107454"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107455"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107455"><span class="hs-identifier hs-var">removed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107471"><span class="annot"><span class="annottext">rounded :: BoundsState Word32 -&gt; Word32
</span><a href="#local-6989586621679107471"><span class="hs-identifier hs-var hs-var">rounded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; BoundsState Word32 -&gt; Word32
forall a. Mantissa a =&gt; Bool -&gt; BoundsState a -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#closestCorrectlyRounded"><span class="hs-identifier hs-var">closestCorrectlyRounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Bool
forall a. Mantissa a =&gt; a -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#acceptBounds"><span class="hs-identifier hs-var">acceptBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107438"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(BoundsState Word32 -&gt; Word32)
-&gt; (BoundsState Word32, Int32) -&gt; (Word32, Int32)
forall b c d. (b -&gt; c) -&gt; (b, d) -&gt; (c, d)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (b, d) (c, d)
</span><a href="../../base-4.18.2.1/src/Control.Arrow.html#first/Control.Arrow.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">BoundsState Word32 -&gt; Word32
</span><a href="#local-6989586621679107471"><span class="hs-identifier hs-var">rounded</span></a></span><span> </span><span class="annot"><span class="annottext">((BoundsState Word32, Int32) -&gt; (Word32, Int32))
-&gt; (BoundsState Word32, Int32) -&gt; (Word32, Int32)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">BoundsState Word32 -&gt; Bool
forall a. BoundsState a -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#vvIsTrailingZeros"><span class="hs-identifier hs-var">vvIsTrailingZeros</span></a></span><span> </span><span class="annot"><span class="annottext">BoundsState Word32
</span><a href="#local-6989586621679107447"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">BoundsState Word32 -&gt; Bool
forall a. BoundsState a -&gt; Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#vuIsTrailingZeros"><span class="hs-identifier hs-var">vuIsTrailingZeros</span></a></span><span> </span><span class="annot"><span class="annottext">BoundsState Word32
</span><a href="#local-6989586621679107447"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-224"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">BoundsState Word32 -&gt; (BoundsState Word32, Int32)
forall a.
(Show a, Mantissa a) =&gt;
BoundsState a -&gt; (BoundsState a, Int32)
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#trimTrailing"><span class="hs-identifier hs-var">trimTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">BoundsState Word32
</span><a href="#local-6989586621679107447"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-225"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">BoundsState Word32 -&gt; (BoundsState Word32, Int32)
forall a. Mantissa a =&gt; BoundsState a -&gt; (BoundsState a, Int32)
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#trimNoTrailing"><span class="hs-identifier hs-var">trimNoTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">BoundsState Word32
</span><a href="#local-6989586621679107447"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-226"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679107478"><span class="annot"><span class="annottext">e' :: Int32
</span><a href="#local-6989586621679107478"><span class="hs-identifier hs-var hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107448"><span class="hs-identifier hs-var">e10</span></a></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int32 -&gt; Int32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107455"><span class="hs-identifier hs-var">removed</span></a></span><span>
</span><span id="line-227"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int32 -&gt; FloatingDecimal
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-var">FloatingDecimal</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107454"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107478"><span class="hs-identifier hs-var">e'</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="annot"><span class="hs-comment">-- | Split a Float into (sign, mantissa, exponent)</span></span><span>
</span><span id="line-230"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#breakdown"><span class="hs-identifier hs-type">breakdown</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Float/GHC.Types.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Bool/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span id="breakdown"><span class="annot"><span class="annottext">breakdown :: Float -&gt; (Bool, Word32, Word32)
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#breakdown"><span class="hs-identifier hs-var hs-var">breakdown</span></a></span></span><span> </span><span id="local-6989586621679107480"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679107480"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107481"><span class="annot"><span class="annottext">bits :: Word32
</span><a href="#local-6989586621679107481"><span class="hs-identifier hs-var hs-var">bits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Float -&gt; Word32
</span><a href="../../base-4.18.2.1/src/GHC.Float.html#castFloatToWord32/GHC.Float.html#castFloatToWord32"><span class="hs-identifier hs-var">castFloatToWord32</span></a></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679107480"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-233"></span><span>      </span><span id="local-6989586621679107489"><span class="annot"><span class="annottext">sign :: Bool
</span><a href="#local-6989586621679107489"><span class="hs-identifier hs-var hs-var">sign</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107481"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Word32
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftR/GHC.Bits.html#unsafeShiftR"><span class="hs-operator hs-var">`unsafeShiftR`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var">float_mantissa_bits</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_exponent_bits"><span class="hs-identifier hs-var">float_exponent_bits</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%26./GHC.Bits.html#.%26."><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D/GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-234"></span><span>      </span><span id="local-6989586621679107493"><span class="annot"><span class="annottext">mantissa :: Word32
</span><a href="#local-6989586621679107493"><span class="hs-identifier hs-var hs-var">mantissa</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107481"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%26./GHC.Bits.html#.%26."><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a. (Bits a, Integral a) =&gt; Int -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#mask"><span class="hs-identifier hs-var">mask</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var">float_mantissa_bits</span></a></span><span>
</span><span id="line-235"></span><span>      </span><span id="local-6989586621679107498"><span class="annot"><span class="annottext">expo :: Word32
</span><a href="#local-6989586621679107498"><span class="hs-identifier hs-var hs-var">expo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107481"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int -&gt; Word32
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#unsafeShiftR/GHC.Bits.html#unsafeShiftR"><span class="hs-operator hs-var">`unsafeShiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_mantissa_bits"><span class="hs-identifier hs-var">float_mantissa_bits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Bits.html#.%26./GHC.Bits.html#.%26."><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a. (Bits a, Integral a) =&gt; Int -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#mask"><span class="hs-identifier hs-var">mask</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_exponent_bits"><span class="hs-identifier hs-var">float_exponent_bits</span></a></span><span>
</span><span id="line-236"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107489"><span class="hs-identifier hs-var">sign</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107493"><span class="hs-identifier hs-var">mantissa</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107498"><span class="hs-identifier hs-var">expo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="annot"><span class="hs-comment">-- | Dispatches to `f2d` and applies the given formatters</span></span><span>
</span><span id="line-239"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s%27"><span class="hs-pragma hs-type">f2s'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-240"></span><span id="local-6989586621679107174"><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s%27"><span class="hs-identifier hs-type">f2s'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Bool/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679107174"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#NonNumbersAndZero"><span class="hs-identifier hs-type">NonNumbersAndZero</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679107174"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Float/GHC.Types.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679107174"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-241"></span><span id="f2s%27"><span class="annot"><span class="annottext">f2s' :: forall a.
(Bool -&gt; Word32 -&gt; Int32 -&gt; a)
-&gt; (NonNumbersAndZero -&gt; a) -&gt; Float -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s%27"><span class="hs-identifier hs-var hs-var">f2s'</span></a></span></span><span> </span><span id="local-6989586621679107511"><span class="annot"><span class="annottext">Bool -&gt; Word32 -&gt; Int32 -&gt; a
</span><a href="#local-6989586621679107511"><span class="hs-identifier hs-var">formatter</span></a></span></span><span> </span><span id="local-6989586621679107512"><span class="annot"><span class="annottext">NonNumbersAndZero -&gt; a
</span><a href="#local-6989586621679107512"><span class="hs-identifier hs-var">specialFormatter</span></a></span></span><span> </span><span id="local-6989586621679107513"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679107513"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679107514"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107514"><span class="hs-identifier hs-var">sign</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107515"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107515"><span class="hs-identifier hs-var">mantissa</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107516"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107516"><span class="hs-identifier hs-var">expo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Float -&gt; (Bool, Word32, Word32)
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#breakdown"><span class="hs-identifier hs-var">breakdown</span></a></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679107513"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-243"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107516"><span class="hs-identifier hs-var">expo</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a. (Bits a, Integral a) =&gt; Int -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#mask"><span class="hs-identifier hs-var">mask</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#float_exponent_bits"><span class="hs-identifier hs-var">float_exponent_bits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107516"><span class="hs-identifier hs-var">expo</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%26%26/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107515"><span class="hs-identifier hs-var">mantissa</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NonNumbersAndZero -&gt; a
</span><a href="#local-6989586621679107512"><span class="hs-identifier hs-var">specialFormatter</span></a></span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.Internal.html#NonNumbersAndZero"><span class="hs-identifier hs-type">NonNumbersAndZero</span></a></span><span>
</span><span id="line-245"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">negative :: Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#negative"><span class="hs-identifier hs-var">negative</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107514"><span class="hs-identifier hs-var">sign</span></a></span><span>
</span><span id="line-246"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exponent_all_one :: Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#exponent_all_one"><span class="hs-identifier hs-var">exponent_all_one</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107516"><span class="hs-identifier hs-var">expo</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3E/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-247"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mantissa_non_zero :: Bool
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#mantissa_non_zero"><span class="hs-identifier hs-var">mantissa_non_zero</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107515"><span class="hs-identifier hs-var">mantissa</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.10.0/src/GHC.Classes.html#%3E/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-248"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-type">FloatingDecimal</span></a></span><span> </span><span id="local-6989586621679107522"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107522"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679107523"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107523"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; FloatingDecimal
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2d"><span class="hs-identifier hs-var">f2d</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107515"><span class="hs-identifier hs-var">mantissa</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107516"><span class="hs-identifier hs-var">expo</span></a></span><span>
</span><span id="line-249"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Word32 -&gt; Int32 -&gt; a
</span><a href="#local-6989586621679107511"><span class="hs-identifier hs-var">formatter</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679107514"><span class="hs-identifier hs-var">sign</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679107522"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679107523"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="annot"><span class="hs-comment">-- | Render a Float in scientific notation</span></span><span>
</span><span id="line-252"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s"><span class="hs-identifier hs-type">f2s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Float/GHC.Types.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.Internal.html#Builder"><span class="hs-identifier hs-type">Builder</span></a></span><span>
</span><span id="line-253"></span><span id="f2s"><span class="annot"><span class="annottext">f2s :: Float -&gt; Builder
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s"><span class="hs-identifier hs-var hs-var">f2s</span></a></span></span><span> </span><span id="local-6989586621679107524"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679107524"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BoundedPrim () -&gt; () -&gt; Builder
forall a. BoundedPrim a -&gt; a -&gt; Builder
</span><a href="Data.ByteString.Builder.Prim.html#primBounded"><span class="hs-identifier hs-var">primBounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Bool -&gt; Word32 -&gt; Int32 -&gt; BoundedPrim ())
-&gt; (NonNumbersAndZero -&gt; BoundedPrim ()) -&gt; Float -&gt; BoundedPrim ()
forall a.
(Bool -&gt; Word32 -&gt; Int32 -&gt; a)
-&gt; (NonNumbersAndZero -&gt; a) -&gt; Float -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s%27"><span class="hs-identifier hs-var">f2s'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Word32 -&gt; Int32 -&gt; BoundedPrim ()
forall a. Mantissa a =&gt; Bool -&gt; a -&gt; Int32 -&gt; BoundedPrim ()
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#toCharsScientific"><span class="hs-identifier hs-var">toCharsScientific</span></a></span><span> </span><span class="annot"><span class="annottext">NonNumbersAndZero -&gt; BoundedPrim ()
</span><a href="Data.ByteString.Builder.RealFloat.Internal.html#toCharsNonNumbersAndZero"><span class="hs-identifier hs-var">toCharsNonNumbersAndZero</span></a></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679107524"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-comment">-- | Returns the decimal representation of a Float. NaN and Infinity will</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- return `FloatingDecimal 0 0`</span><span>
</span><span id="line-257"></span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2Intermediate"><span class="hs-identifier hs-type">f2Intermediate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.10.0/src/GHC.Types.html#Float/GHC.Types.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-type">FloatingDecimal</span></a></span><span>
</span><span id="line-258"></span><span id="f2Intermediate"><span class="annot"><span class="annottext">f2Intermediate :: Float -&gt; FloatingDecimal
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2Intermediate"><span class="hs-identifier hs-var hs-var">f2Intermediate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Word32 -&gt; Int32 -&gt; FloatingDecimal)
-&gt; (NonNumbersAndZero -&gt; FloatingDecimal)
-&gt; Float
-&gt; FloatingDecimal
forall a.
(Bool -&gt; Word32 -&gt; Int32 -&gt; a)
-&gt; (NonNumbersAndZero -&gt; a) -&gt; Float -&gt; a
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#f2s%27"><span class="hs-identifier hs-var">f2s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word32 -&gt; Int32 -&gt; FloatingDecimal)
-&gt; Bool -&gt; Word32 -&gt; Int32 -&gt; FloatingDecimal
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int32 -&gt; FloatingDecimal
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-var">FloatingDecimal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FloatingDecimal -&gt; NonNumbersAndZero -&gt; FloatingDecimal
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(FloatingDecimal -&gt; NonNumbersAndZero -&gt; FloatingDecimal)
-&gt; FloatingDecimal -&gt; NonNumbersAndZero -&gt; FloatingDecimal
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int32 -&gt; FloatingDecimal
</span><a href="Data.ByteString.Builder.RealFloat.F2S.html#FloatingDecimal"><span class="hs-identifier hs-var">FloatingDecimal</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span></pre></body></html>