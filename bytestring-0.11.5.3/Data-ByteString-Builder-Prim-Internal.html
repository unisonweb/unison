<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.ByteString.Builder.Prim.Internal</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">bytestring-0.11.5.3: Fast, compact, strict and lazy byte strings with a list interface</span><ul class="links" id="page-menu"><li><a href="src/Data.ByteString.Builder.Prim.Internal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>2010-2011 Simon Meier 2010 Jasper van der Jeugt</td></tr><tr><th>License</th><td>BSD3-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>Simon Meier &lt;iridcode@gmail.com&gt;</td></tr><tr><th>Stability</th><td>unstable, private</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Unsafe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.ByteString.Builder.Prim.Internal</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Fixed-size builder primitives</a></li><li><a href="#g:2">Bounded-size builder primitives</a></li><li><a href="#g:3">Shared operators</a></li><li><a href="#g:4">Helpers</a></li><li><a href="#g:5">Deprecated</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><ul><li>Warning:* this module is internal. If you find that you need it please
 contact the maintainers and explain what you are trying to do and discuss
 what you would need in the public API. It is important that you do this as
 the module may not be exposed at all in future releases.</li></ul><p>The maintainers are glad to accept patches for further
 standard encodings of standard Haskell values.</p><p>If you need to write your own builder primitives, then be aware that you are
 writing code with <em>all safety belts off</em>; i.e.,
 *this is the code that might make your application vulnerable to buffer-overflow attacks!*
 The <a href="Data-ByteString-Builder-Prim-Tests.html">Data.ByteString.Builder.Prim.Tests</a> module provides you with
 utilities for testing your encodings thoroughly.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Size">Size</a> = <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FixedPrim">FixedPrim</a> a</li><li class="src short"><a href="#v:fixedPrim">fixedPrim</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a</li><li class="src short"><a href="#v:size">size</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:runF">runF</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:emptyF">emptyF</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a</li><li class="src short"><a href="#v:contramapF">contramapF</a> :: (b -&gt; a) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> b</li><li class="src short"><a href="#v:pairF">pairF</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> b -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> (a, b)</li><li class="src short"><a href="#v:storableToF">storableToF</a> :: <span class="keyword">forall</span> a. <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:BoundedPrim">BoundedPrim</a> a</li><li class="src short"><a href="#v:boundedPrim">boundedPrim</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a</li><li class="src short"><a href="#v:sizeBound">sizeBound</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:runB">runB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:emptyB">emptyB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a</li><li class="src short"><a href="#v:contramapB">contramapB</a> :: (b -&gt; a) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> b</li><li class="src short"><a href="#v:pairB">pairB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> b -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> (a, b)</li><li class="src short"><a href="#v:eitherB">eitherB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> b -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> (<a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> a b)</li><li class="src short"><a href="#v:condB">condB</a> :: (a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a</li><li class="src short"><a href="#v:toB">toB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a</li><li class="src short"><a href="#v:liftFixedToBounded">liftFixedToBounded</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a</li><li class="src short"><a href="#v:-62--36--60-">(&gt;$&lt;)</a> :: Contravariant f =&gt; (b -&gt; a) -&gt; f a -&gt; f b</li><li class="src short"><a href="#v:-62--42--60-">(&gt;*&lt;)</a> :: Monoidal f =&gt; f a -&gt; f b -&gt; f (a, b)</li><li class="src short"><a href="#v:caseWordSize_32_64">caseWordSize_32_64</a> :: a -&gt; a -&gt; a</li><li class="src short"><a href="#v:boudedPrim">boudedPrim</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Fixed-size builder primitives</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Size" class="def">Size</a> = <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Data.ByteString.Builder.Prim.Internal.html#Size" class="link">Source</a> <a href="#t:Size" class="selflink">#</a></p><div class="doc"><p>The type used for sizes and sizeBounds of sizes.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FixedPrim" class="def">FixedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#FixedPrim" class="link">Source</a> <a href="#t:FixedPrim" class="selflink">#</a></p><div class="doc"><p>A builder primitive that always results in a sequence of bytes of a
 pre-determined, fixed size.</p></div></div><div class="top"><p class="src"><a id="v:fixedPrim" class="def">fixedPrim</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#fixedPrim" class="link">Source</a> <a href="#v:fixedPrim" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:size" class="def">size</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Data.ByteString.Builder.Prim.Internal.html#size" class="link">Source</a> <a href="#v:size" class="selflink">#</a></p><div class="doc"><p>The size of the sequences of bytes generated by this <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:runF" class="def">runF</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Data.ByteString.Builder.Prim.Internal.html#runF" class="link">Source</a> <a href="#v:runF" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emptyF" class="def">emptyF</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#emptyF" class="link">Source</a> <a href="#v:emptyF" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a></code> that always results in the zero-length sequence.</p></div></div><div class="top"><p class="src"><a id="v:contramapF" class="def">contramapF</a> :: (b -&gt; a) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> b <a href="src/Data.ByteString.Builder.Prim.Internal.html#contramapF" class="link">Source</a> <a href="#v:contramapF" class="selflink">#</a></p><div class="doc"><p>Change a primitives such that it first applies a function to the value
 to be encoded.</p><p>Note that primitives are <code>Contravariant</code>
 <a href="http://hackage.haskell.org/package/contravariant">http://hackage.haskell.org/package/contravariant</a>. Hence, the following
 laws hold.</p><pre>contramapF id = id
contramapF f . contramapF g = contramapF (g . f)</pre></div></div><div class="top"><p class="src"><a id="v:pairF" class="def">pairF</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> b -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> (a, b) <a href="src/Data.ByteString.Builder.Prim.Internal.html#pairF" class="link">Source</a> <a href="#v:pairF" class="selflink">#</a></p><div class="doc"><p>Encode a pair by encoding its first component and then its second component.</p></div></div><div class="top"><p class="src"><a id="v:storableToF" class="def">storableToF</a> :: <span class="keyword">forall</span> a. <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#storableToF" class="link">Source</a> <a href="#v:storableToF" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Bounded-size builder primitives</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BoundedPrim" class="def">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#BoundedPrim" class="link">Source</a> <a href="#t:BoundedPrim" class="selflink">#</a></p><div class="doc"><p>A builder primitive that always results in sequence of bytes that is no longer
 than a pre-determined bound.</p></div></div><div class="top"><p class="src"><a id="v:boundedPrim" class="def">boundedPrim</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#boundedPrim" class="link">Source</a> <a href="#v:boundedPrim" class="selflink">#</a></p><div class="doc"><p><em>Since: bytestring-0.10.12.0</em></p></div></div><div class="top"><p class="src"><a id="v:sizeBound" class="def">sizeBound</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Data.ByteString.Builder.Prim.Internal.html#sizeBound" class="link">Source</a> <a href="#v:sizeBound" class="selflink">#</a></p><div class="doc"><p>The bound on the size of sequences of bytes generated by this <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:runB" class="def">runB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Data.ByteString.Builder.Prim.Internal.html#runB" class="link">Source</a> <a href="#v:runB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emptyB" class="def">emptyB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#emptyB" class="link">Source</a> <a href="#v:emptyB" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code> that always results in the zero-length sequence.</p></div></div><div class="top"><p class="src"><a id="v:contramapB" class="def">contramapB</a> :: (b -&gt; a) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> b <a href="src/Data.ByteString.Builder.Prim.Internal.html#contramapB" class="link">Source</a> <a href="#v:contramapB" class="selflink">#</a></p><div class="doc"><p>Change a <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code> such that it first applies a function to the
 value to be encoded.</p><p>Note that <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code>s are <code>Contravariant</code>
 <a href="http://hackage.haskell.org/package/contravariant">http://hackage.haskell.org/package/contravariant</a>. Hence, the following
 laws hold.</p><pre>contramapB id = id
contramapB f . contramapB g = contramapB (g . f)</pre></div></div><div class="top"><p class="src"><a id="v:pairB" class="def">pairB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> b -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> (a, b) <a href="src/Data.ByteString.Builder.Prim.Internal.html#pairB" class="link">Source</a> <a href="#v:pairB" class="selflink">#</a></p><div class="doc"><p>Encode a pair by encoding its first component and then its second component.</p></div></div><div class="top"><p class="src"><a id="v:eitherB" class="def">eitherB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> b -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> (<a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) <a href="src/Data.ByteString.Builder.Prim.Internal.html#eitherB" class="link">Source</a> <a href="#v:eitherB" class="selflink">#</a></p><div class="doc"><p>Encode an <code><a href="../base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a></code> value using the first <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code> for <code><a href="../base-4.18.2.1/Data-Either.html#v:Left" title="Data.Either">Left</a></code>
 values and the second <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code> for <code><a href="../base-4.18.2.1/Data-Either.html#v:Right" title="Data.Either">Right</a></code> values.</p><p>Note that the functions <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:eitherB" title="Data.ByteString.Builder.Prim.Internal">eitherB</a></code>, <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:pairB" title="Data.ByteString.Builder.Prim.Internal">pairB</a></code>, and <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:contramapB" title="Data.ByteString.Builder.Prim.Internal">contramapB</a></code> (written below
 using <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:-62--36--60-" title="Data.ByteString.Builder.Prim.Internal">&gt;$&lt;</a></code>) suffice to construct <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code>s for all non-recursive
 algebraic datatypes. For example,</p><pre>maybeB :: BoundedPrim () -&gt; BoundedPrim a -&gt; BoundedPrim (Maybe a)
maybeB nothing just = <code><a href="../base-4.18.2.1/Data-Maybe.html#v:maybe" title="Data.Maybe">maybe</a></code> (Left ()) Right <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:-62--36--60-" title="Data.ByteString.Builder.Prim.Internal">&gt;$&lt;</a></code> eitherB nothing just
 </pre></div></div><div class="top"><p class="src"><a id="v:condB" class="def">condB</a> :: (a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#condB" class="link">Source</a> <a href="#v:condB" class="selflink">#</a></p><div class="doc"><p>Conditionally select a <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code>.
 For example, we can implement the ASCII primitive that drops characters with
 Unicode codepoints above 127 as follows.</p><pre>charASCIIDrop = <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:condB" title="Data.ByteString.Builder.Prim.Internal">condB</a></code> (&lt; '\128') (<code><a href="Data-ByteString-Builder-Prim-Internal.html#v:liftFixedToBounded" title="Data.ByteString.Builder.Prim.Internal">liftFixedToBounded</a></code> <code><a href="Data-ByteString-Builder-Prim.html#v:char7" title="Data.ByteString.Builder.Prim">char7</a></code>) <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:emptyB" title="Data.ByteString.Builder.Prim.Internal">emptyB</a></code>
 </pre></div></div><div class="top"><p class="src"><a id="v:toB" class="def">toB</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#toB" class="link">Source</a> <a href="#v:toB" class="selflink">#</a></p><div class="doc"><p>Convert a <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a></code> to a <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:liftFixedToBounded" class="def">liftFixedToBounded</a> :: <a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a> a -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#liftFixedToBounded" class="link">Source</a> <a href="#v:liftFixedToBounded" class="selflink">#</a></p><div class="doc"><p>Lift a <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:FixedPrim" title="Data.ByteString.Builder.Prim.Internal">FixedPrim</a></code> to a <code><a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a></code>.</p></div></div><a href="#g:3" id="g:3"><h1>Shared operators</h1></a><div class="top"><p class="src"><a id="v:-62--36--60-" class="def">(&gt;$&lt;)</a> :: Contravariant f =&gt; (b -&gt; a) -&gt; f a -&gt; f b <span class="fixity">infixl 4</span><span class="rightedge"></span> <a href="src/Data.ByteString.Builder.Prim.Internal.html#%3E%24%3C" class="link">Source</a> <a href="#v:-62--36--60-" class="selflink">#</a></p><div class="doc"><p>A fmap-like operator for builder primitives, both bounded and fixed size.</p><p>Builder primitives are contravariant so it's like the normal fmap, but
 backwards (look at the type). (If it helps to remember, the operator symbol
 is like (<a href="$">$</a>) but backwards.)</p><p>We can use it for example to prepend and/or append fixed values to an
 primitive.</p><pre> import Data.ByteString.Builder.Prim as P
showEncoding ((\x -&gt; ('\'', (x, '\''))) &gt;$&lt; fixed3) 'x' = &quot;'x'&quot;
  where
    fixed3 = P.char7 &gt;*&lt; P.char7 &gt;*&lt; P.char7</pre><p>Note that the rather verbose syntax for composition stems from the
 requirement to be able to compute the size / size bound at compile time.</p></div></div><div class="top"><p class="src"><a id="v:-62--42--60-" class="def">(&gt;*&lt;)</a> :: Monoidal f =&gt; f a -&gt; f b -&gt; f (a, b) <span class="fixity">infixr 5</span><span class="rightedge"></span> <a href="src/Data.ByteString.Builder.Prim.Internal.html#%3E%2A%3C" class="link">Source</a> <a href="#v:-62--42--60-" class="selflink">#</a></p><div class="doc"><p>A pairing/concatenation operator for builder primitives, both bounded and
 fixed size.</p><p>For example,</p><pre>toLazyByteString (primFixed (char7 &gt;*&lt; char7) ('x','y')) = &quot;xy&quot;</pre><p>We can combine multiple primitives using <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:-62--42--60-" title="Data.ByteString.Builder.Prim.Internal">&gt;*&lt;</a></code> multiple times.</p><pre>toLazyByteString (primFixed (char7 &gt;*&lt; char7 &gt;*&lt; char7) ('x',('y','z'))) = &quot;xyz&quot;</pre></div></div><a href="#g:4" id="g:4"><h1>Helpers</h1></a><div class="top"><p class="src"><a id="v:caseWordSize_32_64" class="def">caseWordSize_32_64</a> :: a -&gt; a -&gt; a <a href="src/Data.ByteString.Builder.Prim.Internal.html#caseWordSize_32_64" class="link">Source</a> <a href="#v:caseWordSize_32_64" class="selflink">#</a></p><div class="doc"><p>Select an implementation depending on bitness.
 Throw a compile time error if bitness is neither 32 nor 64.</p></div></div><a href="#g:5" id="g:5"><h1>Deprecated</h1></a><div class="top"><p class="src"><a id="v:boudedPrim" class="def">boudedPrim</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)) -&gt; <a href="Data-ByteString-Builder-Prim-Internal.html#t:BoundedPrim" title="Data.ByteString.Builder.Prim.Internal">BoundedPrim</a> a <a href="src/Data.ByteString.Builder.Prim.Internal.html#boudedPrim" class="link">Source</a> <a href="#v:boudedPrim" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use <code><a href="Data-ByteString-Builder-Prim-Internal.html#v:boundedPrim" title="Data.ByteString.Builder.Prim.Internal">boundedPrim</a></code> instead</p></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>