<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.ByteString.Builder.RealFloat</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">bytestring-0.11.5.3: Fast, compact, strict and lazy byte strings with a list interface</span><ul class="links" id="page-menu"><li><a href="src/Data.ByteString.Builder.RealFloat.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Lawrence Wu 2021</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>lawrencejwu@gmail.com</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.ByteString.Builder.RealFloat</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Custom formatting</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Floating point formatting for <code>Bytestring.Builder</code></p><p>This module primarily exposes <code><a href="Data-ByteString-Builder-RealFloat.html#v:floatDec" title="Data.ByteString.Builder.RealFloat">floatDec</a></code> and <code><a href="Data-ByteString-Builder-RealFloat.html#v:doubleDec" title="Data.ByteString.Builder.RealFloat">doubleDec</a></code> which do the
 equivalent of converting through <code><code><a href="Data-ByteString-Builder.html#v:string7" title="Data.ByteString.Builder">string7</a></code> . <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code></code>.</p><p>It also exposes <code><a href="Data-ByteString-Builder-RealFloat.html#v:formatFloat" title="Data.ByteString.Builder.RealFloat">formatFloat</a></code> and <code><a href="Data-ByteString-Builder-RealFloat.html#v:formatDouble" title="Data.ByteString.Builder.RealFloat">formatDouble</a></code> with a similar API as
 <code><a href="../base-4.18.2.1/GHC-Float.html#v:formatRealFloat" title="GHC.Float">formatRealFloat</a></code>.</p><p>NB: The float-to-string conversions exposed by this module match <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code>'s
 output (specifically with respect to default rounding and length). In
 particular, there are boundary cases where the closest and 'shortest'
 string representations are not used.  Mentions of 'shortest' in the docs
 below are with this caveat.</p><p>For example, for fidelity, we match <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code> on the output below.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>show (1.0e23 :: Float)
</code></strong>&quot;1.0e23&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>show (1.0e23 :: Double)
</code></strong>&quot;9.999999999999999e22&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>floatDec 1.0e23
</code></strong>&quot;1.0e23&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>doubleDec 1.0e23
</code></strong>&quot;9.999999999999999e22&quot;
</pre><p>Simplifying, we can build a shorter, lossless representation by just using
 <code>&quot;1.0e23&quot;</code> since the floating point values that are 1 ULP away are</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>showHex (castDoubleToWord64 1.0e23) []
</code></strong>&quot;44b52d02c7e14af6&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>castWord64ToDouble 0x44b52d02c7e14af5
</code></strong>9.999999999999997e22
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>castWord64ToDouble 0x44b52d02c7e14af6
</code></strong>9.999999999999999e22
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>castWord64ToDouble 0x44b52d02c7e14af7
</code></strong>1.0000000000000001e23
</pre><p>In particular, we could use the exact boundary if it is the shortest
 representation and the original floating number is even. To experiment with
 the shorter rounding, refer to
 <code><a href="Data-ByteString-Builder-RealFloat-Internal.html#v:acceptBounds" title="Data.ByteString.Builder.RealFloat.Internal">acceptBounds</a></code>. This will give us</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>floatDec 1.0e23
</code></strong>&quot;1.0e23&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>doubleDec 1.0e23
</code></strong>&quot;1.0e23&quot;
</pre><p>For more details, please refer to the
 <a href="https://dl.acm.org/doi/10.1145/3192366.3192369">Ryu paper</a>.</p><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:floatDec">floatDec</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Float" title="Prelude">Float</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:doubleDec">doubleDec</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:formatFloat">formatFloat</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Float" title="Prelude">Float</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:formatDouble">formatDouble</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FloatFormat">FloatFormat</a></li><li class="src short"><a href="#v:standard">standard</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a></li><li class="src short"><a href="#v:standardDefaultPrecision">standardDefaultPrecision</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a></li><li class="src short"><a href="#v:scientific">scientific</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a></li><li class="src short"><a href="#v:generic">generic</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:floatDec" class="def">floatDec</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Float" title="Prelude">Float</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a> <a href="src/Data.ByteString.Builder.RealFloat.html#floatDec" class="link">Source</a> <a href="#v:floatDec" class="selflink">#</a></p><div class="doc"><p>Returns a rendered Float. Matches <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code> in displaying in standard or
 scientific notation</p><pre>floatDec = <code><a href="Data-ByteString-Builder-RealFloat.html#v:formatFloat" title="Data.ByteString.Builder.RealFloat">formatFloat</a></code> <code><a href="Data-ByteString-Builder-RealFloat.html#v:generic" title="Data.ByteString.Builder.RealFloat">generic</a></code>
</pre></div></div><div class="top"><p class="src"><a id="v:doubleDec" class="def">doubleDec</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a> <a href="src/Data.ByteString.Builder.RealFloat.html#doubleDec" class="link">Source</a> <a href="#v:doubleDec" class="selflink">#</a></p><div class="doc"><p>Returns a rendered Double. Matches <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code> in displaying in standard or
 scientific notation</p><pre>doubleDec = <code><a href="Data-ByteString-Builder-RealFloat.html#v:formatDouble" title="Data.ByteString.Builder.RealFloat">formatDouble</a></code> <code><a href="Data-ByteString-Builder-RealFloat.html#v:generic" title="Data.ByteString.Builder.RealFloat">generic</a></code>
</pre></div></div><a href="#g:1" id="g:1"><h1>Custom formatting</h1></a><div class="top"><p class="src"><a id="v:formatFloat" class="def">formatFloat</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Float" title="Prelude">Float</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a> <a href="src/Data.ByteString.Builder.RealFloat.html#formatFloat" class="link">Source</a> <a href="#v:formatFloat" class="selflink">#</a></p><div class="doc"><p>Returns a rendered Float. Returns the 'shortest' representation in
 scientific notation and takes an optional precision argument in standard
 notation. Also see <code><a href="Data-ByteString-Builder-RealFloat.html#v:floatDec" title="Data.ByteString.Builder.RealFloat">floatDec</a></code>.</p><p>With standard notation, the precision argument is used to truncate (or
 extend with 0s) the 'shortest' rendered Float. The 'default precision' does
 no such modifications and will return as many decimal places as the
 representation demands.</p><p>e.g</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatFloat (standard 1) 1.2345e-2
</code></strong>&quot;0.0&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatFloat (standard 10) 1.2345e-2
</code></strong>&quot;0.0123450000&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatFloat standardDefaultPrecision 1.2345e-2
</code></strong>&quot;0.01234&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatFloat scientific 12.345
</code></strong>&quot;1.2345e1&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatFloat generic 12.345
</code></strong>&quot;12.345&quot;
</pre><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:formatDouble" class="def">formatDouble</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-ByteString-Builder.html#t:Builder" title="Data.ByteString.Builder">Builder</a> <a href="src/Data.ByteString.Builder.RealFloat.html#formatDouble" class="link">Source</a> <a href="#v:formatDouble" class="selflink">#</a></p><div class="doc"><p>Returns a rendered Double. Returns the 'shortest' representation in
 scientific notation and takes an optional precision argument in standard
 notation. Also see <code><a href="Data-ByteString-Builder-RealFloat.html#v:doubleDec" title="Data.ByteString.Builder.RealFloat">doubleDec</a></code>.</p><p>With standard notation, the precision argument is used to truncate (or
 extend with 0s) the 'shortest' rendered Float. The 'default precision'
 does no such modifications and will return as many decimal places as the
 representation demands.</p><p>e.g</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatDouble (standard 1) 1.2345e-2
</code></strong>&quot;0.0&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatDouble (standard 10) 1.2345e-2
</code></strong>&quot;0.0123450000&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatDouble standardDefaultPrecision 1.2345e-2
</code></strong>&quot;0.01234&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatDouble scientific 12.345
</code></strong>&quot;1.2345e1&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>formatDouble generic 12.345
</code></strong>&quot;12.345&quot;
</pre><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FloatFormat" class="def">FloatFormat</a> <a href="src/Data.ByteString.Builder.RealFloat.html#FloatFormat" class="link">Source</a> <a href="#t:FloatFormat" class="selflink">#</a></p><div class="doc"><p>Format type for use with <code><a href="Data-ByteString-Builder-RealFloat.html#v:formatFloat" title="Data.ByteString.Builder.RealFloat">formatFloat</a></code> and <code><a href="Data-ByteString-Builder-RealFloat.html#v:formatDouble" title="Data.ByteString.Builder.RealFloat">formatDouble</a></code>.</p><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:standard" class="def">standard</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> <a href="src/Data.ByteString.Builder.RealFloat.html#standard" class="link">Source</a> <a href="#v:standard" class="selflink">#</a></p><div class="doc"><p>Standard notation with <code>n</code> decimal places</p><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:standardDefaultPrecision" class="def">standardDefaultPrecision</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> <a href="src/Data.ByteString.Builder.RealFloat.html#standardDefaultPrecision" class="link">Source</a> <a href="#v:standardDefaultPrecision" class="selflink">#</a></p><div class="doc"><p>Standard notation with the 'default precision' (decimal places matching <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code>)</p><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:scientific" class="def">scientific</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> <a href="src/Data.ByteString.Builder.RealFloat.html#scientific" class="link">Source</a> <a href="#v:scientific" class="selflink">#</a></p><div class="doc"><p>Scientific notation with 'default precision' (decimal places matching <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code>)</p><p><em>Since: bytestring-0.11.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:generic" class="def">generic</a> :: <a href="Data-ByteString-Builder-RealFloat.html#t:FloatFormat" title="Data.ByteString.Builder.RealFloat">FloatFormat</a> <a href="src/Data.ByteString.Builder.RealFloat.html#generic" class="link">Source</a> <a href="#v:generic" class="selflink">#</a></p><div class="doc"><p>Standard or scientific notation depending on the exponent. Matches <code><a href="../base-4.18.2.1/Text-Show.html#v:show" title="Text.Show">show</a></code></p><p><em>Since: bytestring-0.11.2.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>