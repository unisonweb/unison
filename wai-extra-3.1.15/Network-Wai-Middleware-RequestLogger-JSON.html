<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Network.Wai.Middleware.RequestLogger.JSON</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">wai-extra-3.1.15: Provides some basic WAI handlers and middleware.</span><ul class="links" id="page-menu"><li><a href="src/Network.Wai.Middleware.RequestLogger.JSON.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.Wai.Middleware.RequestLogger.JSON</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:formatAsJSON">formatAsJSON</a> :: <a href="Network-Wai-Middleware-RequestLogger.html#t:OutputFormatterWithDetails" title="Network.Wai.Middleware.RequestLogger">OutputFormatterWithDetails</a></li><li class="src short"><a href="#v:formatAsJSONWithHeaders">formatAsJSONWithHeaders</a> :: <a href="Network-Wai-Middleware-RequestLogger.html#t:OutputFormatterWithDetailsAndHeaders" title="Network.Wai.Middleware.RequestLogger">OutputFormatterWithDetailsAndHeaders</a></li><li class="src short"><a href="#v:requestToJSON">requestToJSON</a> :: <a href="../wai-3.2.4/Network-Wai.html#t:Request" title="Network.Wai">Request</a> -&gt; [<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>] -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../time-1.12.2/Data-Time-Clock.html#t:NominalDiffTime" title="Data.Time.Clock">NominalDiffTime</a> -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:formatAsJSON" class="def">formatAsJSON</a> :: <a href="Network-Wai-Middleware-RequestLogger.html#t:OutputFormatterWithDetails" title="Network.Wai.Middleware.RequestLogger">OutputFormatterWithDetails</a> <a href="src/Network.Wai.Middleware.RequestLogger.JSON.html#formatAsJSON" class="link">Source</a> <a href="#v:formatAsJSON" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:formatAsJSONWithHeaders" class="def">formatAsJSONWithHeaders</a> :: <a href="Network-Wai-Middleware-RequestLogger.html#t:OutputFormatterWithDetailsAndHeaders" title="Network.Wai.Middleware.RequestLogger">OutputFormatterWithDetailsAndHeaders</a> <a href="src/Network.Wai.Middleware.RequestLogger.JSON.html#formatAsJSONWithHeaders" class="link">Source</a> <a href="#v:formatAsJSONWithHeaders" class="selflink">#</a></p><div class="doc"><p>Same as <code>formatAsJSON</code> but with response headers included</p><p>This is useful for passing arbitrary data from your application out to the
 WAI layer for it to be logged, but you may need to be careful to
 subsequently redact any headers which may contain sensitive data.</p><p><em>Since: 3.0.27</em></p></div></div><div class="top"><p class="src"><a id="v:requestToJSON" class="def">requestToJSON</a> <a href="src/Network.Wai.Middleware.RequestLogger.JSON.html#requestToJSON" class="link">Source</a> <a href="#v:requestToJSON" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../wai-3.2.4/Network-Wai.html#t:Request" title="Network.Wai">Request</a></td><td class="doc"><p>The WAI request</p></td></tr><tr><td class="src">-&gt; [<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>]</td><td class="doc"><p>Chunked request body</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../time-1.12.2/Data-Time-Clock.html#t:NominalDiffTime" title="Data.Time.Clock">NominalDiffTime</a></td><td class="doc"><p>Optional request duration</p></td></tr><tr><td class="src">-&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Get the JSON representation for a request</p><p>This representation is identical to that used in <code><a href="Network-Wai-Middleware-RequestLogger-JSON.html#v:formatAsJSON" title="Network.Wai.Middleware.RequestLogger.JSON">formatAsJSON</a></code> for the
 request. It includes:</p><dl><dt><code>method</code></dt><dd></dd><dt><code>path</code></dt><dd></dd><dt><code>queryString</code></dt><dd></dd><dt><code>size</code></dt><dd>The size of the body, as defined in the request. This may differ
   from the size of the data passed in the second argument.</dd><dt><code>body</code></dt><dd>The body, concatenated directly from the chunks passed in</dd><dt><code>remoteHost</code></dt><dd></dd><dt><code>httpVersion</code></dt><dd></dd><dt><code>headers</code></dt><dd></dd></dl><p>If a <code><code><a href="../base-4.18.2.1/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> duration</code> is passed in, then additionally the JSON includes:</p><dl><dt><code>durationMs</code></dt><dd>The duration, formatted in milliseconds, to 2 decimal
   places</dd></dl><p>This representation is not an API, and may change at any time (within reason)
 without a major version bump.</p><p><em>Since: 3.1.4</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>