<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Network.Wai.Middleware.RealIp</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">wai-extra-3.1.15: Provides some basic WAI handlers and middleware.</span><ul class="links" id="page-menu"><li><a href="src/Network.Wai.Middleware.RealIp.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.Wai.Middleware.RealIp</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Infer the remote IP address using headers</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:realIp">realIp</a> :: <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a></li><li class="src short"><a href="#v:realIpHeader">realIpHeader</a> :: <a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a> -&gt; <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a></li><li class="src short"><a href="#v:realIpTrusted">realIpTrusted</a> :: <a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a> -&gt; (<a href="../iproute-1.7.12/Data-IP.html#t:IP" title="Data.IP">IP</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a></li><li class="src short"><a href="#v:defaultTrusted">defaultTrusted</a> :: [<a href="../iproute-1.7.12/Data-IP.html#t:IPRange" title="Data.IP">IPRange</a>]</li><li class="src short"><a href="#v:ipInRange">ipInRange</a> :: <a href="../iproute-1.7.12/Data-IP.html#t:IP" title="Data.IP">IP</a> -&gt; <a href="../iproute-1.7.12/Data-IP.html#t:IPRange" title="Data.IP">IPRange</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:realIp" class="def">realIp</a> :: <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a> <a href="src/Network.Wai.Middleware.RealIp.html#realIp" class="link">Source</a> <a href="#v:realIp" class="selflink">#</a></p><div class="doc"><p>Infer the remote IP address from the <code>X-Forwarded-For</code> header,
 trusting requests from any private IP address. See <code><a href="Network-Wai-Middleware-RealIp.html#v:realIpHeader" title="Network.Wai.Middleware.RealIp">realIpHeader</a></code> and
 <code><a href="Network-Wai-Middleware-RealIp.html#v:realIpTrusted" title="Network.Wai.Middleware.RealIp">realIpTrusted</a></code> for more information and options.</p><p><em>Since: 3.1.5</em></p></div></div><div class="top"><p class="src"><a id="v:realIpHeader" class="def">realIpHeader</a> :: <a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a> -&gt; <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a> <a href="src/Network.Wai.Middleware.RealIp.html#realIpHeader" class="link">Source</a> <a href="#v:realIpHeader" class="selflink">#</a></p><div class="doc"><p>Infer the remote IP address using the given header, trusting
 requests from any private IP address. See <code><a href="Network-Wai-Middleware-RealIp.html#v:realIpTrusted" title="Network.Wai.Middleware.RealIp">realIpTrusted</a></code> for more
 information and options.</p><p><em>Since: 3.1.5</em></p></div></div><div class="top"><p class="src"><a id="v:realIpTrusted" class="def">realIpTrusted</a> :: <a href="../http-types-0.12.4/Network-HTTP-Types-Header.html#t:HeaderName" title="Network.HTTP.Types.Header">HeaderName</a> -&gt; (<a href="../iproute-1.7.12/Data-IP.html#t:IP" title="Data.IP">IP</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="../wai-3.2.4/Network-Wai.html#t:Middleware" title="Network.Wai">Middleware</a> <a href="src/Network.Wai.Middleware.RealIp.html#realIpTrusted" class="link">Source</a> <a href="#v:realIpTrusted" class="selflink">#</a></p><div class="doc"><p>Infer the remote IP address using the given header, but only if the
 request came from an IP that is trusted by the provided predicate.</p><p>The last non-trusted address is used to replace the <code><a href="../wai-3.2.4/Network-Wai.html#v:remoteHost" title="Network.Wai">remoteHost</a></code> in
 the <code>Request</code>, unless all present IP addresses are trusted, in which
 case the first address is used. Invalid IP addresses are ignored, and
 the remoteHost value remains unaltered if no valid IP addresses are
 found.</p><p>Examples:</p><pre> realIpTrusted &quot;X-Forwarded-For&quot; $ flip ipInRange &quot;10.0.0.0/8&quot;</pre><pre> realIpTrusted &quot;X-Real-Ip&quot; $ \ip -&gt; any (ipInRange ip) defaultTrusted</pre><p><em>Since: 3.1.5</em></p></div></div><div class="top"><p class="src"><a id="v:defaultTrusted" class="def">defaultTrusted</a> :: [<a href="../iproute-1.7.12/Data-IP.html#t:IPRange" title="Data.IP">IPRange</a>] <a href="src/Network.Wai.Middleware.RealIp.html#defaultTrusted" class="link">Source</a> <a href="#v:defaultTrusted" class="selflink">#</a></p><div class="doc"><p>Standard private IP ranges.</p><p><em>Since: 3.1.5</em></p></div></div><div class="top"><p class="src"><a id="v:ipInRange" class="def">ipInRange</a> :: <a href="../iproute-1.7.12/Data-IP.html#t:IP" title="Data.IP">IP</a> -&gt; <a href="../iproute-1.7.12/Data-IP.html#t:IPRange" title="Data.IP">IPRange</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Network.Wai.Middleware.RealIp.html#ipInRange" class="link">Source</a> <a href="#v:ipInRange" class="selflink">#</a></p><div class="doc"><p>Check if the given IP address is in the given range.</p><p>IPv4 addresses can be checked against IPv6 ranges, but testing an
 IPv6 address against an IPv4 range is always <code><a href="../base-4.18.2.1/Data-Bool.html#v:False" title="Data.Bool">False</a></code>.</p><p><em>Since: 3.1.5</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>