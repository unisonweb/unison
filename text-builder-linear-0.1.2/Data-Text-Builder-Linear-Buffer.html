<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Text.Builder.Linear.Buffer</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">text-builder-linear-0.1.2: Builder for Text and ByteString based on linear types</span><ul class="links" id="page-menu"><li><a href="src/Data.Text.Builder.Linear.Buffer.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2022 Andrew Lelechenko<br />(c) 2023 Pierre Le Marre</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Andrew Lelechenko &lt;andrew.lelechenko@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>GHC2021</td></tr></table><p class="caption">Data.Text.Builder.Linear.Buffer</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Type</a></li><li><a href="#g:2">Basic interface</a></li><li><a href="#g:3">Single character</a></li><li><a href="#g:4">Multiple characters</a><ul><li><a href="#g:5">Character replication</a></li><li><a href="#g:6">Text</a></li><li><a href="#g:7">Raw <code>Addr#</code></a></li></ul></li><li><a href="#g:8">Padding</a></li><li><a href="#g:9">Number formatting</a><ul><li><a href="#g:10">Decimal</a></li><li><a href="#g:11">Hexadecimal</a><ul><li><a href="#g:12">Lower-case</a></li><li><a href="#g:13">Upper-case and padding</a></li></ul></li><li><a href="#g:14">Double</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> for strict <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code>, based on linear types.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Buffer">Buffer</a> :: <a href="../base-4.18.2.1/GHC-Exts.html#t:TYPE" title="GHC.Exts">TYPE</a> ('<a href="../base-4.18.2.1/GHC-Exts.html#v:BoxedRep" title="GHC.Exts">BoxedRep</a> '<a href="../base-4.18.2.1/GHC-Exts.html#v:Unlifted" title="GHC.Exts">Unlifted</a>)</li><li class="src short"><a href="#v:runBuffer">runBuffer</a> :: (<a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>) %1 -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:runBufferBS">runBufferBS</a> :: (<a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>) %1 -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:dupBuffer">dupBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; (# <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>, <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> #)</li><li class="src short"><a href="#v:consumeBuffer">consumeBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; ()</li><li class="src short"><a href="#v:eraseBuffer">eraseBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:foldlIntoBuffer">foldlIntoBuffer</a> :: <span class="keyword">forall</span> a. (<a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>) -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; [a] -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:newEmptyBuffer">newEmptyBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; (# <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>, <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> #)</li><li class="src short"><a href="#v:-62--60-">(&gt;&lt;)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62-.">(|&gt;.)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:.-60--124-">(.&lt;|)</a> :: <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:prependChars">prependChars</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:appendChars">appendChars</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62-">(|&gt;)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-60--124-">(&lt;|)</a> :: <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62--8230-">(|&gt;&#8230;)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-8230--60--124-">(&#8230;&lt;|)</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62--35-">(|&gt;#)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/GHC-Exts.html#t:Addr-35-" title="GHC.Exts">Addr#</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-35--60--124-">(#&lt;|)</a> :: <a href="../base-4.18.2.1/GHC-Exts.html#t:Addr-35-" title="GHC.Exts">Addr#</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-60--124--35-">(&lt;|#)</a> :: <a href="../base-4.18.2.1/GHC-Exts.html#t:Addr-35-" title="GHC.Exts">Addr#</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:justifyLeft">justifyLeft</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:justifyRight">justifyRight</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:center">center</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62--36-">(|&gt;$)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-36--60--124-">($&lt;|)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62--38-">(|&gt;&amp;)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-38--60--124-">(&amp;&lt;|)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-124--62--37-">(|&gt;%)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li><li class="src short"><a href="#v:-37--60--124-">(%&lt;|)</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Type</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Buffer" class="def">Buffer</a> :: <a href="../base-4.18.2.1/GHC-Exts.html#t:TYPE" title="GHC.Exts">TYPE</a> ('<a href="../base-4.18.2.1/GHC-Exts.html#v:BoxedRep" title="GHC.Exts">BoxedRep</a> '<a href="../base-4.18.2.1/GHC-Exts.html#v:Unlifted" title="GHC.Exts">Unlifted</a>) <a href="src/Data.Text.Builder.Linear.Core.html#Buffer" class="link">Source</a> <a href="#t:Buffer" class="selflink">#</a></p><div class="doc"><p>Internally <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> is a mutable buffer.
 If a client gets hold of a variable of type <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>,
 they'd be able to pass a mutable buffer to concurrent threads.
 That's why API below is carefully designed to prevent such possibility:
 clients always work with linear functions <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> &#8888; <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> instead
 and run them on an empty <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> to extract results.</p><p>In terms of <a href="https://hackage.haskell.org/package/linear-base"><code>linear-base</code></a>
 <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> is <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#t:Consumable"><code>Consumable</code></a>
 (see <code><a href="Data-Text-Builder-Linear-Buffer.html#v:consumeBuffer" title="Data.Text.Builder.Linear.Buffer">consumeBuffer</a></code>)
 and <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#t:Dupable"><code>Dupable</code></a>
 (see <code><a href="Data-Text-Builder-Linear-Buffer.html#v:dupBuffer" title="Data.Text.Builder.Linear.Buffer">dupBuffer</a></code>),
 but not <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#t:Movable"><code>Movable</code></a>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text.Builder.Linear.Buffer
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; '!' .&lt;| &quot;foo&quot; &lt;| (b |&gt; &quot;bar&quot; |&gt;. '.'))
</code></strong>&quot;!foobar.&quot;
</pre><p>Remember: this is a strict builder, so on contrary to <a href="../text-2.0.2/Data-Text-Lazy-Builder.html">Data.Text.Lazy.Builder</a>
 for optimal performance you should use strict left folds instead of lazy right ones.</p><p><code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> is an unlifted datatype,
 so you can put it into an unboxed tuple <code>(# ..., ... #)</code>,
 but not into <code>(..., ...)</code>.</p></div></div><a href="#g:2" id="g:2"><h1>Basic interface</h1></a><div class="top"><p class="src"><a id="v:runBuffer" class="def">runBuffer</a> :: (<a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>) %1 -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Data.Text.Builder.Linear.Core.html#runBuffer" class="link">Source</a> <a href="#v:runBuffer" class="selflink">#</a></p><div class="doc"><p>Run a linear function on an empty <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>, producing a strict <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code>.</p><p>Be careful to write <code>runBuffer (\b -&gt; ...)</code> instead of <code>runBuffer $ \b -&gt; ...</code>,
 because current implementation of linear types lacks special support for <code><a href="../base-4.18.2.1/Data-Function.html#v:-36-" title="Data.Function">($)</a></code>.
 Another option is to enable <code>{-# LANGUAGE BlockArguments #-}</code>
 and write <code>runBuffer \b -&gt; ...</code>.
 Alternatively, you can import
 <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#v:-36-"><code>($)</code></a>
 from <a href="https://hackage.haskell.org/package/linear-base"><code>linear-base</code></a>.</p><p><code><a href="Data-Text-Builder-Linear-Buffer.html#v:runBuffer" title="Data.Text.Builder.Linear.Buffer">runBuffer</a></code> is similar in spirit to mutable arrays API in
 <a href="https://hackage.haskell.org/package/linear-base/docs/Data-Array-Mutable-Linear.html"><code>Data.Array.Mutable.Linear</code></a>,
 which provides functions like
 <a href="https://hackage.haskell.org/package/linear-base/docs/Data-Array-Mutable-Linear.html#v:fromList"><code>fromList</code></a> &#8759; [<code>a</code>] &#8594; (<code>Vector</code> <code>a</code> &#8888; <a href="https://hackage.haskell.org/package/linear-base-0.3.0/docs/Prelude-Linear.html#t:Ur"><code>Ur</code></a> b) &#8888; <a href="https://hackage.haskell.org/package/linear-base-0.3.0/docs/Prelude-Linear.html#t:Ur"><code>Ur</code></a> <code>b</code>.
 Here the initial buffer is always empty and <code>b</code> is <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code>. Since <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code> is
 <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#t:Movable"><code>Movable</code></a>,
 <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code> and <a href="https://hackage.haskell.org/package/linear-base-0.3.0/docs/Prelude-Linear.html#t:Ur"><code>Ur</code></a> <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code> are equivalent.</p></div></div><div class="top"><p class="src"><a id="v:runBufferBS" class="def">runBufferBS</a> :: (<a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>) %1 -&gt; <a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Data.Text.Builder.Linear.Core.html#runBufferBS" class="link">Source</a> <a href="#v:runBufferBS" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Data-Text-Builder-Linear-Buffer.html#v:runBuffer" title="Data.Text.Builder.Linear.Buffer">runBuffer</a></code>, but returning a UTF-8 encoded strict <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:dupBuffer" class="def">dupBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; (# <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>, <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> #) <a href="src/Data.Text.Builder.Linear.Core.html#dupBuffer" class="link">Source</a> <a href="#v:dupBuffer" class="selflink">#</a></p><div class="doc"><p>Duplicate builder. Feel free to process results in parallel threads.
 Similar to
 <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#t:Dupable"><code>Dupable</code></a>
 from <a href="https://hackage.haskell.org/package/linear-base"><code>linear-base</code></a>.</p><p>It is a bit tricky to use because of
 <a href="https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/linear_types.html#limitations">current limitations</a>
 of linear types with regards to <code>let</code> and <code>where</code>. E. g., one cannot write</p><pre>let (# b1, b2 #) = dupBuffer b in (&quot;foo&quot; &lt;| b1) &gt;&lt; (b2 |&gt; &quot;bar&quot;)</pre><p>Instead write:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes -XUnboxedTuples
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text.Builder.Linear.Buffer
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; case dupBuffer b of (# b1, b2 #) -&gt; (&quot;foo&quot; &lt;| b1) &gt;&lt; (b2 |&gt; &quot;bar&quot;))
</code></strong>&quot;foobar&quot;
</pre><p>Note the unboxed tuple: <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> is an unlifted datatype,
 so it cannot be put into <code>(..., ...)</code>.</p></div></div><div class="top"><p class="src"><a id="v:consumeBuffer" class="def">consumeBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; () <a href="src/Data.Text.Builder.Linear.Core.html#consumeBuffer" class="link">Source</a> <a href="#v:consumeBuffer" class="selflink">#</a></p><div class="doc"><p>Consume buffer linearly,
 similar to
 <a href="https://hackage.haskell.org/package/linear-base/docs/Prelude-Linear.html#t:Consumable"><code>Consumable</code></a>
 from <a href="https://hackage.haskell.org/package/linear-base"><code>linear-base</code></a>.</p></div></div><div class="top"><p class="src"><a id="v:eraseBuffer" class="def">eraseBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Core.html#eraseBuffer" class="link">Source</a> <a href="#v:eraseBuffer" class="selflink">#</a></p><div class="doc"><p>Erase buffer's content, replacing it with an empty <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:foldlIntoBuffer" class="def">foldlIntoBuffer</a> :: <span class="keyword">forall</span> a. (<a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>) -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; [a] -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Buffer.html#foldlIntoBuffer" class="link">Source</a> <a href="#v:foldlIntoBuffer" class="selflink">#</a></p><div class="doc"><p>This is just a normal <code><a href="../base-4.18.2.1/Data-List.html#v:foldl-39-" title="Data.List">foldl'</a></code>, but with a linear arrow
 and unlifted accumulator.</p></div></div><div class="top"><p class="src"><a id="v:newEmptyBuffer" class="def">newEmptyBuffer</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; (# <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a>, <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> #) <a href="src/Data.Text.Builder.Linear.Core.html#newEmptyBuffer" class="link">Source</a> <a href="#v:newEmptyBuffer" class="selflink">#</a></p><div class="doc"><p>Create an empty <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>.</p><p>The first <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> is the input and the second is a new empty <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>.</p><p>This function is needed in some situations, e.g. with
 <code><a href="Data-Text-Builder-Linear-Buffer.html#v:justifyRight" title="Data.Text.Builder.Linear.Buffer">justifyRight</a></code>. The following example creates
 a utility function that justify a text and then append it to a buffer.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes -XUnboxedTuples
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text.Builder.Linear.Buffer
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text (Text)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>appendJustified :: Buffer %1 -&gt; Text -&gt; Buffer
appendJustified b t = case newEmptyBuffer b of
  -- Note that we need to create a new buffer from the text, in order
  -- to justify only the text and not the input buffer.
  (# b', empty #) -&gt; b' &gt;&lt; justifyRight 12 ' ' (empty |&gt; t)
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; (b |&gt; &quot;Test:&quot;) `appendJustified` &quot;foo&quot; `appendJustified` &quot;bar&quot;)
</code></strong>&quot;Test:         foo         bar&quot;
</pre><p>Note: a previous buffer is necessary in order to create an empty buffer with
 the same characteristics.</p></div></div><div class="top"><p class="src"><a id="v:-62--60-" class="def">(&gt;&lt;)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infix 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Core.html#%3E%3C" class="link">Source</a> <a href="#v:-62--60-" class="selflink">#</a></p><div class="doc"><p>Concatenate two <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>s, potentially mutating both of them.</p><p>You likely need to use <code><a href="Data-Text-Builder-Linear-Buffer.html#v:dupBuffer" title="Data.Text.Builder.Linear.Buffer">dupBuffer</a></code> to get hold on two builders at once:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes -XUnboxedTuples
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text.Builder.Linear.Buffer
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; case dupBuffer b of (# b1, b2 #) -&gt; (&quot;foo&quot; &lt;| b1) &gt;&lt; (b2 |&gt; &quot;bar&quot;))
</code></strong>&quot;foobar&quot;
</pre></div></div><a href="#g:3" id="g:3"><h1>Single character</h1></a><div class="top"><p class="src"><a id="v:-124--62-." class="def">(|&gt;.)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixl 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Char.html#%7C%3E." class="link">Source</a> <a href="#v:-124--62-." class="selflink">#</a></p><div class="doc"><p>Append <code><a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></code> to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> by mutating it.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; b |&gt;. 'q' |&gt;. 'w')
</code></strong>&quot;qw&quot;
</pre><p><strong>Warning:</strong> In contrast to <code><a href="../text-2.0.2/Data-Text-Lazy-Builder.html#v:singleton" title="Data.Text.Lazy.Builder">singleton</a></code>, it is the
 responsibility of the caller to sanitize surrogate code points with
 <code><a href="../text-2.0.2/Data-Text-Internal.html#v:safe" title="Data.Text.Internal">safe</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:.-60--124-" class="def">(.&lt;|)</a> :: <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Char.html#.%3C%7C" class="link">Source</a> <a href="#v:.-60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend <code><a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></code> to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> by mutating it.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; 'q' .&lt;| 'w' .&lt;| b)
</code></strong>&quot;qw&quot;
</pre><p><strong>Warning:</strong> In contrast to <code><a href="../text-2.0.2/Data-Text-Lazy-Builder.html#v:singleton" title="Data.Text.Lazy.Builder">singleton</a></code>, it is the
 responsibility of the caller to sanitize surrogate code points with
 <code><a href="../text-2.0.2/Data-Text-Internal.html#v:safe" title="Data.Text.Internal">safe</a></code>.</p></div></div><a href="#g:4" id="g:4"><h1>Multiple characters</h1></a><a href="#g:5" id="g:5"><h2>Character replication</h2></a><div class="top"><p class="src"><a id="v:prependChars" class="def">prependChars</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Char.html#prependChars" class="link">Source</a> <a href="#v:prependChars" class="selflink">#</a></p><div class="doc"><p>Prepend a given count of a <code><a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></code> to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; prependChars 3 'x' (b |&gt;. 'A'))
</code></strong>&quot;xxxA&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:appendChars" class="def">appendChars</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Char.html#appendChars" class="link">Source</a> <a href="#v:appendChars" class="selflink">#</a></p><div class="doc"><p>Apppend a given count of a <code><a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a></code> to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; appendChars 3 'x' (b |&gt;. 'A'))
</code></strong>&quot;Axxx&quot;
</pre></div></div><a href="#g:6" id="g:6"><h2>Text</h2></a><div class="top"><p class="src"><a id="v:-124--62-" class="def">(|&gt;)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixl 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%7C%3E" class="link">Source</a> <a href="#v:-124--62-" class="selflink">#</a></p><div class="doc"><p>Append <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code> suffix to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> by mutating it.
 If a suffix is statically known, consider using <code><a href="Data-Text-Builder-Linear-Buffer.html#v:-124--62--35-" title="Data.Text.Builder.Linear.Buffer">(|&gt;#)</a></code> for optimal performance.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; b |&gt; &quot;foo&quot; |&gt; &quot;bar&quot;)
</code></strong>&quot;foobar&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:-60--124-" class="def">(&lt;|)</a> :: <a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%3C%7C" class="link">Source</a> <a href="#v:-60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend <code><a href="../text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></code> prefix to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> by mutating it.
 If a prefix is statically known, consider using <code><a href="Data-Text-Builder-Linear-Buffer.html#v:-35--60--124-" title="Data.Text.Builder.Linear.Buffer">(#&lt;|)</a></code> for optimal performance.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; &quot;foo&quot; &lt;| &quot;bar&quot; &lt;| b)
</code></strong>&quot;foobar&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:-124--62--8230-" class="def">(|&gt;&#8230;)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%7C%3E%2026" class="link">Source</a> <a href="#v:-124--62--8230-" class="selflink">#</a></p><div class="doc"><p>Append given number of spaces.</p></div></div><div class="top"><p class="src"><a id="v:-8230--60--124-" class="def">(&#8230;&lt;|)</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%2026%3C%7C" class="link">Source</a> <a href="#v:-8230--60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend given number of spaces.</p></div></div><a href="#g:7" id="g:7"><h2>Raw <code>Addr#</code></h2></a><div class="top"><p class="src"><a id="v:-124--62--35-" class="def">(|&gt;#)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/GHC-Exts.html#t:Addr-35-" title="GHC.Exts">Addr#</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixl 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%7C%3E%23" class="link">Source</a> <a href="#v:-124--62--35-" class="selflink">#</a></p><div class="doc"><p>Append a null-terminated UTF-8 string
 to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> by mutating it. E. g.,</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes -XMagicHash
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; b |&gt;# &quot;foo&quot;# |&gt;# &quot;bar&quot;#)
</code></strong>&quot;foobar&quot;
</pre><p>The literal string must not contain zero bytes <code>\0</code> and must be a valid UTF-8,
 these conditions are not checked.</p></div></div><div class="top"><p class="src"><a id="v:-35--60--124-" class="def">(#&lt;|)</a> :: <a href="../base-4.18.2.1/GHC-Exts.html#t:Addr-35-" title="GHC.Exts">Addr#</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%23%3C%7C" class="link">Source</a> <a href="#v:-35--60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend a null-terminated UTF-8 string
 to a <code><a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a></code> by mutating it. E. g.,</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes -XMagicHash
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; &quot;foo&quot;# #&lt;| &quot;bar&quot;# #&lt;| b)
</code></strong>&quot;foobar&quot;
</pre><p>The literal string must not contain zero bytes <code>\0</code> and must be a valid UTF-8,
 these conditions are not checked.</p><p><em>Note:</em> When the syntactic extensions <code>UnboxedTuples</code> or <code>UnboxedSums</code> are
 enabled, extra spaces are required when using parentheses: i.e. use <code>( <code><a href="Data-Text-Builder-Linear-Buffer.html#v:-35--60--124-" title="Data.Text.Builder.Linear.Buffer">#&lt;|</a></code> )</code>
 instead of <code>(<code><a href="Data-Text-Builder-Linear-Buffer.html#v:-35--60--124-" title="Data.Text.Builder.Linear.Buffer">#&lt;|</a></code>)</code>. See the GHC User Guide chapter
 &#8220;<a href="https://downloads.haskell.org/ghc/latest/docs/users_guide/exts/primitives.html#unboxed-tuples">Unboxed types and primitive operations</a>&#8221;
 for further information.</p></div></div><div class="top"><p class="src"><a id="v:-60--124--35-" class="def">(&lt;|#)</a> :: <a href="../base-4.18.2.1/GHC-Exts.html#t:Addr-35-" title="GHC.Exts">Addr#</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Buffer.html#%3C%7C%23" class="link">Source</a> <a href="#v:-60--124--35-" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use <code><a href="Data-Text-Builder-Linear-Buffer.html#v:-35--60--124-" title="Data.Text.Builder.Linear.Buffer">(#&lt;|)</a></code> instead</p></div><p>Alias for <code><code><a href="Data-Text-Builder-Linear-Buffer.html#v:-35--60--124-" title="Data.Text.Builder.Linear.Buffer">(#&lt;|)</a></code></code>.</p></div></div><a href="#g:8" id="g:8"><h1>Padding</h1></a><div class="top"><p class="src"><a id="v:justifyLeft" class="def">justifyLeft</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Char.html#justifyLeft" class="link">Source</a> <a href="#v:justifyLeft" class="selflink">#</a></p><div class="doc"><p>Pad a builder from the <em>right</em> side to the specified length with the specified
 character.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; justifyLeft 10 'x' (appendChars 3 'A' b))
</code></strong>&quot;AAAxxxxxxx&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; justifyLeft 5 'x' (appendChars 6 'A' b))
</code></strong>&quot;AAAAAA&quot;
</pre><p>Note that <code><a href="Data-Text-Builder-Linear-Buffer.html#v:newEmptyBuffer" title="Data.Text.Builder.Linear.Buffer">newEmptyBuffer</a></code> is needed in some situations. See <code><a href="Data-Text-Builder-Linear-Buffer.html#v:justifyRight" title="Data.Text.Builder.Linear.Buffer">justifyRight</a></code>
 for an example.</p></div></div><div class="top"><p class="src"><a id="v:justifyRight" class="def">justifyRight</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Char.html#justifyRight" class="link">Source</a> <a href="#v:justifyRight" class="selflink">#</a></p><div class="doc"><p>Pad a builder from the <em>left</em> side to the specified length with the specified
 character.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; justifyRight 10 'x' (appendChars 3 'A' b))
</code></strong>&quot;xxxxxxxAAA&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; justifyRight 5 'x' (appendChars 6 'A' b))
</code></strong>&quot;AAAAAA&quot;
</pre><p>Note that <code><a href="Data-Text-Builder-Linear-Buffer.html#v:newEmptyBuffer" title="Data.Text.Builder.Linear.Buffer">newEmptyBuffer</a></code> is needed in some situations. The following example creates
 a utility function that justify a text and then append it to a buffer.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes -XUnboxedTuples
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text.Builder.Linear.Buffer
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Text (Text)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>appendJustified :: Buffer %1 -&gt; Text -&gt; Buffer
appendJustified b t = case newEmptyBuffer b of
  -- Note that we need to create a new buffer from the text, in order
  -- to justify only the text and not the input buffer.
  (# b', empty #) -&gt; b' &gt;&lt; justifyRight 12 ' ' (empty |&gt; t)
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; (b |&gt; &quot;Test:&quot;) `appendJustified` &quot;foo&quot; `appendJustified` &quot;bar&quot;)
</code></strong>&quot;Test:         foo         bar&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:center" class="def">center</a> :: <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/Data-Char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <a href="src/Data.Text.Builder.Linear.Char.html#center" class="link">Source</a> <a href="#v:center" class="selflink">#</a></p><div class="doc"><p>Center a builder to the specified length with the specified character.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; center 10 'x' (appendChars 3 'A' b))
</code></strong>&quot;xxxxAAAxxx&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; center 5 'x' (appendChars 6 'A' b))
</code></strong>&quot;AAAAAA&quot;
</pre><p>Note that <code><a href="Data-Text-Builder-Linear-Buffer.html#v:newEmptyBuffer" title="Data.Text.Builder.Linear.Buffer">newEmptyBuffer</a></code> is needed in some situations. See <code><a href="Data-Text-Builder-Linear-Buffer.html#v:justifyRight" title="Data.Text.Builder.Linear.Buffer">justifyRight</a></code>
 for an example.</p></div></div><a href="#g:9" id="g:9"><h1>Number formatting</h1></a><a href="#g:10" id="g:10"><h2>Decimal</h2></a><div class="top"><p class="src"><a id="v:-124--62--36-" class="def">(|&gt;$)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixl 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Dec.html#%7C%3E%24" class="link">Source</a> <a href="#v:-124--62--36-" class="selflink">#</a></p><div class="doc"><p>Append decimal number.</p></div></div><div class="top"><p class="src"><a id="v:-36--60--124-" class="def">($&lt;|)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Dec.html#%24%3C%7C" class="link">Source</a> <a href="#v:-36--60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend decimal number.</p></div></div><a href="#g:11" id="g:11"><h2>Hexadecimal</h2></a><a href="#g:12" id="g:12"><h3>Lower-case</h3></a><div class="top"><p class="src"><a id="v:-124--62--38-" class="def">(|&gt;&amp;)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixl 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Hex.html#%7C%3E%26" class="link">Source</a> <a href="#v:-124--62--38-" class="selflink">#</a></p><div class="doc"><p>Append the lower-case hexadecimal represensation of a number.</p><p>Negative numbers are interpreted as their corresponding unsigned number, e.g.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Int (Int8, Int16)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; b |&gt;&amp; (-1 :: Int8)) == &quot;ff&quot;
</code></strong>True
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; b |&gt;&amp; (-1 :: Int16)) == &quot;ffff&quot;
</code></strong>True
</pre></div></div><div class="top"><p class="src"><a id="v:-38--60--124-" class="def">(&amp;&lt;|)</a> :: (<a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> a, <a href="../base-4.18.2.1/Data-Bits.html#t:FiniteBits" title="Data.Bits">FiniteBits</a> a) =&gt; a -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Hex.html#%26%3C%7C" class="link">Source</a> <a href="#v:-38--60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend the lower-case hexadecimal representation of a number.</p><p>Negative numbers are interpreted as their corresponding unsigned number, e.g.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings -XLinearTypes
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Int (Int8, Int16)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; (-1 :: Int8) &amp;&lt;| b) == &quot;ff&quot;
</code></strong>True
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runBuffer (\b -&gt; (-1 :: Int16) &amp;&lt;| b) == &quot;ffff&quot;
</code></strong>True
</pre></div></div><a href="#g:13" id="g:13"><h3>Upper-case and padding</h3></a><div class="doc"><p>Note that no <em>upper</em> case hexadecimal formatting is provided. This package
 provides a minimal API with utility functions only for common cases. For
 other use cases, please adapt the code of this package, e.g. as shown in
 the <a href="https://github.com/Bodigrim/linear-builder/examples/src/Examples/Unicode.hs">Unicode code point example</a>.</p></div><a href="#g:14" id="g:14"><h2>Double</h2></a><div class="top"><p class="src"><a id="v:-124--62--37-" class="def">(|&gt;%)</a> :: <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixl 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Double.html#%7C%3E%25" class="link">Source</a> <a href="#v:-124--62--37-" class="selflink">#</a></p><div class="doc"><p>Append double.</p></div></div><div class="top"><p class="src"><a id="v:-37--60--124-" class="def">(%&lt;|)</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> %1 -&gt; <a href="Data-Text-Builder-Linear-Buffer.html#t:Buffer" title="Data.Text.Builder.Linear.Buffer">Buffer</a> <span class="fixity">infixr 6</span><span class="rightedge"></span> <a href="src/Data.Text.Builder.Linear.Double.html#%25%3C%7C" class="link">Source</a> <a href="#v:-37--60--124-" class="selflink">#</a></p><div class="doc"><p>Prepend double.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>