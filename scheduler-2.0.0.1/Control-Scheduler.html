<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Scheduler</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">scheduler-2.0.0.1: Work stealing scheduler.</span><ul class="links" id="page-menu"><li><a href="src/Control.Scheduler.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Alexey Kuleshevich 2018-2021</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Alexey Kuleshevich &lt;lehins@yandex.ru&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Scheduler</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Scheduler</a><ul><li><a href="#g:2">Regular</a></li><li><a href="#g:3">Stateful workers</a></li><li><a href="#g:4">Trivial (no parallelism)</a></li></ul></li><li><a href="#g:5">Scheduling computation</a></li><li><a href="#g:6">Batches</a></li><li><a href="#g:7">Early termination</a></li><li><a href="#g:8">Workers</a></li><li><a href="#g:9">Computation strategies</a></li><li><a href="#g:10">Useful functions</a></li><li><a href="#g:11">Exceptions</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Scheduler">Scheduler</a> s a</li><li class="src short"><span class="keyword">data</span> <a href="#t:SchedulerWS">SchedulerWS</a> ws a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Results">Results</a> a<ul class="subs"><li>= <a href="#v:Finished">Finished</a> [a]</li><li>| <a href="#v:FinishedEarly">FinishedEarly</a> [a] !a</li><li>| <a href="#v:FinishedEarlyWith">FinishedEarlyWith</a> !a</li></ul></li><li class="src short"><a href="#v:withScheduler">withScheduler</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; m b) -&gt; m [a]</li><li class="src short"><a href="#v:withScheduler_">withScheduler_</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; m b) -&gt; m ()</li><li class="src short"><a href="#v:withSchedulerR">withSchedulerR</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; m b) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</li><li class="src short"><a href="#v:withSchedulerWS">withSchedulerWS</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; (<a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; m b) -&gt; m [a]</li><li class="src short"><a href="#v:withSchedulerWS_">withSchedulerWS_</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; (<a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws () -&gt; m b) -&gt; m ()</li><li class="src short"><a href="#v:withSchedulerWSR">withSchedulerWSR</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; (<a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; m b) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</li><li class="src short"><a href="#v:unwrapSchedulerWS">unwrapSchedulerWS</a> :: <a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a</li><li class="src short"><a href="#v:trivialScheduler_">trivialScheduler_</a> :: <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s ()</li><li class="src short"><a href="#v:withTrivialScheduler">withTrivialScheduler</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m b) -&gt; m [a]</li><li class="src short"><a href="#v:withTrivialSchedulerR">withTrivialSchedulerR</a> :: <span class="keyword">forall</span> a b m s. <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m b) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</li><li class="src short"><a href="#v:scheduleWork">scheduleWork</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m a -&gt; m ()</li><li class="src short"><a href="#v:scheduleWork_">scheduleWork_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; m () -&gt; m ()</li><li class="src short"><a href="#v:scheduleWorkId">scheduleWorkId</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; m a) -&gt; m ()</li><li class="src short"><a href="#v:scheduleWorkId_">scheduleWorkId_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; m ()) -&gt; m ()</li><li class="src short"><a href="#v:scheduleWorkState">scheduleWorkState</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> m =&gt; <a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; (ws -&gt; m a) -&gt; m ()</li><li class="src short"><a href="#v:scheduleWorkState_">scheduleWorkState_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> m =&gt; <a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws () -&gt; (ws -&gt; m ()) -&gt; m ()</li><li class="src short"><a href="#v:replicateWork">replicateWork</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m ()</li><li class="src short"><a href="#v:replicateWork_">replicateWork_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Batch">Batch</a> s a</li><li class="src short"><a href="#v:runBatch">runBatch</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; m c) -&gt; m [a]</li><li class="src short"><a href="#v:runBatch_">runBatch_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s () -&gt; m c) -&gt; m ()</li><li class="src short"><a href="#v:runBatchR">runBatchR</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; m c) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</li><li class="src short"><a href="#v:cancelBatch">cancelBatch</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; a -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:cancelBatch_">cancelBatch_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s () -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:cancelBatchWith">cancelBatchWith</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; a -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:hasBatchFinished">hasBatchFinished</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:getCurrentBatch">getCurrentBatch</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a)</li><li class="src short"><a href="#v:terminate">terminate</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; a -&gt; m a</li><li class="src short"><a href="#v:terminate_">terminate_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; m ()</li><li class="src short"><a href="#v:terminateWith">terminateWith</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; a -&gt; m a</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:WorkerId">WorkerId</a> = <a href="#v:WorkerId">WorkerId</a> {<ul class="subs"><li><a href="#v:getWorkerId">getWorkerId</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:WorkerStates">WorkerStates</a> ws</li><li class="src short"><a href="#v:numWorkers">numWorkers</a> :: <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:workerStatesComp">workerStatesComp</a> :: <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></li><li class="src short"><a href="#v:initWorkerStates">initWorkerStates</a> :: <a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; m ws) -&gt; m (<a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Comp">Comp</a> <span class="keyword">where</span><ul class="subs"><li><a href="#v:Seq">Seq</a></li><li><a href="#v:ParOn">ParOn</a> ![<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>]</li><li><a href="#v:ParN">ParN</a> !<a href="../base-4.18.2.1/Data-Word.html#t:Word16" title="Data.Word">Word16</a></li><li><span class="keyword">pattern</span> <a href="#v:Par">Par</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></li><li><span class="keyword">pattern</span> <a href="#v:Par-39-">Par'</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></li></ul></li><li class="src short"><a href="#v:getCompWorkers">getCompWorkers</a> :: <a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; m <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:replicateConcurrently">replicateConcurrently</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m [a]</li><li class="src short"><a href="#v:replicateConcurrently_">replicateConcurrently_</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m ()</li><li class="src short"><a href="#v:traverseConcurrently">traverseConcurrently</a> :: (<a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m, <a href="../base-4.18.2.1/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> t) =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (a -&gt; m b) -&gt; t a -&gt; m (t b)</li><li class="src short"><a href="#v:traverseConcurrently_">traverseConcurrently_</a> :: (<a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m, <a href="../base-4.18.2.1/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> t) =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (a -&gt; m b) -&gt; t a -&gt; m ()</li><li class="src short"><a href="#v:traverse_">traverse_</a> :: (<a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f, <a href="../base-4.18.2.1/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> t) =&gt; (a -&gt; f ()) -&gt; t a -&gt; f ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:MutexException">MutexException</a> = <a href="#v:MutexException">MutexException</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Scheduler</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Scheduler" class="def">Scheduler</a> s a <a href="src/Control.Scheduler.Types.html#Scheduler" class="link">Source</a> <a href="#t:Scheduler" class="selflink">#</a></p><div class="doc"><p>Main type for scheduling work. See <code><a href="Control-Scheduler.html#v:withScheduler" title="Control.Scheduler">withScheduler</a></code> or
 <code><a href="Control-Scheduler.html#v:withScheduler_" title="Control.Scheduler">withScheduler_</a></code> for ways to construct and use this data type.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SchedulerWS" class="def">SchedulerWS</a> ws a <a href="src/Control.Scheduler.Types.html#SchedulerWS" class="link">Source</a> <a href="#t:SchedulerWS" class="selflink">#</a></p><div class="doc"><p>This is a wrapper around <code><a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a></code>, but it also keeps a separate state for each
 individual worker. See <code><a href="Control-Scheduler.html#v:withSchedulerWS" title="Control.Scheduler">withSchedulerWS</a></code> or
 <code><a href="Control-Scheduler.html#v:withSchedulerWS_" title="Control.Scheduler">withSchedulerWS_</a></code> for ways to construct and use this data type.</p><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Results" class="def">Results</a> a <a href="src/Control.Scheduler.Types.html#Results" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></p><div class="doc"><p>Computed results of scheduled jobs.</p><p><em>Since: 1.4.2</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Finished" class="def">Finished</a> [a]</td><td class="doc"><p>Finished normally with all scheduled jobs completed</p></td></tr><tr><td class="src"><a id="v:FinishedEarly" class="def">FinishedEarly</a> [a] !a</td><td class="doc"><p>Finished early by the means of <code><a href="Control-Scheduler.html#v:cancelBatch" title="Control.Scheduler">cancelBatch</a></code> or
 <code><a href="Control-Scheduler.html#v:terminate" title="Control.Scheduler">terminate</a></code>.</p></td></tr><tr><td class="src"><a id="v:FinishedEarlyWith" class="def">FinishedEarlyWith</a> !a</td><td class="doc"><p>Finished early by the means of <code><a href="Control-Scheduler.html#v:cancelBatchWith" title="Control.Scheduler">cancelBatchWith</a></code> or
 <code><a href="Control-Scheduler.html#v:terminateWith" title="Control.Scheduler">terminateWith</a></code>.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Results">Instances</h4><details id="i:Results" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Results:Foldable:1"></span> <a href="../base-4.18.2.1/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></span> <a href="src/Control.Scheduler.Types.html#line-62" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Results:Foldable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fold">fold</a> :: <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> m -&gt; m <a href="#v:fold" class="selflink">#</a></p><p class="src"><a href="#v:foldMap">foldMap</a> :: <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; m <a href="#v:foldMap" class="selflink">#</a></p><p class="src"><a href="#v:foldMap-39-">foldMap'</a> :: <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; m <a href="#v:foldMap-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldr">foldr</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; b <a href="#v:foldr" class="selflink">#</a></p><p class="src"><a href="#v:foldr-39-">foldr'</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; b <a href="#v:foldr-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldl">foldl</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; b <a href="#v:foldl" class="selflink">#</a></p><p class="src"><a href="#v:foldl-39-">foldl'</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; b <a href="#v:foldl-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldr1">foldr1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; a <a href="#v:foldr1" class="selflink">#</a></p><p class="src"><a href="#v:foldl1">foldl1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; a <a href="#v:foldl1" class="selflink">#</a></p><p class="src"><a href="#v:toList">toList</a> :: <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; [a] <a href="#v:toList" class="selflink">#</a></p><p class="src"><a href="#v:null">null</a> :: <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:null" class="selflink">#</a></p><p class="src"><a href="#v:length">length</a> :: <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:length" class="selflink">#</a></p><p class="src"><a href="#v:elem">elem</a> :: <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:elem" class="selflink">#</a></p><p class="src"><a href="#v:maximum">maximum</a> :: <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; a <a href="#v:maximum" class="selflink">#</a></p><p class="src"><a href="#v:minimum">minimum</a> :: <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; a <a href="#v:minimum" class="selflink">#</a></p><p class="src"><a href="#v:sum">sum</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; a <a href="#v:sum" class="selflink">#</a></p><p class="src"><a href="#v:product">product</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; a <a href="#v:product" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Results:Traversable:2"></span> <a href="../base-4.18.2.1/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></span> <a href="src/Control.Scheduler.Types.html#line-74" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Results:Traversable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:traverse">traverse</a> :: <a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; (a -&gt; f b) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; f (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> b) <a href="#v:traverse" class="selflink">#</a></p><p class="src"><a href="#v:sequenceA">sequenceA</a> :: <a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> (f a) -&gt; f (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="#v:sequenceA" class="selflink">#</a></p><p class="src"><a href="#v:mapM">mapM</a> :: <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> b) <a href="#v:mapM" class="selflink">#</a></p><p class="src"><a href="#v:sequence">sequence</a> :: <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> (m a) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="#v:sequence" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Results:Functor:3"></span> <a href="../base-4.18.2.1/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></span> <a href="src/Control.Scheduler.Types.html#line-55" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Results:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> b -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Results:Read:4"></span> <a href="../base-4.18.2.1/Text-Read.html#t:Read" title="Text.Read">Read</a> a =&gt; <a href="../base-4.18.2.1/Text-Read.html#t:Read" title="Text.Read">Read</a> (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</span> <a href="src/Control.Scheduler.Types.html#line-53" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Results:Read:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Text-ParserCombinators-ReadP.html#t:ReadS" title="Text.ParserCombinators.ReadP">ReadS</a> (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="#v:readsPrec" class="selflink">#</a></p><p class="src"><a href="#v:readList">readList</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadP.html#t:ReadS" title="Text.ParserCombinators.ReadP">ReadS</a> [<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a] <a href="#v:readList" class="selflink">#</a></p><p class="src"><a href="#v:readPrec">readPrec</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadPrec.html#t:ReadPrec" title="Text.ParserCombinators.ReadPrec">ReadPrec</a> (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="#v:readPrec" class="selflink">#</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadPrec.html#t:ReadPrec" title="Text.ParserCombinators.ReadPrec">ReadPrec</a> [<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a] <a href="#v:readListPrec" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Results:Show:5"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</span> <a href="src/Control.Scheduler.Types.html#line-53" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Results:Show:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Results:Eq:6"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</span> <a href="src/Control.Scheduler.Types.html#line-53" class="link">Source</a> <a href="#t:Results" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Results:Eq:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Regular</h2></a><div class="top"><p class="src"><a id="v:withScheduler" class="def">withScheduler</a> <a href="src/Control.Scheduler.html#withScheduler" class="link">Source</a> <a href="#v:withScheduler" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></td><td class="doc"><p>Computation strategy</p></td></tr><tr><td class="src">-&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; m b)</td><td class="doc"><p>Action that will be scheduling all the work.</p></td></tr><tr><td class="src">-&gt; m [a]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Initialize a scheduler and submit jobs that will be computed sequentially or in parallelel,
 which is determined by the <code><a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></code>utation strategy.</p><p>Here are some cool properties about the <code><a href="Control-Scheduler.html#v:withScheduler" title="Control.Scheduler">withScheduler</a></code>:</p><ul><li>This function will block until all of the submitted jobs have finished or at least one of them
   resulted in an exception, which will be re-thrown at the callsite.</li><li>It is totally fine for nested jobs to submit more jobs for the same or other scheduler</li><li>It is ok to initialize multiple schedulers at the same time, although that will likely result
   in suboptimal performance, unless workers are pinned to different capabilities.</li><li><strong>Warning</strong> It is pretty dangerous to schedule jobs that can block, because it might
   lead to a potential deadlock, if you are not careful. Consider this example. First
   execution works fine, since there are two scheduled workers, and one can unblock the
   other, but the second scenario immediately results in a deadlock.</li></ul><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>withScheduler (ParOn [1,2]) $ \s -&gt; newEmptyMVar &gt;&gt;= (\ mv -&gt; scheduleWork s (readMVar mv) &gt;&gt; scheduleWork s (putMVar mv ()))
</code></strong>[(),()]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import System.Timeout
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>timeout 1000000 $ withScheduler (ParOn [1]) $ \s -&gt; newEmptyMVar &gt;&gt;= (\ mv -&gt; scheduleWork s (readMVar mv) &gt;&gt; scheduleWork s (putMVar mv ()))
</code></strong>Nothing
</pre><p><strong>Important</strong>: In order to get work done truly in parallel, program needs to be compiled with
 <code>-threaded</code> GHC flag and executed with <code>+RTS -N -RTS</code> to use all available cores.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:withScheduler_" class="def">withScheduler_</a> <a href="src/Control.Scheduler.html#withScheduler_" class="link">Source</a> <a href="#v:withScheduler_" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></td><td class="doc"><p>Computation strategy</p></td></tr><tr><td class="src">-&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; m b)</td><td class="doc"><p>Action that will be scheduling all the work.</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:withScheduler" title="Control.Scheduler">withScheduler</a></code>, but discards results of submitted jobs.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:withSchedulerR" class="def">withSchedulerR</a> <a href="src/Control.Scheduler.html#withSchedulerR" class="link">Source</a> <a href="#v:withSchedulerR" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></td><td class="doc"><p>Computation strategy</p></td></tr><tr><td class="src">-&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; m b)</td><td class="doc"><p>Action that will be scheduling all the work.</p></td></tr><tr><td class="src">-&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:withScheduler" title="Control.Scheduler">withScheduler</a></code>, except instead of a list it produces <code><a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></code>, which allows
 for distinguishing between the ways computation was terminated.</p><p><em>Since: 1.4.2</em></p></div></div><a href="#g:3" id="g:3"><h2>Stateful workers</h2></a><div class="top"><p class="src"><a id="v:withSchedulerWS" class="def">withSchedulerWS</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; (<a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; m b) -&gt; m [a] <a href="src/Control.Scheduler.html#withSchedulerWS" class="link">Source</a> <a href="#v:withSchedulerWS" class="selflink">#</a></p><div class="doc"><p>Run a scheduler with stateful workers. Throws <code><a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a></code> if an attempt is made
 to concurrently use the same <code><a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a></code> with another <code><a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a></code>.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:withSchedulerWS0">Examples</h4><details id="ch:withSchedulerWS0"><summary class="hide-when-js-enabled">Expand</summary><p>A good example of using stateful workers would be generation of random number
 in parallel. A lof of times random number generators are not thread safe, so
 we can work around this problem with a separate stateful generator for
 each of the workers.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Control.Monad as M ((&gt;=&gt;), replicateM)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Control.Concurrent (yield, threadDelay)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.List (sort)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>-- ^ Above imports are used to make sure output is deterministic, which is needed for doctest
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import System.Random.MWC as MWC
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Vector.Unboxed as V (singleton)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>states &lt;- initWorkerStates (ParN 4) (MWC.initialize . V.singleton . fromIntegral . getWorkerId)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let scheduleGen scheduler = scheduleWorkState scheduler (MWC.uniform &gt;=&gt; \r -&gt; yield &gt;&gt; threadDelay 200000 &gt;&gt; pure r)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sort &lt;$&gt; withSchedulerWS states (M.replicateM 4 . scheduleGen) :: IO [Double]
</code></strong>[0.21734983682025255,0.5000843862105709,0.5759825622603018,0.8587171114177893]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sort &lt;$&gt; withSchedulerWS states (M.replicateM 4 . scheduleGen) :: IO [Double]
</code></strong>[2.3598617298033475e-2,9.949679290089553e-2,0.38223134248645885,0.7408640677124702]
</pre><p>In the above example we use four different random number generators from
 <a href="https://www.stackage.org/package/mwc-random">`mwc-random`</a> in order to generate 4
 numbers, all in separate threads. The subsequent call to the <code><a href="Control-Scheduler.html#v:withSchedulerWS" title="Control.Scheduler">withSchedulerWS</a></code> function
 with the same <code>states</code> is allowed to reuse the same generators, thus avoiding expensive
 initialization.</p><p><em>Side note</em> - The example presented was crafted with slight trickery in order to
 guarantee that the output is deterministic, so if you run instructions exactly the same
 way in GHCI you will get the exact same output. Non-determinism comes from thread
 scheduling, rather than from random number generator, because we use exactly the same
 seed for each worker, but workers run concurrently. Exact output is not really needed,
 except for the doctests to pass.</p></details><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><a id="v:withSchedulerWS_" class="def">withSchedulerWS_</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; (<a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws () -&gt; m b) -&gt; m () <a href="src/Control.Scheduler.html#withSchedulerWS_" class="link">Source</a> <a href="#v:withSchedulerWS_" class="selflink">#</a></p><div class="doc"><p>Run a scheduler with stateful workers, while discarding computation results.</p><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><a id="v:withSchedulerWSR" class="def">withSchedulerWSR</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; (<a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; m b) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="src/Control.Scheduler.html#withSchedulerWSR" class="link">Source</a> <a href="#v:withSchedulerWSR" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:withSchedulerWS" title="Control.Scheduler">withSchedulerWS</a></code>, except instead of a list it produces <code><a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></code>, which
 allows for distinguishing between the ways computation was terminated.</p><p><em>Since: 1.4.2</em></p></div></div><div class="top"><p class="src"><a id="v:unwrapSchedulerWS" class="def">unwrapSchedulerWS</a> :: <a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a <a href="src/Control.Scheduler.html#unwrapSchedulerWS" class="link">Source</a> <a href="#v:unwrapSchedulerWS" class="selflink">#</a></p><div class="doc"><p>Get the underlying <code><a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a></code>, which cannot access <code><a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a></code>.</p><p><em>Since: 1.4.0</em></p></div></div><a href="#g:4" id="g:4"><h2>Trivial (no parallelism)</h2></a><div class="top"><p class="src"><a id="v:trivialScheduler_" class="def">trivialScheduler_</a> :: <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () <a href="src/Control.Scheduler.Internal.html#trivialScheduler_" class="link">Source</a> <a href="#v:trivialScheduler_" class="selflink">#</a></p><div class="doc"><p>The most basic scheduler that simply runs the task instead of scheduling it. Early termination
 requests are bluntly ignored.</p><p><em>Since: 1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:withTrivialScheduler" class="def">withTrivialScheduler</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m b) -&gt; m [a] <a href="src/Control.Scheduler.html#withTrivialScheduler" class="link">Source</a> <a href="#v:withTrivialScheduler" class="selflink">#</a></p><div class="doc"><p>This trivial scheduler will behave in the same way as <code><a href="Control-Scheduler.html#v:withScheduler" title="Control.Scheduler">withScheduler</a></code> with <code><a href="Control-Scheduler.html#v:Seq" title="Control.Scheduler">Seq</a></code>
 computation strategy, except it is restricted to <code><a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a></code>, instead of <code><a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a></code>.</p><p><em>Since: 1.4.2</em></p></div></div><div class="top"><p class="src"><a id="v:withTrivialSchedulerR" class="def">withTrivialSchedulerR</a> :: <span class="keyword">forall</span> a b m s. <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; (<a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m b) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="src/Control.Scheduler.Internal.html#withTrivialSchedulerR" class="link">Source</a> <a href="#v:withTrivialSchedulerR" class="selflink">#</a></p><div class="doc"><p>This trivial scheduler will behave in a similar way as
 <code><a href="Control-Scheduler.html#v:withSchedulerR" title="Control.Scheduler">withSchedulerR</a></code> with <code><a href="Control-Scheduler.html#v:Seq" title="Control.Scheduler">Seq</a></code> computation strategy, except it is
 restricted to <code><a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a></code>, instead of <code><a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a></code> and the work isn't scheduled, but
 rather computed immediately.</p><p><em>Since: 1.4.2</em></p></div></div><a href="#g:5" id="g:5"><h1>Scheduling computation</h1></a><div class="top"><p class="src"><a id="v:scheduleWork" class="def">scheduleWork</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m a -&gt; m () <a href="src/Control.Scheduler.html#scheduleWork" class="link">Source</a> <a href="#v:scheduleWork" class="selflink">#</a></p><div class="doc"><p>Schedule an action to be picked up and computed by a worker from a pool of
 jobs. Similar to <code><a href="Control-Scheduler.html#v:scheduleWorkId" title="Control.Scheduler">scheduleWorkId</a></code>, except the job doesn't get the worker id.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:scheduleWork_" class="def">scheduleWork_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; m () -&gt; m () <a href="src/Control.Scheduler.html#scheduleWork_" class="link">Source</a> <a href="#v:scheduleWork_" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:scheduleWork" title="Control.Scheduler">scheduleWork</a></code>, but only for a <code><a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a></code> that doesn't keep the results.</p><p><em>Since: 1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:scheduleWorkId" class="def">scheduleWorkId</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; m a) -&gt; m () <a href="src/Control.Scheduler.html#scheduleWorkId" class="link">Source</a> <a href="#v:scheduleWorkId" class="selflink">#</a></p><div class="doc"><p>Schedule an action to be picked up and computed by a worker from a pool of
 jobs. Argument supplied to the job will be the id of the worker doing the job. This is
 useful for identification of a thread that will be doing the work, since there is
 one-to-one mapping from <code><a href="../base-4.18.2.1/Control-Concurrent.html#v:ThreadId" title="Control.Concurrent">ThreadId</a></code> to <code><a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></code> for a particular
 scheduler.</p><p><em>Since: 1.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:scheduleWorkId_" class="def">scheduleWorkId_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; m ()) -&gt; m () <a href="src/Control.Scheduler.html#scheduleWorkId_" class="link">Source</a> <a href="#v:scheduleWorkId_" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:scheduleWorkId" title="Control.Scheduler">scheduleWorkId</a></code>, but only for a <code><a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a></code> that doesn't keep the results.</p><p><em>Since: 1.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:scheduleWorkState" class="def">scheduleWorkState</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> m =&gt; <a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws a -&gt; (ws -&gt; m a) -&gt; m () <a href="src/Control.Scheduler.html#scheduleWorkState" class="link">Source</a> <a href="#v:scheduleWorkState" class="selflink">#</a></p><div class="doc"><p>Schedule a job that will get a worker state passed as an argument</p><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><a id="v:scheduleWorkState_" class="def">scheduleWorkState_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> m =&gt; <a href="Control-Scheduler.html#t:SchedulerWS" title="Control.Scheduler">SchedulerWS</a> ws () -&gt; (ws -&gt; m ()) -&gt; m () <a href="src/Control.Scheduler.html#scheduleWorkState_" class="link">Source</a> <a href="#v:scheduleWorkState_" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:scheduleWorkState" title="Control.Scheduler">scheduleWorkState</a></code>, but dont' keep the result of computation.</p><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><a id="v:replicateWork" class="def">replicateWork</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m () <a href="src/Control.Scheduler.html#replicateWork" class="link">Source</a> <a href="#v:replicateWork" class="selflink">#</a></p><div class="doc"><p>Schedule the same action to run <code>n</code> times concurrently. This differs from
 <code><a href="Control-Scheduler.html#v:replicateConcurrently" title="Control.Scheduler">replicateConcurrently</a></code> by allowing the caller to use the <code><a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a></code> freely,
 or to allow early termination via <code><a href="Control-Scheduler.html#v:terminate" title="Control.Scheduler">terminate</a></code> across all (identical) threads.
 To be called within a <code><a href="Control-Scheduler.html#v:withScheduler" title="Control.Scheduler">withScheduler</a></code> block.</p><p><em>Since: 2.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:replicateWork_" class="def">replicateWork_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m () <a href="src/Control.Scheduler.html#replicateWork_" class="link">Source</a> <a href="#v:replicateWork_" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:replicateWork" title="Control.Scheduler">replicateWork</a></code>, but it does not retain the results of scheduled jobs</p><p><em>Since: 2.0.0</em></p></div></div><a href="#g:6" id="g:6"><h1>Batches</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Batch" class="def">Batch</a> s a <a href="src/Control.Scheduler.Types.html#Batch" class="link">Source</a> <a href="#t:Batch" class="selflink">#</a></p><div class="doc"><p>Batch is an artifical checkpoint that can be controlled by the user throughout the
 lifetime of a scheduler.</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:runBatch" class="def">runBatch</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; m c) -&gt; m [a] <a href="src/Control.Scheduler.html#runBatch" class="link">Source</a> <a href="#v:runBatch" class="selflink">#</a></p><div class="doc"><p>Run a single batch of jobs. Supplied action will not return until all jobs placed on
 the queue are done or the whole batch is cancelled with one of these <code><a href="Control-Scheduler.html#v:cancelBatch" title="Control.Scheduler">cancelBatch</a></code>,
 <code><a href="Control-Scheduler.html#v:cancelBatch_" title="Control.Scheduler">cancelBatch_</a></code> or <code><a href="Control-Scheduler.html#v:cancelBatchWith" title="Control.Scheduler">cancelBatchWith</a></code>.</p><p>It waits for all scheduled jobs to finish and collects the computed results into a
 list. It is a blocking operation, but if there are no jobs in progress it will return
 immediately. It is safe to continue using the supplied scheduler after this function
 returns. However, if any of the jobs resulted in an exception it will be rethrown by this
 function, which, unless caught, will further put the scheduler in a terminated state.</p><p>It is important to note that any job that hasn't had its results collected from the
 scheduler prior to starting the batch it will end up on the batch result list.</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:runBatch_" class="def">runBatch_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s () -&gt; m c) -&gt; m () <a href="src/Control.Scheduler.html#runBatch_" class="link">Source</a> <a href="#v:runBatch_" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:runBatch" title="Control.Scheduler">runBatch</a></code>, except it ignores results of computation</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:runBatchR" class="def">runBatchR</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrimBase" title="Control.Monad.Primitive">MonadPrimBase</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; m c) -&gt; m (<a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a> a) <a href="src/Control.Scheduler.html#runBatchR" class="link">Source</a> <a href="#v:runBatchR" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:runBatch" title="Control.Scheduler">runBatch</a></code>, except it produces <code><a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></code> instead of a list.</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:cancelBatch" class="def">cancelBatch</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; a -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Scheduler.html#cancelBatch" class="link">Source</a> <a href="#v:cancelBatch" class="selflink">#</a></p><div class="doc"><p>Cancel batch with supplied identifier, which will lead to scheduler to return
 <code><a href="Control-Scheduler.html#v:FinishedEarly" title="Control.Scheduler">FinishedEarly</a></code> result. This is an idempotent operation and has no affect if currently
 running batch does not match supplied identifier. Returns <code><a href="../base-4.18.2.1/Data-Bool.html#v:False" title="Data.Bool">False</a></code> when cancelling did
 not succeed due to mismatched identifier or does not return at all since all jobs get
 cancelled immediately. For trivial schedulers however there is no way to perform
 concurrent cancelation and it will return <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code>.</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:cancelBatch_" class="def">cancelBatch_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s () -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Scheduler.html#cancelBatch_" class="link">Source</a> <a href="#v:cancelBatch_" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:cancelBatch" title="Control.Scheduler">cancelBatch</a></code>, but only works with schedulers that don't care about results</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:cancelBatchWith" class="def">cancelBatchWith</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; a -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Scheduler.html#cancelBatchWith" class="link">Source</a> <a href="#v:cancelBatchWith" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:cancelBatch_" title="Control.Scheduler">cancelBatch_</a></code>, but the result of computation will be set to <code><a href="Control-Scheduler.html#v:FinishedEarlyWith" title="Control.Scheduler">FinishedEarlyWith</a></code></p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:hasBatchFinished" class="def">hasBatchFinished</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a -&gt; m <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Scheduler.html#hasBatchFinished" class="link">Source</a> <a href="#v:hasBatchFinished" class="selflink">#</a></p><div class="doc"><p>Check if the supplied batch has already finished.</p><p><em>Since: 1.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:getCurrentBatch" class="def">getCurrentBatch</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; m (<a href="Control-Scheduler.html#t:Batch" title="Control.Scheduler">Batch</a> s a) <a href="src/Control.Scheduler.html#getCurrentBatch" class="link">Source</a> <a href="#v:getCurrentBatch" class="selflink">#</a></p><div class="doc"><p>This function gives a way to get access to the main batch that started implicitely.</p><p><em>Since: 1.5.0</em></p></div></div><a href="#g:7" id="g:7"><h1>Early termination</h1></a><div class="top"><p class="src"><a id="v:terminate" class="def">terminate</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; a -&gt; m a <a href="src/Control.Scheduler.html#terminate" class="link">Source</a> <a href="#v:terminate" class="selflink">#</a></p><div class="doc"><p>As soon as possible try to terminate any computation that is being performed by all
 workers managed by this scheduler and collect whatever results have been computed, with
 supplied element guaranteed to being the last one. In case when <code><a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></code> type is
 returned this function will cause the scheduler to produce <code><a href="Control-Scheduler.html#v:FinishedEarly" title="Control.Scheduler">FinishedEarly</a></code></p><p><em>Important</em> - With <code><a href="Control-Scheduler.html#v:Seq" title="Control.Scheduler">Seq</a></code> strategy this will not stop other scheduled tasks from being computed,
 although it will make sure their results are discarded.</p><p><em>Since: 1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:terminate_" class="def">terminate_</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s () -&gt; m () <a href="src/Control.Scheduler.html#terminate_" class="link">Source</a> <a href="#v:terminate_" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Control-Scheduler.html#v:terminate" title="Control.Scheduler">terminate</a></code>, but for a <code><a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a></code> that does not keep any results of computation.</p><p><em>Important</em> - In case of <code><a href="Control-Scheduler.html#v:Seq" title="Control.Scheduler">Seq</a></code> computation strategy this function has no affect.</p><p><em>Since: 1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:terminateWith" class="def">terminateWith</a> :: <a href="../primitive-0.8.0.0/Control-Monad-Primitive.html#t:MonadPrim" title="Control.Monad.Primitive">MonadPrim</a> s m =&gt; <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; a -&gt; m a <a href="src/Control.Scheduler.html#terminateWith" class="link">Source</a> <a href="#v:terminateWith" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Control-Scheduler.html#v:terminate" title="Control.Scheduler">terminate</a></code>, but returning a single element list containing the supplied
 argument. This can be very useful for parallel search algorithms. In case when
 <code><a href="Control-Scheduler.html#t:Results" title="Control.Scheduler">Results</a></code> is the return type this function will cause the scheduler to produce
 <code><a href="Control-Scheduler.html#v:FinishedEarlyWith" title="Control.Scheduler">FinishedEarlyWith</a></code></p><p><em>Important</em> - Same as with <code><a href="Control-Scheduler.html#v:terminate" title="Control.Scheduler">terminate</a></code>, when <code><a href="Control-Scheduler.html#v:Seq" title="Control.Scheduler">Seq</a></code> strategy is used, this will not prevent
 computation from continuing, but the scheduler will return only the result supplied to this
 function.</p><p><em>Since: 1.1.0</em></p></div></div><a href="#g:8" id="g:8"><h1>Workers</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:WorkerId" class="def">WorkerId</a> <a href="src/Control.Scheduler.Queue.html#WorkerId" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></p><div class="doc"><p>A unique id for the worker in the <code><a href="Control-Scheduler.html#v:Scheduler" title="Control.Scheduler">Scheduler</a></code> context. It will
 always be a number from <code>0</code> up to, but not including, the number of workers a scheduler
 has, which in turn can always be determined with <code><a href="Control-Scheduler.html#v:numWorkers" title="Control.Scheduler">numWorkers</a></code> function.</p><p><em>Since: 1.4.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:WorkerId" class="def">WorkerId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getWorkerId" class="def">getWorkerId</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:WorkerId">Instances</h4><details id="i:WorkerId" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Bounded:1"></span> <a href="../base-4.18.2.1/Prelude.html#t:Bounded" title="Prelude">Bounded</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Bounded:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:minBound">minBound</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:minBound" class="selflink">#</a></p><p class="src"><a href="#v:maxBound">maxBound</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:maxBound" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Enum:2"></span> <a href="../base-4.18.2.1/Prelude.html#t:Enum" title="Prelude">Enum</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Enum:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:succ">succ</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:succ" class="selflink">#</a></p><p class="src"><a href="#v:pred">pred</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:pred" class="selflink">#</a></p><p class="src"><a href="#v:toEnum">toEnum</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:toEnum" class="selflink">#</a></p><p class="src"><a href="#v:fromEnum">fromEnum</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:fromEnum" class="selflink">#</a></p><p class="src"><a href="#v:enumFrom">enumFrom</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] <a href="#v:enumFrom" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThen">enumFromThen</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] <a href="#v:enumFromThen" class="selflink">#</a></p><p class="src"><a href="#v:enumFromTo">enumFromTo</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] <a href="#v:enumFromTo" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThenTo">enumFromThenTo</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] <a href="#v:enumFromThenTo" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Num:3"></span> <a href="../base-4.18.2.1/Prelude.html#t:Num" title="Prelude">Num</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Num:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-43-">(+)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:-43-" class="selflink">#</a></p><p class="src"><a href="#v:-45-">(-)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:-45-" class="selflink">#</a></p><p class="src"><a href="#v:-42-">(*)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:-42-" class="selflink">#</a></p><p class="src"><a href="#v:negate">negate</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:negate" class="selflink">#</a></p><p class="src"><a href="#v:abs">abs</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:abs" class="selflink">#</a></p><p class="src"><a href="#v:signum">signum</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:signum" class="selflink">#</a></p><p class="src"><a href="#v:fromInteger">fromInteger</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:fromInteger" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Read:4"></span> <a href="../base-4.18.2.1/Text-Read.html#t:Read" title="Text.Read">Read</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Read:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.18.2.1/Text-ParserCombinators-ReadP.html#t:ReadS" title="Text.ParserCombinators.ReadP">ReadS</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:readsPrec" class="selflink">#</a></p><p class="src"><a href="#v:readList">readList</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadP.html#t:ReadS" title="Text.ParserCombinators.ReadP">ReadS</a> [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] <a href="#v:readList" class="selflink">#</a></p><p class="src"><a href="#v:readPrec">readPrec</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadPrec.html#t:ReadPrec" title="Text.ParserCombinators.ReadPrec">ReadPrec</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:readPrec" class="selflink">#</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: <a href="../base-4.18.2.1/Text-ParserCombinators-ReadPrec.html#t:ReadPrec" title="Text.ParserCombinators.ReadPrec">ReadPrec</a> [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] <a href="#v:readListPrec" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Integral:5"></span> <a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Integral:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:quot">quot</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:quot" class="selflink">#</a></p><p class="src"><a href="#v:rem">rem</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:rem" class="selflink">#</a></p><p class="src"><a href="#v:div">div</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:div" class="selflink">#</a></p><p class="src"><a href="#v:mod">mod</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:mod" class="selflink">#</a></p><p class="src"><a href="#v:quotRem">quotRem</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>, <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>) <a href="#v:quotRem" class="selflink">#</a></p><p class="src"><a href="#v:divMod">divMod</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>, <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>) <a href="#v:divMod" class="selflink">#</a></p><p class="src"><a href="#v:toInteger">toInteger</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Integer" title="Prelude">Integer</a> <a href="#v:toInteger" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Real:6"></span> <a href="../base-4.18.2.1/Prelude.html#t:Real" title="Prelude">Real</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Real:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toRational">toRational</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Prelude.html#t:Rational" title="Prelude">Rational</a> <a href="#v:toRational" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Show:7"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Show:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Eq:8"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Eq:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorkerId:Ord:9"></span> <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a></span> <a href="src/Control.Scheduler.Queue.html#line-54" class="link">Source</a> <a href="#t:WorkerId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorkerId:Ord:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Queue.html">Control.Scheduler.Queue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; <a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:WorkerStates" class="def">WorkerStates</a> ws <a href="src/Control.Scheduler.Types.html#WorkerStates" class="link">Source</a> <a href="#t:WorkerStates" class="selflink">#</a></p><div class="doc"><p>Each worker is capable of keeping it's own state, that can be share for different
 schedulers, but not at the same time. In other words using the same <code><a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a></code> on
 <code><a href="Control-Scheduler.html#v:withSchedulerS" title="Control.Scheduler">withSchedulerS</a></code> concurrently will result in an error. Can be initialized with
 <code><a href="Control-Scheduler.html#v:initWorkerStates" title="Control.Scheduler">initWorkerStates</a></code></p><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><a id="v:numWorkers" class="def">numWorkers</a> :: <a href="Control-Scheduler.html#t:Scheduler" title="Control.Scheduler">Scheduler</a> s a -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Control.Scheduler.html#numWorkers" class="link">Source</a> <a href="#v:numWorkers" class="selflink">#</a></p><div class="doc"><p>Get the number of workers. Will mainly depend on the computation strategy and/or number of
 capabilities you have. Related function is <code><a href="Control-Scheduler.html#v:getCompWorkers" title="Control.Scheduler">getCompWorkers</a></code>.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:workerStatesComp" class="def">workerStatesComp</a> :: <a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="src/Control.Scheduler.html#workerStatesComp" class="link">Source</a> <a href="#v:workerStatesComp" class="selflink">#</a></p><div class="doc"><p>Get the computation strategy the states where initialized with.</p><p><em>Since: 1.4.0</em></p></div></div><div class="top"><p class="src"><a id="v:initWorkerStates" class="def">initWorkerStates</a> :: <a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (<a href="Control-Scheduler.html#t:WorkerId" title="Control.Scheduler">WorkerId</a> -&gt; m ws) -&gt; m (<a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a> ws) <a href="src/Control.Scheduler.Internal.html#initWorkerStates" class="link">Source</a> <a href="#v:initWorkerStates" class="selflink">#</a></p><div class="doc"><p>Initialize a separate state for each worker.</p><p><em>Since: 1.4.0</em></p></div></div><a href="#g:9" id="g:9"><h1>Computation strategies</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Comp" class="def">Comp</a> <a href="src/Control.Scheduler.Computation.html#Comp" class="link">Source</a> <a href="#t:Comp" class="selflink">#</a></p><div class="doc"><p>Computation strategy to use when scheduling work.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Seq" class="def">Seq</a></td><td class="doc"><p>Sequential computation</p></td></tr><tr><td class="src"><a id="v:ParOn" class="def">ParOn</a> ![<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a>]</td><td class="doc"><p>Schedule workers to run on specific capabilities. Specifying an empty list <code><code><a href="Control-Scheduler.html#v:ParOn" title="Control.Scheduler">ParOn</a></code> []</code> or
 using <code><a href="Control-Scheduler.html#v:Par" title="Control.Scheduler">Par</a></code> will result in utilization of all available capabilities.</p></td></tr><tr><td class="src"><a id="v:ParN" class="def">ParN</a> !<a href="../base-4.18.2.1/Data-Word.html#t:Word16" title="Data.Word">Word16</a></td><td class="doc"><p>Specify the number of workers that will be handling all the jobs. Difference from <code><a href="Control-Scheduler.html#v:ParOn" title="Control.Scheduler">ParOn</a></code> is
 that workers can jump between cores. Using <code><code><a href="Control-Scheduler.html#v:ParN" title="Control.Scheduler">ParN</a></code> 0</code> will result in using all available
 capabilities.</p></td></tr></table></div><div class="subs bundled-patterns"><p class="caption">Bundled Patterns</p><table><tr><td class="src"><span class="keyword">pattern</span> <a id="v:Par" class="def">Par</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></td><td class="doc"><p>Parallel computation using all available cores. Same as <code><code><a href="Control-Scheduler.html#v:ParOn" title="Control.Scheduler">ParOn</a></code> []</code></p><p><em>Since: 1.0.0</em></p></td></tr><tr><td class="src"><span class="keyword">pattern</span> <a id="v:Par-39-" class="def">Par'</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></td><td class="doc"><p>Parallel computation using all available cores. Same as <code><code><a href="Control-Scheduler.html#v:ParN" title="Control.Scheduler">ParN</a></code> 0</code></p><p><em>Since: 1.1.0</em></p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Comp">Instances</h4><details id="i:Comp" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Comp:Monoid:1"></span> <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></span> <a href="src/Control.Scheduler.Computation.html#line-72" class="link">Source</a> <a href="#t:Comp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Comp:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Computation.html">Control.Scheduler.Computation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a>] -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Comp:Semigroup:2"></span> <a href="../base-4.18.2.1/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></span> <a href="src/Control.Scheduler.Computation.html#line-78" class="link">Source</a> <a href="#t:Comp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Comp:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Computation.html">Control.Scheduler.Computation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Comp:Show:3"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></span> <a href="src/Control.Scheduler.Computation.html#line-54" class="link">Source</a> <a href="#t:Comp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Comp:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Computation.html">Control.Scheduler.Computation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Comp:NFData:4"></span> <a href="../deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></span> <a href="src/Control.Scheduler.Computation.html#line-64" class="link">Source</a> <a href="#t:Comp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Comp:NFData:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Computation.html">Control.Scheduler.Computation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; () <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Comp:Eq:5"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a></span> <a href="src/Control.Scheduler.Computation.html#line-38" class="link">Source</a> <a href="#t:Comp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Comp:Eq:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Computation.html">Control.Scheduler.Computation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getCompWorkers" class="def">getCompWorkers</a> :: <a href="../base-4.18.2.1/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; m <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Control.Scheduler.Computation.html#getCompWorkers" class="link">Source</a> <a href="#v:getCompWorkers" class="selflink">#</a></p><div class="doc"><p>Figure out how many workers will this computation strategy create.</p><p><em>Note</em> - If at any point during program execution global number of capabilities gets
 changed with <code><a href="../base-4.18.2.1/Control-Concurrent.html#v:setNumCapabilities" title="Control.Concurrent">setNumCapabilities</a></code>, it will have no affect on this
 function, unless it hasn't yet been called with <code><a href="Control-Scheduler.html#v:Par" title="Control.Scheduler">Par</a></code> or <code><a href="Control-Scheduler.html#v:Par-39-" title="Control.Scheduler">Par'</a></code> arguments.</p><p><em>Since: 1.1.0</em></p></div></div><a href="#g:10" id="g:10"><h1>Useful functions</h1></a><div class="top"><p class="src"><a id="v:replicateConcurrently" class="def">replicateConcurrently</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m [a] <a href="src/Control.Scheduler.html#replicateConcurrently" class="link">Source</a> <a href="#v:replicateConcurrently" class="selflink">#</a></p><div class="doc"><p>Replicate an action <code>n</code> times and schedule them acccording to the supplied computation
 strategy.</p><p><em>Since: 1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:replicateConcurrently_" class="def">replicateConcurrently_</a> :: <a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a -&gt; m () <a href="src/Control.Scheduler.html#replicateConcurrently_" class="link">Source</a> <a href="#v:replicateConcurrently_" class="selflink">#</a></p><div class="doc"><p>Just like <code><a href="Control-Scheduler.html#v:replicateConcurrently" title="Control.Scheduler">replicateConcurrently</a></code>, but discards the results of computation.</p><p><em>Since: 1.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:traverseConcurrently" class="def">traverseConcurrently</a> :: (<a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m, <a href="../base-4.18.2.1/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> t) =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (a -&gt; m b) -&gt; t a -&gt; m (t b) <a href="src/Control.Scheduler.html#traverseConcurrently" class="link">Source</a> <a href="#v:traverseConcurrently" class="selflink">#</a></p><div class="doc"><p>Map an action over each element of the <code><a href="../base-4.18.2.1/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a></code> <code>t</code> acccording to the supplied computation
 strategy.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:traverseConcurrently_" class="def">traverseConcurrently_</a> :: (<a href="../unliftio-core-0.2.1.0/Control-Monad-IO-Unlift.html#t:MonadUnliftIO" title="Control.Monad.IO.Unlift">MonadUnliftIO</a> m, <a href="../base-4.18.2.1/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> t) =&gt; <a href="Control-Scheduler.html#t:Comp" title="Control.Scheduler">Comp</a> -&gt; (a -&gt; m b) -&gt; t a -&gt; m () <a href="src/Control.Scheduler.html#traverseConcurrently_" class="link">Source</a> <a href="#v:traverseConcurrently_" class="selflink">#</a></p><div class="doc"><p>Just like <code><a href="Control-Scheduler.html#v:traverseConcurrently" title="Control.Scheduler">traverseConcurrently</a></code>, but restricted to <code><a href="../base-4.18.2.1/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a></code> and discards the results of
 computation.</p><p><em>Since: 1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:traverse_" class="def">traverse_</a> :: (<a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f, <a href="../base-4.18.2.1/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> t) =&gt; (a -&gt; f ()) -&gt; t a -&gt; f () <a href="src/Control.Scheduler.Internal.html#traverse_" class="link">Source</a> <a href="#v:traverse_" class="selflink">#</a></p><div class="doc"><p>This is generally a faster way to traverse while ignoring the result rather than using <code><a href="../base-4.18.2.1/Data-Foldable.html#v:mapM_" title="Data.Foldable">mapM_</a></code>.</p><p><em>Since: 1.0.0</em></p></div></div><a href="#g:11" id="g:11"><h1>Exceptions</h1></a><div class="doc"><p>If any one of the workers dies with an exception, even if that exceptions is asynchronous, it will be
re-thrown in the scheduling thread.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let didAWorkerDie = handleJust asyncExceptionFromException (return . (== ThreadKilled)) . fmap or
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:t didAWorkerDie
</code></strong>didAWorkerDie :: Foldable t =&gt; IO (t Bool) -&gt; IO Bool
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>didAWorkerDie $ withScheduler Par $ \ s -&gt; scheduleWork s $ pure False
</code></strong>False
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>didAWorkerDie $ withScheduler Par $ \ s -&gt; scheduleWork s $ myThreadId &gt;&gt;= killThread &gt;&gt; pure False
</code></strong>True
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>withScheduler Par $ \ s -&gt; scheduleWork s $ myThreadId &gt;&gt;= killThread &gt;&gt; pure False
</code></strong>*** Exception: thread killed
</pre></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MutexException" class="def">MutexException</a> <a href="src/Control.Scheduler.Types.html#MutexException" class="link">Source</a> <a href="#t:MutexException" class="selflink">#</a></p><div class="doc"><p>Exception that gets thrown whenever concurrent access is attempted to the <code><a href="Control-Scheduler.html#t:WorkerStates" title="Control.Scheduler">WorkerStates</a></code></p><p><em>Since: 1.4.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MutexException" class="def">MutexException</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MutexException">Instances</h4><details id="i:MutexException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MutexException:Exception:1"></span> <a href="../base-4.18.2.1/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a></span> <a href="src/Control.Scheduler.Types.html#line-220" class="link">Source</a> <a href="#t:MutexException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MutexException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="../base-4.18.2.1/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.18.2.1/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MutexException:Show:2"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a></span> <a href="src/Control.Scheduler.Types.html#line-218" class="link">Source</a> <a href="#t:MutexException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MutexException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MutexException:Eq:3"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a></span> <a href="src/Control.Scheduler.Types.html#line-218" class="link">Source</a> <a href="#t:MutexException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MutexException:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Scheduler-Types.html">Control.Scheduler.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="Control-Scheduler.html#t:MutexException" title="Control.Scheduler">MutexException</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>