<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span class="annot"><span class="hs-comment">{-|
Module:      Data.Functor.Deriving.Internal
Copyright:   (C) 2015-2017 Ryan Scott
License:     BSD-style (see the file LICENSE)
Maintainer:  Ryan Scott
Portability: Template Haskell

The machinery needed to derive 'Foldable', 'Functor', and 'Traversable' instances.

For more info on how deriving @Functor@ works, see
&lt;https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/DeriveFunctor this GHC wiki page&gt;.

Note: this is an internal module, and as such, the API presented here is not
guaranteed to be stable, even between minor releases of this library.
-}</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Functor.Deriving.Internal</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-20"></span><span>      </span><span class="annot"><span class="hs-comment">-- * 'Foldable'</span></span><span>
</span><span id="line-21"></span><span>      </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFoldable"><span class="hs-identifier">deriveFoldable</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFoldableOptions"><span class="hs-identifier">deriveFoldableOptions</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldMap"><span class="hs-identifier">makeFoldMap</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldMapOptions"><span class="hs-identifier">makeFoldMapOptions</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldr"><span class="hs-identifier">makeFoldr</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldrOptions"><span class="hs-identifier">makeFoldrOptions</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFold"><span class="hs-identifier">makeFold</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldOptions"><span class="hs-identifier">makeFoldOptions</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldl"><span class="hs-identifier">makeFoldl</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldlOptions"><span class="hs-identifier">makeFoldlOptions</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeNull"><span class="hs-identifier">makeNull</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeNullOptions"><span class="hs-identifier">makeNullOptions</span></a></span><span>
</span><span id="line-33"></span><span>      </span><span class="annot"><span class="hs-comment">-- * 'Functor'</span></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFunctor"><span class="hs-identifier">deriveFunctor</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFunctorOptions"><span class="hs-identifier">deriveFunctorOptions</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFmap"><span class="hs-identifier">makeFmap</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFmapOptions"><span class="hs-identifier">makeFmapOptions</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeReplace"><span class="hs-identifier">makeReplace</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeReplaceOptions"><span class="hs-identifier">makeReplaceOptions</span></a></span><span>
</span><span id="line-40"></span><span>      </span><span class="annot"><span class="hs-comment">-- * 'Traversable'</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveTraversable"><span class="hs-identifier">deriveTraversable</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveTraversableOptions"><span class="hs-identifier">deriveTraversableOptions</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeTraverse"><span class="hs-identifier">makeTraverse</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeTraverseOptions"><span class="hs-identifier">makeTraverseOptions</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequenceA"><span class="hs-identifier">makeSequenceA</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequenceAOptions"><span class="hs-identifier">makeSequenceAOptions</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeMapM"><span class="hs-identifier">makeMapM</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeMapMOptions"><span class="hs-identifier">makeMapMOptions</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequence"><span class="hs-identifier">makeSequence</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequenceOptions"><span class="hs-identifier">makeSequenceOptions</span></a></span><span>
</span><span id="line-51"></span><span>      </span><span class="annot"><span class="hs-comment">-- * 'FFTOptions'</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier">FFTOptions</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier">defaultFFTOptions</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">guard</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Deriving.Internal.html"><span class="hs-identifier">Data.Deriving.Internal</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(!)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">keys</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookup</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">member</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">singleton</span></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Datatype</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Datatype.TyVarBndr</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Lib</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Syntax</span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-- | Options that further configure how the functions in &quot;Data.Functor.Deriving&quot;</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- should behave. (@FFT@ stands for 'Functor'/'Foldable'/'Traversable'.)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">newtype</span><span> </span><span id="FFTOptions"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-var">FFTOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FFTOptions"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-var">FFTOptions</span></a></span></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="fftEmptyCaseBehavior"><span class="annot"><span class="annottext">FFTOptions -&gt; Bool
</span><a href="Data.Functor.Deriving.Internal.html#fftEmptyCaseBehavior"><span class="hs-identifier hs-var hs-var">fftEmptyCaseBehavior</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-comment">-- ^ If 'True', derived instances for empty data types (i.e., ones with</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-comment">--   no data constructors) will use the @EmptyCase@ language extension.</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">--   If 'False', derived instances will simply use 'seq' instead.</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">--   (This has no effect on GHCs before 7.8, since @EmptyCase@ is only</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-comment">--   available in 7.8 or later.)</span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679072239"><span id="local-6989586621679072244"><span class="annot"><span class="annottext">FFTOptions -&gt; FFTOptions -&gt; Bool
(FFTOptions -&gt; FFTOptions -&gt; Bool)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; Bool) -&gt; Eq FFTOptions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FFTOptions -&gt; FFTOptions -&gt; Bool
== :: FFTOptions -&gt; FFTOptions -&gt; Bool
$c/= :: FFTOptions -&gt; FFTOptions -&gt; Bool
/= :: FFTOptions -&gt; FFTOptions -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072252"><span id="local-6989586621679072257"><span id="local-6989586621679072261"><span id="local-6989586621679072265"><span id="local-6989586621679072269"><span id="local-6989586621679072273"><span id="local-6989586621679072277"><span class="annot"><span class="annottext">Eq FFTOptions
Eq FFTOptions =&gt;
(FFTOptions -&gt; FFTOptions -&gt; Ordering)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; Bool)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; Bool)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; Bool)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; Bool)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; FFTOptions)
-&gt; (FFTOptions -&gt; FFTOptions -&gt; FFTOptions)
-&gt; Ord FFTOptions
FFTOptions -&gt; FFTOptions -&gt; Bool
FFTOptions -&gt; FFTOptions -&gt; Ordering
FFTOptions -&gt; FFTOptions -&gt; FFTOptions
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: FFTOptions -&gt; FFTOptions -&gt; Ordering
compare :: FFTOptions -&gt; FFTOptions -&gt; Ordering
$c&lt; :: FFTOptions -&gt; FFTOptions -&gt; Bool
&lt; :: FFTOptions -&gt; FFTOptions -&gt; Bool
$c&lt;= :: FFTOptions -&gt; FFTOptions -&gt; Bool
&lt;= :: FFTOptions -&gt; FFTOptions -&gt; Bool
$c&gt; :: FFTOptions -&gt; FFTOptions -&gt; Bool
&gt; :: FFTOptions -&gt; FFTOptions -&gt; Bool
$c&gt;= :: FFTOptions -&gt; FFTOptions -&gt; Bool
&gt;= :: FFTOptions -&gt; FFTOptions -&gt; Bool
$cmax :: FFTOptions -&gt; FFTOptions -&gt; FFTOptions
max :: FFTOptions -&gt; FFTOptions -&gt; FFTOptions
$cmin :: FFTOptions -&gt; FFTOptions -&gt; FFTOptions
min :: FFTOptions -&gt; FFTOptions -&gt; FFTOptions
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072283"><span id="local-6989586621679072287"><span id="local-6989586621679072290"><span id="local-6989586621679072300"><span class="annot"><span class="annottext">ReadPrec [FFTOptions]
ReadPrec FFTOptions
Int -&gt; ReadS FFTOptions
ReadS [FFTOptions]
(Int -&gt; ReadS FFTOptions)
-&gt; ReadS [FFTOptions]
-&gt; ReadPrec FFTOptions
-&gt; ReadPrec [FFTOptions]
-&gt; Read FFTOptions
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS FFTOptions
readsPrec :: Int -&gt; ReadS FFTOptions
$creadList :: ReadS [FFTOptions]
readList :: ReadS [FFTOptions]
$creadPrec :: ReadPrec FFTOptions
readPrec :: ReadPrec FFTOptions
$creadListPrec :: ReadPrec [FFTOptions]
readListPrec :: ReadPrec [FFTOptions]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072304"><span id="local-6989586621679072310"><span id="local-6989586621679072314"><span class="annot"><span class="annottext">Int -&gt; FFTOptions -&gt; ShowS
[FFTOptions] -&gt; ShowS
FFTOptions -&gt; String
(Int -&gt; FFTOptions -&gt; ShowS)
-&gt; (FFTOptions -&gt; String)
-&gt; ([FFTOptions] -&gt; ShowS)
-&gt; Show FFTOptions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FFTOptions -&gt; ShowS
showsPrec :: Int -&gt; FFTOptions -&gt; ShowS
$cshow :: FFTOptions -&gt; String
show :: FFTOptions -&gt; String
$cshowList :: [FFTOptions] -&gt; ShowS
showList :: [FFTOptions] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- | Conservative 'FFTOptions' that doesn't attempt to use @EmptyCase@ (to</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- prevent users from having to enable that extension at use sites.)</span><span>
</span><span id="line-81"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-type">defaultFFTOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span>
</span><span id="line-82"></span><span id="defaultFFTOptions"><span class="annot"><span class="annottext">defaultFFTOptions :: FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var hs-var">defaultFFTOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fftEmptyCaseBehavior :: Bool
</span><a href="Data.Functor.Deriving.Internal.html#fftEmptyCaseBehavior"><span class="hs-identifier hs-var">fftEmptyCaseBehavior</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | Generates a 'Foldable' instance declaration for the given data type or data</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- family instance.</span><span>
</span><span id="line-86"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFoldable"><span class="hs-identifier hs-type">deriveFoldable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-87"></span><span id="deriveFoldable"><span class="annot"><span class="annottext">deriveFoldable :: Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFoldable"><span class="hs-identifier hs-var hs-var">deriveFoldable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFoldableOptions"><span class="hs-identifier hs-var">deriveFoldableOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="annot"><span class="hs-comment">-- | Like 'deriveFoldable', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-90"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFoldableOptions"><span class="hs-identifier hs-type">deriveFoldableOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-91"></span><span id="deriveFoldableOptions"><span class="annot"><span class="annottext">deriveFoldableOptions :: FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFoldableOptions"><span class="hs-identifier hs-var hs-var">deriveFoldableOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctorClass"><span class="hs-identifier hs-var">deriveFunctorClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'foldMap' (without requiring a</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- 'Foldable' instance).</span><span>
</span><span id="line-95"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldMap"><span class="hs-identifier hs-type">makeFoldMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-96"></span><span id="makeFoldMap"><span class="annot"><span class="annottext">makeFoldMap :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMap"><span class="hs-identifier hs-var hs-var">makeFoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMapOptions"><span class="hs-identifier hs-var">makeFoldMapOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="annot"><span class="hs-comment">-- | Like 'makeFoldMap', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-99"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldMapOptions"><span class="hs-identifier hs-type">makeFoldMapOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-100"></span><span id="makeFoldMapOptions"><span class="annot"><span class="annottext">makeFoldMapOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMapOptions"><span class="hs-identifier hs-var hs-var">makeFoldMapOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var">makeFunctorFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'null' (without requiring a</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- 'Foldable' instance).</span><span>
</span><span id="line-104"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeNull"><span class="hs-identifier hs-type">makeNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-105"></span><span id="makeNull"><span class="annot"><span class="annottext">makeNull :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeNull"><span class="hs-identifier hs-var hs-var">makeNull</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeNullOptions"><span class="hs-identifier hs-var">makeNullOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="annot"><span class="hs-comment">-- | Like 'makeNull', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-108"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeNullOptions"><span class="hs-identifier hs-type">makeNullOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-109"></span><span id="makeNullOptions"><span class="annot"><span class="annottext">makeNullOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeNullOptions"><span class="hs-identifier hs-var hs-var">makeNullOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var">makeFunctorFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'foldr' (without requiring a</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- 'Foldable' instance).</span><span>
</span><span id="line-113"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldr"><span class="hs-identifier hs-type">makeFoldr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-114"></span><span id="makeFoldr"><span class="annot"><span class="annottext">makeFoldr :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldr"><span class="hs-identifier hs-var hs-var">makeFoldr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldrOptions"><span class="hs-identifier hs-var">makeFoldrOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="annot"><span class="hs-comment">-- | Like 'makeFoldr', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldrOptions"><span class="hs-identifier hs-type">makeFoldrOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-118"></span><span id="makeFoldrOptions"><span class="annot"><span class="annottext">makeFoldrOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldrOptions"><span class="hs-identifier hs-var hs-var">makeFoldrOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var">makeFunctorFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'fold' (without requiring a</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- 'Foldable' instance).</span><span>
</span><span id="line-122"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFold"><span class="hs-identifier hs-type">makeFold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-123"></span><span id="makeFold"><span class="annot"><span class="annottext">makeFold :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFold"><span class="hs-identifier hs-var hs-var">makeFold</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldOptions"><span class="hs-identifier hs-var">makeFoldOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><span class="hs-comment">-- | Like 'makeFold', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-126"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldOptions"><span class="hs-identifier hs-type">makeFoldOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-127"></span><span id="makeFoldOptions"><span class="annot"><span class="annottext">makeFoldOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldOptions"><span class="hs-identifier hs-var hs-var">makeFoldOptions</span></a></span></span><span> </span><span id="local-6989586621679072325"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072325"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072326"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072326"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMapOptions"><span class="hs-identifier hs-var">makeFoldMapOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072325"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072326"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#idValName"><span class="hs-identifier hs-var">idValName</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'foldl' (without requiring a</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- 'Foldable' instance).</span><span>
</span><span id="line-131"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldl"><span class="hs-identifier hs-type">makeFoldl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-132"></span><span id="makeFoldl"><span class="annot"><span class="annottext">makeFoldl :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldl"><span class="hs-identifier hs-var hs-var">makeFoldl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldlOptions"><span class="hs-identifier hs-var">makeFoldlOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="annot"><span class="hs-comment">-- | Like 'makeFoldl', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-135"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldlOptions"><span class="hs-identifier hs-type">makeFoldlOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-136"></span><span id="makeFoldlOptions"><span class="annot"><span class="annottext">makeFoldlOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldlOptions"><span class="hs-identifier hs-var hs-var">makeFoldlOptions</span></a></span></span><span> </span><span id="local-6989586621679072329"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072329"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072330"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072330"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-137"></span><span>  </span><span id="local-6989586621679072331"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072331"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;f&quot;</span></span><span>
</span><span id="line-138"></span><span>  </span><span id="local-6989586621679072332"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072332"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;z&quot;</span></span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621679072333"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072333"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;t&quot;</span></span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><span class="annottext">[Q Pat] -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072331"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072332"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072333"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Exp) -&gt; Q Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#appEndoValName"><span class="hs-identifier hs-var">appEndoValName</span></a></span><span>
</span><span id="line-142"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#getDualValName"><span class="hs-identifier hs-var">getDualValName</span></a></span><span>
</span><span id="line-143"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMapOptions"><span class="hs-identifier hs-var">makeFoldMapOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072329"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072330"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
</span><a href="#local-6989586621679072337"><span class="hs-identifier hs-var">foldFun</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072331"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072333"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-144"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-145"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072332"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-146"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="#local-6989586621679072337"><span class="hs-identifier hs-type">foldFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679072337"><span class="annot"><span class="annottext">foldFun :: Name -&gt; Q Exp
</span><a href="#local-6989586621679072337"><span class="hs-identifier hs-var hs-var">foldFun</span></a></span></span><span> </span><span id="local-6989586621679072338"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072338"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#dualDataName"><span class="hs-identifier hs-var">dualDataName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#composeValName"><span class="hs-identifier hs-var">composeValName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#endoDataName"><span class="hs-identifier hs-var">endoDataName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#composeValName"><span class="hs-identifier hs-var">composeValName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#flipValName"><span class="hs-identifier hs-var">flipValName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072338"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>                         </span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | Generates a 'Functor' instance declaration for the given data type or data</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- family instance.</span><span>
</span><span id="line-158"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFunctor"><span class="hs-identifier hs-type">deriveFunctor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-159"></span><span id="deriveFunctor"><span class="annot"><span class="annottext">deriveFunctor :: Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctor"><span class="hs-identifier hs-var hs-var">deriveFunctor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctorOptions"><span class="hs-identifier hs-var">deriveFunctorOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="annot"><span class="hs-comment">-- | Like 'deriveFunctor', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-162"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFunctorOptions"><span class="hs-identifier hs-type">deriveFunctorOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-163"></span><span id="deriveFunctorOptions"><span class="annot"><span class="annottext">deriveFunctorOptions :: FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctorOptions"><span class="hs-identifier hs-var hs-var">deriveFunctorOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctorClass"><span class="hs-identifier hs-var">deriveFunctorClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'fmap' (without requiring a</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- 'Functor' instance).</span><span>
</span><span id="line-167"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFmap"><span class="hs-identifier hs-type">makeFmap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-168"></span><span id="makeFmap"><span class="annot"><span class="annottext">makeFmap :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFmap"><span class="hs-identifier hs-var hs-var">makeFmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFmapOptions"><span class="hs-identifier hs-var">makeFmapOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="annot"><span class="hs-comment">-- | Like 'makeFmap', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-171"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFmapOptions"><span class="hs-identifier hs-type">makeFmapOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-172"></span><span id="makeFmapOptions"><span class="annot"><span class="annottext">makeFmapOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFmapOptions"><span class="hs-identifier hs-var hs-var">makeFmapOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var">makeFunctorFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like ('&lt;$') (without requiring a</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- 'Functor' instance).</span><span>
</span><span id="line-176"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeReplace"><span class="hs-identifier hs-type">makeReplace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-177"></span><span id="makeReplace"><span class="annot"><span class="annottext">makeReplace :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeReplace"><span class="hs-identifier hs-var hs-var">makeReplace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeReplaceOptions"><span class="hs-identifier hs-var">makeReplaceOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><span class="hs-comment">-- | Like 'makeReplace', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-180"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeReplaceOptions"><span class="hs-identifier hs-type">makeReplaceOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-181"></span><span id="makeReplaceOptions"><span class="annot"><span class="annottext">makeReplaceOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeReplaceOptions"><span class="hs-identifier hs-var hs-var">makeReplaceOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var">makeFunctorFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-comment">-- | Generates a 'Traversable' instance declaration for the given data type or data</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- family instance.</span><span>
</span><span id="line-185"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveTraversable"><span class="hs-identifier hs-type">deriveTraversable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-186"></span><span id="deriveTraversable"><span class="annot"><span class="annottext">deriveTraversable :: Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveTraversable"><span class="hs-identifier hs-var hs-var">deriveTraversable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveTraversableOptions"><span class="hs-identifier hs-var">deriveTraversableOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="annot"><span class="hs-comment">-- | Like 'deriveTraverse', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-189"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveTraversableOptions"><span class="hs-identifier hs-type">deriveTraversableOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-190"></span><span id="deriveTraversableOptions"><span class="annot"><span class="annottext">deriveTraversableOptions :: FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveTraversableOptions"><span class="hs-identifier hs-var hs-var">deriveTraversableOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctorClass"><span class="hs-identifier hs-var">deriveFunctorClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Traversable"><span class="hs-identifier hs-var">Traversable</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'traverse' (without requiring a</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- 'Traversable' instance).</span><span>
</span><span id="line-194"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeTraverse"><span class="hs-identifier hs-type">makeTraverse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-195"></span><span id="makeTraverse"><span class="annot"><span class="annottext">makeTraverse :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverse"><span class="hs-identifier hs-var hs-var">makeTraverse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverseOptions"><span class="hs-identifier hs-var">makeTraverseOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><span class="hs-comment">-- | Like 'makeTraverse', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-198"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeTraverseOptions"><span class="hs-identifier hs-type">makeTraverseOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-199"></span><span id="makeTraverseOptions"><span class="annot"><span class="annottext">makeTraverseOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverseOptions"><span class="hs-identifier hs-var hs-var">makeTraverseOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var">makeFunctorFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'sequenceA' (without requiring a</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- 'Traversable' instance).</span><span>
</span><span id="line-203"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequenceA"><span class="hs-identifier hs-type">makeSequenceA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-204"></span><span id="makeSequenceA"><span class="annot"><span class="annottext">makeSequenceA :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeSequenceA"><span class="hs-identifier hs-var hs-var">makeSequenceA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeSequenceAOptions"><span class="hs-identifier hs-var">makeSequenceAOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="annot"><span class="hs-comment">-- | Like 'makeSequenceA', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-207"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequenceAOptions"><span class="hs-identifier hs-type">makeSequenceAOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-208"></span><span id="makeSequenceAOptions"><span class="annot"><span class="annottext">makeSequenceAOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeSequenceAOptions"><span class="hs-identifier hs-var hs-var">makeSequenceAOptions</span></a></span></span><span> </span><span id="local-6989586621679072349"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072349"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072350"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072350"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverseOptions"><span class="hs-identifier hs-var">makeTraverseOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072349"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072350"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#idValName"><span class="hs-identifier hs-var">idValName</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'mapM' (without requiring a</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- 'Traversable' instance).</span><span>
</span><span id="line-212"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeMapM"><span class="hs-identifier hs-type">makeMapM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-213"></span><span id="makeMapM"><span class="annot"><span class="annottext">makeMapM :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeMapM"><span class="hs-identifier hs-var hs-var">makeMapM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeMapMOptions"><span class="hs-identifier hs-var">makeMapMOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><span class="hs-comment">-- | Like 'makeMapM', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-216"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeMapMOptions"><span class="hs-identifier hs-type">makeMapMOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-217"></span><span id="makeMapMOptions"><span class="annot"><span class="annottext">makeMapMOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeMapMOptions"><span class="hs-identifier hs-var hs-var">makeMapMOptions</span></a></span></span><span> </span><span id="local-6989586621679072352"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072352"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072353"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072353"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621679072354"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072354"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;f&quot;</span></span><span>
</span><span id="line-219"></span><span>  </span><span class="annot"><span class="annottext">Q Pat -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Pat -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lam1E</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072354"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Exp) -&gt; (Q Exp -&gt; Q Exp) -&gt; Q Exp -&gt; Q Exp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#unwrapMonadValName"><span class="hs-identifier hs-var">unwrapMonadValName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#composeValName"><span class="hs-identifier hs-var">composeValName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Exp) -&gt; Q Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-220"></span><span>                   </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverseOptions"><span class="hs-identifier hs-var">makeTraverseOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072352"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072353"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
</span><a href="#local-6989586621679072358"><span class="hs-identifier hs-var">wrapMonadExp</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072354"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><a href="#local-6989586621679072358"><span class="hs-identifier hs-type">wrapMonadExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621679072358"><span class="annot"><span class="annottext">wrapMonadExp :: Name -&gt; Q Exp
</span><a href="#local-6989586621679072358"><span class="hs-identifier hs-var hs-var">wrapMonadExp</span></a></span></span><span> </span><span id="local-6989586621679072359"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072359"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#wrapMonadDataName"><span class="hs-identifier hs-var">wrapMonadDataName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#composeValName"><span class="hs-identifier hs-var">composeValName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072359"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- | Generates a lambda expression which behaves like 'sequence' (without requiring a</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- 'Traversable' instance).</span><span>
</span><span id="line-227"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequence"><span class="hs-identifier hs-type">makeSequence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-228"></span><span id="makeSequence"><span class="annot"><span class="annottext">makeSequence :: Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeSequence"><span class="hs-identifier hs-var hs-var">makeSequence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeSequenceOptions"><span class="hs-identifier hs-var">makeSequenceOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="Data.Functor.Deriving.Internal.html#defaultFFTOptions"><span class="hs-identifier hs-var">defaultFFTOptions</span></a></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><span class="hs-comment">-- | Like 'makeSequence', but takes an 'FFTOptions' argument.</span></span><span>
</span><span id="line-231"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeSequenceOptions"><span class="hs-identifier hs-type">makeSequenceOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-232"></span><span id="makeSequenceOptions"><span class="annot"><span class="annottext">makeSequenceOptions :: FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeSequenceOptions"><span class="hs-identifier hs-var hs-var">makeSequenceOptions</span></a></span></span><span> </span><span id="local-6989586621679072362"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072362"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072363"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072363"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeMapMOptions"><span class="hs-identifier hs-var">makeMapMOptions</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072362"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072363"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#idValName"><span class="hs-identifier hs-var">idValName</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- Code generation</span><span>
</span><span id="line-236"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="annot"><span class="hs-comment">-- | Derive a class instance declaration (depending on the FunctorClass argument's value).</span></span><span>
</span><span id="line-239"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#deriveFunctorClass"><span class="hs-identifier hs-type">deriveFunctorClass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorClass"><span class="hs-identifier hs-type">FunctorClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-240"></span><span id="deriveFunctorClass"><span class="annot"><span class="annottext">deriveFunctorClass :: FunctorClass -&gt; FFTOptions -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Functor.Deriving.Internal.html#deriveFunctorClass"><span class="hs-identifier hs-var hs-var">deriveFunctorClass</span></a></span></span><span> </span><span id="local-6989586621679072364"><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072364"><span class="hs-identifier hs-var">fc</span></a></span></span><span> </span><span id="local-6989586621679072365"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072365"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072366"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072366"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-241"></span><span>  </span><span id="local-6989586621679072367"><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679072367"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q DatatypeInfo
</span><span class="hs-identifier hs-var">reifyDatatype</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072366"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679072367"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">DatatypeInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">datatypeContext :: DatatypeInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">datatypeContext</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072371"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072371"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-244"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeName :: DatatypeInfo -&gt; Name
</span><span class="hs-identifier hs-var">datatypeName</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072373"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072373"><span class="hs-identifier hs-var">parentName</span></a></span></span><span>
</span><span id="line-245"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeInstTypes :: DatatypeInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">datatypeInstTypes</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072375"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072375"><span class="hs-identifier hs-var">instTypes</span></a></span></span><span>
</span><span id="line-246"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeVariant :: DatatypeInfo -&gt; DatatypeVariant
</span><span class="hs-identifier hs-var">datatypeVariant</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072377"><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679072377"><span class="hs-identifier hs-var">variant</span></a></span></span><span>
</span><span id="line-247"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeCons :: DatatypeInfo -&gt; [ConstructorInfo]
</span><span class="hs-identifier hs-var">datatypeCons</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072379"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072379"><span class="hs-identifier hs-var">cons</span></a></span></span><span>
</span><span id="line-248"></span><span>                 </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-249"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679072380"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072380"><span class="hs-identifier hs-var">instanceCxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072381"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072381"><span class="hs-identifier hs-var">instanceType</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FunctorClass
-&gt; Name -&gt; Cxt -&gt; Cxt -&gt; DatatypeVariant -&gt; Q (Cxt, Type)
forall a.
ClassRep a =&gt;
a -&gt; Name -&gt; Cxt -&gt; Cxt -&gt; DatatypeVariant -&gt; Q (Cxt, Type)
</span><a href="Data.Deriving.Internal.html#buildTypeInstance"><span class="hs-identifier hs-var">buildTypeInstance</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072364"><span class="hs-identifier hs-var">fc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072373"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072371"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072375"><span class="hs-identifier hs-var">instTypes</span></a></span><span> </span><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679072377"><span class="hs-identifier hs-var">variant</span></a></span><span>
</span><span id="line-251"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dec -&gt; [Dec] -&gt; [Dec]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Dec -&gt; [Dec]) -&gt; Q Dec -&gt; Q [Dec]
forall a b. (a -&gt; b) -&gt; Q a -&gt; Q b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">`fmap`</span></span><span> </span><span class="annot"><span class="annottext">Q Cxt -&gt; Q Type -&gt; [Q Dec] -&gt; Q Dec
forall (m :: * -&gt; *).
Quote m =&gt;
m Cxt -&gt; m Type -&gt; [m Dec] -&gt; m Dec
</span><span class="hs-identifier hs-var">instanceD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cxt -&gt; Q Cxt
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072380"><span class="hs-identifier hs-var">instanceCxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Q Type
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072381"><span class="hs-identifier hs-var">instanceType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorClass
-&gt; FFTOptions -&gt; Name -&gt; Cxt -&gt; [ConstructorInfo] -&gt; [Q Dec]
</span><a href="Data.Functor.Deriving.Internal.html#functorFunDecs"><span class="hs-identifier hs-var">functorFunDecs</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072364"><span class="hs-identifier hs-var">fc</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072365"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072373"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072375"><span class="hs-identifier hs-var">instTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072379"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-comment">-- | Generates a declaration defining the primary function(s) corresponding to a</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- particular class (fmap for Functor, foldr and foldMap for Foldable, and</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- traverse for Traversable).</span><span>
</span><span id="line-258"></span><span class="hs-comment">--</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- For why both foldr and foldMap are derived for Foldable, see Trac #7436.</span><span>
</span><span id="line-260"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunDecs"><span class="hs-identifier hs-type">functorFunDecs</span></a></span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorClass"><span class="hs-identifier hs-type">FunctorClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-263"></span><span id="functorFunDecs"><span class="annot"><span class="annottext">functorFunDecs :: FunctorClass
-&gt; FFTOptions -&gt; Name -&gt; Cxt -&gt; [ConstructorInfo] -&gt; [Q Dec]
</span><a href="Data.Functor.Deriving.Internal.html#functorFunDecs"><span class="hs-identifier hs-var hs-var">functorFunDecs</span></a></span></span><span> </span><span id="local-6989586621679072385"><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072385"><span class="hs-identifier hs-var">fc</span></a></span></span><span> </span><span id="local-6989586621679072386"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072386"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072387"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072387"><span class="hs-identifier hs-var">parentName</span></a></span></span><span> </span><span id="local-6989586621679072388"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072388"><span class="hs-identifier hs-var">instTypes</span></a></span></span><span> </span><span id="local-6989586621679072389"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072389"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-264"></span><span>  </span><span class="annot"><span class="annottext">(FunctorFun -&gt; Q Dec) -&gt; [FunctorFun] -&gt; [Q Dec]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; Q Dec
</span><a href="#local-6989586621679072390"><span class="hs-identifier hs-var">makeFunD</span></a></span><span> </span><span class="annot"><span class="annottext">([FunctorFun] -&gt; [Q Dec]) -&gt; [FunctorFun] -&gt; [Q Dec]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; [FunctorFun]
</span><a href="Data.Functor.Deriving.Internal.html#functorClassToFuns"><span class="hs-identifier hs-var">functorClassToFuns</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072385"><span class="hs-identifier hs-var">fc</span></a></span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="#local-6989586621679072390"><span class="hs-identifier hs-type">makeFunD</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621679072390"><span class="annot"><span class="annottext">makeFunD :: FunctorFun -&gt; Q Dec
</span><a href="#local-6989586621679072390"><span class="hs-identifier hs-var hs-var">makeFunD</span></a></span></span><span> </span><span id="local-6989586621679072392"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072392"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-268"></span><span>      </span><span class="annot"><span class="annottext">Name -&gt; [Q Clause] -&gt; Q Dec
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Clause] -&gt; m Dec
</span><span class="hs-identifier hs-var">funD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun -&gt; Name
</span><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072392"><span class="hs-identifier hs-var">ff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>           </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Q Pat] -&gt; Q Body -&gt; [Q Dec] -&gt; Q Clause
forall (m :: * -&gt; *).
Quote m =&gt;
[m Pat] -&gt; m Body -&gt; [m Dec] -&gt; m Clause
</span><span class="hs-identifier hs-var">clause</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Exp -&gt; Q Body
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Body) -&gt; Q Exp -&gt; Q Body
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
-&gt; FFTOptions -&gt; Name -&gt; Cxt -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCons"><span class="hs-identifier hs-var">makeFunctorFunForCons</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072392"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072386"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072387"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072388"><span class="hs-identifier hs-var">instTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072389"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-272"></span><span>           </span><span class="hs-special">]</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><span class="hs-comment">-- | Generates a lambda expression which behaves like the FunctorFun argument.</span></span><span>
</span><span id="line-275"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-type">makeFunctorFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-276"></span><span id="makeFunctorFun"><span class="annot"><span class="annottext">makeFunctorFun :: FunctorFun -&gt; FFTOptions -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFun"><span class="hs-identifier hs-var hs-var">makeFunctorFun</span></a></span></span><span> </span><span id="local-6989586621679072395"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072395"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679072396"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072396"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072397"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072397"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-277"></span><span>  </span><span id="local-6989586621679072398"><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679072398"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q DatatypeInfo
</span><span class="hs-identifier hs-var">reifyDatatype</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072397"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679072398"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">DatatypeInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">datatypeContext :: DatatypeInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">datatypeContext</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072399"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072399"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-280"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeName :: DatatypeInfo -&gt; Name
</span><span class="hs-identifier hs-var">datatypeName</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072400"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072400"><span class="hs-identifier hs-var">parentName</span></a></span></span><span>
</span><span id="line-281"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeInstTypes :: DatatypeInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">datatypeInstTypes</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072401"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072401"><span class="hs-identifier hs-var">instTypes</span></a></span></span><span>
</span><span id="line-282"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeVariant :: DatatypeInfo -&gt; DatatypeVariant
</span><span class="hs-identifier hs-var">datatypeVariant</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072402"><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679072402"><span class="hs-identifier hs-var">variant</span></a></span></span><span>
</span><span id="line-283"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeCons :: DatatypeInfo -&gt; [ConstructorInfo]
</span><span class="hs-identifier hs-var">datatypeCons</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072403"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072403"><span class="hs-identifier hs-var">cons</span></a></span></span><span>
</span><span id="line-284"></span><span>                 </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-285"></span><span>      </span><span class="hs-comment">-- We force buildTypeInstance here since it performs some checks for whether</span><span>
</span><span id="line-286"></span><span>      </span><span class="hs-comment">-- or not the provided datatype can actually have fmap/foldr/traverse/etc.</span><span>
</span><span id="line-287"></span><span>      </span><span class="hs-comment">-- implemented for it, and produces errors if it can't.</span><span>
</span><span id="line-288"></span><span>      </span><span class="annot"><span class="annottext">FunctorClass
-&gt; Name -&gt; Cxt -&gt; Cxt -&gt; DatatypeVariant -&gt; Q (Cxt, Type)
forall a.
ClassRep a =&gt;
a -&gt; Name -&gt; Cxt -&gt; Cxt -&gt; DatatypeVariant -&gt; Q (Cxt, Type)
</span><a href="Data.Deriving.Internal.html#buildTypeInstance"><span class="hs-identifier hs-var">buildTypeInstance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun -&gt; FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072395"><span class="hs-identifier hs-var">ff</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072400"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072399"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072401"><span class="hs-identifier hs-var">instTypes</span></a></span><span> </span><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679072402"><span class="hs-identifier hs-var">variant</span></a></span><span>
</span><span id="line-289"></span><span>        </span><span class="annot"><span class="annottext">Q (Cxt, Type) -&gt; Q Exp -&gt; Q Exp
forall a b. Q a -&gt; Q b -&gt; Q b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
-&gt; FFTOptions -&gt; Name -&gt; Cxt -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCons"><span class="hs-identifier hs-var">makeFunctorFunForCons</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072395"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072396"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072400"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072401"><span class="hs-identifier hs-var">instTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072403"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">-- | Generates a lambda expression for the given constructors.</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- All constructors must be from the same type.</span><span>
</span><span id="line-293"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCons"><span class="hs-identifier hs-type">makeFunctorFunForCons</span></a></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFTOptions"><span class="hs-identifier hs-type">FFTOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-296"></span><span id="makeFunctorFunForCons"><span class="annot"><span class="annottext">makeFunctorFunForCons :: FunctorFun
-&gt; FFTOptions -&gt; Name -&gt; Cxt -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCons"><span class="hs-identifier hs-var hs-var">makeFunctorFunForCons</span></a></span></span><span> </span><span id="local-6989586621679072405"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679072406"><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072406"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679072407"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072407"><span class="hs-identifier hs-var">_parentName</span></a></span></span><span> </span><span id="local-6989586621679072408"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072408"><span class="hs-identifier hs-var">instTypes</span></a></span></span><span> </span><span id="local-6989586621679072409"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072409"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-297"></span><span>  </span><span id="local-6989586621679072410"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072410"><span class="hs-identifier hs-var">mapFun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;f&quot;</span></span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621679072411"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072411"><span class="hs-identifier hs-var">z</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;z&quot;</span></span><span> </span><span class="hs-comment">-- Only used for deriving foldr</span><span>
</span><span id="line-299"></span><span>  </span><span id="local-6989586621679072412"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072412"><span class="hs-identifier hs-var">value</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;value&quot;</span></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679072413"><span class="annot"><span class="annottext">argNames :: [Name]
</span><a href="#local-6989586621679072413"><span class="hs-identifier hs-var hs-var">argNames</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe Name] -&gt; [Name]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FunctorFun -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">Maybe () -&gt; Maybe Name -&gt; Maybe Name
forall a b. Maybe a -&gt; Maybe b -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072410"><span class="hs-identifier hs-var">mapFun</span></a></span><span>
</span><span id="line-301"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; FunctorFun -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; Maybe Name -&gt; Maybe Name
forall a b. Maybe a -&gt; Maybe b -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072411"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-302"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072412"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-303"></span><span>                            </span><span class="hs-special">]</span><span>
</span><span id="line-304"></span><span>      </span><span id="local-6989586621679072416"><span class="annot"><span class="annottext">lastTyVar :: Name
</span><a href="#local-6989586621679072416"><span class="hs-identifier hs-var hs-var">lastTyVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Name
</span><a href="Data.Deriving.Internal.html#varTToName"><span class="hs-identifier hs-var">varTToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Name) -&gt; Type -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Cxt -&gt; Type
forall a. HasCallStack =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">last</span></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072408"><span class="hs-identifier hs-var">instTypes</span></a></span><span>
</span><span id="line-305"></span><span>      </span><span id="local-6989586621679072419"><span class="annot"><span class="annottext">tvMap :: Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072419"><span class="hs-identifier hs-var hs-var">tvMap</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OneOrTwoNames One -&gt; Map Name (OneOrTwoNames One)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072416"><span class="hs-identifier hs-var">lastTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">(OneOrTwoNames One -&gt; Map Name (OneOrTwoNames One))
-&gt; OneOrTwoNames One -&gt; Map Name (OneOrTwoNames One)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OneOrTwoNames One
</span><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-var">OneName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072410"><span class="hs-identifier hs-var">mapFun</span></a></span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><span class="annottext">[Q Pat] -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Q Pat) -&gt; [Name] -&gt; [Q Pat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072413"><span class="hs-identifier hs-var">argNames</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>      </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Exp) -&gt; ([Q Exp] -&gt; Q Exp) -&gt; [Q Exp] -&gt; Q Exp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span>
</span><span id="line-308"></span><span>      </span><span class="annot"><span class="annottext">([Q Exp] -&gt; Q Exp) -&gt; [Q Exp] -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Q Exp) -&gt; Name -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; Name
</span><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var">functorFunConstName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-309"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Map Name (OneOrTwoNames One) -&gt; Q Exp
</span><a href="#local-6989586621679072422"><span class="hs-identifier hs-var">makeFun</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072411"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072412"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072419"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-310"></span><span>        </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; [Q Exp] -&gt; [Q Exp]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Q Exp) -&gt; [Name] -&gt; [Q Exp]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072413"><span class="hs-identifier hs-var">argNames</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><a href="#local-6989586621679072422"><span class="hs-identifier hs-type">makeFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-313"></span><span>    </span><span id="local-6989586621679072422"><span class="annot"><span class="annottext">makeFun :: Name -&gt; Name -&gt; Map Name (OneOrTwoNames One) -&gt; Q Exp
</span><a href="#local-6989586621679072422"><span class="hs-identifier hs-var hs-var">makeFun</span></a></span></span><span> </span><span id="local-6989586621679072424"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072424"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679072425"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072425"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679072426"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072426"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,9,0)
</span><span>      </span><span id="local-6989586621679072427"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621679072427"><span class="hs-identifier hs-var">roles</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q [Role]
</span><span class="hs-identifier hs-var">reifyRoles</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072407"><span class="hs-identifier hs-var">_parentName</span></a></span><span class="hs-cpp">
#endif
</span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span class="hs-cpp">

#if MIN_VERSION_template_haskell(2,9,0)
</span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Role]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier hs-var">PhantomR</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Role] -&gt; Maybe ([Role], Role)
forall a. [a] -&gt; Maybe ([a], a)
</span><a href="Data.Deriving.Internal.html#unsnoc"><span class="hs-identifier hs-var">unsnoc</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621679072427"><span class="hs-identifier hs-var">roles</span></a></span><span>
</span><span id="line-322"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679072431"><span class="hs-identifier hs-var">functorFunPhantom</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072424"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072425"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-325"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072409"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FFTOptions -&gt; Bool
</span><a href="Data.Functor.Deriving.Internal.html#fftEmptyCaseBehavior"><span class="hs-identifier hs-var">fftEmptyCaseBehavior</span></a></span><span> </span><span class="annot"><span class="annottext">FFTOptions
</span><a href="#local-6989586621679072406"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="Data.Deriving.Internal.html#ghc7%278OrLater"><span class="hs-identifier hs-var">ghc7'8OrLater</span></a></span><span>
</span><span id="line-326"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; Name -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunEmptyCase"><span class="hs-identifier hs-var">functorFunEmptyCase</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072424"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072425"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072409"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-329"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; Name -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunNoCons"><span class="hs-identifier hs-var">functorFunNoCons</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072424"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072425"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-332"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; [Q Match] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072425"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ConstructorInfo -&gt; Q Match) -&gt; [ConstructorInfo] -&gt; [Q Match]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun
-&gt; Name
-&gt; Map Name (OneOrTwoNames One)
-&gt; ConstructorInfo
-&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCon"><span class="hs-identifier hs-var">makeFunctorFunForCon</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072424"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072426"><span class="hs-identifier hs-var">tvMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679072409"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">)</span><span class="hs-cpp">

#if MIN_VERSION_template_haskell(2,9,0)
</span><span>    </span><span class="annot"><a href="#local-6989586621679072431"><span class="hs-identifier hs-type">functorFunPhantom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-337"></span><span>    </span><span id="local-6989586621679072431"><span class="annot"><span class="annottext">functorFunPhantom :: Name -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679072431"><span class="hs-identifier hs-var hs-var">functorFunPhantom</span></a></span></span><span> </span><span id="local-6989586621679072437"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072437"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679072438"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072438"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-338"></span><span>        </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; FunctorFun -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunTrivial"><span class="hs-identifier hs-var">functorFunTrivial</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072440"><span class="hs-identifier hs-var">coerce</span></a></span><span>
</span><span id="line-339"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#pureValName"><span class="hs-identifier hs-var">pureValName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072440"><span class="hs-identifier hs-var">coerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>                          </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072405"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072437"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-341"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-342"></span><span>        </span><span class="annot"><a href="#local-6989586621679072440"><span class="hs-identifier hs-type">coerce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-343"></span><span>        </span><span id="local-6989586621679072440"><span class="annot"><span class="annottext">coerce :: Q Exp
</span><a href="#local-6989586621679072440"><span class="hs-identifier hs-var hs-var">coerce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#coerceValName"><span class="hs-identifier hs-var">coerceValName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072438"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-346"></span><span class="annot"><span class="hs-comment">-- | Generates a match for a single constructor.</span></span><span>
</span><span id="line-347"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCon"><span class="hs-identifier hs-type">makeFunctorFunForCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-348"></span><span id="makeFunctorFunForCon"><span class="annot"><span class="annottext">makeFunctorFunForCon :: FunctorFun
-&gt; Name
-&gt; Map Name (OneOrTwoNames One)
-&gt; ConstructorInfo
-&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFunctorFunForCon"><span class="hs-identifier hs-var hs-var">makeFunctorFunForCon</span></a></span></span><span> </span><span id="local-6989586621679072443"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072443"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679072444"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072444"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679072445"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621679072446"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072449"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072449"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-350"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorContext :: ConstructorInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">constructorContext</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072451"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072451"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">FunctorClass
-&gt; Map Name (OneOrTwoNames One)
-&gt; Cxt
-&gt; Name
-&gt; Q Match
-&gt; Q Match
forall a b c.
ClassRep a =&gt;
a -&gt; TyVarMap b -&gt; Cxt -&gt; Name -&gt; Q c -&gt; Q c
</span><a href="Data.Deriving.Internal.html#checkExistentialContext"><span class="hs-identifier hs-var">checkExistentialContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun -&gt; FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072443"><span class="hs-identifier hs-var">ff</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072451"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072449"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">(Q Match -&gt; Q Match) -&gt; Q Match -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072443"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-353"></span><span>        </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFmapMatch"><span class="hs-identifier hs-var">makeFmapMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-354"></span><span>        </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeReplaceMatch"><span class="hs-identifier hs-var">makeReplaceMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldrMatch"><span class="hs-identifier hs-var">makeFoldrMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072444"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMapMatch"><span class="hs-identifier hs-var">makeFoldMapMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-357"></span><span>        </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeNullMatch"><span class="hs-identifier hs-var">makeNullMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverseMatch"><span class="hs-identifier hs-var">makeTraverseMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072445"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072446"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="annot"><span class="hs-comment">-- | Generates a match whose right-hand side implements @fmap@.</span></span><span>
</span><span id="line-361"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFmapMatch"><span class="hs-identifier hs-type">makeFmapMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-362"></span><span id="makeFmapMatch"><span class="annot"><span class="annottext">makeFmapMatch :: Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFmapMatch"><span class="hs-identifier hs-var hs-var">makeFmapMatch</span></a></span></span><span> </span><span id="local-6989586621679072459"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072459"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072460"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072460"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072461"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072461"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621679072462"><span class="annot"><span class="annottext">[Exp -&gt; Q Exp]
</span><a href="#local-6989586621679072462"><span class="hs-identifier hs-var">parts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
-&gt; FFoldType (Exp -&gt; Q Exp) -&gt; ConstructorInfo -&gt; Q [Exp -&gt; Q Exp]
forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var">foldDataConArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072459"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType (Exp -&gt; Q Exp)
</span><a href="#local-6989586621679072464"><span class="hs-identifier hs-var">ft_fmap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072460"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#match_for_con_functor"><span class="hs-identifier hs-var">match_for_con_functor</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072461"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp -&gt; Q Exp]
</span><a href="#local-6989586621679072462"><span class="hs-identifier hs-var">parts</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-366"></span><span>    </span><span class="annot"><a href="#local-6989586621679072464"><span class="hs-identifier hs-type">ft_fmap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>    </span><span id="local-6989586621679072464"><span class="annot"><span class="annottext">ft_fmap :: FFoldType (Exp -&gt; Q Exp)
</span><a href="#local-6989586621679072464"><span class="hs-identifier hs-var hs-var">ft_fmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_triv :: Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-368"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_var :: Name -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072469"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072469"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679072470"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072470"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072459"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; Name -&gt; OneOrTwoNames One
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072469"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-369"></span><span>                                       </span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072473"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072473"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072473"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072470"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-370"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_fun :: (Exp -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072477"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072477"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679072478"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072478"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679072479"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072479"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072481"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072481"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-371"></span><span>                     </span><span id="local-6989586621679072482"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072482"><span class="hs-identifier hs-var">gg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072477"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072481"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-372"></span><span>                     </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072478"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072479"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072482"><span class="hs-identifier hs-var">gg</span></a></span><span>
</span><span id="line-373"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: TupleSort -&gt; [Exp -&gt; Q Exp] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match)
-&gt; TupleSort -&gt; [Exp -&gt; Q Exp] -&gt; Exp -&gt; Q Exp
forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var">mkSimpleTupleCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#match_for_con_functor"><span class="hs-identifier hs-var">match_for_con_functor</span></a></span><span>
</span><span id="line-374"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_ty_app :: Type -&gt; (Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072486"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072486"><span class="hs-identifier hs-var">argTy</span></a></span></span><span> </span><span id="local-6989586621679072487"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072487"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679072488"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072488"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-375"></span><span>                     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Name
</span><a href="Data.Deriving.Internal.html#varTToName_maybe"><span class="hs-identifier hs-var">varTToName_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072486"><span class="hs-identifier hs-var">argTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-376"></span><span>                       </span><span class="hs-comment">-- If the argument type is a bare occurrence of the</span><span>
</span><span id="line-377"></span><span>                       </span><span class="hs-comment">-- data type's last type variable, then we can</span><span>
</span><span id="line-378"></span><span>                       </span><span class="hs-comment">-- generate more efficient code.</span><span>
</span><span id="line-379"></span><span>                       </span><span class="hs-comment">-- This was inspired by GHC#17880.</span><span>
</span><span id="line-380"></span><span>                       </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679072490"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072490"><span class="hs-identifier hs-var">argVar</span></a></span></span><span>
</span><span id="line-381"></span><span>                         </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072493"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072493"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Map Name (OneOrTwoNames One) -&gt; Maybe (OneOrTwoNames One)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072490"><span class="hs-identifier hs-var">argVar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072459"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-382"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#fmapValName"><span class="hs-identifier hs-var">fmapValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072493"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072488"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-383"></span><span>                       </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679072495"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072495"><span class="hs-identifier hs-var">gg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072487"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-384"></span><span>                               </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#fmapValName"><span class="hs-identifier hs-var">fmapValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072495"><span class="hs-identifier hs-var">gg</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072488"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-385"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: [TyVarBndrSpec] -&gt; (Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072497"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072497"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679072498"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072498"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072497"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072498"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-386"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name -&gt; Q Exp
forall a b. ClassRep a =&gt; a -&gt; Name -&gt; Q b
</span><a href="Data.Deriving.Internal.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072461"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-387"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: Name -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#contravarianceError"><span class="hs-identifier hs-var">contravarianceError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072461"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-388"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="annot"><span class="hs-comment">-- | Generates a match whose right-hand side implements @(&lt;$)@.</span></span><span>
</span><span id="line-391"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeReplaceMatch"><span class="hs-identifier hs-type">makeReplaceMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-392"></span><span id="makeReplaceMatch"><span class="annot"><span class="annottext">makeReplaceMatch :: Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeReplaceMatch"><span class="hs-identifier hs-var hs-var">makeReplaceMatch</span></a></span></span><span> </span><span id="local-6989586621679072503"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072503"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072504"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072504"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072505"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072505"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-393"></span><span>  </span><span id="local-6989586621679072506"><span class="annot"><span class="annottext">[Exp -&gt; Q Exp]
</span><a href="#local-6989586621679072506"><span class="hs-identifier hs-var">parts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
-&gt; FFoldType (Exp -&gt; Q Exp) -&gt; ConstructorInfo -&gt; Q [Exp -&gt; Q Exp]
forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var">foldDataConArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072503"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType (Exp -&gt; Q Exp)
</span><a href="#local-6989586621679072507"><span class="hs-identifier hs-var">ft_replace</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072504"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-394"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#match_for_con_functor"><span class="hs-identifier hs-var">match_for_con_functor</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072505"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp -&gt; Q Exp]
</span><a href="#local-6989586621679072506"><span class="hs-identifier hs-var">parts</span></a></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><a href="#local-6989586621679072507"><span class="hs-identifier hs-type">ft_replace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>    </span><span id="local-6989586621679072507"><span class="annot"><span class="annottext">ft_replace :: FFoldType (Exp -&gt; Q Exp)
</span><a href="#local-6989586621679072507"><span class="hs-identifier hs-var hs-var">ft_replace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_triv :: Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-398"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_var :: Name -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072508"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072508"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072503"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; Name -&gt; OneOrTwoNames One
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072508"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-399"></span><span>                                          </span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072511"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072511"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072511"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-400"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_fun :: (Exp -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072512"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072512"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679072513"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072513"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679072514"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072514"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072515"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072515"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-401"></span><span>                        </span><span id="local-6989586621679072516"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072516"><span class="hs-identifier hs-var">gg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072512"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072515"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-402"></span><span>                        </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072513"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072514"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072516"><span class="hs-identifier hs-var">gg</span></a></span><span>
</span><span id="line-403"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: TupleSort -&gt; [Exp -&gt; Q Exp] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match)
-&gt; TupleSort -&gt; [Exp -&gt; Q Exp] -&gt; Exp -&gt; Q Exp
forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var">mkSimpleTupleCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#match_for_con_functor"><span class="hs-identifier hs-var">match_for_con_functor</span></a></span><span>
</span><span id="line-404"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_ty_app :: Type -&gt; (Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072517"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072517"><span class="hs-identifier hs-var">argTy</span></a></span></span><span> </span><span id="local-6989586621679072518"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072518"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679072519"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072519"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-405"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Name
</span><a href="Data.Deriving.Internal.html#varTToName_maybe"><span class="hs-identifier hs-var">varTToName_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072517"><span class="hs-identifier hs-var">argTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-406"></span><span>                          </span><span class="hs-comment">-- If the argument type is a bare occurrence of the</span><span>
</span><span id="line-407"></span><span>                          </span><span class="hs-comment">-- data type's last type variable, then we can</span><span>
</span><span id="line-408"></span><span>                          </span><span class="hs-comment">-- generate more efficient code.</span><span>
</span><span id="line-409"></span><span>                          </span><span class="hs-comment">-- This was inspired by GHC#17880.</span><span>
</span><span id="line-410"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679072520"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072520"><span class="hs-identifier hs-var">argVar</span></a></span></span><span>
</span><span id="line-411"></span><span>                            </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072523"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072523"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Map Name (OneOrTwoNames One) -&gt; Maybe (OneOrTwoNames One)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072520"><span class="hs-identifier hs-var">argVar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072503"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-412"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#replaceValName"><span class="hs-identifier hs-var">replaceValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072523"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072519"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-413"></span><span>                          </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679072525"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072525"><span class="hs-identifier hs-var">gg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072518"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-414"></span><span>                                  </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#fmapValName"><span class="hs-identifier hs-var">fmapValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072525"><span class="hs-identifier hs-var">gg</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072519"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-415"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: [TyVarBndrSpec] -&gt; (Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072526"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072526"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679072527"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072527"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072526"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072527"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-416"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name -&gt; Q Exp
forall a b. ClassRep a =&gt; a -&gt; Name -&gt; Q b
</span><a href="Data.Deriving.Internal.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072505"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-417"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: Name -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#contravarianceError"><span class="hs-identifier hs-var">contravarianceError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072505"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-418"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#match_for_con_functor"><span class="hs-identifier hs-type">match_for_con_functor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-421"></span><span id="match_for_con_functor"><span class="annot"><span class="annottext">match_for_con_functor :: Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#match_for_con_functor"><span class="hs-identifier hs-var hs-var">match_for_con_functor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [Q Exp] -&gt; Q Exp) -&gt; Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
forall a. (Name -&gt; [a] -&gt; Q Exp) -&gt; Name -&gt; [Exp -&gt; a] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch"><span class="hs-identifier hs-var">mkSimpleConMatch</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; [Q Exp] -&gt; Q Exp) -&gt; Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match)
-&gt; (Name -&gt; [Q Exp] -&gt; Q Exp) -&gt; Name -&gt; [Exp -&gt; Q Exp] -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072529"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072529"><span class="hs-identifier hs-var">conName'</span></a></span></span><span> </span><span id="local-6989586621679072530"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679072530"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-422"></span><span>  </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072529"><span class="hs-identifier hs-var">conName'</span></a></span><span class="annot"><span class="annottext">Q Exp -&gt; [Q Exp] -&gt; [Q Exp]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679072530"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Con x1 x2 ..</span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="annot"><span class="hs-comment">-- | Generates a match whose right-hand side implements @foldr@.</span></span><span>
</span><span id="line-425"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldrMatch"><span class="hs-identifier hs-type">makeFoldrMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-426"></span><span id="makeFoldrMatch"><span class="annot"><span class="annottext">makeFoldrMatch :: Name -&gt; Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldrMatch"><span class="hs-identifier hs-var hs-var">makeFoldrMatch</span></a></span></span><span> </span><span id="local-6989586621679072531"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072531"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679072532"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072532"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072533"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072533"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072534"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072534"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-427"></span><span>  </span><span id="local-6989586621679072535"><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072535"><span class="hs-identifier hs-var">parts</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
-&gt; FFoldType (Q (Bool, Exp))
-&gt; ConstructorInfo
-&gt; Q [Q (Bool, Exp)]
forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var">foldDataConArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072532"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType (Q (Bool, Exp))
</span><a href="#local-6989586621679072536"><span class="hs-identifier hs-var">ft_foldr</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072533"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-428"></span><span>  </span><span id="local-6989586621679072537"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072537"><span class="hs-identifier hs-var">parts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)] -&gt; Q [(Bool, Exp)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072535"><span class="hs-identifier hs-var">parts</span></a></span><span>
</span><span id="line-429"></span><span>  </span><span class="annot"><span class="annottext">Exp -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072538"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072531"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072534"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072537"><span class="hs-identifier hs-var">parts'</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-431"></span><span>    </span><span class="hs-comment">-- The Bool is True if the type mentions the last type parameter, False</span><span>
</span><span id="line-432"></span><span>    </span><span class="hs-comment">-- otherwise. Later, match_for_con uses mkSimpleConMatch2 to filter out</span><span>
</span><span id="line-433"></span><span>    </span><span class="hs-comment">-- expressions that do not mention the last parameter by checking for False.</span><span>
</span><span id="line-434"></span><span>    </span><span class="annot"><a href="#local-6989586621679072536"><span class="hs-identifier hs-type">ft_foldr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>    </span><span id="local-6989586621679072536"><span class="annot"><span class="annottext">ft_foldr :: FFoldType (Q (Bool, Exp))
</span><a href="#local-6989586621679072536"><span class="hs-identifier hs-var hs-var">ft_foldr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_triv :: Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679072539"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072539"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam2"><span class="hs-identifier hs-var">mkSimpleLam2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072541"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072541"><span class="hs-identifier hs-var">z'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072541"><span class="hs-identifier hs-var">z'</span></a></span><span>
</span><span id="line-436"></span><span>                                 </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072539"><span class="hs-identifier hs-var">lam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_var :: Name -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072542"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072542"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072532"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; Name -&gt; OneOrTwoNames One
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072542"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-438"></span><span>                                      </span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072545"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072545"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072545"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: TupleSort -&gt; [Q (Bool, Exp)] -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072546"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072546"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679072547"><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072547"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-440"></span><span>                      </span><span id="local-6989586621679072548"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072548"><span class="hs-identifier hs-var">gg</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)] -&gt; Q [(Bool, Exp)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072547"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-441"></span><span>                      </span><span id="local-6989586621679072549"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072549"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam2"><span class="hs-identifier hs-var">mkSimpleLam2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072550"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072550"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679072551"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072551"><span class="hs-identifier hs-var">z'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-442"></span><span>                        </span><span class="annot"><span class="annottext">(Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; TupleSort -&gt; [(Bool, Exp)] -&gt; Exp -&gt; Q Exp
forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var">mkSimpleTupleCase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072538"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072551"><span class="hs-identifier hs-var">z'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072546"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072548"><span class="hs-identifier hs-var">gg</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072550"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-443"></span><span>                      </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072549"><span class="hs-identifier hs-var">lam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_ty_app :: Type -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072552"><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072552"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-445"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621679072553"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072553"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072554"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072554"><span class="hs-identifier hs-var">gg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072552"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-446"></span><span>                      </span><span id="local-6989586621679072555"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072555"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam2"><span class="hs-identifier hs-var">mkSimpleLam2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072556"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072556"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679072557"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072557"><span class="hs-identifier hs-var">z'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-447"></span><span>                           </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldrValName"><span class="hs-identifier hs-var">foldrValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072554"><span class="hs-identifier hs-var">gg</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072557"><span class="hs-identifier hs-var">z'</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072556"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-448"></span><span>                      </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072553"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072555"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: [TyVarBndrSpec] -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072559"><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072559"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072559"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-450"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: Name -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (Bool, Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#contravarianceError"><span class="hs-identifier hs-var">contravarianceError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072534"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-451"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_fun :: Q (Bool, Exp) -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (Bool, Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#noFunctionsError"><span class="hs-identifier hs-var">noFunctionsError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072534"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-452"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name -&gt; Q (Bool, Exp)
forall a b. ClassRep a =&gt; a -&gt; Name -&gt; Q b
</span><a href="Data.Deriving.Internal.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072534"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-453"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span>    </span><span class="annot"><a href="#local-6989586621679072538"><span class="hs-identifier hs-type">match_for_con</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621679072538"><span class="annot"><span class="annottext">match_for_con :: Exp -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072538"><span class="hs-identifier hs-var hs-var">match_for_con</span></a></span></span><span> </span><span id="local-6989586621679072561"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072561"><span class="hs-identifier hs-var">zExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch2"><span class="hs-identifier hs-var">mkSimpleConMatch2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; (Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072563"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072563"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Exp] -&gt; Exp
</span><a href="#local-6989586621679072564"><span class="hs-identifier hs-var">mkFoldr</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-457"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-458"></span><span>        </span><span class="hs-comment">-- g1 v1 (g2 v2 (.. z))</span><span>
</span><span id="line-459"></span><span>        </span><span class="annot"><a href="#local-6989586621679072564"><span class="hs-identifier hs-type">mkFoldr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-460"></span><span>        </span><span id="local-6989586621679072564"><span class="annot"><span class="annottext">mkFoldr :: [Exp] -&gt; Exp
</span><a href="#local-6989586621679072564"><span class="hs-identifier hs-var hs-var">mkFoldr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Exp) -&gt; Exp -&gt; [Exp] -&gt; Exp
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-identifier hs-var">AppE</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072561"><span class="hs-identifier hs-var">zExp</span></a></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="annot"><span class="hs-comment">-- | Generates a match whose right-hand side implements @foldMap@.</span></span><span>
</span><span id="line-463"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeFoldMapMatch"><span class="hs-identifier hs-type">makeFoldMapMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-464"></span><span id="makeFoldMapMatch"><span class="annot"><span class="annottext">makeFoldMapMatch :: Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeFoldMapMatch"><span class="hs-identifier hs-var hs-var">makeFoldMapMatch</span></a></span></span><span> </span><span id="local-6989586621679072565"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072565"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072566"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072566"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072567"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072567"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679072568"><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072568"><span class="hs-identifier hs-var">parts</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
-&gt; FFoldType (Q (Bool, Exp))
-&gt; ConstructorInfo
-&gt; Q [Q (Bool, Exp)]
forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var">foldDataConArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072565"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType (Q (Bool, Exp))
</span><a href="#local-6989586621679072569"><span class="hs-identifier hs-var">ft_foldMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072566"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-466"></span><span>  </span><span id="local-6989586621679072570"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072570"><span class="hs-identifier hs-var">parts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)] -&gt; Q [(Bool, Exp)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072568"><span class="hs-identifier hs-var">parts</span></a></span><span>
</span><span id="line-467"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072571"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072567"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072570"><span class="hs-identifier hs-var">parts'</span></a></span><span>
</span><span id="line-468"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-469"></span><span>    </span><span class="hs-comment">-- The Bool is True if the type mentions the last type parameter, False</span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-comment">-- otherwise. Later, match_for_con uses mkSimpleConMatch2 to filter out</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-comment">-- expressions that do not mention the last parameter by checking for False.</span><span>
</span><span id="line-472"></span><span>    </span><span class="annot"><a href="#local-6989586621679072569"><span class="hs-identifier hs-type">ft_foldMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>    </span><span id="local-6989586621679072569"><span class="annot"><span class="annottext">ft_foldMap :: FFoldType (Q (Bool, Exp))
</span><a href="#local-6989586621679072569"><span class="hs-identifier hs-var hs-var">ft_foldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_triv :: Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679072572"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072572"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#memptyValName"><span class="hs-identifier hs-var">memptyValName</span></a></span><span>
</span><span id="line-474"></span><span>                                   </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072572"><span class="hs-identifier hs-var">lam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_var :: Name -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072574"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072574"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072565"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; Name -&gt; OneOrTwoNames One
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072574"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-476"></span><span>                                        </span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072577"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072577"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072577"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: TupleSort -&gt; [Q (Bool, Exp)] -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072578"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072578"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679072579"><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072579"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-478"></span><span>                        </span><span id="local-6989586621679072580"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072580"><span class="hs-identifier hs-var">gg</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)] -&gt; Q [(Bool, Exp)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072579"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-479"></span><span>                        </span><span id="local-6989586621679072581"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072581"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; TupleSort -&gt; [(Bool, Exp)] -&gt; Exp -&gt; Q Exp
forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var">mkSimpleTupleCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072571"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072578"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072580"><span class="hs-identifier hs-var">gg</span></a></span><span>
</span><span id="line-480"></span><span>                        </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072581"><span class="hs-identifier hs-var">lam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_ty_app :: Type -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072582"><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072582"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-482"></span><span>                        </span><span class="annot"><span class="annottext">((Bool, Exp) -&gt; (Bool, Exp)) -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
forall a b. (a -&gt; b) -&gt; Q a -&gt; Q b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679072583"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072583"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072584"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072584"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072583"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldMapValName"><span class="hs-identifier hs-var">foldMapValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072584"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072582"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-483"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: [TyVarBndrSpec] -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072586"><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072586"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072586"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-484"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: Name -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (Bool, Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#contravarianceError"><span class="hs-identifier hs-var">contravarianceError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072567"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-485"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_fun :: Q (Bool, Exp) -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (Bool, Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#noFunctionsError"><span class="hs-identifier hs-var">noFunctionsError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072567"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-486"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name -&gt; Q (Bool, Exp)
forall a b. ClassRep a =&gt; a -&gt; Name -&gt; Q b
</span><a href="Data.Deriving.Internal.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072567"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-487"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span>    </span><span class="annot"><a href="#local-6989586621679072571"><span class="hs-identifier hs-type">match_for_con</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-490"></span><span>    </span><span id="local-6989586621679072571"><span class="annot"><span class="annottext">match_for_con :: Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072571"><span class="hs-identifier hs-var hs-var">match_for_con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch2"><span class="hs-identifier hs-var">mkSimpleConMatch2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; (Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072587"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072587"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Exp] -&gt; Exp
</span><a href="#local-6989586621679072588"><span class="hs-identifier hs-var">mkFoldMap</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072587"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-491"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-492"></span><span>        </span><span class="hs-comment">-- mappend v1 (mappend v2 ..)</span><span>
</span><span id="line-493"></span><span>        </span><span class="annot"><a href="#local-6989586621679072588"><span class="hs-identifier hs-type">mkFoldMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-494"></span><span>        </span><span id="local-6989586621679072588"><span class="annot"><span class="annottext">mkFoldMap :: [Exp] -&gt; Exp
</span><a href="#local-6989586621679072588"><span class="hs-identifier hs-var hs-var">mkFoldMap</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#memptyValName"><span class="hs-identifier hs-var">memptyValName</span></a></span><span>
</span><span id="line-495"></span><span>        </span><span class="annot"><a href="#local-6989586621679072588"><span class="hs-identifier hs-var">mkFoldMap</span></a></span><span> </span><span id="local-6989586621679072589"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072589"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Exp) -&gt; [Exp] -&gt; Exp
forall a. (a -&gt; a -&gt; a) -&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-identifier hs-var">AppE</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Exp) -&gt; (Exp -&gt; Exp) -&gt; Exp -&gt; Exp -&gt; Exp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-identifier hs-var">AppE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#mappendValName"><span class="hs-identifier hs-var">mappendValName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072589"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-496"></span><span>
</span><span id="line-497"></span><span class="annot"><span class="hs-comment">-- | Generates a match whose right-hand side implements @null@.</span></span><span>
</span><span id="line-498"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeNullMatch"><span class="hs-identifier hs-type">makeNullMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-499"></span><span id="makeNullMatch"><span class="annot"><span class="annottext">makeNullMatch :: Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeNullMatch"><span class="hs-identifier hs-var hs-var">makeNullMatch</span></a></span></span><span> </span><span id="local-6989586621679072592"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072592"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072593"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072593"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072594"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072594"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-500"></span><span>  </span><span id="local-6989586621679072595"><span class="annot"><span class="annottext">[Q (NullM Exp)]
</span><a href="#local-6989586621679072595"><span class="hs-identifier hs-var">parts</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
-&gt; FFoldType (Q (NullM Exp))
-&gt; ConstructorInfo
-&gt; Q [Q (NullM Exp)]
forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var">foldDataConArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072592"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType (Q (NullM Exp))
</span><a href="#local-6989586621679072596"><span class="hs-identifier hs-var">ft_null</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072593"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-501"></span><span>  </span><span id="local-6989586621679072597"><span class="annot"><span class="annottext">[NullM Exp]
</span><a href="#local-6989586621679072597"><span class="hs-identifier hs-var">parts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (NullM Exp)] -&gt; Q [NullM Exp]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (NullM Exp)]
</span><a href="#local-6989586621679072595"><span class="hs-identifier hs-var">parts</span></a></span><span>
</span><span id="line-502"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[NullM Exp] -&gt; Maybe [(Bool, Exp)]
forall a. [NullM a] -&gt; Maybe [(Bool, a)]
</span><a href="Data.Functor.Deriving.Internal.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[NullM Exp]
</span><a href="#local-6989586621679072597"><span class="hs-identifier hs-var">parts'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><span class="annottext">Maybe [(Bool, Exp)]
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Match -&gt; Q Match
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Match -&gt; Q Match) -&gt; Match -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pat -&gt; Body -&gt; [Dec] -&gt; Match
</span><span class="hs-identifier hs-var">Match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Pat
</span><a href="Data.Functor.Deriving.Internal.html#conWildPat"><span class="hs-identifier hs-var">conWildPat</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072593"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Body
</span><span class="hs-identifier hs-var">NormalB</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Body) -&gt; Exp -&gt; Body
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">ConE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#falseDataName"><span class="hs-identifier hs-var">falseDataName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679072604"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072604"><span class="hs-identifier hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072605"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072594"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072604"><span class="hs-identifier hs-var">cp</span></a></span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><a href="#local-6989586621679072596"><span class="hs-identifier hs-type">ft_null</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-type">NullM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>    </span><span id="local-6989586621679072596"><span class="annot"><span class="annottext">ft_null :: FFoldType (Q (NullM Exp))
</span><a href="#local-6989586621679072596"><span class="hs-identifier hs-var hs-var">ft_null</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_triv :: Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NullM Exp -&gt; Q (NullM Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(NullM Exp -&gt; Q (NullM Exp)) -&gt; NullM Exp -&gt; Q (NullM Exp)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; NullM Exp
forall a. a -&gt; NullM a
</span><a href="Data.Functor.Deriving.Internal.html#IsNull"><span class="hs-identifier hs-var">IsNull</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; NullM Exp) -&gt; Exp -&gt; NullM Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">ConE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#trueDataName"><span class="hs-identifier hs-var">trueDataName</span></a></span><span>
</span><span id="line-508"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_var :: Name -&gt; Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NullM Exp -&gt; Q (NullM Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">NullM Exp
forall a. NullM a
</span><a href="Data.Functor.Deriving.Internal.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a></span><span>
</span><span id="line-509"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: TupleSort -&gt; [Q (NullM Exp)] -&gt; Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072609"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072609"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679072610"><span class="annot"><span class="annottext">[Q (NullM Exp)]
</span><a href="#local-6989586621679072610"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-510"></span><span>                     </span><span id="local-6989586621679072611"><span class="annot"><span class="annottext">[NullM Exp]
</span><a href="#local-6989586621679072611"><span class="hs-identifier hs-var">gg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (NullM Exp)] -&gt; Q [NullM Exp]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (NullM Exp)]
</span><a href="#local-6989586621679072610"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-511"></span><span>                     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[NullM Exp] -&gt; Maybe [(Bool, Exp)]
forall a. [NullM a] -&gt; Maybe [(Bool, a)]
</span><a href="Data.Functor.Deriving.Internal.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[NullM Exp]
</span><a href="#local-6989586621679072611"><span class="hs-identifier hs-var">gg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-512"></span><span>                       </span><span class="annot"><span class="annottext">Maybe [(Bool, Exp)]
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NullM Exp -&gt; Q (NullM Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">NullM Exp
forall a. NullM a
</span><a href="Data.Functor.Deriving.Internal.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a></span><span>
</span><span id="line-513"></span><span>                       </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679072612"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072612"><span class="hs-identifier hs-var">ggg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-514"></span><span>                         </span><span class="annot"><span class="annottext">(Exp -&gt; NullM Exp) -&gt; Q Exp -&gt; Q (NullM Exp)
forall a b. (a -&gt; b) -&gt; Q a -&gt; Q b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; NullM Exp
forall a. a -&gt; NullM a
</span><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-var">NullM</span></a></span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q (NullM Exp)) -&gt; Q Exp -&gt; Q (NullM Exp)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span>
</span><span id="line-515"></span><span>                                    </span><span class="annot"><span class="annottext">((Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; TupleSort -&gt; [(Bool, Exp)] -&gt; Exp -&gt; Q Exp
forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var">mkSimpleTupleCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072605"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072609"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072612"><span class="hs-identifier hs-var">ggg</span></a></span><span>
</span><span id="line-516"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_ty_app :: Type -&gt; Q (NullM Exp) -&gt; Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072614"><span class="annot"><span class="annottext">Q (NullM Exp)
</span><a href="#local-6989586621679072614"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((NullM Exp -&gt; NullM Exp) -&gt; Q (NullM Exp) -&gt; Q (NullM Exp))
-&gt; Q (NullM Exp) -&gt; (NullM Exp -&gt; NullM Exp) -&gt; Q (NullM Exp)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(NullM Exp -&gt; NullM Exp) -&gt; Q (NullM Exp) -&gt; Q (NullM Exp)
forall a b. (a -&gt; b) -&gt; Q a -&gt; Q b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Q (NullM Exp)
</span><a href="#local-6989586621679072614"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">((NullM Exp -&gt; NullM Exp) -&gt; Q (NullM Exp))
-&gt; (NullM Exp -&gt; NullM Exp) -&gt; Q (NullM Exp)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072616"><span class="annot"><span class="annottext">NullM Exp
</span><a href="#local-6989586621679072616"><span class="hs-identifier hs-var">nestedResult</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-517"></span><span>                     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NullM Exp
</span><a href="#local-6989586621679072616"><span class="hs-identifier hs-var">nestedResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-518"></span><span>                       </span><span class="hs-comment">-- If e definitely contains the parameter, then we can</span><span>
</span><span id="line-519"></span><span>                       </span><span class="hs-comment">-- test if (G e) contains it by simply checking if (G e)</span><span>
</span><span id="line-520"></span><span>                       </span><span class="hs-comment">-- is null</span><span>
</span><span id="line-521"></span><span>                       </span><span class="annot"><span class="annottext">NullM Exp
</span><a href="Data.Functor.Deriving.Internal.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; NullM Exp
forall a. a -&gt; NullM a
</span><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-var">NullM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; NullM Exp) -&gt; Exp -&gt; NullM Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#nullValName"><span class="hs-identifier hs-var">nullValName</span></a></span><span>
</span><span id="line-522"></span><span>                       </span><span class="hs-comment">-- This case is unreachable--it will actually be caught</span><span>
</span><span id="line-523"></span><span>                       </span><span class="hs-comment">-- by ft_triv</span><span>
</span><span id="line-524"></span><span>                       </span><span id="local-6989586621679072618"><span class="annot"><span class="annottext">r :: NullM Exp
</span><a href="#local-6989586621679072618"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#IsNull"><span class="hs-identifier hs-type">IsNull</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NullM Exp
</span><a href="#local-6989586621679072618"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-525"></span><span>                       </span><span class="hs-comment">-- The general case uses (all null), (all (all null)),</span><span>
</span><span id="line-526"></span><span>                       </span><span class="hs-comment">-- etc.</span><span>
</span><span id="line-527"></span><span>                       </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-type">NullM</span></a></span><span> </span><span id="local-6989586621679072619"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072619"><span class="hs-identifier hs-var">nestedTest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; NullM Exp
forall a. a -&gt; NullM a
</span><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-var">NullM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; NullM Exp) -&gt; Exp -&gt; NullM Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-528"></span><span>                                           </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#allValName"><span class="hs-identifier hs-var">allValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072619"><span class="hs-identifier hs-var">nestedTest</span></a></span><span>
</span><span id="line-529"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: [TyVarBndrSpec] -&gt; Q (NullM Exp) -&gt; Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072621"><span class="annot"><span class="annottext">Q (NullM Exp)
</span><a href="#local-6989586621679072621"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q (NullM Exp)
</span><a href="#local-6989586621679072621"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-530"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: Name -&gt; Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (NullM Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#contravarianceError"><span class="hs-identifier hs-var">contravarianceError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072594"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-531"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_fun :: Q (NullM Exp) -&gt; Q (NullM Exp) -&gt; Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Q (NullM Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Q (NullM Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (NullM Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#noFunctionsError"><span class="hs-identifier hs-var">noFunctionsError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072594"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-532"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: Q (NullM Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name -&gt; Q (NullM Exp)
forall a b. ClassRep a =&gt; a -&gt; Name -&gt; Q b
</span><a href="Data.Deriving.Internal.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072594"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-533"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span>    </span><span class="annot"><a href="#local-6989586621679072605"><span class="hs-identifier hs-type">match_for_con</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-536"></span><span>    </span><span id="local-6989586621679072605"><span class="annot"><span class="annottext">match_for_con :: Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072605"><span class="hs-identifier hs-var hs-var">match_for_con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch2"><span class="hs-identifier hs-var">mkSimpleConMatch2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; (Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072622"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072622"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Exp] -&gt; Exp
</span><a href="#local-6989586621679072623"><span class="hs-identifier hs-var">mkNull</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072622"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-537"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-comment">-- v1 &amp;&amp; v2 &amp;&amp; ..</span><span>
</span><span id="line-539"></span><span>        </span><span class="annot"><a href="#local-6989586621679072623"><span class="hs-identifier hs-type">mkNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-540"></span><span>        </span><span id="local-6989586621679072623"><span class="annot"><span class="annottext">mkNull :: [Exp] -&gt; Exp
</span><a href="#local-6989586621679072623"><span class="hs-identifier hs-var hs-var">mkNull</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">ConE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#trueDataName"><span class="hs-identifier hs-var">trueDataName</span></a></span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><a href="#local-6989586621679072623"><span class="hs-identifier hs-var">mkNull</span></a></span><span> </span><span id="local-6989586621679072624"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072624"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Exp) -&gt; [Exp] -&gt; Exp
forall a. (a -&gt; a -&gt; a) -&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679072625"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072625"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679072626"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072626"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#andValName"><span class="hs-identifier hs-var">andValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072625"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072626"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072624"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span class="hs-comment">-- Given a list of NullM results, produce Nothing if any of them is NotNull,</span><span>
</span><span id="line-544"></span><span class="hs-comment">-- and otherwise produce a list of (Bool, a) with True entries representing</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- unknowns and False entries representing things that are definitely null.</span><span>
</span><span id="line-546"></span><span id="local-6989586621679071923"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#convert"><span class="hs-identifier hs-type">convert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-type">NullM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679071923"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679071923"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-547"></span><span id="convert"><span class="annot"><span class="annottext">convert :: forall a. [NullM a] -&gt; Maybe [(Bool, a)]
</span><a href="Data.Functor.Deriving.Internal.html#convert"><span class="hs-identifier hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NullM a -&gt; Maybe (Bool, a)) -&gt; [NullM a] -&gt; Maybe [(Bool, a)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">NullM a -&gt; Maybe (Bool, a)
forall {b}. NullM b -&gt; Maybe (Bool, b)
</span><a href="#local-6989586621679072630"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-548"></span><span>  </span><span id="local-6989586621679072630"><span class="annot"><span class="annottext">go :: NullM b -&gt; Maybe (Bool, b)
</span><a href="#local-6989586621679072630"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#IsNull"><span class="hs-identifier hs-type">IsNull</span></a></span><span> </span><span id="local-6989586621679072631"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679072631"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool, b) -&gt; Maybe (Bool, b)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679072631"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-549"></span><span>  </span><span class="annot"><a href="#local-6989586621679072630"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">NullM b
</span><a href="Data.Functor.Deriving.Internal.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-550"></span><span>  </span><span class="annot"><a href="#local-6989586621679072630"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-type">NullM</span></a></span><span> </span><span id="local-6989586621679072632"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679072632"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool, b) -&gt; Maybe (Bool, b)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679072632"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-keyword">data</span><span> </span><span id="NullM"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-var">NullM</span></a></span></span><span> </span><span id="local-6989586621679071924"><span class="annot"><a href="#local-6989586621679071924"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-553"></span><span>    </span><span id="IsNull"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#IsNull"><span class="hs-identifier hs-var">IsNull</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679071924"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- Definitely null</span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotNull"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a></span></span><span>  </span><span class="hs-comment">-- Definitely not null</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NullM"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#NullM"><span class="hs-identifier hs-var">NullM</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679071924"><span class="hs-identifier hs-type">a</span></a></span><span>  </span><span class="hs-comment">-- Unknown</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span class="annot"><span class="hs-comment">-- | Generates a match whose right-hand side implements @traverse@.</span></span><span>
</span><span id="line-558"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#makeTraverseMatch"><span class="hs-identifier hs-type">makeTraverseMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-559"></span><span id="makeTraverseMatch"><span class="annot"><span class="annottext">makeTraverseMatch :: Map Name (OneOrTwoNames One) -&gt; ConstructorInfo -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#makeTraverseMatch"><span class="hs-identifier hs-var hs-var">makeTraverseMatch</span></a></span></span><span> </span><span id="local-6989586621679072633"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072633"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072634"><span class="annot"><span class="annottext">con :: ConstructorInfo
</span><a href="#local-6989586621679072634"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072635"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072635"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-560"></span><span>  </span><span id="local-6989586621679072636"><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072636"><span class="hs-identifier hs-var">parts</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
-&gt; FFoldType (Q (Bool, Exp))
-&gt; ConstructorInfo
-&gt; Q [Q (Bool, Exp)]
forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var">foldDataConArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072633"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType (Q (Bool, Exp))
</span><a href="#local-6989586621679072637"><span class="hs-identifier hs-var">ft_trav</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072634"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-561"></span><span>  </span><span id="local-6989586621679072638"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072638"><span class="hs-identifier hs-var">parts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)] -&gt; Q [(Bool, Exp)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072636"><span class="hs-identifier hs-var">parts</span></a></span><span>
</span><span id="line-562"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072639"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072635"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072638"><span class="hs-identifier hs-var">parts'</span></a></span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-564"></span><span>    </span><span class="hs-comment">-- The Bool is True if the type mentions the last type parameter, False</span><span>
</span><span id="line-565"></span><span>    </span><span class="hs-comment">-- otherwise. Later, match_for_con uses mkSimpleConMatch2 to filter out</span><span>
</span><span id="line-566"></span><span>    </span><span class="hs-comment">-- expressions that do not mention the last parameter by checking for False.</span><span>
</span><span id="line-567"></span><span>    </span><span class="annot"><a href="#local-6989586621679072637"><span class="hs-identifier hs-type">ft_trav</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>    </span><span id="local-6989586621679072637"><span class="annot"><span class="annottext">ft_trav :: FFoldType (Q (Bool, Exp))
</span><a href="#local-6989586621679072637"><span class="hs-identifier hs-var hs-var">ft_trav</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- See Note [ft_triv for Bifoldable and Bitraversable]</span><span>
</span><span id="line-569"></span><span>                   </span><span class="annot"><span class="annottext">ft_triv :: Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#pureValName"><span class="hs-identifier hs-var">pureValName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_var :: Name -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072640"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072640"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072633"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; Name -&gt; OneOrTwoNames One
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072640"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-571"></span><span>                                     </span><span class="annot"><a href="Data.Deriving.Internal.html#OneName"><span class="hs-identifier hs-type">OneName</span></a></span><span> </span><span id="local-6989586621679072643"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072643"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072643"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: TupleSort -&gt; [Q (Bool, Exp)] -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072644"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072644"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679072645"><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072645"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-573"></span><span>                     </span><span id="local-6989586621679072646"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072646"><span class="hs-identifier hs-var">gg</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)] -&gt; Q [(Bool, Exp)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Q (Bool, Exp)]
</span><a href="#local-6989586621679072645"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-574"></span><span>                     </span><span id="local-6989586621679072647"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072647"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var">mkSimpleLam</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; Q Exp) -&gt; Q Exp) -&gt; (Exp -&gt; Q Exp) -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; TupleSort -&gt; [(Bool, Exp)] -&gt; Exp -&gt; Q Exp
forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var">mkSimpleTupleCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072639"><span class="hs-identifier hs-var">match_for_con</span></a></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072644"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072646"><span class="hs-identifier hs-var">gg</span></a></span><span>
</span><span id="line-575"></span><span>                     </span><span class="annot"><span class="annottext">(Bool, Exp) -&gt; Q (Bool, Exp)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072647"><span class="hs-identifier hs-var">lam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-576"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_ty_app :: Type -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072648"><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072648"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-577"></span><span>                     </span><span class="annot"><span class="annottext">((Bool, Exp) -&gt; (Bool, Exp)) -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
forall a b. (a -&gt; b) -&gt; Q a -&gt; Q b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679072649"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072649"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072650"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072650"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072649"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#traverseValName"><span class="hs-identifier hs-var">traverseValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072650"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072648"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-578"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: [TyVarBndrSpec] -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072652"><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072652"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><a href="#local-6989586621679072652"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-579"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: Name -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (Bool, Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#contravarianceError"><span class="hs-identifier hs-var">contravarianceError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072635"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-580"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_fun :: Q (Bool, Exp) -&gt; Q (Bool, Exp) -&gt; Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Q (Bool, Exp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q (Bool, Exp)
forall a. Name -&gt; Q a
</span><a href="Data.Deriving.Internal.html#noFunctionsError"><span class="hs-identifier hs-var">noFunctionsError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072635"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-581"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: Q (Bool, Exp)
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name -&gt; Q (Bool, Exp)
forall a b. ClassRep a =&gt; a -&gt; Name -&gt; Q b
</span><a href="Data.Deriving.Internal.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Traversable"><span class="hs-identifier hs-var">Traversable</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072635"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-582"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-comment">-- Con a1 a2 ... -&gt; liftA2 (\b1 b2 ... -&gt; Con b1 b2 ...) (g1 a1)</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-comment">--                    (g2 a2) &lt;*&gt; ...</span><span>
</span><span id="line-586"></span><span>    </span><span class="annot"><a href="#local-6989586621679072639"><span class="hs-identifier hs-type">match_for_con</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-587"></span><span>    </span><span id="local-6989586621679072639"><span class="annot"><span class="annottext">match_for_con :: Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="#local-6989586621679072639"><span class="hs-identifier hs-var hs-var">match_for_con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch2"><span class="hs-identifier hs-var">mkSimpleConMatch2</span></a></span><span> </span><span class="annot"><span class="annottext">((Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match)
-&gt; (Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679072653"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072653"><span class="hs-identifier hs-var">conExp</span></a></span></span><span> </span><span id="local-6989586621679072654"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072654"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; [Exp] -&gt; Exp
</span><a href="#local-6989586621679072655"><span class="hs-identifier hs-var">mkApCon</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072653"><span class="hs-identifier hs-var">conExp</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072654"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-588"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-comment">-- liftA2 (\b1 b2 ... -&gt; Con b1 b2 ...) x1 x2 &lt;*&gt; ..</span><span>
</span><span id="line-590"></span><span>        </span><span class="annot"><a href="#local-6989586621679072655"><span class="hs-identifier hs-type">mkApCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-591"></span><span>        </span><span id="local-6989586621679072655"><span class="annot"><span class="annottext">mkApCon :: Exp -&gt; [Exp] -&gt; Exp
</span><a href="#local-6989586621679072655"><span class="hs-identifier hs-var hs-var">mkApCon</span></a></span></span><span> </span><span id="local-6989586621679072656"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072656"><span class="hs-identifier hs-var">conExp</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#pureValName"><span class="hs-identifier hs-var">pureValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072656"><span class="hs-identifier hs-var">conExp</span></a></span><span>
</span><span id="line-592"></span><span>        </span><span class="annot"><a href="#local-6989586621679072655"><span class="hs-identifier hs-var">mkApCon</span></a></span><span> </span><span id="local-6989586621679072657"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072657"><span class="hs-identifier hs-var">conExp</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679072658"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072658"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#fmapValName"><span class="hs-identifier hs-var">fmapValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072657"><span class="hs-identifier hs-var">conExp</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072658"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-593"></span><span>        </span><span class="annot"><a href="#local-6989586621679072655"><span class="hs-identifier hs-var">mkApCon</span></a></span><span> </span><span id="local-6989586621679072659"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072659"><span class="hs-identifier hs-var">conExp</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679072660"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072660"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679072661"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072661"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679072662"><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072662"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Exp -&gt; Exp) -&gt; Exp -&gt; [Exp] -&gt; Exp
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">List.foldl'</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><a href="#local-6989586621679072664"><span class="hs-identifier hs-var">appAp</span></a></span><span>
</span><span id="line-594"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#liftA2ValName"><span class="hs-identifier hs-var">liftA2ValName</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072659"><span class="hs-identifier hs-var">conExp</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072660"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072661"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072662"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-595"></span><span>          </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679072664"><span class="annot"><span class="annottext">appAp :: Exp -&gt; Exp -&gt; Exp
</span><a href="#local-6989586621679072664"><span class="hs-identifier hs-var hs-var">appAp</span></a></span></span><span> </span><span id="local-6989586621679072666"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072666"><span class="hs-identifier hs-var">se1</span></a></span></span><span> </span><span id="local-6989586621679072667"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072667"><span class="hs-identifier hs-var">se2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Exp -&gt; Exp -&gt; Maybe Exp -&gt; Exp
</span><span class="hs-identifier hs-var">InfixE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Maybe Exp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072666"><span class="hs-identifier hs-var">se1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#apValName"><span class="hs-identifier hs-var">apValName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Maybe Exp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072667"><span class="hs-identifier hs-var">se2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-598"></span><span class="hs-comment">-- Class-specific constants</span><span>
</span><span id="line-599"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="annot"><span class="hs-comment">-- | A representation of which class is being derived.</span></span><span>
</span><span id="line-602"></span><span class="hs-keyword">data</span><span> </span><span id="FunctorClass"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorClass"><span class="hs-identifier hs-var">FunctorClass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Functor"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Foldable"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Traversable"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Traversable"><span class="hs-identifier hs-var">Traversable</span></a></span></span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#ClassRep"><span class="hs-identifier hs-type">ClassRep</span></a></span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorClass"><span class="hs-identifier hs-type">FunctorClass</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>    </span><span id="local-6989586621679072675"><span class="annot"><span class="annottext">arity :: FunctorClass -&gt; Int
</span><a href="#local-6989586621679072675"><span class="hs-identifier hs-var hs-var hs-var hs-var">arity</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span>    </span><span id="local-6989586621679072677"><span class="annot"><span class="annottext">allowExQuant :: FunctorClass -&gt; Bool
</span><a href="#local-6989586621679072677"><span class="hs-identifier hs-var hs-var hs-var hs-var">allowExQuant</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-608"></span><span>    </span><span class="annot"><a href="Data.Deriving.Internal.html#allowExQuant"><span class="hs-identifier hs-var">allowExQuant</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span>    </span><span id="local-6989586621679072679"><span class="annot"><span class="annottext">fullClassName :: FunctorClass -&gt; Name
</span><a href="#local-6989586621679072679"><span class="hs-identifier hs-var hs-var hs-var hs-var">fullClassName</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#functorTypeName"><span class="hs-identifier hs-var">functorTypeName</span></a></span><span>
</span><span id="line-611"></span><span>    </span><span class="annot"><a href="Data.Deriving.Internal.html#fullClassName"><span class="hs-identifier hs-var">fullClassName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldableTypeName"><span class="hs-identifier hs-var">foldableTypeName</span></a></span><span>
</span><span id="line-612"></span><span>    </span><span class="annot"><a href="Data.Deriving.Internal.html#fullClassName"><span class="hs-identifier hs-var">fullClassName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Traversable"><span class="hs-identifier hs-var">Traversable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#traversableTypeName"><span class="hs-identifier hs-var">traversableTypeName</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span>    </span><span id="local-6989586621679072689"><span class="annot"><span class="annottext">classConstraint :: FunctorClass -&gt; Int -&gt; Maybe Name
</span><a href="#local-6989586621679072689"><span class="hs-identifier hs-var hs-var hs-var hs-var">classConstraint</span></a></span></span><span> </span><span id="local-6989586621679072691"><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072691"><span class="hs-identifier hs-var">fClass</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe Name) -&gt; Name -&gt; Maybe Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctorClass -&gt; Name
forall a. ClassRep a =&gt; a -&gt; Name
</span><a href="Data.Deriving.Internal.html#fullClassName"><span class="hs-identifier hs-var">fullClassName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="#local-6989586621679072691"><span class="hs-identifier hs-var">fClass</span></a></span><span>
</span><span id="line-615"></span><span>    </span><span class="annot"><a href="Data.Deriving.Internal.html#classConstraint"><span class="hs-identifier hs-var">classConstraint</span></a></span><span>  </span><span class="annot"><span class="annottext">FunctorClass
</span><span class="hs-identifier">_</span></span><span>      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="annot"><span class="hs-comment">-- | A representation of which function is being generated.</span></span><span>
</span><span id="line-618"></span><span class="hs-keyword">data</span><span> </span><span id="FunctorFun"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-var">FunctorFun</span></a></span></span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Fmap"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span></span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Replace"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span></span><span> </span><span class="hs-comment">-- (&lt;$)</span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Foldr"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span></span><span>
</span><span id="line-622"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FoldMap"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span></span><span>
</span><span id="line-623"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Null"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span></span><span>
</span><span id="line-624"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Traverse"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span></span><span>
</span><span id="line-625"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679072693"><span id="local-6989586621679072695"><span class="annot"><span class="annottext">FunctorFun -&gt; FunctorFun -&gt; Bool
(FunctorFun -&gt; FunctorFun -&gt; Bool)
-&gt; (FunctorFun -&gt; FunctorFun -&gt; Bool) -&gt; Eq FunctorFun
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FunctorFun -&gt; FunctorFun -&gt; Bool
== :: FunctorFun -&gt; FunctorFun -&gt; Bool
$c/= :: FunctorFun -&gt; FunctorFun -&gt; Bool
/= :: FunctorFun -&gt; FunctorFun -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679072699"><span id="local-6989586621679072703"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-628"></span><span>    </span><span id="local-6989586621679072705"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; FunctorFun -&gt; ShowS
</span><a href="#local-6989586621679072705"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fmap&quot;</span></span><span>
</span><span id="line-629"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">showsPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&lt;$)&quot;</span></span><span>
</span><span id="line-630"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">showsPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;foldr&quot;</span></span><span>
</span><span id="line-631"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">showsPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;foldMap&quot;</span></span><span>
</span><span id="line-632"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">showsPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;null&quot;</span></span><span>
</span><span id="line-633"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">showsPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;traverse&quot;</span></span><span>
</span><span id="line-634"></span><span>
</span><span id="line-635"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-type">functorFunConstName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-636"></span><span id="functorFunConstName"><span class="annot"><span class="annottext">functorFunConstName :: FunctorFun -&gt; Name
</span><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var hs-var">functorFunConstName</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#fmapConstValName"><span class="hs-identifier hs-var">fmapConstValName</span></a></span><span>
</span><span id="line-637"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var">functorFunConstName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#replaceConstValName"><span class="hs-identifier hs-var">replaceConstValName</span></a></span><span>
</span><span id="line-638"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var">functorFunConstName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldrConstValName"><span class="hs-identifier hs-var">foldrConstValName</span></a></span><span>
</span><span id="line-639"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var">functorFunConstName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldMapConstValName"><span class="hs-identifier hs-var">foldMapConstValName</span></a></span><span>
</span><span id="line-640"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var">functorFunConstName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#nullConstValName"><span class="hs-identifier hs-var">nullConstValName</span></a></span><span>
</span><span id="line-641"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunConstName"><span class="hs-identifier hs-var">functorFunConstName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#traverseConstValName"><span class="hs-identifier hs-var">traverseConstValName</span></a></span><span>
</span><span id="line-642"></span><span>
</span><span id="line-643"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-type">functorFunName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-644"></span><span id="functorFunName"><span class="annot"><span class="annottext">functorFunName :: FunctorFun -&gt; Name
</span><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var hs-var">functorFunName</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#fmapValName"><span class="hs-identifier hs-var">fmapValName</span></a></span><span>
</span><span id="line-645"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#replaceValName"><span class="hs-identifier hs-var">replaceValName</span></a></span><span>
</span><span id="line-646"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldrValName"><span class="hs-identifier hs-var">foldrValName</span></a></span><span>
</span><span id="line-647"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#foldMapValName"><span class="hs-identifier hs-var">foldMapValName</span></a></span><span>
</span><span id="line-648"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#nullValName"><span class="hs-identifier hs-var">nullValName</span></a></span><span>
</span><span id="line-649"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#traverseValName"><span class="hs-identifier hs-var">traverseValName</span></a></span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorClassToFuns"><span class="hs-identifier hs-type">functorClassToFuns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorClass"><span class="hs-identifier hs-type">FunctorClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-652"></span><span id="functorClassToFuns"><span class="annot"><span class="annottext">functorClassToFuns :: FunctorClass -&gt; [FunctorFun]
</span><a href="Data.Functor.Deriving.Internal.html#functorClassToFuns"><span class="hs-identifier hs-var hs-var">functorClassToFuns</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-653"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorClassToFuns"><span class="hs-identifier hs-var">functorClassToFuns</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span class="hs-cpp">
#if MIN_VERSION_base(4,8,0)
</span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span class="hs-cpp">
#endif
</span><span>                                 </span><span class="hs-special">]</span><span>
</span><span id="line-658"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorClassToFuns"><span class="hs-identifier hs-var">functorClassToFuns</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Traversable"><span class="hs-identifier hs-var">Traversable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-type">functorFunToClass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorClass"><span class="hs-identifier hs-type">FunctorClass</span></a></span><span>
</span><span id="line-661"></span><span id="functorFunToClass"><span class="annot"><span class="annottext">functorFunToClass :: FunctorFun -&gt; FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var hs-var">functorFunToClass</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span>
</span><span id="line-662"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Functor"><span class="hs-identifier hs-var">Functor</span></a></span><span>
</span><span id="line-663"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span>
</span><span id="line-664"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span>
</span><span id="line-665"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Foldable"><span class="hs-identifier hs-var">Foldable</span></a></span><span>
</span><span id="line-666"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunToClass"><span class="hs-identifier hs-var">functorFunToClass</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorClass
</span><a href="Data.Functor.Deriving.Internal.html#Traversable"><span class="hs-identifier hs-var">Traversable</span></a></span><span>
</span><span id="line-667"></span><span>
</span><span id="line-668"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-669"></span><span class="hs-comment">-- Assorted utilities</span><span>
</span><span id="line-670"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunEmptyCase"><span class="hs-identifier hs-type">functorFunEmptyCase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-673"></span><span id="functorFunEmptyCase"><span class="annot"><span class="annottext">functorFunEmptyCase :: FunctorFun -&gt; Name -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunEmptyCase"><span class="hs-identifier hs-var hs-var">functorFunEmptyCase</span></a></span></span><span> </span><span id="local-6989586621679072714"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072714"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679072715"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072715"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679072716"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072716"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-674"></span><span>    </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; FunctorFun -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunTrivial"><span class="hs-identifier hs-var">functorFunTrivial</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072717"><span class="hs-identifier hs-var">emptyCase</span></a></span><span>
</span><span id="line-675"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#pureValName"><span class="hs-identifier hs-var">pureValName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072717"><span class="hs-identifier hs-var">emptyCase</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>                      </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072714"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072715"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-677"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-678"></span><span>    </span><span class="annot"><a href="#local-6989586621679072717"><span class="hs-identifier hs-type">emptyCase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-679"></span><span>    </span><span id="local-6989586621679072717"><span class="annot"><span class="annottext">emptyCase :: Q Exp
</span><a href="#local-6989586621679072717"><span class="hs-identifier hs-var hs-var">emptyCase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; [Q Match] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072716"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunNoCons"><span class="hs-identifier hs-type">functorFunNoCons</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-682"></span><span id="functorFunNoCons"><span class="annot"><span class="annottext">functorFunNoCons :: FunctorFun -&gt; Name -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunNoCons"><span class="hs-identifier hs-var hs-var">functorFunNoCons</span></a></span></span><span> </span><span id="local-6989586621679072718"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072718"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679072719"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072719"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679072720"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072720"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-683"></span><span>    </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; FunctorFun -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunTrivial"><span class="hs-identifier hs-var">functorFunTrivial</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072721"><span class="hs-identifier hs-var">seqAndError</span></a></span><span>
</span><span id="line-684"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#pureValName"><span class="hs-identifier hs-var">pureValName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072721"><span class="hs-identifier hs-var">seqAndError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-685"></span><span>                      </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072718"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072719"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><a href="#local-6989586621679072721"><span class="hs-identifier hs-type">seqAndError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-688"></span><span>    </span><span id="local-6989586621679072721"><span class="annot"><span class="annottext">seqAndError :: Q Exp
</span><a href="#local-6989586621679072721"><span class="hs-identifier hs-var hs-var">seqAndError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#seqValName"><span class="hs-identifier hs-var">seqValName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072720"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-689"></span><span>                  </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#errorValName"><span class="hs-identifier hs-var">errorValName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Exp
</span><span class="hs-identifier hs-var">stringE</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q Exp) -&gt; String -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Void &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctorFun -&gt; Name
</span><a href="Data.Functor.Deriving.Internal.html#functorFunName"><span class="hs-identifier hs-var">functorFunName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072718"><span class="hs-identifier hs-var">ff</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorFunTrivial"><span class="hs-identifier hs-type">functorFunTrivial</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-693"></span><span id="functorFunTrivial"><span class="annot"><span class="annottext">functorFunTrivial :: Q Exp -&gt; Q Exp -&gt; FunctorFun -&gt; Name -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#functorFunTrivial"><span class="hs-identifier hs-var hs-var">functorFunTrivial</span></a></span></span><span> </span><span id="local-6989586621679072726"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072726"><span class="hs-identifier hs-var">fmapE</span></a></span></span><span> </span><span id="local-6989586621679072727"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072727"><span class="hs-identifier hs-var">traverseE</span></a></span></span><span> </span><span id="local-6989586621679072728"><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072728"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679072729"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072729"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctorFun -&gt; Q Exp
</span><a href="#local-6989586621679072730"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="#local-6989586621679072728"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-695"></span><span>    </span><span class="annot"><a href="#local-6989586621679072730"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FunctorFun"><span class="hs-identifier hs-type">FunctorFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-696"></span><span>    </span><span id="local-6989586621679072730"><span class="annot"><span class="annottext">go :: FunctorFun -&gt; Q Exp
</span><a href="#local-6989586621679072730"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Fmap"><span class="hs-identifier hs-var">Fmap</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072726"><span class="hs-identifier hs-var">fmapE</span></a></span><span>
</span><span id="line-697"></span><span>    </span><span class="annot"><a href="#local-6989586621679072730"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Replace"><span class="hs-identifier hs-var">Replace</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072726"><span class="hs-identifier hs-var">fmapE</span></a></span><span>
</span><span id="line-698"></span><span>    </span><span class="annot"><a href="#local-6989586621679072730"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Foldr"><span class="hs-identifier hs-var">Foldr</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072729"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><a href="#local-6989586621679072730"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#FoldMap"><span class="hs-identifier hs-var">FoldMap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#memptyValName"><span class="hs-identifier hs-var">memptyValName</span></a></span><span>
</span><span id="line-700"></span><span>    </span><span class="annot"><a href="#local-6989586621679072730"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Deriving.Internal.html#trueDataName"><span class="hs-identifier hs-var">trueDataName</span></a></span><span>
</span><span id="line-701"></span><span>    </span><span class="annot"><a href="#local-6989586621679072730"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">FunctorFun
</span><a href="Data.Functor.Deriving.Internal.html#Traverse"><span class="hs-identifier hs-var">Traverse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072727"><span class="hs-identifier hs-var">traverseE</span></a></span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#conWildPat"><span class="hs-identifier hs-type">conWildPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pat</span></span><span>
</span><span id="line-704"></span><span id="conWildPat"><span class="annot"><span class="annottext">conWildPat :: ConstructorInfo -&gt; Pat
</span><a href="Data.Functor.Deriving.Internal.html#conWildPat"><span class="hs-identifier hs-var hs-var">conWildPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072731"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072731"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-705"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">constructorFields</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072733"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072733"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-706"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; [Pat] -&gt; Pat
</span><a href="Data.Functor.Deriving.Internal.html#conPCompat"><span class="hs-identifier hs-var">conPCompat</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072731"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">([Pat] -&gt; Pat) -&gt; [Pat] -&gt; Pat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Pat -&gt; [Pat]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cxt -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072733"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pat
</span><span class="hs-identifier hs-var">WildP</span></span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-709"></span><span class="hs-comment">-- Generic traversal for functor-like deriving</span><span>
</span><span id="line-710"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span class="hs-comment">-- Much of the code below is cargo-culted from the TcGenFunctor module in GHC.</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="hs-keyword">data</span><span> </span><span id="FFoldType"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-var">FFoldType</span></a></span></span><span> </span><span id="local-6989586621679071939"><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span></span><span>      </span><span class="hs-comment">-- Describes how to fold over a Type in a functor like way</span><span>
</span><span id="line-715"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="FT"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-var">FT</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ft_triv"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var hs-var">ft_triv</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-716"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Does not contain variable</span></span><span>
</span><span id="line-717"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_var"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; Name -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var hs-var">ft_var</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-718"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The variable itself</span></span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_co_var"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; Name -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var hs-var">ft_co_var</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-720"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The variable itself, contravariantly</span></span><span>
</span><span id="line-721"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_fun"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; a -&gt; a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var hs-var">ft_fun</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-722"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Function type</span></span><span>
</span><span id="line-723"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_tup"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; TupleSort -&gt; [a] -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var hs-var">ft_tup</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-724"></span><span>          </span><span class="hs-comment">-- ^ Tuple type. The @[a]@ is the result of folding over the</span><span>
</span><span id="line-725"></span><span>          </span><span class="hs-comment">--   arguments of the tuple.</span><span>
</span><span id="line-726"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_ty_app"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; Type -&gt; a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var hs-var">ft_ty_app</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-727"></span><span>          </span><span class="hs-comment">-- ^ Type app, variable only in last argument. The 'Type' is the</span><span>
</span><span id="line-728"></span><span>          </span><span class="hs-comment">--   @arg_ty@ in @fun_ty arg_ty@.</span><span>
</span><span id="line-729"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_bad_app"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var hs-var">ft_bad_app</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-730"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Type app, variable other than in last argument</span></span><span>
</span><span id="line-731"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="ft_forall"><span class="annot"><span class="annottext">forall a. FFoldType a -&gt; [TyVarBndrSpec] -&gt; a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var hs-var">ft_forall</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TyVarBndrSpec</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071939"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-732"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Forall type</span></span><span>
</span><span id="line-733"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="hs-comment">-- Note that in GHC, this function is pure. It must be monadic here since we:</span><span>
</span><span id="line-736"></span><span class="hs-comment">--</span><span>
</span><span id="line-737"></span><span class="hs-comment">-- (1) Expand type synonyms</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- (2) Detect type family applications</span><span>
</span><span id="line-739"></span><span class="hs-comment">--</span><span>
</span><span id="line-740"></span><span class="hs-comment">-- Which require reification in Template Haskell, but are pure in Core.</span><span>
</span><span id="line-741"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#functorLikeTraverse"><span class="hs-identifier hs-type">functorLikeTraverse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679071948"><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-742"></span><span>                       </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ Variable to look for</span></span><span>
</span><span id="line-743"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ How to fold</span></span><span>
</span><span id="line-744"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ Type to process</span></span><span>
</span><span id="line-745"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-746"></span><span id="functorLikeTraverse"><span class="annot"><span class="annottext">functorLikeTraverse :: forall a.
Map Name (OneOrTwoNames One) -&gt; FFoldType a -&gt; Type -&gt; Q a
</span><a href="Data.Functor.Deriving.Internal.html#functorLikeTraverse"><span class="hs-identifier hs-var hs-var">functorLikeTraverse</span></a></span></span><span> </span><span id="local-6989586621679072773"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072773"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FT"><span class="hs-identifier hs-type">FT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_triv :: forall a. FFoldType a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_triv"><span class="hs-identifier hs-var">ft_triv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072774"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072774"><span class="hs-identifier hs-var">caseTrivial</span></a></span></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">ft_var :: forall a. FFoldType a -&gt; Name -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_var"><span class="hs-identifier hs-var">ft_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072775"><span class="annot"><span class="annottext">Name -&gt; a
</span><a href="#local-6989586621679072775"><span class="hs-identifier hs-var">caseVar</span></a></span></span><span>
</span><span id="line-747"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_co_var :: forall a. FFoldType a -&gt; Name -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_co_var"><span class="hs-identifier hs-var">ft_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072776"><span class="annot"><span class="annottext">Name -&gt; a
</span><a href="#local-6989586621679072776"><span class="hs-identifier hs-var">caseCoVar</span></a></span></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">ft_fun :: forall a. FFoldType a -&gt; a -&gt; a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_fun"><span class="hs-identifier hs-var">ft_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072777"><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621679072777"><span class="hs-identifier hs-var">caseFun</span></a></span></span><span>
</span><span id="line-748"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_tup :: forall a. FFoldType a -&gt; TupleSort -&gt; [a] -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_tup"><span class="hs-identifier hs-var">ft_tup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072778"><span class="annot"><span class="annottext">TupleSort -&gt; [a] -&gt; a
</span><a href="#local-6989586621679072778"><span class="hs-identifier hs-var">caseTuple</span></a></span></span><span class="hs-special">,</span><span>        </span><span class="annot"><span class="annottext">ft_ty_app :: forall a. FFoldType a -&gt; Type -&gt; a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_ty_app"><span class="hs-identifier hs-var">ft_ty_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072779"><span class="annot"><span class="annottext">Type -&gt; a -&gt; a
</span><a href="#local-6989586621679072779"><span class="hs-identifier hs-var">caseTyApp</span></a></span></span><span>
</span><span id="line-749"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_bad_app :: forall a. FFoldType a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_bad_app"><span class="hs-identifier hs-var">ft_bad_app</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072780"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072780"><span class="hs-identifier hs-var">caseWrongArg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_forall :: forall a. FFoldType a -&gt; [TyVarBndrSpec] -&gt; a -&gt; a
</span><a href="Data.Functor.Deriving.Internal.html#ft_forall"><span class="hs-identifier hs-var">ft_forall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679072781"><span class="annot"><span class="annottext">[TyVarBndrSpec] -&gt; a -&gt; a
</span><a href="#local-6989586621679072781"><span class="hs-identifier hs-var">caseForAll</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span>                    </span><span id="local-6989586621679072782"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072782"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-751"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679072783"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072783"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072782"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-752"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621679072785"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072785"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072783"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-753"></span><span>       </span><span class="annot"><span class="annottext">a -&gt; Q a
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072785"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-754"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-755"></span><span>    </span><span class="annot"><a href="#local-6989586621679072786"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>        </span><span class="hs-comment">-- Covariant or contravariant context</span><span>
</span><span id="line-756"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-757"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- (result of type a, does type contain var)</span><span>
</span><span id="line-758"></span><span>    </span><span id="local-6989586621679072786"><span class="annot"><span class="annottext">go :: Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679072787"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072787"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621679072788"><span class="annot"><span class="annottext">t :: Type
</span><a href="#local-6989586621679072788"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-759"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">ArrowT</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621679072791"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072791"><span class="hs-identifier hs-var">funArg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072792"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072792"><span class="hs-identifier hs-var">funRes</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; (Type, Cxt)
</span><a href="Data.Deriving.Internal.html#unapplyTy"><span class="hs-identifier hs-var">unapplyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072788"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-760"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679072794"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072794"><span class="hs-identifier hs-var">funArgR</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072795"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072795"><span class="hs-identifier hs-var">funArgC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072787"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072791"><span class="hs-identifier hs-var">funArg</span></a></span><span>
</span><span id="line-761"></span><span>           </span><span class="hs-special">(</span><span id="local-6989586621679072797"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072797"><span class="hs-identifier hs-var">funResR</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072798"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072798"><span class="hs-identifier hs-var">funResC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072787"><span class="hs-identifier hs-var">co</span></a></span><span>  </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072792"><span class="hs-identifier hs-var">funRes</span></a></span><span>
</span><span id="line-762"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072795"><span class="hs-identifier hs-var">funArgC</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072798"><span class="hs-identifier hs-var">funResC</span></a></span><span>
</span><span id="line-763"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621679072777"><span class="hs-identifier hs-var">caseFun</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072794"><span class="hs-identifier hs-var">funArgR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072797"><span class="hs-identifier hs-var">funResR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072800"><span class="hs-identifier hs-var">trivial</span></a></span><span>
</span><span id="line-765"></span><span>    </span><span class="annot"><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679072801"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072801"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621679072802"><span class="annot"><span class="annottext">t :: Type
</span><a href="#local-6989586621679072802"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-766"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679072803"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072803"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072804"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072804"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; (Type, Cxt)
</span><a href="Data.Deriving.Internal.html#unapplyTy"><span class="hs-identifier hs-var">unapplyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072802"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-767"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621679072805"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072805"><span class="hs-identifier hs-var">fc</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072801"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072803"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-768"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679072806"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679072806"><span class="hs-identifier hs-var">xrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072807"><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679072807"><span class="hs-identifier hs-var">xcs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([(a, Bool)] -&gt; ([a], [Bool])) -&gt; Q [(a, Bool)] -&gt; Q ([a], [Bool])
forall a b. (a -&gt; b) -&gt; Q a -&gt; Q b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(a, Bool)] -&gt; ([a], [Bool])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">(Q [(a, Bool)] -&gt; Q ([a], [Bool]))
-&gt; Q [(a, Bool)] -&gt; Q ([a], [Bool])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Q (a, Bool)) -&gt; Cxt -&gt; Q [(a, Bool)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072801"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072804"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-769"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679072809"><span class="hs-identifier hs-type">tuple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-770"></span><span>          </span><span id="local-6989586621679072809"><span class="annot"><span class="annottext">tuple :: TupleSort -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072809"><span class="hs-identifier hs-var hs-var">tuple</span></a></span></span><span> </span><span id="local-6989586621679072810"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072810"><span class="hs-identifier hs-var">tupSort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TupleSort -&gt; [a] -&gt; a
</span><a href="#local-6989586621679072778"><span class="hs-identifier hs-var">caseTuple</span></a></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072810"><span class="hs-identifier hs-var">tupSort</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679072806"><span class="hs-identifier hs-var">xrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span>          </span><span class="annot"><a href="#local-6989586621679072811"><span class="hs-identifier hs-type">wrongArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>          </span><span id="local-6989586621679072811"><span class="annot"><span class="annottext">wrongArg :: Q (a, Bool)
</span><a href="#local-6989586621679072811"><span class="hs-identifier hs-var hs-var">wrongArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072780"><span class="hs-identifier hs-var">caseWrongArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>
</span><span id="line-775"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-776"></span><span>        </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">or</span></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679072807"><span class="hs-identifier hs-var">xcs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072800"><span class="hs-identifier hs-var">trivial</span></a></span><span> </span><span class="hs-comment">-- Variable does not occur</span><span>
</span><span id="line-778"></span><span>          </span><span class="hs-comment">-- At this point we know that xrs, xcs is not empty,</span><span>
</span><span id="line-779"></span><span>          </span><span class="hs-comment">-- and at least one xr is True</span><span>
</span><span id="line-780"></span><span>          </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TupleT</span></span><span> </span><span id="local-6989586621679072814"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072814"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072803"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-781"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TupleSort -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072809"><span class="hs-identifier hs-var">tuple</span></a></span><span> </span><span class="annot"><span class="annottext">(TupleSort -&gt; Q (a, Bool)) -&gt; TupleSort -&gt; Q (a, Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TupleSort
</span><a href="Data.Functor.Deriving.Internal.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072814"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,6,0)
</span><span>          </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">UnboxedTupleT</span></span><span> </span><span id="local-6989586621679072817"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072817"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072803"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-784"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TupleSort -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072809"><span class="hs-identifier hs-var">tuple</span></a></span><span> </span><span class="annot"><span class="annottext">(TupleSort -&gt; Q (a, Bool)) -&gt; TupleSort -&gt; Q (a, Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TupleSort
</span><a href="Data.Functor.Deriving.Internal.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072817"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-cpp">
#endif
</span><span>          </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072805"><span class="hs-identifier hs-var">fc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">or</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bool] -&gt; [Bool]
forall a. HasCallStack =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">init</span></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679072807"><span class="hs-identifier hs-var">xcs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072811"><span class="hs-identifier hs-var">wrongArg</span></a></span><span>                    </span><span class="hs-comment">-- T (..var..)    ty</span><span>
</span><span id="line-788"></span><span>          </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                   </span><span class="hs-comment">-- T (..no var..) ty</span><span>
</span><span id="line-789"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679072820"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072820"><span class="hs-identifier hs-var">itf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; Type -&gt; Cxt -&gt; Q Bool
</span><a href="Data.Deriving.Internal.html#isInTypeFamilyApp"><span class="hs-identifier hs-var">isInTypeFamilyApp</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072822"><span class="hs-identifier hs-var">tyVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072803"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072804"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-790"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072820"><span class="hs-identifier hs-var">itf</span></a></span><span> </span><span class="hs-comment">-- We can't decompose type families, so</span><span>
</span><span id="line-791"></span><span>                       </span><span class="hs-comment">-- error if we encounter one here.</span><span>
</span><span id="line-792"></span><span>                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072811"><span class="hs-identifier hs-var">wrongArg</span></a></span><span>
</span><span id="line-793"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; a -&gt; a
</span><a href="#local-6989586621679072779"><span class="hs-identifier hs-var">caseTyApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cxt -&gt; Type
forall a. HasCallStack =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">last</span></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072804"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; a
forall a. HasCallStack =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">last</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679072806"><span class="hs-identifier hs-var">xrs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-794"></span><span>    </span><span class="annot"><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679072823"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072823"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679072825"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072825"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679072826"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072826"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-795"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072827"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072827"><span class="hs-identifier hs-var">kc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072828"><span class="hs-identifier hs-var">go_kind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072823"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072826"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-796"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072827"><span class="hs-identifier hs-var">kc</span></a></span><span>
</span><span id="line-797"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072780"><span class="hs-identifier hs-var">caseWrongArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072823"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072825"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-799"></span><span>    </span><span class="annot"><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679072829"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072829"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span> </span><span id="local-6989586621679072831"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072831"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-800"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Map Name (OneOrTwoNames One) -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.member</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072831"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072773"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-801"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072829"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Name -&gt; a
</span><a href="#local-6989586621679072776"><span class="hs-identifier hs-var">caseCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072831"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Name -&gt; a
</span><a href="#local-6989586621679072775"><span class="hs-identifier hs-var">caseVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072831"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-803"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072800"><span class="hs-identifier hs-var">trivial</span></a></span><span>
</span><span id="line-804"></span><span>    </span><span class="annot"><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679072832"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072832"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForallT</span></span><span> </span><span id="local-6989586621679072834"><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><a href="#local-6989586621679072834"><span class="hs-identifier hs-var">tvbs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679072835"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072835"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-805"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679072836"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072836"><span class="hs-identifier hs-var">tr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072837"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072837"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072832"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679072835"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-806"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679072838"><span class="annot"><span class="annottext">tvbNames :: [Name]
</span><a href="#local-6989586621679072838"><span class="hs-identifier hs-var hs-var">tvbNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVarBndrSpec -&gt; Name) -&gt; [TyVarBndrSpec] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TyVarBndrSpec -&gt; Name
forall flag. TyVarBndr_ flag -&gt; Name
</span><span class="hs-identifier hs-var">tvName</span></span><span> </span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><a href="#local-6989586621679072834"><span class="hs-identifier hs-var">tvbs</span></a></span><span>
</span><span id="line-807"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072837"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072838"><span class="hs-identifier hs-var">tvbNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072822"><span class="hs-identifier hs-var">tyVarNames</span></a></span><span>
</span><span id="line-808"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072800"><span class="hs-identifier hs-var">trivial</span></a></span><span>
</span><span id="line-809"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVarBndrSpec] -&gt; a -&gt; a
</span><a href="#local-6989586621679072781"><span class="hs-identifier hs-var">caseForAll</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarBndrSpec]
</span><a href="#local-6989586621679072834"><span class="hs-identifier hs-var">tvbs</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072836"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>    </span><span class="annot"><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q (a, Bool)
</span><a href="#local-6989586621679072800"><span class="hs-identifier hs-var">trivial</span></a></span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span>    </span><span class="annot"><a href="#local-6989586621679072828"><span class="hs-identifier hs-type">go_kind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-813"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span>
</span><span id="line-814"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,9,0)
</span><span>    </span><span id="local-6989586621679072828"><span class="annot"><span class="annottext">go_kind :: Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072828"><span class="hs-identifier hs-var hs-var">go_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; Q (a, Bool)
</span><a href="#local-6989586621679072786"><span class="hs-identifier hs-var">go</span></a></span><span class="hs-cpp">
#else
</span><span>    </span><span class="hs-identifier">go_kind</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">trivial</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-821"></span><span>    </span><span class="annot"><a href="#local-6989586621679072800"><span class="hs-identifier hs-type">trivial</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679071948"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>    </span><span id="local-6989586621679072800"><span class="annot"><span class="annottext">trivial :: Q (a, Bool)
</span><a href="#local-6989586621679072800"><span class="hs-identifier hs-var hs-var">trivial</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, Bool) -&gt; Q (a, Bool)
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679072774"><span class="hs-identifier hs-var">caseTrivial</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span>    </span><span class="annot"><a href="#local-6989586621679072822"><span class="hs-identifier hs-type">tyVarNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-825"></span><span>    </span><span id="local-6989586621679072822"><span class="annot"><span class="annottext">tyVarNames :: [Name]
</span><a href="#local-6989586621679072822"><span class="hs-identifier hs-var hs-var">tyVarNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; [Name]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072773"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="hs-comment">-- Fold over the arguments of a data constructor in a Functor-like way.</span><span>
</span><span id="line-828"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-type">foldDataConArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679071905"><span class="annot"><a href="#local-6989586621679071905"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Deriving.Internal.html#TyVarMap1"><span class="hs-identifier hs-type">TyVarMap1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#FFoldType"><span class="hs-identifier hs-type">FFoldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679071905"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679071905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-829"></span><span id="foldDataConArgs"><span class="annot"><span class="annottext">foldDataConArgs :: forall a.
Map Name (OneOrTwoNames One)
-&gt; FFoldType a -&gt; ConstructorInfo -&gt; Q [a]
</span><a href="Data.Functor.Deriving.Internal.html#foldDataConArgs"><span class="hs-identifier hs-var hs-var">foldDataConArgs</span></a></span></span><span> </span><span id="local-6989586621679072847"><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072847"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679072848"><span class="annot"><span class="annottext">FFoldType a
</span><a href="#local-6989586621679072848"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621679072849"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072849"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-830"></span><span>  </span><span id="local-6989586621679072850"><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072850"><span class="hs-identifier hs-var">fieldTys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Q Type) -&gt; Cxt -&gt; Q Cxt
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">(Cxt -&gt; Q Cxt) -&gt; Cxt -&gt; Q Cxt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Cxt
</span><span class="hs-identifier hs-var">constructorFields</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679072849"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-831"></span><span>  </span><span class="annot"><span class="annottext">(Type -&gt; Q a) -&gt; Cxt -&gt; Q [a]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q a
</span><a href="#local-6989586621679072851"><span class="hs-identifier hs-var">foldArg</span></a></span><span> </span><span class="annot"><span class="annottext">Cxt
</span><a href="#local-6989586621679072850"><span class="hs-identifier hs-var">fieldTys</span></a></span><span>
</span><span id="line-832"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-833"></span><span>    </span><span class="annot"><a href="#local-6989586621679072851"><span class="hs-identifier hs-type">foldArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679071905"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-834"></span><span>    </span><span id="local-6989586621679072851"><span class="annot"><span class="annottext">foldArg :: Type -&gt; Q a
</span><a href="#local-6989586621679072851"><span class="hs-identifier hs-var hs-var">foldArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One) -&gt; FFoldType a -&gt; Type -&gt; Q a
forall a.
Map Name (OneOrTwoNames One) -&gt; FFoldType a -&gt; Type -&gt; Q a
</span><a href="Data.Functor.Deriving.Internal.html#functorLikeTraverse"><span class="hs-identifier hs-var">functorLikeTraverse</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (OneOrTwoNames One)
</span><a href="#local-6989586621679072847"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">FFoldType a
</span><a href="#local-6989586621679072848"><span class="hs-identifier hs-var">ft</span></a></span><span>
</span><span id="line-835"></span><span>
</span><span id="line-836"></span><span class="hs-comment">-- Make a 'LamE' using a fresh variable.</span><span>
</span><span id="line-837"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-type">mkSimpleLam</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-838"></span><span id="mkSimpleLam"><span class="annot"><span class="annottext">mkSimpleLam :: (Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam"><span class="hs-identifier hs-var hs-var">mkSimpleLam</span></a></span></span><span> </span><span id="local-6989586621679072852"><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072852"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-839"></span><span>  </span><span id="local-6989586621679072853"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072853"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;n&quot;</span></span><span>
</span><span id="line-840"></span><span>  </span><span class="annot"><span class="annottext">[Q Pat] -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072853"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Exp) -&gt; Q Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
</span><a href="#local-6989586621679072852"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072853"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-841"></span><span>
</span><span id="line-842"></span><span class="hs-comment">-- Make a 'LamE' using two fresh variables.</span><span>
</span><span id="line-843"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam2"><span class="hs-identifier hs-type">mkSimpleLam2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-844"></span><span id="mkSimpleLam2"><span class="annot"><span class="annottext">mkSimpleLam2 :: (Exp -&gt; Exp -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleLam2"><span class="hs-identifier hs-var hs-var">mkSimpleLam2</span></a></span></span><span> </span><span id="local-6989586621679072854"><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Q Exp
</span><a href="#local-6989586621679072854"><span class="hs-identifier hs-var">lam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-845"></span><span>  </span><span id="local-6989586621679072855"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072855"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;n1&quot;</span></span><span>
</span><span id="line-846"></span><span>  </span><span id="local-6989586621679072856"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072856"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Name
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;n2&quot;</span></span><span>
</span><span id="line-847"></span><span>  </span><span class="annot"><span class="annottext">[Q Pat] -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072855"><span class="hs-identifier hs-var">n1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072856"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Q Exp -&gt; Q Exp) -&gt; Q Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Q Exp
</span><a href="#local-6989586621679072854"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072855"><span class="hs-identifier hs-var">n1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072856"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span class="hs-comment">-- &quot;Con a1 a2 a3 -&gt; fold [x1 a1, x2 a2, x3 a3]&quot;</span><span>
</span><span id="line-850"></span><span class="hs-comment">--</span><span>
</span><span id="line-851"></span><span class="hs-comment">-- @mkSimpleConMatch fold conName insides@ produces a match clause in</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- which the LHS pattern-matches on @extraPats@, followed by a match on the</span><span>
</span><span id="line-853"></span><span class="hs-comment">-- constructor @conName@ and its arguments. The RHS folds (with @fold@) over</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- @conName@ and its arguments, applying an expression (from @insides@) to each</span><span>
</span><span id="line-855"></span><span class="hs-comment">-- of the respective arguments of @conName@.</span><span>
</span><span id="line-856"></span><span id="local-6989586621679071915"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch"><span class="hs-identifier hs-type">mkSimpleConMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679071915"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-858"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679071915"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-859"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span></span><span>
</span><span id="line-860"></span><span id="mkSimpleConMatch"><span class="annot"><span class="annottext">mkSimpleConMatch :: forall a. (Name -&gt; [a] -&gt; Q Exp) -&gt; Name -&gt; [Exp -&gt; a] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch"><span class="hs-identifier hs-var hs-var">mkSimpleConMatch</span></a></span></span><span> </span><span id="local-6989586621679072861"><span class="annot"><span class="annottext">Name -&gt; [a] -&gt; Q Exp
</span><a href="#local-6989586621679072861"><span class="hs-identifier hs-var">fold</span></a></span></span><span> </span><span id="local-6989586621679072862"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072862"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679072863"><span class="annot"><span class="annottext">[Exp -&gt; a]
</span><a href="#local-6989586621679072863"><span class="hs-identifier hs-var">insides</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-861"></span><span>  </span><span id="local-6989586621679072864"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072864"><span class="hs-identifier hs-var">varsNeeded</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Deriving.Internal.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_arg&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Q [Name]) -&gt; Int -&gt; Q [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Exp -&gt; a] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Exp -&gt; a]
</span><a href="#local-6989586621679072863"><span class="hs-identifier hs-var">insides</span></a></span><span>
</span><span id="line-862"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679072866"><span class="annot"><span class="annottext">pat :: Pat
</span><a href="#local-6989586621679072866"><span class="hs-identifier hs-var hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Pat] -&gt; Pat
</span><a href="Data.Functor.Deriving.Internal.html#conPCompat"><span class="hs-identifier hs-var">conPCompat</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072862"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Pat) -&gt; [Name] -&gt; [Pat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Pat
</span><span class="hs-identifier hs-var">VarP</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072864"><span class="hs-identifier hs-var">varsNeeded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>  </span><span id="local-6989586621679072868"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072868"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [a] -&gt; Q Exp
</span><a href="#local-6989586621679072861"><span class="hs-identifier hs-var">fold</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072862"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Exp -&gt; a) -&gt; Name -&gt; a) -&gt; [Exp -&gt; a] -&gt; [Name] -&gt; [a]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679072870"><span class="annot"><span class="annottext">Exp -&gt; a
</span><a href="#local-6989586621679072870"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679072871"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072871"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; a
</span><a href="#local-6989586621679072870"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; a) -&gt; Exp -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072871"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp -&gt; a]
</span><a href="#local-6989586621679072863"><span class="hs-identifier hs-var">insides</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072864"><span class="hs-identifier hs-var">varsNeeded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>  </span><span class="annot"><span class="annottext">Match -&gt; Q Match
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Match -&gt; Q Match) -&gt; Match -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pat -&gt; Body -&gt; [Dec] -&gt; Match
</span><span class="hs-identifier hs-var">Match</span></span><span> </span><span class="annot"><span class="annottext">Pat
</span><a href="#local-6989586621679072866"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Body
</span><span class="hs-identifier hs-var">NormalB</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072868"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span class="hs-comment">-- &quot;Con a1 a2 a3 -&gt; fmap (\b2 -&gt; Con a1 b2 a3) (traverse f a2)&quot;</span><span>
</span><span id="line-867"></span><span class="hs-comment">--</span><span>
</span><span id="line-868"></span><span class="hs-comment">-- @mkSimpleConMatch2 fold conName insides@ behaves very similarly to</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- 'mkSimpleConMatch', with two key differences:</span><span>
</span><span id="line-870"></span><span class="hs-comment">--</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- 1. @insides@ is a @[(Bool, Exp)]@ instead of a @[Exp]@. This is because it</span><span>
</span><span id="line-872"></span><span class="hs-comment">--    filters out the expressions corresponding to arguments whose types do not</span><span>
</span><span id="line-873"></span><span class="hs-comment">--    mention the last type variable in a derived 'Foldable' or 'Traversable'</span><span>
</span><span id="line-874"></span><span class="hs-comment">--    instance (i.e., those elements of @insides@ containing @False@).</span><span>
</span><span id="line-875"></span><span class="hs-comment">--</span><span>
</span><span id="line-876"></span><span class="hs-comment">-- 2. @fold@ takes an expression as its first argument instead of a</span><span>
</span><span id="line-877"></span><span class="hs-comment">--    constructor name. This is because it uses a specialized</span><span>
</span><span id="line-878"></span><span class="hs-comment">--    constructor function expression that only takes as many parameters as</span><span>
</span><span id="line-879"></span><span class="hs-comment">--    there are argument types that mention the last type variable.</span><span>
</span><span id="line-880"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch2"><span class="hs-identifier hs-type">mkSimpleConMatch2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span>
</span><span id="line-881"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-882"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-883"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-884"></span><span id="mkSimpleConMatch2"><span class="annot"><span class="annottext">mkSimpleConMatch2 :: (Exp -&gt; [Exp] -&gt; Q Exp) -&gt; Name -&gt; [(Bool, Exp)] -&gt; Q Match
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleConMatch2"><span class="hs-identifier hs-var hs-var">mkSimpleConMatch2</span></a></span></span><span> </span><span id="local-6989586621679072872"><span class="annot"><span class="annottext">Exp -&gt; [Exp] -&gt; Q Exp
</span><a href="#local-6989586621679072872"><span class="hs-identifier hs-var">fold</span></a></span></span><span> </span><span id="local-6989586621679072873"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072873"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679072874"><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072874"><span class="hs-identifier hs-var">insides</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-885"></span><span>  </span><span id="local-6989586621679072875"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072875"><span class="hs-identifier hs-var">varsNeeded</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Deriving.Internal.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_arg&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072876"><span class="hs-identifier hs-var">lengthInsides</span></a></span><span>
</span><span id="line-886"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679072877"><span class="annot"><span class="annottext">pat :: Pat
</span><a href="#local-6989586621679072877"><span class="hs-identifier hs-var hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Pat] -&gt; Pat
</span><a href="Data.Functor.Deriving.Internal.html#conPCompat"><span class="hs-identifier hs-var">conPCompat</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072873"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Pat) -&gt; [Name] -&gt; [Pat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Pat
</span><span class="hs-identifier hs-var">VarP</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072875"><span class="hs-identifier hs-var">varsNeeded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>      </span><span class="hs-comment">-- Make sure to zip BEFORE invoking catMaybes. We want the variable</span><span>
</span><span id="line-888"></span><span>      </span><span class="hs-comment">-- indicies in each expression to match up with the argument indices</span><span>
</span><span id="line-889"></span><span>      </span><span class="hs-comment">-- in conExpr (defined below).</span><span>
</span><span id="line-890"></span><span>      </span><span id="local-6989586621679072878"><span class="annot"><span class="annottext">exps :: [Exp]
</span><a href="#local-6989586621679072878"><span class="hs-identifier hs-var hs-var">exps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe Exp] -&gt; [Exp]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe Exp] -&gt; [Exp]) -&gt; [Maybe Exp] -&gt; [Exp]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Bool, Exp) -&gt; Name -&gt; Maybe Exp)
-&gt; [(Bool, Exp)] -&gt; [Name] -&gt; [Maybe Exp]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679072879"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072879"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072880"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072880"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679072881"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072881"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072879"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Maybe Exp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072880"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; Exp -&gt; Exp
</span><span class="hs-operator hs-var">`AppE`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Exp
</span><span class="hs-identifier hs-var">VarE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072881"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span>                                                    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Exp
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>                                 </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072874"><span class="hs-identifier hs-var">insides</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072875"><span class="hs-identifier hs-var">varsNeeded</span></a></span><span>
</span><span id="line-893"></span><span>      </span><span class="hs-comment">-- An element of argTysTyVarInfo is True if the constructor argument</span><span>
</span><span id="line-894"></span><span>      </span><span class="hs-comment">-- with the same index has a type which mentions the last type</span><span>
</span><span id="line-895"></span><span>      </span><span class="hs-comment">-- variable.</span><span>
</span><span id="line-896"></span><span>      </span><span id="local-6989586621679072882"><span class="annot"><span class="annottext">argTysTyVarInfo :: [Bool]
</span><a href="#local-6989586621679072882"><span class="hs-identifier hs-var hs-var">argTysTyVarInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Bool, Exp) -&gt; Bool) -&gt; [(Bool, Exp)] -&gt; [Bool]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679072883"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072883"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679072883"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072874"><span class="hs-identifier hs-var">insides</span></a></span><span>
</span><span id="line-897"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679072884"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072884"><span class="hs-identifier hs-var">asWithTyVar</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679072885"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072885"><span class="hs-identifier hs-var">asWithoutTyVar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; [Name] -&gt; ([Name], [Name])
forall a. [Bool] -&gt; [a] -&gt; ([a], [a])
</span><a href="Data.Deriving.Internal.html#partitionByList"><span class="hs-identifier hs-var">partitionByList</span></a></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679072882"><span class="hs-identifier hs-var">argTysTyVarInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072875"><span class="hs-identifier hs-var">varsNeeded</span></a></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span>      </span><span id="local-6989586621679072887"><span class="annot"><span class="annottext">conExpQ :: Q Exp
</span><a href="#local-6989586621679072887"><span class="hs-identifier hs-var hs-var">conExpQ</span></a></span></span><span>
</span><span id="line-900"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072884"><span class="hs-identifier hs-var">asWithTyVar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072873"><span class="hs-identifier hs-var">conName</span></a></span><span class="annot"><span class="annottext">Q Exp -&gt; [Q Exp] -&gt; [Q Exp]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">(Name -&gt; Q Exp) -&gt; [Name] -&gt; [Q Exp]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072885"><span class="hs-identifier hs-var">asWithoutTyVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-902"></span><span>            </span><span id="local-6989586621679072888"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072888"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Deriving.Internal.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;b&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072876"><span class="hs-identifier hs-var">lengthInsides</span></a></span><span>
</span><span id="line-903"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679072889"><span class="annot"><span class="annottext">bs' :: [Name]
</span><a href="#local-6989586621679072889"><span class="hs-identifier hs-var hs-var">bs'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; [Name] -&gt; [Name]
forall a. [Bool] -&gt; [a] -&gt; [a]
</span><a href="Data.Deriving.Internal.html#filterByList"><span class="hs-identifier hs-var">filterByList</span></a></span><span>  </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679072882"><span class="hs-identifier hs-var">argTysTyVarInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072888"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-904"></span><span>                </span><span id="local-6989586621679072891"><span class="annot"><span class="annottext">vars :: [Q Exp]
</span><a href="#local-6989586621679072891"><span class="hs-identifier hs-var hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; [Q Exp] -&gt; [Q Exp] -&gt; [Q Exp]
forall a. [Bool] -&gt; [a] -&gt; [a] -&gt; [a]
</span><a href="Data.Deriving.Internal.html#filterByLists"><span class="hs-identifier hs-var">filterByLists</span></a></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679072882"><span class="hs-identifier hs-var">argTysTyVarInfo</span></a></span><span>
</span><span id="line-905"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Q Exp) -&gt; [Name] -&gt; [Q Exp]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072888"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Q Exp) -&gt; [Name] -&gt; [Q Exp]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072875"><span class="hs-identifier hs-var">varsNeeded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-906"></span><span>            </span><span class="annot"><span class="annottext">[Q Pat] -&gt; Q Exp -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Q Pat) -&gt; [Name] -&gt; [Q Pat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Pat
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679072889"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Q Exp
forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072873"><span class="hs-identifier hs-var">conName</span></a></span><span class="annot"><span class="annottext">Q Exp -&gt; [Q Exp] -&gt; [Q Exp]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679072891"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span>
</span><span id="line-908"></span><span>  </span><span id="local-6989586621679072893"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072893"><span class="hs-identifier hs-var">conExp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679072887"><span class="hs-identifier hs-var">conExpQ</span></a></span><span>
</span><span id="line-909"></span><span>  </span><span id="local-6989586621679072894"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072894"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Exp -&gt; [Exp] -&gt; Q Exp
</span><a href="#local-6989586621679072872"><span class="hs-identifier hs-var">fold</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072893"><span class="hs-identifier hs-var">conExp</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp]
</span><a href="#local-6989586621679072878"><span class="hs-identifier hs-var">exps</span></a></span><span>
</span><span id="line-910"></span><span>  </span><span class="annot"><span class="annottext">Match -&gt; Q Match
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Match -&gt; Q Match) -&gt; Match -&gt; Q Match
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pat -&gt; Body -&gt; [Dec] -&gt; Match
</span><span class="hs-identifier hs-var">Match</span></span><span> </span><span class="annot"><span class="annottext">Pat
</span><a href="#local-6989586621679072877"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp -&gt; Body
</span><span class="hs-identifier hs-var">NormalB</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072894"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-911"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-912"></span><span>    </span><span id="local-6989586621679072876"><span class="annot"><span class="annottext">lengthInsides :: Int
</span><a href="#local-6989586621679072876"><span class="hs-identifier hs-var hs-var">lengthInsides</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Bool, Exp)]
</span><a href="#local-6989586621679072874"><span class="hs-identifier hs-var">insides</span></a></span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="hs-comment">-- Indicates whether a tuple is boxed or unboxed, as well as its number of</span><span>
</span><span id="line-915"></span><span class="hs-comment">-- arguments. For instance, (a, b) corresponds to @Boxed 2@, and (# a, b, c #)</span><span>
</span><span id="line-916"></span><span class="hs-comment">-- corresponds to @Unboxed 3@.</span><span>
</span><span id="line-917"></span><span class="hs-keyword">data</span><span> </span><span id="TupleSort"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#TupleSort"><span class="hs-identifier hs-var">TupleSort</span></a></span></span><span>
</span><span id="line-918"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Boxed"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,6,0)
</span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Unboxed"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-923"></span><span class="hs-comment">-- &quot;case x of (a1,a2,a3) -&gt; fold [x1 a1, x2 a2, x3 a3]&quot;</span><span>
</span><span id="line-924"></span><span id="local-6989586621679071909"><span class="annot"><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-type">mkSimpleTupleCase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679071909"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span class="hs-special">)</span><span>
</span><span id="line-925"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679071909"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span></span><span>
</span><span id="line-926"></span><span id="mkSimpleTupleCase"><span class="annot"><span class="annottext">mkSimpleTupleCase :: forall a.
(Name -&gt; [a] -&gt; Q Match) -&gt; TupleSort -&gt; [a] -&gt; Exp -&gt; Q Exp
</span><a href="Data.Functor.Deriving.Internal.html#mkSimpleTupleCase"><span class="hs-identifier hs-var hs-var">mkSimpleTupleCase</span></a></span></span><span> </span><span id="local-6989586621679072897"><span class="annot"><span class="annottext">Name -&gt; [a] -&gt; Q Match
</span><a href="#local-6989586621679072897"><span class="hs-identifier hs-var">matchForCon</span></a></span></span><span> </span><span id="local-6989586621679072898"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072898"><span class="hs-identifier hs-var">tupSort</span></a></span></span><span> </span><span id="local-6989586621679072899"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679072899"><span class="hs-identifier hs-var">insides</span></a></span></span><span> </span><span id="local-6989586621679072900"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072900"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-927"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679072901"><span class="annot"><span class="annottext">tupDataName :: Name
</span><a href="#local-6989586621679072901"><span class="hs-identifier hs-var hs-var">tupDataName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621679072898"><span class="hs-identifier hs-var">tupSort</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-928"></span><span>                      </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Boxed"><span class="hs-identifier hs-type">Boxed</span></a></span><span>   </span><span id="local-6989586621679072902"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072902"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><span class="hs-identifier hs-var">tupleDataName</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072902"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,6,0)
</span><span>                      </span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#Unboxed"><span class="hs-identifier hs-type">Unboxed</span></a></span><span> </span><span id="local-6989586621679072904"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072904"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><span class="hs-identifier hs-var">unboxedTupleDataName</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679072904"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-cpp">
#endif
</span><span>  </span><span id="local-6989586621679072906"><span class="annot"><span class="annottext">Match
</span><a href="#local-6989586621679072906"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [a] -&gt; Q Match
</span><a href="#local-6989586621679072897"><span class="hs-identifier hs-var">matchForCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072901"><span class="hs-identifier hs-var">tupDataName</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679072899"><span class="hs-identifier hs-var">insides</span></a></span><span>
</span><span id="line-933"></span><span>  </span><span class="annot"><span class="annottext">Exp -&gt; Q Exp
forall a. a -&gt; Q a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Exp -&gt; Q Exp) -&gt; Exp -&gt; Q Exp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp -&gt; [Match] -&gt; Exp
</span><span class="hs-identifier hs-var">CaseE</span></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679072900"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Match
</span><a href="#local-6989586621679072906"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span class="hs-comment">-- Adapt to the type of ConP changing in template-haskell-2.18.0.0.</span><span>
</span><span id="line-936"></span><span class="annot"><a href="Data.Functor.Deriving.Internal.html#conPCompat"><span class="hs-identifier hs-type">conPCompat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Pat</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pat</span></span><span>
</span><span id="line-937"></span><span id="conPCompat"><span class="annot"><span class="annottext">conPCompat :: Name -&gt; [Pat] -&gt; Pat
</span><a href="Data.Functor.Deriving.Internal.html#conPCompat"><span class="hs-identifier hs-var hs-var">conPCompat</span></a></span></span><span> </span><span id="local-6989586621679072908"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072908"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679072909"><span class="annot"><span class="annottext">[Pat]
</span><a href="#local-6989586621679072909"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Cxt -&gt; [Pat] -&gt; Pat
</span><span class="hs-identifier hs-var">ConP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679072908"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,18,0)
</span><span>                         </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-cpp">
#endif
</span><span>                         </span><span class="annot"><span class="annottext">[Pat]
</span><a href="#local-6989586621679072909"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-942"></span></pre></body></html>