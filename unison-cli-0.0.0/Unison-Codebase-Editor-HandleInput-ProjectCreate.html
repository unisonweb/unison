<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Unison.Codebase.Editor.HandleInput.ProjectCreate</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">unison-cli-0.0.0</span><ul class="links" id="page-menu"><li><a href="src/Unison.Codebase.Editor.HandleInput.ProjectCreate.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Unison.Codebase.Editor.HandleInput.ProjectCreate</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code>project.create</code> input handler</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:projectCreate">projectCreate</a> :: <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/Unison-Core-Project.html#t:ProjectName" title="Unison.Core.Project">ProjectName</a> -&gt; <a href="Unison-Cli-Monad.html#t:Cli" title="Unison.Cli.Monad">Cli</a> (<a href="../unison-core-0.0.0/Unison-Core-Project.html#t:ProjectAndBranch" title="Unison.Core.Project">ProjectAndBranch</a> <a href="../unison-codebase-sqlite-0.0.0/U-Codebase-Sqlite-DbId.html#t:ProjectId" title="U.Codebase.Sqlite.DbId">ProjectId</a> <a href="../unison-codebase-sqlite-0.0.0/U-Codebase-Sqlite-DbId.html#t:ProjectBranchId" title="U.Codebase.Sqlite.DbId">ProjectBranchId</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:projectCreate" class="def">projectCreate</a> :: <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/Unison-Core-Project.html#t:ProjectName" title="Unison.Core.Project">ProjectName</a> -&gt; <a href="Unison-Cli-Monad.html#t:Cli" title="Unison.Cli.Monad">Cli</a> (<a href="../unison-core-0.0.0/Unison-Core-Project.html#t:ProjectAndBranch" title="Unison.Core.Project">ProjectAndBranch</a> <a href="../unison-codebase-sqlite-0.0.0/U-Codebase-Sqlite-DbId.html#t:ProjectId" title="U.Codebase.Sqlite.DbId">ProjectId</a> <a href="../unison-codebase-sqlite-0.0.0/U-Codebase-Sqlite-DbId.html#t:ProjectBranchId" title="U.Codebase.Sqlite.DbId">ProjectBranchId</a>) <a href="src/Unison.Codebase.Editor.HandleInput.ProjectCreate.html#projectCreate" class="link">Source</a> <a href="#v:projectCreate" class="selflink">#</a></p><div class="doc"><p>Create a new project.</p><ol><li value="1">If a project already exists with the given name, bail.</li><li value="2">Otherwise, create a scaffold out a new project with a &quot;main&quot; branch, and add it to the namespace (at a magic
    location that the user isn't supposed to look at).</li></ol><p>Big danger: we first commit the project identity and metadata (like its name) to the codebase, then manipulate our
 in-memory namespace and flush its contents out in a separate transaction. This means that if lightning strikes at the
 wrong time, we'll be in an inconsistent state.</p><p>This could be fixed in a few different ways:</p><ol><li value="1">Make a better <code>stepAt</code> helper that can mutate the namespace in a transaction.</li><li value="2">Add more code to detect the inconsistency and work around it. For example, if we ever see that a project id
      exists in the codebase but not at its corresponding place in the namespace, we could consider it garbage and
      delete it. Then, any user who tried to create a project called &quot;foo&quot; shortly before getting hit by lightning
      could simply try creating &quot;foo&quot; again later.</li><li value="3">Don't store projects in the root namespace at all. We don't even want them there, it's just a little too
      convenient because *not* storing them in the root namespace would require a lot of reworking and rewriting. We'd
      rather hit some shorter-term project milestones and clean our mess up Later (TM).</li></ol><p>For now, it doesn't seem worth it to do (1) or (2), since we want to do (3) eventually, and we'd rather not waste too
 much time getting everything perfectly correct before we get there.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>