<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.Codebase.Editor.SlurpComponent</span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Slurp component</span></span><span>
</span><span id="line-3"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier">SlurpComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Basic constructors</span></span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#empty"><span class="hs-identifier">empty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#fromTerms"><span class="hs-identifier">fromTerms</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#fromTypes"><span class="hs-identifier">fromTypes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#fromCtors"><span class="hs-identifier">fromCtors</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Predicates</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#isEmpty"><span class="hs-identifier">isEmpty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Set operations</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#difference"><span class="hs-identifier">difference</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#intersection"><span class="hs-identifier">intersection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Closure</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#closeWithDependencies"><span class="hs-identifier">closeWithDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Tuple</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">swap</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.DataDeclaration</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TypeReference</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Symbol</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Symbol</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Term</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.UnisonFile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TypecheckedUnisonFile</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.UnisonFile</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UF</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Defns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Defns</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">data</span><span> </span><span id="SlurpComponent"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SlurpComponent"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atypes%3ASlurpComponent"><span class="annot"><span class="annottext">SlurpComponent -&gt; Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span id="%24sel%3Aterms%3ASlurpComponent"><span class="annot"><span class="annottext">SlurpComponent -&gt; Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span id="%24sel%3Actors%3ASlurpComponent"><span class="annot"><span class="annottext">SlurpComponent -&gt; Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var hs-var">ctors</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680871260"><span id="local-6989586621680871267"><span class="annot"><span class="annottext">SlurpComponent -&gt; SlurpComponent -&gt; Bool
(SlurpComponent -&gt; SlurpComponent -&gt; Bool)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; Bool) -&gt; Eq SlurpComponent
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
== :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
$c/= :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
/= :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680871273"><span id="local-6989586621680871275"><span class="annot"><span class="annottext">(forall x. SlurpComponent -&gt; Rep SlurpComponent x)
-&gt; (forall x. Rep SlurpComponent x -&gt; SlurpComponent)
-&gt; Generic SlurpComponent
forall x. Rep SlurpComponent x -&gt; SlurpComponent
forall x. SlurpComponent -&gt; Rep SlurpComponent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. SlurpComponent -&gt; Rep SlurpComponent x
from :: forall x. SlurpComponent -&gt; Rep SlurpComponent x
$cto :: forall x. Rep SlurpComponent x -&gt; SlurpComponent
to :: forall x. Rep SlurpComponent x -&gt; SlurpComponent
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680871281"><span id="local-6989586621680871287"><span id="local-6989586621680871292"><span id="local-6989586621680871296"><span id="local-6989586621680871299"><span id="local-6989586621680871302"><span id="local-6989586621680871305"><span class="annot"><span class="annottext">Eq SlurpComponent
Eq SlurpComponent =&gt;
(SlurpComponent -&gt; SlurpComponent -&gt; Ordering)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; Bool)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; Bool)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; Bool)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; Bool)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent)
-&gt; (SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent)
-&gt; Ord SlurpComponent
SlurpComponent -&gt; SlurpComponent -&gt; Bool
SlurpComponent -&gt; SlurpComponent -&gt; Ordering
SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: SlurpComponent -&gt; SlurpComponent -&gt; Ordering
compare :: SlurpComponent -&gt; SlurpComponent -&gt; Ordering
$c&lt; :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
&lt; :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
$c&lt;= :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
&lt;= :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
$c&gt; :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
&gt; :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
$c&gt;= :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
&gt;= :: SlurpComponent -&gt; SlurpComponent -&gt; Bool
$cmax :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
max :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
$cmin :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
min :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680871309"><span id="local-6989586621680871318"><span id="local-6989586621680871322"><span class="annot"><span class="annottext">Int -&gt; SlurpComponent -&gt; ShowS
[SlurpComponent] -&gt; ShowS
SlurpComponent -&gt; String
(Int -&gt; SlurpComponent -&gt; ShowS)
-&gt; (SlurpComponent -&gt; String)
-&gt; ([SlurpComponent] -&gt; ShowS)
-&gt; Show SlurpComponent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SlurpComponent -&gt; ShowS
showsPrec :: Int -&gt; SlurpComponent -&gt; ShowS
$cshow :: SlurpComponent -&gt; String
show :: SlurpComponent -&gt; String
$cshowList :: [SlurpComponent] -&gt; ShowS
showList :: [SlurpComponent] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#isEmpty"><span class="hs-identifier hs-type">isEmpty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-43"></span><span id="isEmpty"><span class="annot"><span class="annottext">isEmpty :: SlurpComponent -&gt; Bool
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#isEmpty"><span class="hs-identifier hs-var hs-var">isEmpty</span></a></span></span><span> </span><span id="local-6989586621680871326"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871326"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Bool
forall a. Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.null</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871326"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Bool
forall a. Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.null</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871326"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Bool
forall a. Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.null</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871326"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-46"></span><span id="empty"><span class="annot"><span class="annottext">empty :: SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#empty"><span class="hs-identifier hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">}</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#difference"><span class="hs-identifier hs-type">difference</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-49"></span><span id="difference"><span class="annot"><span class="annottext">difference :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#difference"><span class="hs-identifier hs-var hs-var">difference</span></a></span></span><span> </span><span id="local-6989586621680871330"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871330"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621680871331"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871331"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871332"><span class="hs-identifier hs-var">types'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871333"><span class="hs-identifier hs-var">terms'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871334"><span class="hs-identifier hs-var">ctors'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>    </span><span id="local-6989586621680871332"><span class="annot"><span class="annottext">types' :: Set Symbol
</span><a href="#local-6989586621680871332"><span class="hs-identifier hs-var hs-var">types'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871330"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.difference`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871331"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span>
</span><span id="line-52"></span><span>    </span><span id="local-6989586621680871333"><span class="annot"><span class="annottext">terms' :: Set Symbol
</span><a href="#local-6989586621680871333"><span class="hs-identifier hs-var hs-var">terms'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871330"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.difference`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871331"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span>
</span><span id="line-53"></span><span>    </span><span id="local-6989586621680871334"><span class="annot"><span class="annottext">ctors' :: Set Symbol
</span><a href="#local-6989586621680871334"><span class="hs-identifier hs-var hs-var">ctors'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871330"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.difference`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871331"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#intersection"><span class="hs-identifier hs-type">intersection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-56"></span><span id="intersection"><span class="annot"><span class="annottext">intersection :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#intersection"><span class="hs-identifier hs-var hs-var">intersection</span></a></span></span><span> </span><span id="local-6989586621680871336"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871336"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621680871337"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871337"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871338"><span class="hs-identifier hs-var">types'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871339"><span class="hs-identifier hs-var">terms'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871340"><span class="hs-identifier hs-var">ctors'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-58"></span><span>    </span><span id="local-6989586621680871338"><span class="annot"><span class="annottext">types' :: Set Symbol
</span><a href="#local-6989586621680871338"><span class="hs-identifier hs-var hs-var">types'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871336"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.intersection`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871337"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span>
</span><span id="line-59"></span><span>    </span><span id="local-6989586621680871339"><span class="annot"><span class="annottext">terms' :: Set Symbol
</span><a href="#local-6989586621680871339"><span class="hs-identifier hs-var hs-var">terms'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871336"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.intersection`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871337"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span>
</span><span id="line-60"></span><span>    </span><span id="local-6989586621680871340"><span class="annot"><span class="annottext">ctors' :: Set Symbol
</span><a href="#local-6989586621680871340"><span class="hs-identifier hs-var hs-var">ctors'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871336"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.intersection`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871337"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680871344"><span id="local-6989586621680871348"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621680871363"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871363"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621680871364"><span class="annot"><span class="annottext">&lt;&gt; :: SlurpComponent -&gt; SlurpComponent -&gt; SlurpComponent
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621680871365"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871365"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-65"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871363"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871365"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871363"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871365"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871363"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871365"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">ctors</span><span>
</span><span id="line-68"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680871370"><span id="local-6989586621680871374"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621680871377"><span class="annot"><span class="annottext">mempty :: SlurpComponent
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- I'm calling this `closeWithDependencies` because it doesn't just compute</span><span>
</span><span id="line-74"></span><span class="hs-comment">-- the dependencies of the inputs, it mixes them together.  Make sure this</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- is what you want.</span><span>
</span><span id="line-76"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#closeWithDependencies"><span class="hs-identifier hs-type">closeWithDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680871036"><span class="annot"><a href="#local-6989586621680871036"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TypecheckedUnisonFile</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="annot"><a href="#local-6989586621680871036"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-81"></span><span id="closeWithDependencies"><span class="annot"><span class="annottext">closeWithDependencies :: forall a.
TypecheckedUnisonFile Symbol a -&gt; SlurpComponent -&gt; SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#closeWithDependencies"><span class="hs-identifier hs-var hs-var">closeWithDependencies</span></a></span></span><span> </span><span id="local-6989586621680871513"><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span></span><span> </span><span id="local-6989586621680871514"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871514"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871515"><span class="hs-identifier hs-var">seenDefns</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680871516"><span class="hs-identifier hs-type">constructorDeps</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621680871515"><span class="annot"><span class="annottext">seenDefns :: SlurpComponent
</span><a href="#local-6989586621680871515"><span class="hs-identifier hs-var hs-var">seenDefns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SlurpComponent -&gt; Symbol -&gt; SlurpComponent)
-&gt; SlurpComponent -&gt; Set Symbol -&gt; SlurpComponent
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Set a -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent -&gt; Symbol -&gt; SlurpComponent
</span><a href="#local-6989586621680871518"><span class="hs-identifier hs-var">termDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871519"><span class="hs-identifier hs-var">seenTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871514"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621680871519"><span class="annot"><span class="annottext">seenTypes :: Set Symbol
</span><a href="#local-6989586621680871519"><span class="hs-identifier hs-var hs-var">seenTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set Symbol -&gt; Symbol -&gt; Set Symbol)
-&gt; Set Symbol -&gt; Set Symbol -&gt; Set Symbol
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Set a -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Symbol -&gt; Set Symbol
</span><a href="#local-6989586621680871520"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871514"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><a href="#local-6989586621680871516"><span class="hs-identifier hs-type">constructorDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span>
</span><span id="line-87"></span><span>    </span><span id="local-6989586621680871516"><span class="annot"><span class="annottext">constructorDeps :: Set Symbol
</span><a href="#local-6989586621680871516"><span class="hs-identifier hs-var hs-var">constructorDeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; TypecheckedUnisonFile Symbol a -&gt; Set Symbol
forall v a. Ord v =&gt; Set v -&gt; TypecheckedUnisonFile v a -&gt; Set v
</span><span class="hs-identifier hs-var">UF.constructorsForDecls</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871519"><span class="hs-identifier hs-var">seenTypes</span></a></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="#local-6989586621680871518"><span class="hs-identifier hs-type">termDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span id="local-6989586621680871518"><span class="annot"><span class="annottext">termDeps :: SlurpComponent -&gt; Symbol -&gt; SlurpComponent
</span><a href="#local-6989586621680871518"><span class="hs-identifier hs-var hs-var">termDeps</span></a></span></span><span> </span><span id="local-6989586621680871522"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871522"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621680871523"><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871523"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Symbol -&gt; Set Symbol -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871523"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871522"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871522"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><a href="#local-6989586621680871518"><span class="hs-identifier hs-var">termDeps</span></a></span><span> </span><span id="local-6989586621680871525"><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871525"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621680871526"><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871526"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent -&gt; Maybe SlurpComponent -&gt; SlurpComponent
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871525"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-92"></span><span>      </span><span id="local-6989586621680871528"><span class="annot"><span class="annottext">Term Symbol a
</span><a href="#local-6989586621680871528"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Symbol -&gt; Maybe (Term Symbol a)
</span><a href="#local-6989586621680871529"><span class="hs-identifier hs-var">findTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871526"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- get the `v`s for the transitive dependency types</span><span>
</span><span id="line-94"></span><span>          </span><span class="hs-comment">-- (the ones for terms are just the `freeVars below`)</span><span>
</span><span id="line-95"></span><span>          </span><span class="hs-comment">-- although this isn't how you'd do it for a term that's already in codebase</span><span>
</span><span id="line-96"></span><span>          </span><span class="annot"><a href="#local-6989586621680871530"><span class="hs-identifier hs-type">tdeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">]</span><span>
</span><span id="line-97"></span><span>          </span><span id="local-6989586621680871530"><span class="annot"><span class="annottext">tdeps :: [Symbol]
</span><a href="#local-6989586621680871530"><span class="hs-identifier hs-var hs-var">tdeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TypeReference -&gt; [Symbol]
</span><a href="#local-6989586621680871531"><span class="hs-identifier hs-var">resolveTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term Symbol a -&gt; DefnsF Set TypeReference TypeReference
forall v vt at ap a.
(Ord v, Ord vt) =&gt;
Term2 vt at ap v a -&gt; DefnsF Set TypeReference TypeReference
</span><span class="hs-identifier hs-var">Term.dependencies</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol a
</span><a href="#local-6989586621680871528"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span>
</span><span id="line-98"></span><span>          </span><span class="annot"><a href="#local-6989586621680871533"><span class="hs-identifier hs-type">seenTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span>
</span><span id="line-99"></span><span>          </span><span id="local-6989586621680871533"><span class="annot"><span class="annottext">seenTypes :: Set Symbol
</span><a href="#local-6989586621680871533"><span class="hs-identifier hs-var hs-var">seenTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set Symbol -&gt; Symbol -&gt; Set Symbol)
-&gt; Set Symbol -&gt; [Symbol] -&gt; Set Symbol
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Symbol -&gt; Set Symbol
</span><a href="#local-6989586621680871520"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871525"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">types</span><span> </span><span class="annot"><span class="annottext">[Symbol]
</span><a href="#local-6989586621680871530"><span class="hs-identifier hs-var">tdeps</span></a></span><span>
</span><span id="line-100"></span><span>          </span><span id="local-6989586621680871534"><span class="annot"><span class="annottext">seenTerms :: Set Symbol
</span><a href="#local-6989586621680871534"><span class="hs-identifier hs-var hs-var">seenTerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871526"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871525"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">terms</span><span>
</span><span id="line-101"></span><span>      </span><span class="annot"><span class="annottext">SlurpComponent -&gt; Maybe SlurpComponent
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SlurpComponent -&gt; Maybe SlurpComponent)
-&gt; SlurpComponent -&gt; Maybe SlurpComponent
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><span class="annottext">(SlurpComponent -&gt; Symbol -&gt; SlurpComponent)
-&gt; SlurpComponent -&gt; Set Symbol -&gt; SlurpComponent
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Set a -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span>
</span><span id="line-103"></span><span>          </span><span class="annot"><span class="annottext">SlurpComponent -&gt; Symbol -&gt; SlurpComponent
</span><a href="#local-6989586621680871518"><span class="hs-identifier hs-var">termDeps</span></a></span><span>
</span><span id="line-104"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">SlurpComponent
</span><a href="#local-6989586621680871525"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-105"></span><span>              </span><span class="annot"><span class="annottext">SlurpComponent
-&gt; (SlurpComponent -&gt; SlurpComponent) -&gt; SlurpComponent
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">ASetter SlurpComponent SlurpComponent (Set Symbol) (Set Symbol)
</span><span class="">#types</span></span><span> </span><span class="annot"><span class="annottext">ASetter SlurpComponent SlurpComponent (Set Symbol) (Set Symbol)
-&gt; Set Symbol -&gt; SlurpComponent -&gt; SlurpComponent
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871533"><span class="hs-identifier hs-var">seenTypes</span></a></span><span>
</span><span id="line-106"></span><span>              </span><span class="annot"><span class="annottext">SlurpComponent
-&gt; (SlurpComponent -&gt; SlurpComponent) -&gt; SlurpComponent
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">ASetter SlurpComponent SlurpComponent (Set Symbol) (Set Symbol)
</span><span class="">#terms</span></span><span> </span><span class="annot"><span class="annottext">ASetter SlurpComponent SlurpComponent (Set Symbol) (Set Symbol)
-&gt; Set Symbol -&gt; SlurpComponent -&gt; SlurpComponent
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871534"><span class="hs-identifier hs-var">seenTerms</span></a></span><span>
</span><span id="line-107"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term Symbol a -&gt; Set Symbol
forall vt v a. Term' vt v a -&gt; Set v
</span><span class="hs-identifier hs-var">Term.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol a
</span><a href="#local-6989586621680871528"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="#local-6989586621680871520"><span class="hs-identifier hs-type">typeDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span>
</span><span id="line-111"></span><span>    </span><span id="local-6989586621680871520"><span class="annot"><span class="annottext">typeDeps :: Set Symbol -&gt; Symbol -&gt; Set Symbol
</span><a href="#local-6989586621680871520"><span class="hs-identifier hs-var hs-var">typeDeps</span></a></span></span><span> </span><span id="local-6989586621680871539"><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871539"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621680871540"><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871540"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Symbol -&gt; Set Symbol -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871540"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871539"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871539"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="#local-6989586621680871520"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span id="local-6989586621680871541"><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871541"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621680871542"><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871542"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Maybe (Set Symbol) -&gt; Set Symbol
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871541"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Set Symbol) -&gt; Set Symbol)
-&gt; Maybe (Set Symbol) -&gt; Set Symbol
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-113"></span><span>      </span><span id="local-6989586621680871543"><span class="annot"><span class="annottext">DataDeclaration Symbol a
</span><a href="#local-6989586621680871543"><span class="hs-identifier hs-var">dd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><span class="annottext">((TypeReference, DataDeclaration Symbol a)
 -&gt; DataDeclaration Symbol a)
-&gt; Maybe (TypeReference, DataDeclaration Symbol a)
-&gt; Maybe (DataDeclaration Symbol a)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(TypeReference, DataDeclaration Symbol a)
-&gt; DataDeclaration Symbol a
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Symbol
-&gt; Map Symbol (TypeReference, DataDeclaration Symbol a)
-&gt; Maybe (TypeReference, DataDeclaration Symbol a)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871542"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
-&gt; Map Symbol (TypeReference, DataDeclaration Symbol a)
forall v a.
TypecheckedUnisonFile v a
-&gt; Map v (TypeReference, DataDeclaration v a)
</span><span class="hs-identifier hs-var">UF.dataDeclarations'</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>          </span><span class="annot"><span class="annottext">Maybe (DataDeclaration Symbol a)
-&gt; Maybe (DataDeclaration Symbol a)
-&gt; Maybe (DataDeclaration Symbol a)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">((TypeReference, EffectDeclaration Symbol a)
 -&gt; DataDeclaration Symbol a)
-&gt; Maybe (TypeReference, EffectDeclaration Symbol a)
-&gt; Maybe (DataDeclaration Symbol a)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EffectDeclaration Symbol a -&gt; DataDeclaration Symbol a
forall v a. EffectDeclaration v a -&gt; DataDeclaration v a
</span><span class="hs-identifier hs-var">DD.toDataDecl</span></span><span> </span><span class="annot"><span class="annottext">(EffectDeclaration Symbol a -&gt; DataDeclaration Symbol a)
-&gt; ((TypeReference, EffectDeclaration Symbol a)
    -&gt; EffectDeclaration Symbol a)
-&gt; (TypeReference, EffectDeclaration Symbol a)
-&gt; DataDeclaration Symbol a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TypeReference, EffectDeclaration Symbol a)
-&gt; EffectDeclaration Symbol a
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Symbol
-&gt; Map Symbol (TypeReference, EffectDeclaration Symbol a)
-&gt; Maybe (TypeReference, EffectDeclaration Symbol a)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871542"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
-&gt; Map Symbol (TypeReference, EffectDeclaration Symbol a)
forall v a.
TypecheckedUnisonFile v a
-&gt; Map v (TypeReference, EffectDeclaration v a)
</span><span class="hs-identifier hs-var">UF.effectDeclarations'</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">(Set Symbol -&gt; Symbol -&gt; Set Symbol)
-&gt; Set Symbol -&gt; [Symbol] -&gt; Set Symbol
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set Symbol -&gt; Symbol -&gt; Set Symbol
</span><a href="#local-6989586621680871520"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Symbol -&gt; Set Symbol -&gt; Set Symbol
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871542"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871541"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set TypeReference -&gt; [Symbol]
</span><a href="#local-6989586621680871531"><span class="hs-identifier hs-var">resolveTypes</span></a></span><span> </span><span class="annot"><span class="annottext">(Set TypeReference -&gt; [Symbol]) -&gt; Set TypeReference -&gt; [Symbol]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DataDeclaration Symbol a -&gt; Set TypeReference
forall v a. Ord v =&gt; DataDeclaration v a -&gt; Set TypeReference
</span><span class="hs-identifier hs-var">DD.typeDependencies</span></span><span> </span><span class="annot"><span class="annottext">DataDeclaration Symbol a
</span><a href="#local-6989586621680871543"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><a href="#local-6989586621680871531"><span class="hs-identifier hs-type">resolveTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeReference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621680871531"><span class="annot"><span class="annottext">resolveTypes :: Set TypeReference -&gt; [Symbol]
</span><a href="#local-6989586621680871531"><span class="hs-identifier hs-var hs-var">resolveTypes</span></a></span></span><span> </span><span id="local-6989586621680871552"><span class="annot"><span class="annottext">Set TypeReference
</span><a href="#local-6989586621680871552"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871553"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680871554"><span class="annot"><span class="annottext">TypeReference
</span><a href="#local-6989586621680871554"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set TypeReference -&gt; [TypeReference]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set TypeReference
</span><a href="#local-6989586621680871552"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680871553"><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871553"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeReference -&gt; Map TypeReference Symbol -&gt; Maybe Symbol
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">TypeReference
</span><a href="#local-6989586621680871554"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Map TypeReference Symbol
</span><a href="#local-6989586621680871556"><span class="hs-identifier hs-var">typeNames</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="#local-6989586621680871529"><span class="hs-identifier hs-type">findTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="annot"><a href="#local-6989586621680871036"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621680871529"><span class="annot"><span class="annottext">findTerm :: Symbol -&gt; Maybe (Term Symbol a)
</span><a href="#local-6989586621680871529"><span class="hs-identifier hs-var hs-var">findTerm</span></a></span></span><span> </span><span id="local-6989586621680871557"><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871557"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Symbol -&gt; Map Symbol (Term Symbol a) -&gt; Maybe (Term Symbol a)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Symbol
</span><a href="#local-6989586621680871557"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Map Symbol (Term Symbol a)
</span><a href="#local-6989586621680871558"><span class="hs-identifier hs-var">allTerms</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>    </span><span id="local-6989586621680871558"><span class="annot"><span class="annottext">allTerms :: Map Symbol (Term Symbol a)
</span><a href="#local-6989586621680871558"><span class="hs-identifier hs-var hs-var">allTerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a -&gt; Map Symbol (Term Symbol a)
forall v a. Ord v =&gt; TypecheckedUnisonFile v a -&gt; Map v (Term v a)
</span><span class="hs-identifier hs-var">UF.allTerms</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="#local-6989586621680871556"><span class="hs-identifier hs-type">typeNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeReference</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span>
</span><span id="line-127"></span><span>    </span><span id="local-6989586621680871556"><span class="annot"><span class="annottext">typeNames :: Map TypeReference Symbol
</span><a href="#local-6989586621680871556"><span class="hs-identifier hs-var hs-var">typeNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Symbol TypeReference -&gt; Map TypeReference Symbol
forall k v. (Ord k, Ord v) =&gt; Map k v -&gt; Map v k
</span><a href="#local-6989586621680871560"><span class="hs-identifier hs-var">invert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeReference, DataDeclaration Symbol a) -&gt; TypeReference
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((TypeReference, DataDeclaration Symbol a) -&gt; TypeReference)
-&gt; Map Symbol (TypeReference, DataDeclaration Symbol a)
-&gt; Map Symbol TypeReference
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
-&gt; Map Symbol (TypeReference, DataDeclaration Symbol a)
forall v a.
TypecheckedUnisonFile v a
-&gt; Map v (TypeReference, DataDeclaration v a)
</span><span class="hs-identifier hs-var">UF.dataDeclarations'</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map TypeReference Symbol
-&gt; Map TypeReference Symbol -&gt; Map TypeReference Symbol
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map Symbol TypeReference -&gt; Map TypeReference Symbol
forall k v. (Ord k, Ord v) =&gt; Map k v -&gt; Map v k
</span><a href="#local-6989586621680871560"><span class="hs-identifier hs-var">invert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeReference, EffectDeclaration Symbol a) -&gt; TypeReference
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((TypeReference, EffectDeclaration Symbol a) -&gt; TypeReference)
-&gt; Map Symbol (TypeReference, EffectDeclaration Symbol a)
-&gt; Map Symbol TypeReference
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
-&gt; Map Symbol (TypeReference, EffectDeclaration Symbol a)
forall v a.
TypecheckedUnisonFile v a
-&gt; Map v (TypeReference, EffectDeclaration v a)
</span><span class="hs-identifier hs-var">UF.effectDeclarations'</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile Symbol a
</span><a href="#local-6989586621680871513"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="#local-6989586621680871560"><span class="hs-identifier hs-type">invert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680871207"><span class="annot"><a href="#local-6989586621680871207"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621680871208"><span class="annot"><a href="#local-6989586621680871208"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680871207"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680871208"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621680871207"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680871208"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621680871208"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680871207"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span id="local-6989586621680871560"><span class="annot"><span class="annottext">invert :: forall k v. (Ord k, Ord v) =&gt; Map k v -&gt; Map v k
</span><a href="#local-6989586621680871560"><span class="hs-identifier hs-var hs-var">invert</span></a></span></span><span> </span><span id="local-6989586621680871568"><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621680871568"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(v, k)] -&gt; Map v k
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(k, v) -&gt; (v, k)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span> </span><span class="annot"><span class="annottext">((k, v) -&gt; (v, k)) -&gt; [(k, v)] -&gt; [(v, k)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621680871568"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#fromTypes"><span class="hs-identifier hs-type">fromTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-133"></span><span id="fromTypes"><span class="annot"><span class="annottext">fromTypes :: Set Symbol -&gt; SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#fromTypes"><span class="hs-identifier hs-var hs-var">fromTypes</span></a></span></span><span> </span><span id="local-6989586621680871571"><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871571"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871571"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">}</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#fromTerms"><span class="hs-identifier hs-type">fromTerms</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-136"></span><span id="fromTerms"><span class="annot"><span class="annottext">fromTerms :: Set Symbol -&gt; SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#fromTerms"><span class="hs-identifier hs-var hs-var">fromTerms</span></a></span></span><span> </span><span id="local-6989586621680871572"><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871572"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871572"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">}</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#fromCtors"><span class="hs-identifier hs-type">fromCtors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span>
</span><span id="line-139"></span><span id="fromCtors"><span class="annot"><span class="annottext">fromCtors :: Set Symbol -&gt; SlurpComponent
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#fromCtors"><span class="hs-identifier hs-var hs-var">fromCtors</span></a></span></span><span> </span><span id="local-6989586621680871573"><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871573"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:terms:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Aterms%3ASlurpComponent"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:types:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Atypes%3ASlurpComponent"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ctors:SlurpComponent :: Set Symbol
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#%24sel%3Actors%3ASlurpComponent"><span class="hs-identifier hs-var">ctors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Symbol
</span><a href="#local-6989586621680871573"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-140"></span></pre></body></html>