<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- |</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- Module: Optics.Iso</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Description: Translates between types with the same structure.</span><span>
</span><span id="line-4"></span><span class="hs-comment">--</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- An 'Iso'morphism expresses the fact that two types have the</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- same structure, and hence can be converted from one to the other in</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- either direction.</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Optics.Iso</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Formation</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier">Iso</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier">Iso'</span></a></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Introduction</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#iso"><span class="hs-identifier">iso</span></a></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Elimination</span></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-comment">-- | An 'Iso' is in particular a 'Optics.Getter.Getter', a</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-comment">-- 'Optics.Review.Review' and a 'Optics.Setter.Setter', therefore you can</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-comment">-- specialise types to obtain:</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-comment">-- 'Optics.Getter.view'   :: 'Iso'' s a -&gt; s -&gt; a</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-comment">-- 'Optics.Review.review' :: 'Iso'' s a -&gt; a -&gt; s</span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-comment">-- 'Optics.Setter.over'   :: 'Iso' s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t</span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-comment">-- 'Optics.Setter.set'    :: 'Iso' s t a b -&gt;       b  -&gt; s -&gt; t</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-comment">-- If you want to 'Optics.Getter.view' a type-modifying 'Iso' that is</span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-comment">-- insufficiently polymorphic to be used as a type-preserving 'Iso'', use</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-comment">-- 'Optics.ReadOnly.getting':</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-comment">-- 'Optics.Getter.view' . 'Optics.ReadOnly.getting' :: 'Iso' s t a b -&gt; s -&gt; a</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Computation</span></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-comment">-- |</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-comment">-- 'Optics.Getter.view'   ('iso' f g) &#8801; f</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-comment">-- 'Optics.Review.review' ('iso' f g) &#8801; g</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Well-formedness</span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-comment">-- | The functions translating back and forth must be mutually inverse:</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-comment">-- 'Optics.Getter.view' i . 'Optics.Review.review' i &#8801; 'id'</span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-comment">-- 'Optics.Review.review' i . 'Optics.Getter.view' i &#8801; 'id'</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Additional introduction forms</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#equality"><span class="hs-identifier">equality</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#simple"><span class="hs-identifier">simple</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#coerced"><span class="hs-identifier">coerced</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#coercedTo"><span class="hs-identifier">coercedTo</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#coerced1"><span class="hs-identifier">coerced1</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#non"><span class="hs-identifier">non</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#non%27"><span class="hs-identifier">non'</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#anon"><span class="hs-identifier">anon</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#curried"><span class="hs-identifier">curried</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#uncurried"><span class="hs-identifier">uncurried</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#flipped"><span class="hs-identifier">flipped</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#involuted"><span class="hs-identifier">involuted</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#Swapped"><span class="hs-identifier">Swapped</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Additional elimination forms</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#withIso"><span class="hs-identifier">withIso</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#au"><span class="hs-identifier">au</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Iso.html#under"><span class="hs-identifier">under</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Combinators</span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-comment">-- | The 'Optics.Re.re' combinator can be used to reverse an 'Iso', and the</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-comment">-- 'Optics.Mapping.mapping' combinator to lift an 'Iso' to an 'Iso' on</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-comment">-- functorial values.</span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-comment">-- 'Optics.Re.re'      ::                           'Iso' s t a b -&gt; 'Iso' b a t s</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-comment">-- 'Optics.Mapping.mapping' :: (Functor f, Functor g) =&gt; 'Iso' s t a b -&gt; 'Iso' (f s) (g t) (f a) (g b)</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Subtyping</span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Optics.Internal.Optic.Types.html#An_Iso"><span class="hs-identifier">An_Iso</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><span class="hs-comment">-- | &lt;&lt;diagrams/Iso.png Iso in the optics hierarchy&gt;&gt;</span></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Tuple</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor.Indexed</span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Optics.AffineFold.html"><span class="hs-identifier">Optics.AffineFold</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Optics.Prism.html"><span class="hs-identifier">Optics.Prism</span></a></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Optics.Review.html"><span class="hs-identifier">Optics.Review</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Optics.Internal.Optic.html"><span class="hs-identifier">Optics.Internal.Optic</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><span class="hs-comment">-- | Type synonym for a type-modifying iso.</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">type</span><span> </span><span id="Iso"><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-var">Iso</span></a></span></span><span> </span><span id="local-6989586621679135044"><span class="annot"><a href="#local-6989586621679135044"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679135045"><span class="annot"><a href="#local-6989586621679135045"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621679135046"><span class="annot"><a href="#local-6989586621679135046"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679135047"><span class="annot"><a href="#local-6989586621679135047"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-type">Optic</span></a></span><span> </span><span class="annot"><a href="Optics.Internal.Optic.Types.html#An_Iso"><span class="hs-identifier hs-type">An_Iso</span></a></span><span> </span><span class="annot"><a href="Optics.Internal.Optic.TypeLevel.html#NoIx"><span class="hs-identifier hs-type">NoIx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135044"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135045"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135046"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135047"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><span class="hs-comment">-- | Type synonym for a type-preserving iso.</span></span><span>
</span><span id="line-109"></span><span class="hs-keyword">type</span><span> </span><span id="Iso%27"><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-var">Iso'</span></a></span></span><span> </span><span id="local-6989586621679135048"><span class="annot"><a href="#local-6989586621679135048"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679135049"><span class="annot"><a href="#local-6989586621679135049"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Optics.Internal.Optic.html#Optic%27"><span class="hs-identifier hs-type">Optic'</span></a></span><span> </span><span class="annot"><a href="Optics.Internal.Optic.Types.html#An_Iso"><span class="hs-identifier hs-type">An_Iso</span></a></span><span> </span><span class="annot"><a href="Optics.Internal.Optic.TypeLevel.html#NoIx"><span class="hs-identifier hs-type">NoIx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135048"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135049"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Build an iso from a pair of inverse functions.</span><span>
</span><span id="line-112"></span><span class="hs-comment">--</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- If you want to build an 'Iso' from the van Laarhoven representation, use</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- @isoVL@ from the @optics-vl@ package.</span><span>
</span><span id="line-115"></span><span id="local-6989586621679134795"><span id="local-6989586621679134796"><span id="local-6989586621679134797"><span id="local-6989586621679134798"><span class="annot"><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-type">iso</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134795"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134796"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134797"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134798"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134795"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134798"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134796"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134797"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-116"></span><span id="iso"><span class="annot"><span class="annottext">iso :: forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var hs-var">iso</span></a></span></span><span> </span><span id="local-6989586621679135050"><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135050"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679135051"><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135051"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ An_Iso p i (Curry NoIx i) s t a b)
-&gt; Optic An_Iso NoIx s t a b
forall k (is :: IxList) s t a b.
(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ k p i (Curry is i) s t a b)
-&gt; Optic k is s t a b
</span><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-var">Optic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; a) -&gt; (b -&gt; t) -&gt; p i a b -&gt; p i s t
forall a b c d i. (a -&gt; b) -&gt; (c -&gt; d) -&gt; p i b c -&gt; p i a d
forall (p :: * -&gt; * -&gt; * -&gt; *) a b c d i.
Profunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p i b c -&gt; p i a d
</span><span class="hs-identifier hs-var">dimap</span></span><span> </span><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135050"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135051"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#iso"><span class="hs-pragma hs-type">iso</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="annot"><span class="hs-comment">-- | Extract the two components of an isomorphism.</span></span><span>
</span><span id="line-120"></span><span id="local-6989586621679134828"><span id="local-6989586621679134829"><span id="local-6989586621679134830"><span id="local-6989586621679134831"><span id="local-6989586621679134832"><span class="annot"><a href="Optics.Iso.html#withIso"><span class="hs-identifier hs-type">withIso</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134828"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134829"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134830"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134831"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134828"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134830"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134831"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134829"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134832"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134832"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span><span>
</span><span id="line-121"></span><span id="withIso"><span class="annot"><span class="annottext">withIso :: forall s t a b r. Iso s t a b -&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; r) -&gt; r
</span><a href="Optics.Iso.html#withIso"><span class="hs-identifier hs-var hs-var">withIso</span></a></span></span><span> </span><span id="local-6989586621679135060"><span class="annot"><span class="annottext">Iso s t a b
</span><a href="#local-6989586621679135060"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679135061"><span class="annot"><span class="annottext">(s -&gt; a) -&gt; (b -&gt; t) -&gt; r
</span><a href="#local-6989586621679135061"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Iso s t a b
-&gt; Optic_ An_Iso (Exchange a b) Any (Curry NoIx Any) s t a b
forall (p :: * -&gt; * -&gt; * -&gt; *) k (is :: IxList) s t a b i.
Profunctor p =&gt;
Optic k is s t a b -&gt; Optic_ k p i (Curry is i) s t a b
</span><a href="Optics.Internal.Optic.html#getOptic"><span class="hs-identifier hs-var">getOptic</span></a></span><span> </span><span class="annot"><span class="annottext">Iso s t a b
</span><a href="#local-6989586621679135060"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; (b -&gt; b) -&gt; Exchange a b Any a b
forall a b i s t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Exchange a b i s t
</span><span class="hs-identifier hs-var">Exchange</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; b
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Exchange</span></span><span> </span><span id="local-6989586621679135064"><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135064"><span class="hs-identifier hs-var">sa</span></a></span></span><span> </span><span id="local-6989586621679135065"><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135065"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(s -&gt; a) -&gt; (b -&gt; t) -&gt; r
</span><a href="#local-6989586621679135061"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135064"><span class="hs-identifier hs-var">sa</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135065"><span class="hs-identifier hs-var">bt</span></a></span><span>
</span><span id="line-123"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#withIso"><span class="hs-pragma hs-type">withIso</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- | Based on @ala@ from Conor McBride's work on Epigram.</span><span>
</span><span id="line-126"></span><span class="hs-comment">--</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- This version is generalized to accept any 'Iso', not just a @newtype@.</span><span>
</span><span id="line-128"></span><span class="hs-comment">--</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- &gt;&gt;&gt; au (coerced1 @Sum) foldMap [1,2,3,4]</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- 10</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- You may want to think of this combinator as having the following, simpler</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- type:</span><span>
</span><span id="line-134"></span><span class="hs-comment">--</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- au :: 'Iso' s t a b -&gt; ((b -&gt; t) -&gt; e -&gt; s) -&gt; e -&gt; a</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-138"></span><span id="local-6989586621679134856"><span id="local-6989586621679134857"><span id="local-6989586621679134858"><span id="local-6989586621679134859"><span id="local-6989586621679134860"><span class="annot"><a href="Optics.Iso.html#au"><span class="hs-identifier hs-type">au</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679134856"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134857"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134858"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134859"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134860"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134860"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134858"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134856"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134857"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134856"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134859"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-139"></span><span id="au"><span class="annot"><span class="annottext">au :: forall (f :: * -&gt; *) s t a b.
Functor f =&gt;
Iso s t a b -&gt; ((b -&gt; t) -&gt; f s) -&gt; f a
</span><a href="Optics.Iso.html#au"><span class="hs-identifier hs-var hs-var">au</span></a></span></span><span> </span><span id="local-6989586621679135068"><span class="annot"><span class="annottext">Iso s t a b
</span><a href="#local-6989586621679135068"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Iso s t a b
-&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; ((b -&gt; t) -&gt; f s) -&gt; f a)
-&gt; ((b -&gt; t) -&gt; f s)
-&gt; f a
forall s t a b r. Iso s t a b -&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; r) -&gt; r
</span><a href="Optics.Iso.html#withIso"><span class="hs-identifier hs-var">withIso</span></a></span><span> </span><span class="annot"><span class="annottext">Iso s t a b
</span><a href="#local-6989586621679135068"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(((s -&gt; a) -&gt; (b -&gt; t) -&gt; ((b -&gt; t) -&gt; f s) -&gt; f a)
 -&gt; ((b -&gt; t) -&gt; f s) -&gt; f a)
-&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; ((b -&gt; t) -&gt; f s) -&gt; f a)
-&gt; ((b -&gt; t) -&gt; f s)
-&gt; f a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679135069"><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135069"><span class="hs-identifier hs-var">sa</span></a></span></span><span> </span><span id="local-6989586621679135070"><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135070"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621679135071"><span class="annot"><span class="annottext">(b -&gt; t) -&gt; f s
</span><a href="#local-6989586621679135071"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135069"><span class="hs-identifier hs-var">sa</span></a></span><span> </span><span class="annot"><span class="annottext">(s -&gt; a) -&gt; f s -&gt; f a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; t) -&gt; f s
</span><a href="#local-6989586621679135071"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135070"><span class="hs-identifier hs-var">bt</span></a></span><span>
</span><span id="line-140"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#au"><span class="hs-pragma hs-type">au</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- | The opposite of working 'Optics.Setter.over' a 'Optics.Setter.Setter' is</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- working 'under' an isomorphism.</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- 'under' &#8801; 'Optics.Setter.over' '.' 'Optics.Re.re'</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-148"></span><span id="local-6989586621679134872"><span id="local-6989586621679134873"><span id="local-6989586621679134874"><span id="local-6989586621679134875"><span class="annot"><a href="Optics.Iso.html#under"><span class="hs-identifier hs-type">under</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134872"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134873"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134874"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134875"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134873"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134872"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134875"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134874"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-149"></span><span id="under"><span class="annot"><span class="annottext">under :: forall s t a b. Iso s t a b -&gt; (t -&gt; s) -&gt; b -&gt; a
</span><a href="Optics.Iso.html#under"><span class="hs-identifier hs-var hs-var">under</span></a></span></span><span> </span><span id="local-6989586621679135074"><span class="annot"><span class="annottext">Iso s t a b
</span><a href="#local-6989586621679135074"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Iso s t a b
-&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; (t -&gt; s) -&gt; b -&gt; a)
-&gt; (t -&gt; s)
-&gt; b
-&gt; a
forall s t a b r. Iso s t a b -&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; r) -&gt; r
</span><a href="Optics.Iso.html#withIso"><span class="hs-identifier hs-var">withIso</span></a></span><span> </span><span class="annot"><span class="annottext">Iso s t a b
</span><a href="#local-6989586621679135074"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(((s -&gt; a) -&gt; (b -&gt; t) -&gt; (t -&gt; s) -&gt; b -&gt; a)
 -&gt; (t -&gt; s) -&gt; b -&gt; a)
-&gt; ((s -&gt; a) -&gt; (b -&gt; t) -&gt; (t -&gt; s) -&gt; b -&gt; a)
-&gt; (t -&gt; s)
-&gt; b
-&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679135075"><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135075"><span class="hs-identifier hs-var">sa</span></a></span></span><span> </span><span id="local-6989586621679135076"><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135076"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621679135077"><span class="annot"><span class="annottext">t -&gt; s
</span><a href="#local-6989586621679135077"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621679135075"><span class="hs-identifier hs-var">sa</span></a></span><span> </span><span class="annot"><span class="annottext">(s -&gt; a) -&gt; (b -&gt; s) -&gt; b -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; s
</span><a href="#local-6989586621679135077"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; s) -&gt; (b -&gt; t) -&gt; b -&gt; s
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; t
</span><a href="#local-6989586621679135076"><span class="hs-identifier hs-var">bt</span></a></span><span>
</span><span id="line-150"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#under"><span class="hs-pragma hs-type">under</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">----------------------------------------</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- Isomorphisms</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-- | Capture type constraints as an isomorphism.</span><span>
</span><span id="line-156"></span><span class="hs-comment">--</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- /Note:/ This is the identity optic:</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- &gt;&gt;&gt; :t view equality</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- view equality :: a -&gt; a</span><span>
</span><span id="line-161"></span><span id="local-6989586621679134883"><span id="local-6989586621679134884"><span id="local-6989586621679134885"><span id="local-6989586621679134886"><span class="annot"><a href="Optics.Iso.html#equality"><span class="hs-identifier hs-type">equality</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134883"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621679134884"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679134885"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621679134886"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134883"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134885"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134884"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134886"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-162"></span><span id="equality"><span class="annot"><span class="annottext">equality :: forall s a t b. (s ~ a, t ~ b) =&gt; Iso s t a b
</span><a href="Optics.Iso.html#equality"><span class="hs-identifier hs-var hs-var">equality</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ An_Iso p i (Curry NoIx i) s t a b)
-&gt; Optic An_Iso NoIx s t a b
forall k (is :: IxList) s t a b.
(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ k p i (Curry is i) s t a b)
-&gt; Optic k is s t a b
</span><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-var">Optic</span></a></span><span> </span><span class="annot"><span class="annottext">p i a b -&gt; p i a b
p i a b -&gt; p (Curry NoIx i) s t
forall a. a -&gt; a
forall (p :: * -&gt; * -&gt; * -&gt; *) i.
Profunctor p =&gt;
Optic_ An_Iso p i (Curry NoIx i) s t a b
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-163"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#equality"><span class="hs-pragma hs-type">equality</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><span class="hs-comment">-- | Proof of reflexivity.</span></span><span>
</span><span id="line-166"></span><span id="local-6989586621679134896"><span class="annot"><a href="Optics.Iso.html#simple"><span class="hs-identifier hs-type">simple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-type">Iso'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134896"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134896"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-167"></span><span id="simple"><span class="annot"><span class="annottext">simple :: forall a. Iso' a a
</span><a href="Optics.Iso.html#simple"><span class="hs-identifier hs-var hs-var">simple</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ An_Iso p i (Curry NoIx i) a a a a)
-&gt; Optic An_Iso NoIx a a a a
forall k (is :: IxList) s t a b.
(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ k p i (Curry is i) s t a b)
-&gt; Optic k is s t a b
</span><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-var">Optic</span></a></span><span> </span><span class="annot"><span class="annottext">p i a a -&gt; p i a a
p i a a -&gt; p (Curry NoIx i) a a
forall a. a -&gt; a
forall (p :: * -&gt; * -&gt; * -&gt; *) i.
Profunctor p =&gt;
Optic_ An_Iso p i (Curry NoIx i) a a a a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-168"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#simple"><span class="hs-pragma hs-type">simple</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">-- | Data types that are representationally equal are isomorphic.</span><span>
</span><span id="line-171"></span><span class="hs-comment">--</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- &gt;&gt;&gt; view coerced 'x' :: Identity Char</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- Identity 'x'</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span id="local-6989586621679134901"><span id="local-6989586621679134902"><span id="local-6989586621679134903"><span id="local-6989586621679134904"><span class="annot"><a href="Optics.Iso.html#coerced"><span class="hs-identifier hs-type">coerced</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621679134901"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134902"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621679134903"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134904"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134901"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134903"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134902"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134904"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-176"></span><span id="coerced"><span class="annot"><span class="annottext">coerced :: forall s a t b. (Coercible s a, Coercible t b) =&gt; Iso s t a b
</span><a href="Optics.Iso.html#coerced"><span class="hs-identifier hs-var hs-var">coerced</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ An_Iso p i (Curry NoIx i) s t a b)
-&gt; Optic An_Iso NoIx s t a b
forall k (is :: IxList) s t a b.
(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ k p i (Curry is i) s t a b)
-&gt; Optic k is s t a b
</span><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-var">Optic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p i a t -&gt; p i s t
forall a b i c. Coercible a b =&gt; p i a c -&gt; p i b c
forall (p :: * -&gt; * -&gt; * -&gt; *) a b i c.
(Profunctor p, Coercible a b) =&gt;
p i a c -&gt; p i b c
</span><span class="hs-identifier hs-var">lcoerce'</span></span><span> </span><span class="annot"><span class="annottext">(p i a t -&gt; p i s t) -&gt; (p i a b -&gt; p i a t) -&gt; p i a b -&gt; p i s t
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">p i a b -&gt; p i a t
forall a b i c. Coercible a b =&gt; p i c a -&gt; p i c b
forall (p :: * -&gt; * -&gt; * -&gt; *) a b i c.
(Profunctor p, Coercible a b) =&gt;
p i c a -&gt; p i c b
</span><span class="hs-identifier hs-var">rcoerce'</span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#coerced"><span class="hs-pragma hs-type">coerced</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Type-preserving version of 'coerced' with type parameters rearranged for</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- TypeApplications.</span><span>
</span><span id="line-181"></span><span class="hs-comment">--</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- &gt;&gt;&gt; newtype MkInt = MkInt Int deriving Show</span><span>
</span><span id="line-183"></span><span class="hs-comment">--</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- &gt;&gt;&gt; over (coercedTo @Int) (*3) (MkInt 2)</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- MkInt 6</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="annot"><a href="Optics.Iso.html#coercedTo"><span class="hs-identifier hs-type">coercedTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679134920"><span class="annot"><a href="#local-6989586621679134920"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679134919"><span class="annot"><a href="#local-6989586621679134919"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621679134919"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134920"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-type">Iso'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134919"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134920"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-188"></span><span id="coercedTo"><span class="annot"><span class="annottext">coercedTo :: forall a s. Coercible s a =&gt; Iso' s a
</span><a href="Optics.Iso.html#coercedTo"><span class="hs-identifier hs-var hs-var">coercedTo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ An_Iso p i (Curry NoIx i) s s a a)
-&gt; Optic An_Iso NoIx s s a a
forall k (is :: IxList) s t a b.
(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ k p i (Curry is i) s t a b)
-&gt; Optic k is s t a b
</span><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-var">Optic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p i a s -&gt; p i s s
forall a b i c. Coercible a b =&gt; p i a c -&gt; p i b c
forall (p :: * -&gt; * -&gt; * -&gt; *) a b i c.
(Profunctor p, Coercible a b) =&gt;
p i a c -&gt; p i b c
</span><span class="hs-identifier hs-var">lcoerce'</span></span><span> </span><span class="annot"><span class="annottext">(p i a s -&gt; p i s s) -&gt; (p i a a -&gt; p i a s) -&gt; p i a a -&gt; p i s s
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">p i a a -&gt; p i a s
forall a b i c. Coercible a b =&gt; p i c a -&gt; p i c b
forall (p :: * -&gt; * -&gt; * -&gt; *) a b i c.
(Profunctor p, Coercible a b) =&gt;
p i c a -&gt; p i c b
</span><span class="hs-identifier hs-var">rcoerce'</span></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#coercedTo"><span class="hs-pragma hs-type">coercedTo</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- | Special case of 'coerced' for trivial newtype wrappers.</span><span>
</span><span id="line-192"></span><span class="hs-comment">--</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- &gt;&gt;&gt; over (coerced1 @Identity) (++ &quot;bar&quot;) (Identity &quot;foo&quot;)</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- Identity &quot;foobar&quot;</span><span>
</span><span id="line-195"></span><span class="hs-comment">--</span><span>
</span><span id="line-196"></span><span class="annot"><a href="Optics.Iso.html#coerced1"><span class="hs-identifier hs-type">coerced1</span></a></span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679134926"><span class="annot"><a href="#local-6989586621679134926"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679134925"><span class="annot"><a href="#local-6989586621679134925"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679134927"><span class="annot"><a href="#local-6989586621679134927"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621679134925"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134926"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134925"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621679134927"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134926"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134927"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134926"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134925"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134926"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134927"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679134925"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134927"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-199"></span><span id="coerced1"><span class="annot"><span class="annottext">coerced1 :: forall (f :: * -&gt; *) s a.
(Coercible s (f s), Coercible a (f a)) =&gt;
Iso (f s) (f a) s a
</span><a href="Optics.Iso.html#coerced1"><span class="hs-identifier hs-var hs-var">coerced1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ An_Iso p i (Curry NoIx i) (f s) (f a) s a)
-&gt; Optic An_Iso NoIx (f s) (f a) s a
forall k (is :: IxList) s t a b.
(forall (p :: * -&gt; * -&gt; * -&gt; *) i.
 Profunctor p =&gt;
 Optic_ k p i (Curry is i) s t a b)
-&gt; Optic k is s t a b
</span><a href="Optics.Internal.Optic.html#Optic"><span class="hs-identifier hs-var">Optic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p i s (f a) -&gt; p i (f s) (f a)
forall a b i c. Coercible a b =&gt; p i a c -&gt; p i b c
forall (p :: * -&gt; * -&gt; * -&gt; *) a b i c.
(Profunctor p, Coercible a b) =&gt;
p i a c -&gt; p i b c
</span><span class="hs-identifier hs-var">lcoerce'</span></span><span> </span><span class="annot"><span class="annottext">(p i s (f a) -&gt; p i (f s) (f a))
-&gt; (p i s a -&gt; p i s (f a)) -&gt; p i s a -&gt; p i (f s) (f a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">p i s a -&gt; p i s (f a)
forall a b i c. Coercible a b =&gt; p i c a -&gt; p i c b
forall (p :: * -&gt; * -&gt; * -&gt; *) a b i c.
(Profunctor p, Coercible a b) =&gt;
p i c a -&gt; p i c b
</span><span class="hs-identifier hs-var">rcoerce'</span></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#coerced1"><span class="hs-pragma hs-type">coerced1</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-- | If @v@ is an element of a type @a@, and @a'@ is @a@ sans the element @v@,</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- then @'non' v@ is an isomorphism from @'Maybe' a'@ to @a@.</span><span>
</span><span id="line-204"></span><span class="hs-comment">--</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- 'non' &#8801; 'non'' '.' 'only'</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-208"></span><span class="hs-comment">--</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- Keep in mind this is only a real isomorphism if you treat the domain as being</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- @'Maybe' (a sans v)@.</span><span>
</span><span id="line-211"></span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- This is practically quite useful when you want to have a 'Data.Map.Map' where</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- all the entries should have non-zero values.</span><span>
</span><span id="line-214"></span><span class="hs-comment">--</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [(&quot;hello&quot;,1)] &amp; at &quot;hello&quot; % non 0 %~ (+2)</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- fromList [(&quot;hello&quot;,3)]</span><span>
</span><span id="line-217"></span><span class="hs-comment">--</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [(&quot;hello&quot;,1)] &amp; at &quot;hello&quot; % non 0 %~ (subtract 1)</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- fromList []</span><span>
</span><span id="line-220"></span><span class="hs-comment">--</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [(&quot;hello&quot;,1)] ^. at &quot;hello&quot; % non 0</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- 1</span><span>
</span><span id="line-223"></span><span class="hs-comment">--</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [] ^. at &quot;hello&quot; % non 0</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- 0</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- This combinator is also particularly useful when working with nested maps.</span><span>
</span><span id="line-228"></span><span class="hs-comment">--</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- /e.g./ When you want to create the nested 'Data.Map.Map' when it is missing:</span><span>
</span><span id="line-230"></span><span class="hs-comment">--</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.empty &amp; at &quot;hello&quot; % non Map.empty % at &quot;world&quot; ?~ &quot;!!!&quot;</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- fromList [(&quot;hello&quot;,fromList [(&quot;world&quot;,&quot;!!!&quot;)])]</span><span>
</span><span id="line-233"></span><span class="hs-comment">--</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- and when have deleting the last entry from the nested 'Data.Map.Map' mean</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- that we should delete its entry from the surrounding one:</span><span>
</span><span id="line-236"></span><span class="hs-comment">--</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [(&quot;hello&quot;, Map.fromList [(&quot;world&quot;,&quot;!!!&quot;)])] &amp; at &quot;hello&quot; % non Map.empty % at &quot;world&quot; .~ Nothing</span><span>
</span><span id="line-238"></span><span class="hs-comment">-- fromList []</span><span>
</span><span id="line-239"></span><span class="hs-comment">--</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- It can also be used in reverse to exclude a given value:</span><span>
</span><span id="line-241"></span><span class="hs-comment">--</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- &gt;&gt;&gt; non 0 # rem 10 4</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- Just 2</span><span>
</span><span id="line-244"></span><span class="hs-comment">--</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- &gt;&gt;&gt; non 0 # rem 10 5</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- Nothing</span><span>
</span><span id="line-247"></span><span class="hs-comment">--</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- @since 0.2</span><span>
</span><span id="line-249"></span><span id="local-6989586621679134933"><span class="annot"><a href="Optics.Iso.html#non"><span class="hs-identifier hs-type">non</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679134933"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134933"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-type">Iso'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679134933"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679134933"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-250"></span><span id="non"><span class="annot"><span class="annottext">non :: forall a. Eq a =&gt; a -&gt; Iso' (Maybe a) a
</span><a href="Optics.Iso.html#non"><span class="hs-identifier hs-var hs-var">non</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prism' a () -&gt; Iso' (Maybe a) a
forall a. Prism' a () -&gt; Iso' (Maybe a) a
</span><a href="Optics.Iso.html#non%27"><span class="hs-identifier hs-var">non'</span></a></span><span> </span><span class="annot"><span class="annottext">(Prism' a () -&gt; Iso' (Maybe a) a)
-&gt; (a -&gt; Prism' a ()) -&gt; a -&gt; Iso' (Maybe a) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Prism' a ()
forall a. Eq a =&gt; a -&gt; Prism' a ()
</span><a href="Optics.Prism.html#only"><span class="hs-identifier hs-var">only</span></a></span><span>
</span><span id="line-251"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#non"><span class="hs-pragma hs-type">non</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- | @'non'' p@ generalizes @'non' (p # ())@ to take any unit 'Prism'</span><span>
</span><span id="line-254"></span><span class="hs-comment">--</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- This function generates an isomorphism between @'Maybe' (a | 'isn't' p a)@</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- and @a@.</span><span>
</span><span id="line-257"></span><span class="hs-comment">--</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.singleton &quot;hello&quot; Map.empty &amp; at &quot;hello&quot; % non' _Empty % at &quot;world&quot; ?~ &quot;!!!&quot;</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- fromList [(&quot;hello&quot;,fromList [(&quot;world&quot;,&quot;!!!&quot;)])]</span><span>
</span><span id="line-260"></span><span class="hs-comment">--</span><span>
</span><span id="line-261"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [(&quot;hello&quot;, Map.fromList [(&quot;world&quot;,&quot;!!!&quot;)])] &amp; at &quot;hello&quot; % non' _Empty % at &quot;world&quot; .~ Nothing</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- fromList []</span><span>
</span><span id="line-263"></span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- @since 0.2</span><span>
</span><span id="line-265"></span><span id="local-6989586621679134936"><span class="annot"><a href="Optics.Iso.html#non%27"><span class="hs-identifier hs-type">non'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Prism.html#Prism%27"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679134936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-type">Iso'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679134936"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679134936"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-266"></span><span id="non%27"><span class="annot"><span class="annottext">non' :: forall a. Prism' a () -&gt; Iso' (Maybe a) a
</span><a href="Optics.Iso.html#non%27"><span class="hs-identifier hs-var hs-var">non'</span></a></span></span><span> </span><span id="local-6989586621679135123"><span class="annot"><span class="annottext">Prism' a ()
</span><a href="#local-6989586621679135123"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; a) -&gt; (a -&gt; Maybe a) -&gt; Iso (Maybe a) (Maybe a) a a
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Maybe a -&gt; a
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679135125"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
</span><a href="#local-6989586621679135126"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621679135125"><span class="annot"><span class="annottext">def :: a
</span><a href="#local-6989586621679135125"><span class="hs-identifier hs-var hs-var">def</span></a></span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prism' a () -&gt; () -&gt; a
forall k (is :: IxList) t b.
Is k A_Review =&gt;
Optic' k is t b -&gt; b -&gt; t
</span><a href="Optics.Review.html#review"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">Prism' a ()
</span><a href="#local-6989586621679135123"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>  </span><span id="local-6989586621679135126"><span class="annot"><span class="annottext">go :: a -&gt; Maybe a
</span><a href="#local-6989586621679135126"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679135127"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Prism' a ()
</span><a href="#local-6989586621679135123"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Prism' a () -&gt; a -&gt; Bool
forall k (is :: IxList) s a.
Is k An_AffineFold =&gt;
Optic' k is s a -&gt; s -&gt; Bool
</span><a href="Optics.AffineFold.html#isn%27t"><span class="hs-operator hs-var">`isn't`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-269"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-270"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#non%27"><span class="hs-pragma hs-type">non'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- | @'anon' a p@ generalizes @'non' a@ to take any value and a predicate.</span><span>
</span><span id="line-273"></span><span class="hs-comment">--</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- 'anon' a &#8801; 'non'' '.' 'nearly' a</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-277"></span><span class="hs-comment">--</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- This function assumes that @p a@ holds @'True'@ and generates an isomorphism</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- between @'Maybe' (a | 'not' (p a))@ and @a@.</span><span>
</span><span id="line-280"></span><span class="hs-comment">--</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.empty &amp; at &quot;hello&quot; % anon Map.empty Map.null % at &quot;world&quot; ?~ &quot;!!!&quot;</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- fromList [(&quot;hello&quot;,fromList [(&quot;world&quot;,&quot;!!!&quot;)])]</span><span>
</span><span id="line-283"></span><span class="hs-comment">--</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- &gt;&gt;&gt; Map.fromList [(&quot;hello&quot;, Map.fromList [(&quot;world&quot;,&quot;!!!&quot;)])] &amp; at &quot;hello&quot; % anon Map.empty Map.null % at &quot;world&quot; .~ Nothing</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- fromList []</span><span>
</span><span id="line-286"></span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- @since 0.2</span><span>
</span><span id="line-288"></span><span id="local-6989586621679134953"><span class="annot"><a href="Optics.Iso.html#anon"><span class="hs-identifier hs-type">anon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679134953"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134953"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-type">Iso'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679134953"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679134953"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-289"></span><span id="anon"><span class="annot"><span class="annottext">anon :: forall a. a -&gt; (a -&gt; Bool) -&gt; Iso' (Maybe a) a
</span><a href="Optics.Iso.html#anon"><span class="hs-identifier hs-var hs-var">anon</span></a></span></span><span> </span><span id="local-6989586621679135130"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679135130"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prism' a () -&gt; Iso' (Maybe a) a
forall a. Prism' a () -&gt; Iso' (Maybe a) a
</span><a href="Optics.Iso.html#non%27"><span class="hs-identifier hs-var">non'</span></a></span><span> </span><span class="annot"><span class="annottext">(Prism' a () -&gt; Iso' (Maybe a) a)
-&gt; ((a -&gt; Bool) -&gt; Prism' a ()) -&gt; (a -&gt; Bool) -&gt; Iso' (Maybe a) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; (a -&gt; Bool) -&gt; Prism' a ()
forall a. a -&gt; (a -&gt; Bool) -&gt; Prism' a ()
</span><a href="Optics.Prism.html#nearly"><span class="hs-identifier hs-var">nearly</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679135130"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-290"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#anon"><span class="hs-pragma hs-type">anon</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- | The canonical isomorphism for currying and uncurrying a function.</span><span>
</span><span id="line-293"></span><span class="hs-comment">--</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- 'curried' = 'iso' 'curry' 'uncurry'</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-297"></span><span class="hs-comment">--</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- &gt;&gt;&gt; view curried fst 3 4</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- 3</span><span>
</span><span id="line-300"></span><span class="hs-comment">--</span><span>
</span><span id="line-301"></span><span id="local-6989586621679134956"><span id="local-6989586621679134957"><span id="local-6989586621679134958"><span id="local-6989586621679134959"><span id="local-6989586621679134960"><span id="local-6989586621679134961"><span class="annot"><a href="Optics.Iso.html#curried"><span class="hs-identifier hs-type">curried</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134956"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679134957"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134958"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134959"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679134960"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134961"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134956"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134957"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134958"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134959"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134960"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134961"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-302"></span><span id="curried"><span class="annot"><span class="annottext">curried :: forall a b c d e f.
Iso ((a, b) -&gt; c) ((d, e) -&gt; f) (a -&gt; b -&gt; c) (d -&gt; e -&gt; f)
</span><a href="Optics.Iso.html#curried"><span class="hs-identifier hs-var hs-var">curried</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c)
-&gt; ((d -&gt; e -&gt; f) -&gt; (d, e) -&gt; f)
-&gt; Iso ((a, b) -&gt; c) ((d, e) -&gt; f) (a -&gt; b -&gt; c) (d -&gt; e -&gt; f)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(d -&gt; e -&gt; f) -&gt; (d, e) -&gt; f
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span>
</span><span id="line-303"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#curried"><span class="hs-pragma hs-type">curried</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-comment">-- | The canonical isomorphism for uncurrying and currying a function.</span><span>
</span><span id="line-306"></span><span class="hs-comment">--</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-308"></span><span class="hs-comment">-- 'uncurried' = 'iso' 'uncurry' 'curry'</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- 'uncurried' = 'Optics.Re.re' 'curried'</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-314"></span><span class="hs-comment">--</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- &gt;&gt;&gt; (view uncurried (+)) (1,2)</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- 3</span><span>
</span><span id="line-317"></span><span class="hs-comment">--</span><span>
</span><span id="line-318"></span><span id="local-6989586621679134974"><span id="local-6989586621679134975"><span id="local-6989586621679134976"><span id="local-6989586621679134977"><span id="local-6989586621679134978"><span id="local-6989586621679134979"><span class="annot"><a href="Optics.Iso.html#uncurried"><span class="hs-identifier hs-type">uncurried</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134974"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134975"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134976"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134977"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134978"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134979"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134974"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679134975"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134976"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134977"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679134978"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134979"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-319"></span><span id="uncurried"><span class="annot"><span class="annottext">uncurried :: forall a b c d e f.
Iso (a -&gt; b -&gt; c) (d -&gt; e -&gt; f) ((a, b) -&gt; c) ((d, e) -&gt; f)
</span><a href="Optics.Iso.html#uncurried"><span class="hs-identifier hs-var hs-var">uncurried</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c)
-&gt; (((d, e) -&gt; f) -&gt; d -&gt; e -&gt; f)
-&gt; Iso (a -&gt; b -&gt; c) (d -&gt; e -&gt; f) ((a, b) -&gt; c) ((d, e) -&gt; f)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">((d, e) -&gt; f) -&gt; d -&gt; e -&gt; f
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span>
</span><span id="line-320"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#uncurried"><span class="hs-pragma hs-type">uncurried</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-comment">-- | The isomorphism for flipping a function.</span><span>
</span><span id="line-323"></span><span class="hs-comment">--</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- &gt;&gt;&gt; (view flipped (,)) 1 2</span><span>
</span><span id="line-325"></span><span class="hs-comment">-- (2,1)</span><span>
</span><span id="line-326"></span><span class="hs-comment">--</span><span>
</span><span id="line-327"></span><span id="local-6989586621679134986"><span id="local-6989586621679134987"><span id="local-6989586621679134988"><span id="local-6989586621679134989"><span id="local-6989586621679134990"><span id="local-6989586621679134991"><span class="annot"><a href="Optics.Iso.html#flipped"><span class="hs-identifier hs-type">flipped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134986"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134987"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134988"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134989"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134990"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134991"><span class="hs-identifier hs-type">c'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134987"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134986"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134988"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679134990"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134989"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679134991"><span class="hs-identifier hs-type">c'</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-328"></span><span id="flipped"><span class="annot"><span class="annottext">flipped :: forall a b c a' b' c'.
Iso (a -&gt; b -&gt; c) (a' -&gt; b' -&gt; c') (b -&gt; a -&gt; c) (b' -&gt; a' -&gt; c')
</span><a href="Optics.Iso.html#flipped"><span class="hs-identifier hs-var hs-var">flipped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c)
-&gt; ((b' -&gt; a' -&gt; c') -&gt; a' -&gt; b' -&gt; c')
-&gt; Iso
     (a -&gt; b -&gt; c) (a' -&gt; b' -&gt; c') (b -&gt; a -&gt; c) (b' -&gt; a' -&gt; c')
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(b' -&gt; a' -&gt; c') -&gt; a' -&gt; b' -&gt; c'
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span>
</span><span id="line-329"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#flipped"><span class="hs-pragma hs-type">flipped</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">-- | Given a function that is its own inverse, this gives you an 'Iso' using it</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- in both directions.</span><span>
</span><span id="line-333"></span><span class="hs-comment">--</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- 'involuted' &#8801; 'Control.Monad.join' 'iso'</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-337"></span><span class="hs-comment">--</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;live&quot; ^. involuted reverse</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- &quot;evil&quot;</span><span>
</span><span id="line-340"></span><span class="hs-comment">--</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- &gt;&gt;&gt; &quot;live&quot; &amp; involuted reverse %~ ('d':)</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- &quot;lived&quot;</span><span>
</span><span id="line-343"></span><span id="local-6989586621679135001"><span class="annot"><a href="Optics.Iso.html#involuted"><span class="hs-identifier hs-type">involuted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679135001"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679135001"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Optics.Iso.html#Iso%27"><span class="hs-identifier hs-type">Iso'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135001"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135001"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-344"></span><span id="involuted"><span class="annot"><span class="annottext">involuted :: forall a. (a -&gt; a) -&gt; Iso' a a
</span><a href="Optics.Iso.html#involuted"><span class="hs-identifier hs-var hs-var">involuted</span></a></span></span><span> </span><span id="local-6989586621679135134"><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679135134"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; (a -&gt; a) -&gt; Iso a a a a
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679135134"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679135134"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-345"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#involuted"><span class="hs-pragma hs-type">involuted</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="annot"><span class="hs-comment">-- | This class provides for symmetric bifunctors.</span></span><span>
</span><span id="line-348"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="#local-6989586621679135003"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Swapped"><span class="annot"><a href="Optics.Iso.html#Swapped"><span class="hs-identifier hs-var">Swapped</span></a></span></span><span> </span><span id="local-6989586621679135003"><span class="annot"><a href="#local-6989586621679135003"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-comment">-- |</span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-comment">-- 'swapped' '.' 'swapped' &#8801; 'id'</span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-comment">-- 'first' f '.' 'swapped' = 'swapped' '.' 'second' f</span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-comment">-- 'second' g '.' 'swapped' = 'swapped' '.' 'first' g</span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-comment">-- 'bimap' f g '.' 'swapped' = 'swapped' '.' 'bimap' g f</span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; view swapped (1,2)</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-comment">-- (2,1)</span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-360"></span><span>  </span><span id="swapped"><span class="annot"><a href="Optics.Iso.html#swapped"><span class="hs-identifier hs-type">swapped</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679135006"><span id="local-6989586621679135007"><span id="local-6989586621679135008"><span id="local-6989586621679135009"><span class="annot"><a href="Optics.Iso.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679135003"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135006"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135007"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679135003"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135008"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135009"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679135003"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135007"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135006"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679135003"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135009"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679135008"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Optics.Iso.html#Swapped"><span class="hs-identifier hs-type">Swapped</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621679135143"><span class="annot"><span class="annottext">swapped :: forall a b c d. Iso (a, b) (c, d) (b, a) (d, c)
</span><a href="Optics.Iso.html#swapped"><span class="hs-identifier hs-var hs-var hs-var hs-var">swapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; (b, a))
-&gt; ((d, c) -&gt; (c, d)) -&gt; Iso (a, b) (c, d) (b, a) (d, c)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="annot"><span class="annottext">(a, b) -&gt; (b, a)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span> </span><span class="annot"><span class="annottext">(d, c) -&gt; (c, d)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#swapped"><span class="hs-pragma hs-type">swapped</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Optics.Iso.html#Swapped"><span class="hs-identifier hs-type">Swapped</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621679135150"><span class="annot"><span class="annottext">swapped :: forall a b c d.
Iso (Either a b) (Either c d) (Either b a) (Either d c)
</span><a href="Optics.Iso.html#swapped"><span class="hs-identifier hs-var hs-var hs-var hs-var">swapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either a b -&gt; Either b a)
-&gt; (Either d c -&gt; Either c d)
-&gt; Iso (Either a b) (Either c d) (Either b a) (Either d c)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><a href="Optics.Iso.html#iso"><span class="hs-identifier hs-var">iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Either b a) -&gt; (b -&gt; Either b a) -&gt; Either a b -&gt; Either b a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either b a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Either b a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(d -&gt; Either c d) -&gt; (c -&gt; Either c d) -&gt; Either d c -&gt; Either c d
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">d -&gt; Either c d
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; Either c d
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Optics.Iso.html#swapped"><span class="hs-pragma hs-type">swapped</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- &gt;&gt;&gt; import qualified Data.Map as Map</span><span>
</span><span id="line-372"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Functor.Identity</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Monoid</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- &gt;&gt;&gt; import Optics.Core</span><span>
</span><span id="line-375"></span></pre></body></html>