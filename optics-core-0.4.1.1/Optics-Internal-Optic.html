<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Optics.Internal.Optic</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">optics-core-0.4.1.1: Optics as an abstract interface: core definitions</span><ul class="links" id="page-menu"><li><a href="src/Optics.Internal.Optic.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Optics.Internal.Optic</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Re-exports</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Core optic types and subtyping machinery.</p><p>This module contains the core <code><a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a></code> types, and the underlying
 machinery that we need in order to implement the subtyping between
 various different flavours of optics.</p><p>The composition operator for optics is also defined here.</p><p>This module is intended for internal use only, and may change without
 warning in subsequent releases.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Optic">Optic</a> (k :: <a href="Optics-Optic.html#t:OpticKind" title="Optics.Optic">OpticKind</a>) (is :: <a href="Optics-Optic.html#t:IxList" title="Optics.Optic">IxList</a>) s t a b = <a href="#v:Optic">Optic</a> (<span class="keyword">forall</span> p i. <a href="../indexed-profunctors-0.1.1.1/Data-Profunctor-Indexed.html#t:Profunctor" title="Data.Profunctor.Indexed">Profunctor</a> p =&gt; <a href="Optics-Internal-Optic.html#t:Optic_" title="Optics.Internal.Optic">Optic_</a> k p i (<a href="Optics-Optic.html#t:Curry" title="Optics.Optic">Curry</a> is i) s t a b)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Optic-39-">Optic'</a> k is s a = <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s s a a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Optic_">Optic_</a> k p i j s t a b = <a href="Optics-Internal-Optic-Types.html#t:Constraints" title="Optics.Internal.Optic.Types">Constraints</a> k p =&gt; <a href="Optics-Internal-Optic.html#t:Optic__" title="Optics.Internal.Optic">Optic__</a> p i j s t a b</li><li class="src short"><span class="keyword">type</span> <a href="#t:Optic__">Optic__</a> p i j s t a b = p i a b -&gt; p j s t</li><li class="src short"><a href="#v:getOptic">getOptic</a> :: <a href="../indexed-profunctors-0.1.1.1/Data-Profunctor-Indexed.html#t:Profunctor" title="Data.Profunctor.Indexed">Profunctor</a> p =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic_" title="Optics.Internal.Optic">Optic_</a> k p i (<a href="Optics-Optic.html#t:Curry" title="Optics.Optic">Curry</a> is i) s t a b</li><li class="src short"><a href="#v:castOptic">castOptic</a> :: <span class="keyword">forall</span> destKind srcKind is s t a b. <a href="Optics-Optic.html#t:Is" title="Optics.Optic">Is</a> srcKind destKind =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> srcKind is s t a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> destKind is s t a b</li><li class="src short"><a href="#v:-37-">(%)</a> :: <span class="keyword">forall</span> k l m is js ks s t u v a b. (<a href="Optics-Optic.html#t:JoinKinds" title="Optics.Optic">JoinKinds</a> k l m, <a href="Optics-Optic.html#t:AppendIndices" title="Optics.Optic">AppendIndices</a> is js ks) =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t u v -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> l js u v a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> m ks s t a b</li><li class="src short"><a href="#v:-37--37-">(%%)</a> :: <span class="keyword">forall</span> k is js ks s t u v a b. <a href="Optics-Optic.html#t:AppendIndices" title="Optics.Optic">AppendIndices</a> is js ks =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t u v -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k js u v a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k ks s t a b</li><li class="src short"><a href="#v:-37--38-">(%&amp;)</a> :: <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b -&gt; (<a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> l js s' t' a' b') -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> l js s' t' a' b'</li><li class="src short">module <a href="Optics-Internal-Optic-Subtyping.html">Optics.Internal.Optic.Subtyping</a></li><li class="src short">module <a href="Optics-Internal-Optic-Types.html">Optics.Internal.Optic.Types</a></li><li class="src short">module <a href="Optics-Internal-Optic-TypeLevel.html">Optics.Internal.Optic.TypeLevel</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Optic" class="def">Optic</a> (k :: <a href="Optics-Optic.html#t:OpticKind" title="Optics.Optic">OpticKind</a>) (is :: <a href="Optics-Optic.html#t:IxList" title="Optics.Optic">IxList</a>) s t a b <a href="src/Optics.Internal.Optic.html#Optic" class="link">Source</a> <a href="#t:Optic" class="selflink">#</a></p><div class="doc"><p>Wrapper newtype for the whole family of optics.</p><p>The first parameter <code>k</code> identifies the particular optic kind (e.g. <code><a href="Optics-IxLens.html#t:A_Lens" title="Optics.IxLens">A_Lens</a></code>
 or <code><a href="Optics-Traversal.html#t:A_Traversal" title="Optics.Traversal">A_Traversal</a></code>).</p><p>The parameter <code>is</code> is a list of types available as indices.  This will
 typically be <code><a href="Optics-Optic.html#t:NoIx" title="Optics.Optic">NoIx</a></code> for unindexed optics, or <code><a href="Optics-Optic.html#t:WithIx" title="Optics.Optic">WithIx</a></code> for optics with a
 single index. See the &quot;Indexed optics&quot; section of the overview documentation
 in the <code>Optics</code> module of the main <code>optics</code> package for more details.</p><p>The parameters <code>s</code> and <code>t</code> represent the &quot;big&quot; structure,
 whereas <code>a</code> and <code>b</code> represent the &quot;small&quot; structure.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Optic" class="def">Optic</a> (<span class="keyword">forall</span> p i. <a href="../indexed-profunctors-0.1.1.1/Data-Profunctor-Indexed.html#t:Profunctor" title="Data.Profunctor.Indexed">Profunctor</a> p =&gt; <a href="Optics-Internal-Optic.html#t:Optic_" title="Optics.Internal.Optic">Optic_</a> k p i (<a href="Optics-Optic.html#t:Curry" title="Optics.Optic">Curry</a> is i) s t a b)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Optic">Instances</h4><details id="i:Optic" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Optic:IsLabel:1"></span> (<a href="Optics-Label.html#t:LabelOptic" title="Optics.Label">LabelOptic</a> name k s t a b, is <a href="../base-4.18.2.1/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="Optics-Optic.html#t:NoIx" title="Optics.Optic">NoIx</a>) =&gt; <a href="../base-4.18.2.1/GHC-OverloadedLabels.html#t:IsLabel" title="GHC.OverloadedLabels">IsLabel</a> name (<a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b)</span> <a href="src/Optics.Label.html#line-605" class="link">Source</a> <a href="#t:IsLabel" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Optic:IsLabel:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Optics-Label.html">Optics.Label</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromLabel">fromLabel</a> :: <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b <a href="#v:fromLabel" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Optic-39-" class="def">Optic'</a> k is s a = <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s s a a <a href="src/Optics.Internal.Optic.html#Optic%27" class="link">Source</a> <a href="#t:Optic-39-" class="selflink">#</a></p><div class="doc"><p>Common special case of <code><a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a></code> where source and target types are equal.</p><p>Here, we need only one &quot;big&quot; and one &quot;small&quot; type. For lenses, this
 means that in the restricted form we cannot do type-changing updates.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Optic_" class="def">Optic_</a> k p i j s t a b = <a href="Optics-Internal-Optic-Types.html#t:Constraints" title="Optics.Internal.Optic.Types">Constraints</a> k p =&gt; <a href="Optics-Internal-Optic.html#t:Optic__" title="Optics.Internal.Optic">Optic__</a> p i j s t a b <a href="src/Optics.Internal.Optic.html#Optic_" class="link">Source</a> <a href="#t:Optic_" class="selflink">#</a></p><div class="doc"><p>Type representing the various kinds of optics.</p><p>The tag parameter <code>k</code> is translated into constraints on <code>p</code>
 via the type family <code><a href="Optics-Internal-Optic-Types.html#t:Constraints" title="Optics.Internal.Optic.Types">Constraints</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Optic__" class="def">Optic__</a> p i j s t a b = p i a b -&gt; p j s t <a href="src/Optics.Internal.Optic.html#Optic__" class="link">Source</a> <a href="#t:Optic__" class="selflink">#</a></p><div class="doc"><p>Optic internally as a profunctor transformation.</p></div></div><div class="top"><p class="src"><a id="v:getOptic" class="def">getOptic</a> :: <a href="../indexed-profunctors-0.1.1.1/Data-Profunctor-Indexed.html#t:Profunctor" title="Data.Profunctor.Indexed">Profunctor</a> p =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic_" title="Optics.Internal.Optic">Optic_</a> k p i (<a href="Optics-Optic.html#t:Curry" title="Optics.Optic">Curry</a> is i) s t a b <a href="src/Optics.Internal.Optic.html#getOptic" class="link">Source</a> <a href="#v:getOptic" class="selflink">#</a></p><div class="doc"><p>Strip the newtype wrapper off.</p></div></div><div class="top"><p class="src"><a id="v:castOptic" class="def">castOptic</a> :: <span class="keyword">forall</span> destKind srcKind is s t a b. <a href="Optics-Optic.html#t:Is" title="Optics.Optic">Is</a> srcKind destKind =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> srcKind is s t a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> destKind is s t a b <a href="src/Optics.Internal.Optic.html#castOptic" class="link">Source</a> <a href="#v:castOptic" class="selflink">#</a></p><div class="doc"><p>Explicit cast from one optic flavour to another.</p><p>The resulting optic kind is given in the first type argument, so you can use
 TypeApplications to set it. For example</p><pre> <code><a href="Optics-Internal-Optic.html#v:castOptic" title="Optics.Internal.Optic">castOptic</a></code> @<code><a href="Optics-IxLens.html#t:A_Lens" title="Optics.IxLens">A_Lens</a></code> o
</pre><p>turns <code>o</code> into a <code><a href="Optics-Lens.html#v:Lens" title="Optics.Lens">Lens</a></code>.</p><p>This is the identity function, modulo some constraint jiggery-pokery.</p></div></div><div class="top"><p class="src"><a id="v:-37-" class="def">(%)</a> :: <span class="keyword">forall</span> k l m is js ks s t u v a b. (<a href="Optics-Optic.html#t:JoinKinds" title="Optics.Optic">JoinKinds</a> k l m, <a href="Optics-Optic.html#t:AppendIndices" title="Optics.Optic">AppendIndices</a> is js ks) =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t u v -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> l js u v a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> m ks s t a b <span class="fixity">infixl 9</span><span class="rightedge"></span> <a href="src/Optics.Internal.Optic.html#%25" class="link">Source</a> <a href="#v:-37-" class="selflink">#</a></p><div class="doc"><p>Compose two optics of compatible flavours.</p><p>Returns an optic of the appropriate supertype.  If either or both optics are
 indexed, the composition preserves all the indices.</p></div></div><div class="top"><p class="src"><a id="v:-37--37-" class="def">(%%)</a> :: <span class="keyword">forall</span> k is js ks s t u v a b. <a href="Optics-Optic.html#t:AppendIndices" title="Optics.Optic">AppendIndices</a> is js ks =&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t u v -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k js u v a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k ks s t a b <span class="fixity">infixl 9</span><span class="rightedge"></span> <a href="src/Optics.Internal.Optic.html#%25%25" class="link">Source</a> <a href="#v:-37--37-" class="selflink">#</a></p><div class="doc"><p>Compose two optics of the same flavour.</p><p>Normally you can simply use (<code><a href="Optics-Internal-Optic.html#v:-37-" title="Optics.Internal.Optic">%</a></code>) instead, but this may be useful to help
 type inference if the type of one of the optics is otherwise
 under-constrained.</p></div></div><div class="top"><p class="src"><a id="v:-37--38-" class="def">(%&amp;)</a> :: <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b -&gt; (<a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> k is s t a b -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> l js s' t' a' b') -&gt; <a href="Optics-Internal-Optic.html#t:Optic" title="Optics.Internal.Optic">Optic</a> l js s' t' a' b' <span class="fixity">infixl 9</span><span class="rightedge"></span> <a href="src/Optics.Internal.Optic.html#%25%26" class="link">Source</a> <a href="#v:-37--38-" class="selflink">#</a></p><div class="doc"><p>Flipped function application, specialised to optics and binding tightly.</p><p>Useful for post-composing optics transformations:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toListOf (ifolded %&amp; ifiltered (\i s -&gt; length s &lt;= i)) [&quot;&quot;, &quot;a&quot;,&quot;abc&quot;]
</code></strong>[&quot;&quot;,&quot;a&quot;]
</pre></div></div><a href="#g:1" id="g:1"><h1>Re-exports</h1></a><div class="top"><p class="src">module <a href="Optics-Internal-Optic-Subtyping.html">Optics.Internal.Optic.Subtyping</a></p></div><div class="top"><p class="src">module <a href="Optics-Internal-Optic-Types.html">Optics.Internal.Optic.Types</a></p></div><div class="top"><p class="src">module <a href="Optics-Internal-Optic-TypeLevel.html">Optics.Internal.Optic.TypeLevel</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>