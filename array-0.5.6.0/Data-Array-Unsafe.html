<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Array.Unsafe</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">array-0.5.6.0: Mutable and immutable arrays</span><ul class="links" id="page-menu"><li><a href="src/Data.Array.Unsafe.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) The University of Glasgow 2011</td></tr><tr><th>License</th><td>BSD-style (see the file libraries/base/LICENSE)</td></tr><tr><th>Maintainer</th><td>libraries@haskell.org</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable (uses Data.Array.MArray)</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Array.Unsafe</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Unsafe operations</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Contains the various unsafe operations that can be performed
 on arrays.</p><p><em>Since: array-0.4.0.0</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:castSTUArray">castSTUArray</a> :: <a href="Data-Array-ST.html#t:STUArray" title="Data.Array.ST">STUArray</a> s ix a -&gt; <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s (<a href="Data-Array-ST.html#t:STUArray" title="Data.Array.ST">STUArray</a> s ix b)</li><li class="src short"><a href="#v:castIOUArray">castIOUArray</a> :: <a href="Data-Array-IO.html#t:IOUArray" title="Data.Array.IO">IOUArray</a> ix a -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-Array-IO.html#t:IOUArray" title="Data.Array.IO">IOUArray</a> ix b)</li><li class="src short"><a href="#v:unsafeFreeze">unsafeFreeze</a> :: (<a href="../base-4.18.2.1/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i, <a href="Data-Array-MArray.html#t:MArray" title="Data.Array.MArray">MArray</a> a e m, <a href="Data-Array-IArray.html#t:IArray" title="Data.Array.IArray">IArray</a> b e) =&gt; a i e -&gt; m (b i e)</li><li class="src short"><a href="#v:unsafeThaw">unsafeThaw</a> :: (<a href="../base-4.18.2.1/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i, <a href="Data-Array-IArray.html#t:IArray" title="Data.Array.IArray">IArray</a> a e, <a href="Data-Array-MArray.html#t:MArray" title="Data.Array.MArray">MArray</a> b e m) =&gt; a i e -&gt; m (b i e)</li><li class="src short"><a href="#v:unsafeForeignPtrToStorableArray">unsafeForeignPtrToStorableArray</a> :: <a href="../base-4.18.2.1/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../base-4.18.2.1/Foreign-ForeignPtr-Safe.html#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a> e -&gt; (i, i) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-Array-Storable.html#t:StorableArray" title="Data.Array.Storable">StorableArray</a> i e)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Unsafe operations</h1></a><div class="top"><p class="src"><a id="v:castSTUArray" class="def">castSTUArray</a> :: <a href="Data-Array-ST.html#t:STUArray" title="Data.Array.ST">STUArray</a> s ix a -&gt; <a href="../base-4.18.2.1/Control-Monad-ST-Safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s (<a href="Data-Array-ST.html#t:STUArray" title="Data.Array.ST">STUArray</a> s ix b) <a href="src/Data.Array.Base.html#castSTUArray" class="link">Source</a> <a href="#v:castSTUArray" class="selflink">#</a></p><div class="doc"><p>Casts an <code><a href="Data-Array-ST.html#t:STUArray" title="Data.Array.ST">STUArray</a></code> with one element type into one with a
 different element type.  All the elements of the resulting array
 are undefined (unless you know what you're doing...).</p></div></div><div class="top"><p class="src"><a id="v:castIOUArray" class="def">castIOUArray</a> :: <a href="Data-Array-IO.html#t:IOUArray" title="Data.Array.IO">IOUArray</a> ix a -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-Array-IO.html#t:IOUArray" title="Data.Array.IO">IOUArray</a> ix b) <a href="src/Data.Array.IO.Internals.html#castIOUArray" class="link">Source</a> <a href="#v:castIOUArray" class="selflink">#</a></p><div class="doc"><p>Casts an <code><a href="Data-Array-IO.html#t:IOUArray" title="Data.Array.IO">IOUArray</a></code> with one element type into one with a
 different element type.  All the elements of the resulting array
 are undefined (unless you know what you're doing...).</p></div></div><div class="top"><p class="src"><a id="v:unsafeFreeze" class="def">unsafeFreeze</a> :: (<a href="../base-4.18.2.1/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i, <a href="Data-Array-MArray.html#t:MArray" title="Data.Array.MArray">MArray</a> a e m, <a href="Data-Array-IArray.html#t:IArray" title="Data.Array.IArray">IArray</a> b e) =&gt; a i e -&gt; m (b i e) <a href="src/Data.Array.Base.html#unsafeFreeze" class="link">Source</a> <a href="#v:unsafeFreeze" class="selflink">#</a></p><div class="doc"><p>Converts an mutable array into an immutable array.  The
   implementation may either simply cast the array from
   one type to the other without copying the array, or it
   may take a full copy of the array.</p><p>Note that because the array is possibly not copied, any subsequent
   modifications made to the mutable version of the array may be
   shared with the immutable version.  It is safe to use, therefore, if
   the mutable version is never modified after the freeze operation.</p><p>The non-copying implementation is supported between certain pairs
   of array types only; one constraint is that the array types must
   have identical representations.  In GHC, The following pairs of
   array types have a non-copying O(1) implementation of
   <code><a href="Data-Array-Unsafe.html#v:unsafeFreeze" title="Data.Array.Unsafe">unsafeFreeze</a></code>.  Because the optimised versions are enabled by
   specialisations, you will need to compile with optimisation (-O) to
   get them.</p><ul><li><code><a href="Data-Array-IO.html#v:IOUArray" title="Data.Array.IO">IOUArray</a></code> -&gt; <code><a href="Data-Array-Unboxed.html#v:UArray" title="Data.Array.Unboxed">UArray</a></code></li><li><code><a href="Data-Array-ST.html#v:STUArray" title="Data.Array.ST">STUArray</a></code> -&gt; <code><a href="Data-Array-Unboxed.html#v:UArray" title="Data.Array.Unboxed">UArray</a></code></li><li><code><a href="Data-Array-IO.html#v:IOArray" title="Data.Array.IO">IOArray</a></code> -&gt; <code><a href="Data-Array.html#v:Array" title="Data.Array">Array</a></code></li><li><code><a href="Data-Array-ST.html#v:STArray" title="Data.Array.ST">STArray</a></code> -&gt; <code><a href="Data-Array.html#v:Array" title="Data.Array">Array</a></code></li></ul></div></div><div class="top"><p class="src"><a id="v:unsafeThaw" class="def">unsafeThaw</a> :: (<a href="../base-4.18.2.1/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i, <a href="Data-Array-IArray.html#t:IArray" title="Data.Array.IArray">IArray</a> a e, <a href="Data-Array-MArray.html#t:MArray" title="Data.Array.MArray">MArray</a> b e m) =&gt; a i e -&gt; m (b i e) <a href="src/Data.Array.Base.html#unsafeThaw" class="link">Source</a> <a href="#v:unsafeThaw" class="selflink">#</a></p><div class="doc"><p>Converts an immutable array into a mutable array.  The
   implementation may either simply cast the array from
   one type to the other without copying the array, or it
   may take a full copy of the array.</p><p>Note that because the array is possibly not copied, any subsequent
   modifications made to the mutable version of the array may be
   shared with the immutable version.  It is only safe to use,
   therefore, if the immutable array is never referenced again in this
   thread, and there is no possibility that it can be also referenced
   in another thread.  If you use an unsafeThaw<em>write</em>unsafeFreeze
   sequence in a multi-threaded setting, then you must ensure that
   this sequence is atomic with respect to other threads, or a garbage
   collector crash may result (because the write may be writing to a
   frozen array).</p><p>The non-copying implementation is supported between certain pairs
   of array types only; one constraint is that the array types must
   have identical representations.  In GHC, The following pairs of
   array types have a non-copying O(1) implementation of
   <code><a href="Data-Array-Unsafe.html#v:unsafeThaw" title="Data.Array.Unsafe">unsafeThaw</a></code>.  Because the optimised versions are enabled by
   specialisations, you will need to compile with optimisation (-O) to
   get them.</p><ul><li><code><a href="Data-Array-Unboxed.html#v:UArray" title="Data.Array.Unboxed">UArray</a></code> -&gt; <code><a href="Data-Array-IO.html#v:IOUArray" title="Data.Array.IO">IOUArray</a></code></li><li><code><a href="Data-Array-Unboxed.html#v:UArray" title="Data.Array.Unboxed">UArray</a></code> -&gt; <code><a href="Data-Array-ST.html#v:STUArray" title="Data.Array.ST">STUArray</a></code></li><li><code><a href="Data-Array.html#v:Array" title="Data.Array">Array</a></code>  -&gt; <code><a href="Data-Array-IO.html#v:IOArray" title="Data.Array.IO">IOArray</a></code></li><li><code><a href="Data-Array.html#v:Array" title="Data.Array">Array</a></code>  -&gt; <code><a href="Data-Array-ST.html#v:STArray" title="Data.Array.ST">STArray</a></code></li></ul></div></div><div class="top"><p class="src"><a id="v:unsafeForeignPtrToStorableArray" class="def">unsafeForeignPtrToStorableArray</a> :: <a href="../base-4.18.2.1/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../base-4.18.2.1/Foreign-ForeignPtr-Safe.html#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a> e -&gt; (i, i) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-Array-Storable.html#t:StorableArray" title="Data.Array.Storable">StorableArray</a> i e) <a href="src/Data.Array.Storable.Internals.html#unsafeForeignPtrToStorableArray" class="link">Source</a> <a href="#v:unsafeForeignPtrToStorableArray" class="selflink">#</a></p><div class="doc"><p>Construct a <code><a href="Data-Array-Storable.html#t:StorableArray" title="Data.Array.Storable">StorableArray</a></code> from an arbitrary <code><a href="../base-4.18.2.1/Foreign-ForeignPtr-Safe.html#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a></code>.  It is
 the caller's responsibility to ensure that the <code><a href="../base-4.18.2.1/Foreign-ForeignPtr-Safe.html#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a></code> points to
 an area of memory sufficient for the specified bounds.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>