<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Blaze.ByteString.Builder.Internal.Write</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">blaze-builder-0.4.2.3: Efficient buffered output.</span><ul class="links" id="page-menu"><li><a href="src/Blaze.ByteString.Builder.Internal.Write.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2010 Simon Meier<br />(c) 2010 Jasper van der Jeugt</td></tr><tr><th>License</th><td>BSD3-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>https://github.com/blaze-builder</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Portability</th><td>tested on GHC only</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Blaze.ByteString.Builder.Internal.Write</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Poking a buffer</a></li><li><a href="#g:2">Writing to abuffer</a></li><li><a href="#g:3">Constructing builders from writes</a></li><li><a href="#g:4">Writing <code>Storable</code>s</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A general and efficient write type that allows for the easy construction of
 builders for (smallish) bounded size writes to a buffer.</p><p>FIXME: Improve documentation.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Poke">Poke</a> = <a href="#v:Poke">Poke</a> {<ul class="subs"><li><a href="#v:runPoke">runPoke</a> :: <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li></ul>}</li><li class="src short"><a href="#v:pokeN">pokeN</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Write">Write</a> = <a href="#v:Write">Write</a> !<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></li><li class="src short"><a href="#v:runWrite">runWrite</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:getBound">getBound</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:getBound-39-">getBound'</a> :: <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:getPoke">getPoke</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></li><li class="src short"><a href="#v:exactWrite">exactWrite</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:boundedWrite">boundedWrite</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:writeLiftIO">writeLiftIO</a> :: (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:writeIf">writeIf</a> :: (a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:writeEq">writeEq</a> :: <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:writeOrdering">writeOrdering</a> :: (a -&gt; <a href="../base-4.18.2.1/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:writeOrd">writeOrd</a> :: <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; a -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:fromWrite">fromWrite</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:fromWriteSingleton">fromWriteSingleton</a> :: (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:fromWriteList">fromWriteList</a> :: (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; [a] -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:writeStorable">writeStorable</a> :: <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></li><li class="src short"><a href="#v:fromStorable">fromStorable</a> :: <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; a -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a></li><li class="src short"><a href="#v:fromStorables">fromStorables</a> :: <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; [a] -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Poking a buffer</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Poke" class="def">Poke</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#Poke" class="link">Source</a> <a href="#t:Poke" class="selflink">#</a></p><div class="doc"><p>Changing a sequence of bytes starting from the given pointer. <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></code>s are
 the most primitive buffer manipulation. In most cases, you don't use the
 explicitly but as part of a <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></code>, which also tells how many bytes will
 be changed at most.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Poke" class="def">Poke</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runPoke" class="def">runPoke</a> :: <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Poke">Instances</h4><details id="i:Poke" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Poke:Monoid:1"></span> <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></span> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#line-131" class="link">Source</a> <a href="#t:Poke" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Poke:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Blaze-ByteString-Builder-Internal-Write.html">Blaze.ByteString.Builder.Internal.Write</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a>] -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Poke:Semigroup:2"></span> <a href="../base-4.18.2.1/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></span> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#line-124" class="link">Source</a> <a href="#t:Poke" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Poke:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Blaze-ByteString-Builder-Internal-Write.html">Blaze.ByteString.Builder.Internal.Write</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pokeN" class="def">pokeN</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#pokeN" class="link">Source</a> <a href="#v:pokeN" class="selflink">#</a></p><div class="doc"><p><code>pokeN size io</code> creates a write that denotes the writing of <code>size</code> bytes
 to a buffer using the IO action <code>io</code>. Note that <code>io</code> MUST write EXACTLY <code>size</code>
 bytes to the buffer!</p></div></div><a href="#g:2" id="g:2"><h1>Writing to abuffer</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Write" class="def">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#Write" class="link">Source</a> <a href="#t:Write" class="selflink">#</a></p><div class="doc"><p>A write of a bounded number of bytes.</p><p>When defining a function <code>write :: a -&gt; Write</code> for some <code>a</code>, then it is
 important to ensure that the bound on the number of bytes written is
 data-independent. Formally,</p><pre> forall x y. getBound (write x) = getBound (write y)</pre><p>The idea is that this data-independent bound is specified such that the
 compiler can optimize the check, if there are enough free bytes in the buffer,
 to a single subtraction between the pointer to the next free byte and the
 pointer to the end of the buffer with this constant bound of the maximal
 number of bytes to be written.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Write" class="def">Write</a> !<a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Write">Instances</h4><details id="i:Write" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Write:Monoid:1"></span> <a href="../base-4.18.2.1/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></span> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#line-151" class="link">Source</a> <a href="#t:Write" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Write:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Blaze-ByteString-Builder-Internal-Write.html">Blaze.ByteString.Builder.Internal.Write</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>] -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Write:Semigroup:2"></span> <a href="../base-4.18.2.1/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></span> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#line-143" class="link">Source</a> <a href="#t:Write" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Write:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Blaze-ByteString-Builder-Internal-Write.html">Blaze.ByteString.Builder.Internal.Write</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.2.1/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.18.2.1/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runWrite" class="def">runWrite</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Blaze.ByteString.Builder.Internal.Write.html#runWrite" class="link">Source</a> <a href="#v:runWrite" class="selflink">#</a></p><div class="doc"><p>Run the <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></code> action of a write.</p></div></div><div class="top"><p class="src"><a id="v:getBound" class="def">getBound</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#getBound" class="link">Source</a> <a href="#v:getBound" class="selflink">#</a></p><div class="doc"><p>Extract the maximal number of bytes that this write could write.</p></div></div><div class="top"><p class="src"><a id="v:getBound-39-" class="def">getBound'</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#getBound%27" class="link">Source</a> <a href="#v:getBound-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>Name of caller: for debugging purposes.</p></td></tr><tr><td class="src">-&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Extract the maximal number of bytes that this write could write in any
 case. Assumes that the bound of the write is data-independent.</p></div></div><div class="top"><p class="src"><a id="v:getPoke" class="def">getPoke</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#getPoke" class="link">Source</a> <a href="#v:getPoke" class="selflink">#</a></p><div class="doc"><p>Extract the <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></code> action of a write.</p></div></div><div class="top"><p class="src"><a id="v:exactWrite" class="def">exactWrite</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.18.2.1/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#exactWrite" class="link">Source</a> <a href="#v:exactWrite" class="selflink">#</a></p><div class="doc"><p><code>exactWrite size io</code> creates a bounded write that can later be converted to
 a builder that writes exactly <code>size</code> bytes. Note that <code>io</code> MUST write
 EXACTLY <code>size</code> bytes to the buffer!</p></div></div><div class="top"><p class="src"><a id="v:boundedWrite" class="def">boundedWrite</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a> -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#boundedWrite" class="link">Source</a> <a href="#v:boundedWrite" class="selflink">#</a></p><div class="doc"><p><code>boundedWrite size write</code> creates a bounded write from a <code>write</code> that does
 not write more than <code>size</code> bytes.</p></div></div><div class="top"><p class="src"><a id="v:writeLiftIO" class="def">writeLiftIO</a> :: (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#writeLiftIO" class="link">Source</a> <a href="#v:writeLiftIO" class="selflink">#</a></p><div class="doc"><p><code>writeLiftIO io write</code> creates a write executes the <code>io</code> action to compute
 the value that is then written.</p></div></div><div class="top"><p class="src"><a id="v:writeIf" class="def">writeIf</a> :: (a -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#writeIf" class="link">Source</a> <a href="#v:writeIf" class="selflink">#</a></p><div class="doc"><p><code>writeIf p wTrue wFalse x</code> creates a <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></code> with a <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Poke" title="Blaze.ByteString.Builder.Internal.Write">Poke</a></code> equal to <code>wTrue
 x</code>, if <code>p x</code> and equal to <code>wFalse x</code> otherwise. The bound of this new
 <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></code> is the maximum of the bounds for either <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></code>. This yields a data
 independent bound, if the bound for <code>wTrue</code> and <code>wFalse</code> is already data
 independent.</p></div></div><div class="top"><p class="src"><a id="v:writeEq" class="def">writeEq</a> :: <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#writeEq" class="link">Source</a> <a href="#v:writeEq" class="selflink">#</a></p><div class="doc"><p>Compare the value to a test value and use the first write action for the
 equal case and the second write action for the non-equal case.</p></div></div><div class="top"><p class="src"><a id="v:writeOrdering" class="def">writeOrdering</a> :: (a -&gt; <a href="../base-4.18.2.1/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#writeOrdering" class="link">Source</a> <a href="#v:writeOrdering" class="selflink">#</a></p><div class="doc"><p>TODO: Test this. It might well be too difficult to use.
   FIXME: Better name required!</p></div></div><div class="top"><p class="src"><a id="v:writeOrd" class="def">writeOrd</a> :: <a href="../base-4.18.2.1/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; a -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#writeOrd" class="link">Source</a> <a href="#v:writeOrd" class="selflink">#</a></p><div class="doc"><p>A write combinator useful to build decision trees for deciding what value
 to write with a constant bound on the maximal number of bytes written.</p></div></div><a href="#g:3" id="g:3"><h1>Constructing builders from writes</h1></a><div class="top"><p class="src"><a id="v:fromWrite" class="def">fromWrite</a> :: <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#fromWrite" class="link">Source</a> <a href="#v:fromWrite" class="selflink">#</a></p><div class="doc"><p>Create a builder that execute a single <code><a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:fromWriteSingleton" class="def">fromWriteSingleton</a> :: (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; a -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#fromWriteSingleton" class="link">Source</a> <a href="#v:fromWriteSingleton" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fromWriteList" class="def">fromWriteList</a> :: (a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a>) -&gt; [a] -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#fromWriteList" class="link">Source</a> <a href="#v:fromWriteList" class="selflink">#</a></p><div class="doc"><p>Construct a <code><a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a></code> writing a list of data one element at a time.</p></div></div><a href="#g:4" id="g:4"><h1>Writing <code>Storable</code>s</h1></a><div class="top"><p class="src"><a id="v:writeStorable" class="def">writeStorable</a> :: <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; a -&gt; <a href="Blaze-ByteString-Builder-Internal-Write.html#t:Write" title="Blaze.ByteString.Builder.Internal.Write">Write</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#writeStorable" class="link">Source</a> <a href="#v:writeStorable" class="selflink">#</a></p><div class="doc"><p>Write a storable value.</p></div></div><div class="top"><p class="src"><a id="v:fromStorable" class="def">fromStorable</a> :: <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; a -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#fromStorable" class="link">Source</a> <a href="#v:fromStorable" class="selflink">#</a></p><div class="doc"><p>A builder that serializes a storable value. No alignment is done.</p></div></div><div class="top"><p class="src"><a id="v:fromStorables" class="def">fromStorables</a> :: <a href="../base-4.18.2.1/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; [a] -&gt; <a href="Blaze-ByteString-Builder.html#t:Builder" title="Blaze.ByteString.Builder">Builder</a> <a href="src/Blaze.ByteString.Builder.Internal.Write.html#fromStorables" class="link">Source</a> <a href="#v:fromStorables" class="selflink">#</a></p><div class="doc"><p>A builder that serializes a list of storable values by writing them
 consecutively. No alignment is done. Parsing information needs to be
 provided externally.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>